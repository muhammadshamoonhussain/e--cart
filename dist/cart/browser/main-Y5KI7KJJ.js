import{a as Uv,b as Zf,c as zv,d as Qa,e as ep,f as Lu,g as $v,h as qv,i as tp,j as ze,k as $r,l as Ln,m as ju,n as Ya,o as Gv,p as Hv,q as Li,r as Wt}from"./chunk-ENYGA57M.js";import{$ as zf,$a as Lr,$b as Lv,A as zs,Aa as Ot,Ab as ku,B as Ri,Ba as qf,Bb as Nu,C as sv,Ca as Ba,Cb as Tv,D as Lf,Da as Gs,Db as Jf,E as Vn,Ea as gv,Eb as Ga,F as ov,Fa as Ua,Fb as Av,G as av,Ga as me,Gb as xv,H as Dr,Ha as ue,Hb as Pv,I as Fn,Ia as Tu,Ib as Ur,J as jf,Ja as _v,Jb as Ha,K as cv,Ka as Au,Kb as Vi,L as Cu,La as Hs,Lb as Mv,M as $s,Ma as yv,Mb as zr,N as Bf,Na as Gf,Nb as Sv,O as lv,Oa as za,Ob as Ov,P as ki,Pa as Fr,Pb as st,Q as nt,Qa as Ks,Qb as Dv,R as Uf,Ra as vv,Rb as Ka,S as Eu,Sa as Hf,Sb as Rv,T as ft,Ta as Et,Tb as kv,U as De,Ua as Kf,Ub as Wa,V as Ni,Va as $a,Vb as Vu,W as Iu,Wa as He,Wb as Nv,X as ie,Xa as qa,Xb as Js,Y as xe,Ya as F,Yb as Zs,Z as uv,Za as j,Zb as Vv,_ as le,_a as te,_b as Fv,a as Jy,aa as q,ab as jr,ac as jv,b as Zy,ba as Z,bb as Br,bc as Fi,c as vn,ca as ka,cb as rt,cc as Bv,d as kf,da as dv,db as ei,dc as Fu,e as Nf,ea as Na,eb as Ws,f as Lt,fa as it,fb as Wf,g as jt,ga as Pe,gb as xu,h as wu,ha as Ct,hb as Pu,i as ev,ia as qs,ib as $,j as Di,ja as hv,jb as Pt,k as Or,ka as Rr,kb as Qs,l as Bs,la as tn,lb as Ys,m as Le,ma as kr,mb as Mu,n as se,na as Nr,nb as wv,o as Ra,oa as Vr,ob as bv,p as tv,pa as Va,pb as Cv,q as nv,qa as fv,qb as Xs,r as ae,ra as Fa,rb as Ev,s as Us,sa as La,sb as Su,t as Kt,ta as nn,tb as Iv,u as Vf,ua as Se,ub as Ou,v as bu,va as $f,vb as Du,w as Ff,wa as rn,wb as Qf,x as iv,xa as pv,xb as Ru,y as rv,ya as ja,yb as Yf,z as Bt,za as mv,zb as Xf}from"./chunk-Z26WDLBL.js";import{a as K,b as Ee,d as qT,f as Xy,g as Rf,h as V}from"./chunk-EKJZNNG7.js";var cm=qT((Un,am)=>{"use strict";(function(n,e){typeof Un=="object"&&typeof am<"u"?am.exports=e():typeof define=="function"&&define.amd?define(e):(n=typeof globalThis<"u"?globalThis:n||self,n.Sweetalert2=e())})(Un,function(){"use strict";function n(u,d,_){if(typeof u=="function"?u===d:u.has(d))return arguments.length<3?d:_;throw new TypeError("Private element is not present on this object")}function e(u,d){if(d.has(u))throw new TypeError("Cannot initialize the same private elements twice on an object")}function t(u,d){return u.get(n(u,d))}function i(u,d,_){e(u,d),d.set(u,_)}function r(u,d,_){return u.set(n(u,d),_),_}let s=100,o={},c=()=>{o.previousActiveElement instanceof HTMLElement?(o.previousActiveElement.focus(),o.previousActiveElement=null):document.body&&document.body.focus()},l=u=>new Promise(d=>{if(!u)return d();let _=window.scrollX,v=window.scrollY;o.restoreFocusTimeout=setTimeout(()=>{c(),d()},s),window.scrollTo(_,v)}),f="swal2-",p=["container","shown","height-auto","iosfix","popup","modal","no-backdrop","no-transition","toast","toast-shown","show","hide","close","title","html-container","actions","confirm","deny","cancel","default-outline","footer","icon","icon-content","image","input","file","range","select","radio","checkbox","label","textarea","inputerror","input-label","validation-message","progress-steps","active-progress-step","progress-step","progress-step-line","loader","loading","styled","top","top-start","top-end","top-left","top-right","center","center-start","center-end","center-left","center-right","bottom","bottom-start","bottom-end","bottom-left","bottom-right","grow-row","grow-column","grow-fullscreen","rtl","timer-progress-bar","timer-progress-bar-container","scrollbar-measure","icon-success","icon-warning","icon-info","icon-question","icon-error"].reduce((u,d)=>(u[d]=f+d,u),{}),I=["success","warning","info","question","error"].reduce((u,d)=>(u[d]=f+d,u),{}),L="SweetAlert2:",O=u=>u.charAt(0).toUpperCase()+u.slice(1),S=u=>{console.warn(`${L} ${typeof u=="object"?u.join(" "):u}`)},H=u=>{console.error(`${L} ${u}`)},X=[],U=u=>{X.includes(u)||(X.push(u),S(u))},ne=function(u){let d=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null;U(`"${u}" is deprecated and will be removed in the next major release.${d?` Use "${d}" instead.`:""}`)},re=u=>typeof u=="function"?u():u,ce=u=>u&&typeof u.toPromise=="function",T=u=>ce(u)?u.toPromise():Promise.resolve(u),b=u=>u&&Promise.resolve(u)===u,C=()=>document.body.querySelector(`.${p.container}`),A=u=>{let d=C();return d?d.querySelector(u):null},x=u=>A(`.${u}`),P=()=>x(p.popup),E=()=>x(p.icon),hn=()=>x(p["icon-content"]),pi=()=>x(p.title),oa=()=>x(p["html-container"]),mi=()=>x(p.image),Jn=()=>x(p["progress-steps"]),gi=()=>x(p["validation-message"]),$t=()=>A(`.${p.actions} .${p.confirm}`),_i=()=>A(`.${p.actions} .${p.cancel}`),At=()=>A(`.${p.actions} .${p.deny}`),gt=()=>x(p["input-label"]),yi=()=>A(`.${p.loader}`),fn=()=>x(p.actions),Pl=()=>x(p.footer),xn=()=>x(p["timer-progress-bar"]),aa=()=>x(p.close),pf=`
  a[href],
  area[href],
  input:not([disabled]),
  select:not([disabled]),
  textarea:not([disabled]),
  button:not([disabled]),
  iframe,
  object,
  embed,
  [tabindex="0"],
  [contenteditable],
  audio[controls],
  video[controls],
  summary
`,vi=()=>{let u=P();if(!u)return[];let d=u.querySelectorAll('[tabindex]:not([tabindex="-1"]):not([tabindex="0"])'),_=Array.from(d).sort((Y,pe)=>{let Te=parseInt(Y.getAttribute("tabindex")||"0"),Ue=parseInt(pe.getAttribute("tabindex")||"0");return Te>Ue?1:Te<Ue?-1:0}),v=u.querySelectorAll(pf),D=Array.from(v).filter(Y=>Y.getAttribute("tabindex")!=="-1");return[...new Set(_.concat(D))].filter(Y=>bt(Y))},wi=()=>qt(document.body,p.shown)&&!qt(document.body,p["toast-shown"])&&!qt(document.body,p["no-backdrop"]),bi=()=>{let u=P();return u?qt(u,p.toast):!1},ca=()=>{let u=P();return u?u.hasAttribute("data-loading"):!1},wt=(u,d)=>{if(u.textContent="",d){let v=new DOMParser().parseFromString(d,"text/html"),D=v.querySelector("head");D&&Array.from(D.childNodes).forEach(pe=>{u.appendChild(pe)});let Y=v.querySelector("body");Y&&Array.from(Y.childNodes).forEach(pe=>{pe instanceof HTMLVideoElement||pe instanceof HTMLAudioElement?u.appendChild(pe.cloneNode(!0)):u.appendChild(pe)})}},qt=(u,d)=>{if(!d)return!1;let _=d.split(/\s+/);for(let v=0;v<_.length;v++)if(!u.classList.contains(_[v]))return!1;return!0},Ml=(u,d)=>{Array.from(u.classList).forEach(_=>{!Object.values(p).includes(_)&&!Object.values(I).includes(_)&&!Object.values(d.showClass||{}).includes(_)&&u.classList.remove(_)})},xt=(u,d,_)=>{if(Ml(u,d),!d.customClass)return;let v=d.customClass[_];if(v){if(typeof v!="string"&&!v.forEach){S(`Invalid type of customClass.${_}! Expected string or iterable object, got "${typeof v}"`);return}ge(u,v)}},As=(u,d)=>{if(!d)return null;switch(d){case"select":case"textarea":case"file":return u.querySelector(`.${p.popup} > .${p[d]}`);case"checkbox":return u.querySelector(`.${p.popup} > .${p.checkbox} input`);case"radio":return u.querySelector(`.${p.popup} > .${p.radio} input:checked`)||u.querySelector(`.${p.popup} > .${p.radio} input:first-child`);case"range":return u.querySelector(`.${p.popup} > .${p.range} input`);default:return u.querySelector(`.${p.popup} > .${p.input}`)}},la=u=>{if(u.focus(),u.type!=="file"){let d=u.value;u.value="",u.value=d}},ua=(u,d,_)=>{!u||!d||(typeof d=="string"&&(d=d.split(/\s+/).filter(Boolean)),d.forEach(v=>{Array.isArray(u)?u.forEach(D=>{_?D.classList.add(v):D.classList.remove(v)}):_?u.classList.add(v):u.classList.remove(v)}))},ge=(u,d)=>{ua(u,d,!0)},Gt=(u,d)=>{ua(u,d,!1)},Pn=(u,d)=>{let _=Array.from(u.children);for(let v=0;v<_.length;v++){let D=_[v];if(D instanceof HTMLElement&&qt(D,d))return D}},pn=(u,d,_)=>{_===`${parseInt(_)}`&&(_=parseInt(_)),_||parseInt(_)===0?u.style.setProperty(d,typeof _=="number"?`${_}px`:_):u.style.removeProperty(d)},Ge=function(u){let d=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"flex";u&&(u.style.display=d)},Ze=u=>{u&&(u.style.display="none")},et=function(u){let d=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"block";u&&new MutationObserver(()=>{Mn(u,u.innerHTML,d)}).observe(u,{childList:!0,subtree:!0})},_t=(u,d,_,v)=>{let D=u.querySelector(d);D&&D.style.setProperty(_,v)},Mn=function(u,d){let _=arguments.length>2&&arguments[2]!==void 0?arguments[2]:"flex";d?Ge(u,_):Ze(u)},bt=u=>!!(u&&(u.offsetWidth||u.offsetHeight||u.getClientRects().length)),Sl=()=>!bt($t())&&!bt(At())&&!bt(_i()),Ol=u=>u.scrollHeight>u.clientHeight,Ci=u=>{let d=window.getComputedStyle(u),_=parseFloat(d.getPropertyValue("animation-duration")||"0"),v=parseFloat(d.getPropertyValue("transition-duration")||"0");return _>0||v>0},xs=function(u){let d=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,_=xn();_&&bt(_)&&(d&&(_.style.transition="none",_.style.width="100%"),setTimeout(()=>{_.style.transition=`width ${u/1e3}s linear`,_.style.width="0%"},10))},Dl=()=>{let u=xn();if(!u)return;let d=parseInt(window.getComputedStyle(u).width);u.style.removeProperty("transition"),u.style.width="100%";let _=parseInt(window.getComputedStyle(u).width),v=d/_*100;u.style.width=`${v}%`},da=()=>typeof window>"u"||typeof document>"u",mf=`
 <div aria-labelledby="${p.title}" aria-describedby="${p["html-container"]}" class="${p.popup}" tabindex="-1">
   <button type="button" class="${p.close}"></button>
   <ul class="${p["progress-steps"]}"></ul>
   <div class="${p.icon}"></div>
   <img class="${p.image}" />
   <h2 class="${p.title}" id="${p.title}"></h2>
   <div class="${p["html-container"]}" id="${p["html-container"]}"></div>
   <input class="${p.input}" id="${p.input}" />
   <input type="file" class="${p.file}" />
   <div class="${p.range}">
     <input type="range" />
     <output></output>
   </div>
   <select class="${p.select}" id="${p.select}"></select>
   <div class="${p.radio}"></div>
   <label class="${p.checkbox}">
     <input type="checkbox" id="${p.checkbox}" />
     <span class="${p.label}"></span>
   </label>
   <textarea class="${p.textarea}" id="${p.textarea}"></textarea>
   <div class="${p["validation-message"]}" id="${p["validation-message"]}"></div>
   <div class="${p.actions}">
     <div class="${p.loader}"></div>
     <button type="button" class="${p.confirm}"></button>
     <button type="button" class="${p.deny}"></button>
     <button type="button" class="${p.cancel}"></button>
   </div>
   <div class="${p.footer}"></div>
   <div class="${p["timer-progress-bar-container"]}">
     <div class="${p["timer-progress-bar"]}"></div>
   </div>
 </div>
`.replace(/(^|\n)\s*/g,""),gf=()=>{let u=C();return u?(u.remove(),Gt([document.documentElement,document.body],[p["no-backdrop"],p["toast-shown"],p["has-column"]]),!0):!1},mn=()=>{o.currentInstance.resetValidationMessage()},Rl=()=>{let u=P(),d=Pn(u,p.input),_=Pn(u,p.file),v=u.querySelector(`.${p.range} input`),D=u.querySelector(`.${p.range} output`),Y=Pn(u,p.select),pe=u.querySelector(`.${p.checkbox} input`),Te=Pn(u,p.textarea);d.oninput=mn,_.onchange=mn,Y.onchange=mn,pe.onchange=mn,Te.oninput=mn,v.oninput=()=>{mn(),D.value=v.value},v.onchange=()=>{mn(),D.value=v.value}},kl=u=>typeof u=="string"?document.querySelector(u):u,mr=u=>{let d=P();d.setAttribute("role",u.toast?"alert":"dialog"),d.setAttribute("aria-live",u.toast?"polite":"assertive"),u.toast||d.setAttribute("aria-modal","true")},ha=u=>{window.getComputedStyle(u).direction==="rtl"&&ge(C(),p.rtl)},fa=u=>{let d=gf();if(da()){H("SweetAlert2 requires document to initialize");return}let _=document.createElement("div");_.className=p.container,d&&ge(_,p["no-transition"]),wt(_,mf);let v=kl(u.target);v.appendChild(_),mr(u),ha(v),Rl()},gn=(u,d)=>{u instanceof HTMLElement?d.appendChild(u):typeof u=="object"?Nl(u,d):u&&wt(d,u)},Nl=(u,d)=>{u.jquery?Ps(d,u):wt(d,u.toString())},Ps=(u,d)=>{if(u.textContent="",0 in d)for(let _=0;_ in d;_++)u.appendChild(d[_].cloneNode(!0));else u.appendChild(d.cloneNode(!0))},Vl=(u,d)=>{let _=fn(),v=yi();!_||!v||(!d.showConfirmButton&&!d.showDenyButton&&!d.showCancelButton?Ze(_):Ge(_),xt(_,d,"actions"),gr(_,v,d),wt(v,d.loaderHtml||""),xt(v,d,"loader"))};function gr(u,d,_){let v=$t(),D=At(),Y=_i();!v||!D||!Y||(ut(v,"confirm",_),ut(D,"deny",_),ut(Y,"cancel",_),Fl(v,D,Y,_),_.reverseButtons&&(_.toast?(u.insertBefore(Y,v),u.insertBefore(D,v)):(u.insertBefore(Y,d),u.insertBefore(D,d),u.insertBefore(v,d))))}function Fl(u,d,_,v){if(!v.buttonsStyling){Gt([u,d,_],p.styled);return}ge([u,d,_],p.styled),v.confirmButtonColor&&(u.style.backgroundColor=v.confirmButtonColor,ge(u,p["default-outline"])),v.denyButtonColor&&(d.style.backgroundColor=v.denyButtonColor,ge(d,p["default-outline"])),v.cancelButtonColor&&(_.style.backgroundColor=v.cancelButtonColor,ge(_,p["default-outline"]))}function ut(u,d,_){let v=O(d);Mn(u,_[`show${v}Button`],"inline-block"),wt(u,_[`${d}ButtonText`]||""),u.setAttribute("aria-label",_[`${d}ButtonAriaLabel`]||""),u.className=p[d],xt(u,_,`${d}Button`)}let Ll=(u,d)=>{let _=aa();_&&(wt(_,d.closeButtonHtml||""),xt(_,d,"closeButton"),Mn(_,d.showCloseButton),_.setAttribute("aria-label",d.closeButtonAriaLabel||""))},_r=(u,d)=>{let _=C();_&&(yr(_,d.backdrop),_f(_,d.position),yf(_,d.grow),xt(_,d,"container"))};function yr(u,d){typeof d=="string"?u.style.background=d:d||ge([document.documentElement,document.body],p["no-backdrop"])}function _f(u,d){d&&(d in p?ge(u,p[d]):(S('The "position" parameter is not valid, defaulting to "center"'),ge(u,p.center)))}function yf(u,d){d&&ge(u,p[`grow-${d}`])}var be={innerParams:new WeakMap,domCache:new WeakMap};let vf=["input","file","range","select","radio","checkbox","textarea"],wf=(u,d)=>{let _=P();if(!_)return;let v=be.innerParams.get(u),D=!v||d.input!==v.input;vf.forEach(Y=>{let pe=Pn(_,p[Y]);pe&&(pa(Y,d.inputAttributes),pe.className=p[Y],D&&Ze(pe))}),d.input&&(D&&Ms(d),Ss(d))},Ms=u=>{if(!u.input)return;if(!Ve[u.input]){H(`Unexpected type of input! Expected ${Object.keys(Ve).join(" | ")}, got "${u.input}"`);return}let d=ma(u.input);if(!d)return;let _=Ve[u.input](d,u);Ge(d),u.inputAutoFocus&&setTimeout(()=>{la(_)})},jl=u=>{for(let d=0;d<u.attributes.length;d++){let _=u.attributes[d].name;["id","type","value","style"].includes(_)||u.removeAttribute(_)}},pa=(u,d)=>{let _=P();if(!_)return;let v=As(_,u);if(v){jl(v);for(let D in d)v.setAttribute(D,d[D])}},Ss=u=>{if(!u.input)return;let d=ma(u.input);d&&xt(d,u,"input")},Zt=(u,d)=>{!u.placeholder&&d.inputPlaceholder&&(u.placeholder=d.inputPlaceholder)},Ei=(u,d,_)=>{if(_.inputLabel){let v=document.createElement("label"),D=p["input-label"];v.setAttribute("for",u.id),v.className=D,typeof _.customClass=="object"&&ge(v,_.customClass.inputLabel),v.innerText=_.inputLabel,d.insertAdjacentElement("beforebegin",v)}},ma=u=>{let d=P();if(d)return Pn(d,p[u]||p.input)},Ii=(u,d)=>{["string","number"].includes(typeof d)?u.value=`${d}`:b(d)||S(`Unexpected type of inputValue! Expected "string", "number" or "Promise", got "${typeof d}"`)},Ve={};Ve.text=Ve.email=Ve.password=Ve.number=Ve.tel=Ve.url=Ve.search=Ve.date=Ve["datetime-local"]=Ve.time=Ve.week=Ve.month=(u,d)=>(Ii(u,d.inputValue),Ei(u,u,d),Zt(u,d),u.type=d.input,u),Ve.file=(u,d)=>(Ei(u,u,d),Zt(u,d),u),Ve.range=(u,d)=>{let _=u.querySelector("input"),v=u.querySelector("output");return Ii(_,d.inputValue),_.type=d.input,Ii(v,d.inputValue),Ei(_,u,d),u},Ve.select=(u,d)=>{if(u.textContent="",d.inputPlaceholder){let _=document.createElement("option");wt(_,d.inputPlaceholder),_.value="",_.disabled=!0,_.selected=!0,u.appendChild(_)}return Ei(u,u,d),u},Ve.radio=u=>(u.textContent="",u),Ve.checkbox=(u,d)=>{let _=As(P(),"checkbox");_.value="1",_.checked=!!d.inputValue;let v=u.querySelector("span");return wt(v,d.inputPlaceholder||d.inputLabel),_},Ve.textarea=(u,d)=>{Ii(u,d.inputValue),Zt(u,d),Ei(u,u,d);let _=v=>parseInt(window.getComputedStyle(v).marginLeft)+parseInt(window.getComputedStyle(v).marginRight);return setTimeout(()=>{if("MutationObserver"in window){let v=parseInt(window.getComputedStyle(P()).width),D=()=>{if(!document.body.contains(u))return;let Y=u.offsetWidth+_(u);Y>v?P().style.width=`${Y}px`:pn(P(),"width",d.width)};new MutationObserver(D).observe(u,{attributes:!0,attributeFilter:["style"]})}}),u};let Bl=(u,d)=>{let _=oa();_&&(et(_),xt(_,d,"htmlContainer"),d.html?(gn(d.html,_),Ge(_,"block")):d.text?(_.textContent=d.text,Ge(_,"block")):Ze(_),wf(u,d))},Ul=(u,d)=>{let _=Pl();_&&(et(_),Mn(_,d.footer,"block"),d.footer&&gn(d.footer,_),xt(_,d,"footer"))},bf=(u,d)=>{let _=be.innerParams.get(u),v=E();if(v){if(_&&d.icon===_.icon){Sn(v,d),vr(v,d);return}if(!d.icon&&!d.iconHtml){Ze(v);return}if(d.icon&&Object.keys(I).indexOf(d.icon)===-1){H(`Unknown icon! Expected "success", "error", "warning", "info" or "question", got "${d.icon}"`),Ze(v);return}Ge(v),Sn(v,d),vr(v,d),ge(v,d.showClass&&d.showClass.icon)}},vr=(u,d)=>{for(let[_,v]of Object.entries(I))d.icon!==_&&Gt(u,v);ge(u,d.icon&&I[d.icon]),_a(u,d),zl(),xt(u,d,"icon")},zl=()=>{let u=P();if(!u)return;let d=window.getComputedStyle(u).getPropertyValue("background-color"),_=u.querySelectorAll("[class^=swal2-success-circular-line], .swal2-success-fix");for(let v=0;v<_.length;v++)_[v].style.backgroundColor=d},ga=`
  <div class="swal2-success-circular-line-left"></div>
  <span class="swal2-success-line-tip"></span> <span class="swal2-success-line-long"></span>
  <div class="swal2-success-ring"></div> <div class="swal2-success-fix"></div>
  <div class="swal2-success-circular-line-right"></div>
`,wr=`
  <span class="swal2-x-mark">
    <span class="swal2-x-mark-line-left"></span>
    <span class="swal2-x-mark-line-right"></span>
  </span>
`,Sn=(u,d)=>{if(!d.icon&&!d.iconHtml)return;let _=u.innerHTML,v="";d.iconHtml?v=$l(d.iconHtml):d.icon==="success"?(v=ga,_=_.replace(/ style=".*?"/g,"")):d.icon==="error"?v=wr:d.icon&&(v=$l({question:"?",warning:"!",info:"i"}[d.icon])),_.trim()!==v.trim()&&wt(u,v)},_a=(u,d)=>{if(d.iconColor){u.style.color=d.iconColor,u.style.borderColor=d.iconColor;for(let _ of[".swal2-success-line-tip",".swal2-success-line-long",".swal2-x-mark-line-left",".swal2-x-mark-line-right"])_t(u,_,"background-color",d.iconColor);_t(u,".swal2-success-ring","border-color",d.iconColor)}},$l=u=>`<div class="${p["icon-content"]}">${u}</div>`,ql=(u,d)=>{let _=mi();if(_){if(!d.imageUrl){Ze(_);return}Ge(_,""),_.setAttribute("src",d.imageUrl),_.setAttribute("alt",d.imageAlt||""),pn(_,"width",d.imageWidth),pn(_,"height",d.imageHeight),_.className=p.image,xt(_,d,"image")}},Gl=(u,d)=>{let _=C(),v=P();if(!(!_||!v)){if(d.toast){pn(_,"width",d.width),v.style.width="100%";let D=yi();D&&v.insertBefore(D,E())}else pn(v,"width",d.width);pn(v,"padding",d.padding),d.color&&(v.style.color=d.color),d.background&&(v.style.background=d.background),Ze(gi()),Hl(v,d)}},Hl=(u,d)=>{let _=d.showClass||{};u.className=`${p.popup} ${bt(u)?_.popup:""}`,d.toast?(ge([document.documentElement,document.body],p["toast-shown"]),ge(u,p.toast)):ge(u,p.modal),xt(u,d,"popup"),typeof d.customClass=="string"&&ge(u,d.customClass),d.icon&&ge(u,p[`icon-${d.icon}`])},ya=(u,d)=>{let _=Jn();if(!_)return;let{progressSteps:v,currentProgressStep:D}=d;if(!v||v.length===0||D===void 0){Ze(_);return}Ge(_),_.textContent="",D>=v.length&&S("Invalid currentProgressStep parameter, it should be less than progressSteps.length (currentProgressStep like JS arrays starts from 0)"),v.forEach((Y,pe)=>{let Te=va(Y);if(_.appendChild(Te),pe===D&&ge(Te,p["active-progress-step"]),pe!==v.length-1){let Ue=Kl(d);_.appendChild(Ue)}})},va=u=>{let d=document.createElement("li");return ge(d,p["progress-step"]),wt(d,u),d},Kl=u=>{let d=document.createElement("li");return ge(d,p["progress-step-line"]),u.progressStepsDistance&&pn(d,"width",u.progressStepsDistance),d},Wl=(u,d)=>{let _=pi();_&&(et(_),Mn(_,d.title||d.titleText,"block"),d.title&&gn(d.title,_),d.titleText&&(_.innerText=d.titleText),xt(_,d,"title"))},Ql=(u,d)=>{Gl(u,d),_r(u,d),ya(u,d),bf(u,d),ql(u,d),Wl(u,d),Ll(u,d),Bl(u,d),Vl(u,d),Ul(u,d);let _=P();typeof d.didRender=="function"&&_&&d.didRender(_),o.eventEmitter.emit("didRender",_)},Cf=()=>bt(P()),wa=()=>{var u;return(u=$t())===null||u===void 0?void 0:u.click()},Yl=()=>{var u;return(u=At())===null||u===void 0?void 0:u.click()},Ef=()=>{var u;return(u=_i())===null||u===void 0?void 0:u.click()},Vt=Object.freeze({cancel:"cancel",backdrop:"backdrop",close:"close",esc:"esc",timer:"timer"}),en=u=>{u.keydownTarget&&u.keydownHandlerAdded&&(u.keydownTarget.removeEventListener("keydown",u.keydownHandler,{capture:u.keydownListenerCapture}),u.keydownHandlerAdded=!1)},Os=(u,d,_)=>{en(u),d.toast||(u.keydownHandler=v=>Ds(d,v,_),u.keydownTarget=d.keydownListenerCapture?window:P(),u.keydownListenerCapture=d.keydownListenerCapture,u.keydownTarget.addEventListener("keydown",u.keydownHandler,{capture:u.keydownListenerCapture}),u.keydownHandlerAdded=!0)},Ti=(u,d)=>{var _;let v=vi();if(v.length){u=u+d,u===v.length?u=0:u===-1&&(u=v.length-1),v[u].focus();return}(_=P())===null||_===void 0||_.focus()},ba=["ArrowRight","ArrowDown"],Oe=["ArrowLeft","ArrowUp"],Ds=(u,d,_)=>{u&&(d.isComposing||d.keyCode===229||(u.stopKeydownPropagation&&d.stopPropagation(),d.key==="Enter"?br(d,u):d.key==="Tab"?Cr(d):[...ba,...Oe].includes(d.key)?If(d.key):d.key==="Escape"&&Xl(d,u,_)))},br=(u,d)=>{if(!re(d.allowEnterKey))return;let _=As(P(),d.input);if(u.target&&_&&u.target instanceof HTMLElement&&u.target.outerHTML===_.outerHTML){if(["textarea","file"].includes(d.input))return;wa(),u.preventDefault()}},Cr=u=>{let d=u.target,_=vi(),v=-1;for(let D=0;D<_.length;D++)if(d===_[D]){v=D;break}u.shiftKey?Ti(v,-1):Ti(v,1),u.stopPropagation(),u.preventDefault()},If=u=>{let d=fn(),_=$t(),v=At(),D=_i();if(!d||!_||!v||!D)return;let Y=[_,v,D];if(document.activeElement instanceof HTMLElement&&!Y.includes(document.activeElement))return;let pe=ba.includes(u)?"nextElementSibling":"previousElementSibling",Te=document.activeElement;if(Te){for(let Ue=0;Ue<d.children.length;Ue++){if(Te=Te[pe],!Te)return;if(Te instanceof HTMLButtonElement&&bt(Te))break}Te instanceof HTMLButtonElement&&Te.focus()}},Xl=(u,d,_)=>{re(d.allowEscapeKey)&&(u.preventDefault(),_(Vt.esc))};var Ai={swalPromiseResolve:new WeakMap,swalPromiseReject:new WeakMap};let Tf=()=>{let u=C();Array.from(document.body.children).forEach(_=>{_.contains(u)||(_.hasAttribute("aria-hidden")&&_.setAttribute("data-previous-aria-hidden",_.getAttribute("aria-hidden")||""),_.setAttribute("aria-hidden","true"))})},Jl=()=>{Array.from(document.body.children).forEach(d=>{d.hasAttribute("data-previous-aria-hidden")?(d.setAttribute("aria-hidden",d.getAttribute("data-previous-aria-hidden")||""),d.removeAttribute("data-previous-aria-hidden")):d.removeAttribute("aria-hidden")})},Zl=typeof window<"u"&&!!window.GestureEvent,Er=()=>{if(Zl&&!qt(document.body,p.iosfix)){let u=document.body.scrollTop;document.body.style.top=`${u*-1}px`,ge(document.body,p.iosfix),On()}},On=()=>{let u=C();if(!u)return;let d;u.ontouchstart=_=>{d=eu(_)},u.ontouchmove=_=>{d&&(_.preventDefault(),_.stopPropagation())}},eu=u=>{let d=u.target,_=C(),v=oa();return!_||!v||tu(u)||nu(u)?!1:d===_||!Ol(_)&&d instanceof HTMLElement&&d.tagName!=="INPUT"&&d.tagName!=="TEXTAREA"&&!(Ol(v)&&v.contains(d))},tu=u=>u.touches&&u.touches.length&&u.touches[0].touchType==="stylus",nu=u=>u.touches&&u.touches.length>1,xi=()=>{if(qt(document.body,p.iosfix)){let u=parseInt(document.body.style.top,10);Gt(document.body,p.iosfix),document.body.style.top="",document.body.scrollTop=u*-1}},Af=()=>{let u=document.createElement("div");u.className=p["scrollbar-measure"],document.body.appendChild(u);let d=u.getBoundingClientRect().width-u.clientWidth;return document.body.removeChild(u),d},Pi=null,xf=u=>{Pi===null&&(document.body.scrollHeight>window.innerHeight||u==="scroll")&&(Pi=parseInt(window.getComputedStyle(document.body).getPropertyValue("padding-right")),document.body.style.paddingRight=`${Pi+Af()}px`)},Dn=()=>{Pi!==null&&(document.body.style.paddingRight=`${Pi}px`,Pi=null)};function iu(u,d,_,v){bi()?Fe(u,v):(l(_).then(()=>Fe(u,v)),en(o)),Zl?(d.setAttribute("style","display:none !important"),d.removeAttribute("class"),d.innerHTML=""):d.remove(),wi()&&(Dn(),xi(),Jl()),Pf()}function Pf(){Gt([document.documentElement,document.body],[p.shown,p["height-auto"],p["no-backdrop"],p["toast-shown"]])}function Ft(u){u=Ir(u);let d=Ai.swalPromiseResolve.get(this),_=Rs(this);this.isAwaitingPromise?u.isDismissed||(_n(this),d(u)):_&&d(u)}let Rs=u=>{let d=P();if(!d)return!1;let _=be.innerParams.get(u);if(!_||qt(d,_.hideClass.popup))return!1;Gt(d,_.showClass.popup),ge(d,_.hideClass.popup);let v=C();return Gt(v,_.showClass.backdrop),ge(v,_.hideClass.backdrop),ru(u,d,_),!0};function Ca(u){let d=Ai.swalPromiseReject.get(this);_n(this),d&&d(u)}let _n=u=>{u.isAwaitingPromise&&(delete u.isAwaitingPromise,be.innerParams.get(u)||u._destroy())},Ir=u=>typeof u>"u"?{isConfirmed:!1,isDenied:!1,isDismissed:!0}:Object.assign({isConfirmed:!1,isDenied:!1,isDismissed:!1},u),ru=(u,d,_)=>{let v=C(),D=Ci(d);typeof _.willClose=="function"&&_.willClose(d),o.eventEmitter.emit("willClose",d),D?Ea(u,d,v,_.returnFocus,_.didClose):iu(u,v,_.returnFocus,_.didClose)},Ea=(u,d,_,v,D)=>{o.swalCloseEventFinishedCallback=iu.bind(null,u,_,v,D);let Y=function(pe){pe.target===d&&(o.swalCloseEventFinishedCallback(),delete o.swalCloseEventFinishedCallback,d.removeEventListener("animationend",Y),d.removeEventListener("transitionend",Y))};d.addEventListener("animationend",Y),d.addEventListener("transitionend",Y)},Fe=(u,d)=>{setTimeout(()=>{typeof d=="function"&&d.bind(u.params)(),o.eventEmitter.emit("didClose"),u._destroy&&u._destroy()})},Mi=u=>{let d=P();if(d||new vu,d=P(),!d)return;let _=yi();bi()?Ze(E()):Mf(d,u),Ge(_),d.setAttribute("data-loading","true"),d.setAttribute("aria-busy","true"),d.focus()},Mf=(u,d)=>{let _=fn(),v=yi();!_||!v||(!d&&bt($t())&&(d=$t()),Ge(_),d&&(Ze(d),v.setAttribute("data-button-to-replace",d.className),_.insertBefore(v,d)),ge([u,_],p.loading))},su=(u,d)=>{d.input==="select"||d.input==="radio"?yn(u,d):["text","email","number","tel","textarea"].some(_=>_===d.input)&&(ce(d.inputValue)||b(d.inputValue))&&(Mi($t()),lu(u,d))},ou=(u,d)=>{let _=u.getInput();if(!_)return null;switch(d.input){case"checkbox":return au(_);case"radio":return ks(_);case"file":return cu(_);default:return d.inputAutoTrim?_.value.trim():_.value}},au=u=>u.checked?1:0,ks=u=>u.checked?u.value:null,cu=u=>u.files&&u.files.length?u.getAttribute("multiple")!==null?u.files:u.files[0]:null,yn=(u,d)=>{let _=P();if(!_)return;let v=D=>{d.input==="select"?Sf(_,Ar(D),d):d.input==="radio"&&Tr(_,Ar(D),d)};ce(d.inputOptions)||b(d.inputOptions)?(Mi($t()),T(d.inputOptions).then(D=>{u.hideLoading(),v(D)})):typeof d.inputOptions=="object"?v(d.inputOptions):H(`Unexpected type of inputOptions! Expected object, Map or Promise, got ${typeof d.inputOptions}`)},lu=(u,d)=>{let _=u.getInput();_&&(Ze(_),T(d.inputValue).then(v=>{_.value=d.input==="number"?`${parseFloat(v)||0}`:`${v}`,Ge(_),_.focus(),u.hideLoading()}).catch(v=>{H(`Error in inputValue promise: ${v}`),_.value="",Ge(_),_.focus(),u.hideLoading()}))};function Sf(u,d,_){let v=Pn(u,p.select);if(!v)return;let D=(Y,pe,Te)=>{let Ue=document.createElement("option");Ue.value=Te,wt(Ue,pe),Ue.selected=Ns(Te,_.inputValue),Y.appendChild(Ue)};d.forEach(Y=>{let pe=Y[0],Te=Y[1];if(Array.isArray(Te)){let Ue=document.createElement("optgroup");Ue.label=pe,Ue.disabled=!1,v.appendChild(Ue),Te.forEach(js=>D(Ue,js[1],js[0]))}else D(v,Te,pe)}),v.focus()}function Tr(u,d,_){let v=Pn(u,p.radio);if(!v)return;d.forEach(Y=>{let pe=Y[0],Te=Y[1],Ue=document.createElement("input"),js=document.createElement("label");Ue.type="radio",Ue.name=p.radio,Ue.value=pe,Ns(pe,_.inputValue)&&(Ue.checked=!0);let Df=document.createElement("span");wt(Df,Te),Df.className=p.label,js.appendChild(Ue),js.appendChild(Df),v.appendChild(js)});let D=v.querySelectorAll("input");D.length&&D[0].focus()}let Ar=u=>{let d=[];return u instanceof Map?u.forEach((_,v)=>{let D=_;typeof D=="object"&&(D=Ar(D)),d.push([v,D])}):Object.keys(u).forEach(_=>{let v=u[_];typeof v=="object"&&(v=Ar(v)),d.push([_,v])}),d},Ns=(u,d)=>!!d&&d.toString()===u.toString(),Vs=u=>{let d=be.innerParams.get(u);u.disableButtons(),d.input?du(u,"confirm"):xr(u,!0)},uu=u=>{let d=be.innerParams.get(u);u.disableButtons(),d.returnInputValueOnDeny?du(u,"deny"):Zn(u,!1)},Fs=(u,d)=>{u.disableButtons(),d(Vt.cancel)},du=(u,d)=>{let _=be.innerParams.get(u);if(!_.input){H(`The "input" parameter is needed to be set when using returnInputValueOn${O(d)}`);return}let v=u.getInput(),D=ou(u,_);_.inputValidator?hu(u,D,d):v&&!v.checkValidity()?(u.enableButtons(),u.showValidationMessage(_.validationMessage||v.validationMessage)):d==="deny"?Zn(u,D):xr(u,D)},hu=(u,d,_)=>{let v=be.innerParams.get(u);u.disableInput(),Promise.resolve().then(()=>T(v.inputValidator(d,v.validationMessage))).then(Y=>{u.enableButtons(),u.enableInput(),Y?u.showValidationMessage(Y):_==="deny"?Zn(u,d):xr(u,d)})},Zn=(u,d)=>{let _=be.innerParams.get(u||void 0);_.showLoaderOnDeny&&Mi(At()),_.preDeny?(u.isAwaitingPromise=!0,Promise.resolve().then(()=>T(_.preDeny(d,_.validationMessage))).then(D=>{D===!1?(u.hideLoading(),_n(u)):u.close({isDenied:!0,value:typeof D>"u"?d:D})}).catch(D=>Ta(u||void 0,D))):u.close({isDenied:!0,value:d})},Ia=(u,d)=>{u.close({isConfirmed:!0,value:d})},Ta=(u,d)=>{u.rejectPromise(d)},xr=(u,d)=>{let _=be.innerParams.get(u||void 0);_.showLoaderOnConfirm&&Mi(),_.preConfirm?(u.resetValidationMessage(),u.isAwaitingPromise=!0,Promise.resolve().then(()=>T(_.preConfirm(d,_.validationMessage))).then(D=>{bt(gi())||D===!1?(u.hideLoading(),_n(u)):Ia(u,typeof D>"u"?d:D)}).catch(D=>Ta(u||void 0,D))):Ia(u,d)};function Si(){let u=be.innerParams.get(this);if(!u)return;let d=be.domCache.get(this);Ze(d.loader),bi()?u.icon&&Ge(E()):fu(d),Gt([d.popup,d.actions],p.loading),d.popup.removeAttribute("aria-busy"),d.popup.removeAttribute("data-loading"),d.confirmButton.disabled=!1,d.denyButton.disabled=!1,d.cancelButton.disabled=!1}let fu=u=>{let d=u.popup.getElementsByClassName(u.loader.getAttribute("data-button-to-replace"));d.length?Ge(d[0],"inline-block"):Sl()&&Ze(u.actions)};function Pr(){let u=be.innerParams.get(this),d=be.domCache.get(this);return d?As(d.popup,u.input):null}function Aa(u,d,_){let v=be.domCache.get(u);d.forEach(D=>{v[D].disabled=_})}function xa(u,d){let _=P();if(!(!_||!u))if(u.type==="radio"){let v=_.querySelectorAll(`[name="${p.radio}"]`);for(let D=0;D<v.length;D++)v[D].disabled=d}else u.disabled=d}function Rn(){Aa(this,["confirmButton","denyButton","cancelButton"],!1)}function Pa(){Aa(this,["confirmButton","denyButton","cancelButton"],!0)}function Ma(){xa(this.getInput(),!1)}function Sa(){xa(this.getInput(),!0)}function Oa(u){let d=be.domCache.get(this),_=be.innerParams.get(this);wt(d.validationMessage,u),d.validationMessage.className=p["validation-message"],_.customClass&&_.customClass.validationMessage&&ge(d.validationMessage,_.customClass.validationMessage),Ge(d.validationMessage);let v=this.getInput();v&&(v.setAttribute("aria-invalid","true"),v.setAttribute("aria-describedby",p["validation-message"]),la(v),ge(v,p.inputerror))}function Mr(){let u=be.domCache.get(this);u.validationMessage&&Ze(u.validationMessage);let d=this.getInput();d&&(d.removeAttribute("aria-invalid"),d.removeAttribute("aria-describedby"),Gt(d,p.inputerror))}let tt={title:"",titleText:"",text:"",html:"",footer:"",icon:void 0,iconColor:void 0,iconHtml:void 0,template:void 0,toast:!1,animation:!0,showClass:{popup:"swal2-show",backdrop:"swal2-backdrop-show",icon:"swal2-icon-show"},hideClass:{popup:"swal2-hide",backdrop:"swal2-backdrop-hide",icon:"swal2-icon-hide"},customClass:{},target:"body",color:void 0,backdrop:!0,heightAuto:!0,allowOutsideClick:!0,allowEscapeKey:!0,allowEnterKey:!0,stopKeydownPropagation:!0,keydownListenerCapture:!1,showConfirmButton:!0,showDenyButton:!1,showCancelButton:!1,preConfirm:void 0,preDeny:void 0,confirmButtonText:"OK",confirmButtonAriaLabel:"",confirmButtonColor:void 0,denyButtonText:"No",denyButtonAriaLabel:"",denyButtonColor:void 0,cancelButtonText:"Cancel",cancelButtonAriaLabel:"",cancelButtonColor:void 0,buttonsStyling:!0,reverseButtons:!1,focusConfirm:!0,focusDeny:!1,focusCancel:!1,returnFocus:!0,showCloseButton:!1,closeButtonHtml:"&times;",closeButtonAriaLabel:"Close this dialog",loaderHtml:"",showLoaderOnConfirm:!1,showLoaderOnDeny:!1,imageUrl:void 0,imageWidth:void 0,imageHeight:void 0,imageAlt:"",timer:void 0,timerProgressBar:!1,width:void 0,padding:void 0,background:void 0,input:void 0,inputPlaceholder:"",inputLabel:"",inputValue:"",inputOptions:{},inputAutoFocus:!0,inputAutoTrim:!0,inputAttributes:{},inputValidator:void 0,returnInputValueOnDeny:!1,validationMessage:void 0,grow:!1,position:"center",progressSteps:[],currentProgressStep:void 0,progressStepsDistance:void 0,willOpen:void 0,didOpen:void 0,didRender:void 0,willClose:void 0,didClose:void 0,didDestroy:void 0,scrollbarPadding:!0},pu=["allowEscapeKey","allowOutsideClick","background","buttonsStyling","cancelButtonAriaLabel","cancelButtonColor","cancelButtonText","closeButtonAriaLabel","closeButtonHtml","color","confirmButtonAriaLabel","confirmButtonColor","confirmButtonText","currentProgressStep","customClass","denyButtonAriaLabel","denyButtonColor","denyButtonText","didClose","didDestroy","footer","hideClass","html","icon","iconColor","iconHtml","imageAlt","imageHeight","imageUrl","imageWidth","preConfirm","preDeny","progressSteps","returnFocus","reverseButtons","showCancelButton","showCloseButton","showConfirmButton","showDenyButton","text","title","titleText","willClose"],mu={allowEnterKey:void 0},Oi=["allowOutsideClick","allowEnterKey","backdrop","focusConfirm","focusDeny","focusCancel","returnFocus","heightAuto","keydownListenerCapture"],a=u=>Object.prototype.hasOwnProperty.call(tt,u),h=u=>pu.indexOf(u)!==-1,m=u=>mu[u],y=u=>{a(u)||S(`Unknown parameter "${u}"`)},M=u=>{Oi.includes(u)&&S(`The parameter "${u}" is incompatible with toasts`)},k=u=>{let d=m(u);d&&ne(u,d)},G=u=>{u.backdrop===!1&&u.allowOutsideClick&&S('"allowOutsideClick" parameter requires `backdrop` parameter to be set to `true`');for(let d in u)y(d),u.toast&&M(d),k(d)};function Ie(u){let d=P(),_=be.innerParams.get(this);if(!d||qt(d,_.hideClass.popup)){S("You're trying to update the closed or closing popup, that won't work. Use the update() method in preConfirm parameter or show a new popup.");return}let v=dt(u),D=Object.assign({},_,v);Ql(this,D),be.innerParams.set(this,D),Object.defineProperties(this,{params:{value:Object.assign({},this.params,u),writable:!1,enumerable:!0}})}let dt=u=>{let d={};return Object.keys(u).forEach(_=>{h(_)?d[_]=u[_]:S(`Invalid parameter to update: ${_}`)}),d};function ye(){let u=be.domCache.get(this),d=be.innerParams.get(this);if(!d){ht(this);return}u.popup&&o.swalCloseEventFinishedCallback&&(o.swalCloseEventFinishedCallback(),delete o.swalCloseEventFinishedCallback),typeof d.didDestroy=="function"&&d.didDestroy(),o.eventEmitter.emit("didDestroy"),yt(this)}let yt=u=>{ht(u),delete u.params,delete o.keydownHandler,delete o.keydownTarget,delete o.currentInstance},ht=u=>{u.isAwaitingPromise?(kn(be,u),u.isAwaitingPromise=!0):(kn(Ai,u),kn(be,u),delete u.isAwaitingPromise,delete u.disableButtons,delete u.enableButtons,delete u.getInput,delete u.disableInput,delete u.enableInput,delete u.hideLoading,delete u.disableLoading,delete u.showValidationMessage,delete u.resetValidationMessage,delete u.close,delete u.closePopup,delete u.closeModal,delete u.closeToast,delete u.rejectPromise,delete u.update,delete u._destroy)},kn=(u,d)=>{for(let _ in u)u[_].delete(d)};var Ht=Object.freeze({__proto__:null,_destroy:ye,close:Ft,closeModal:Ft,closePopup:Ft,closeToast:Ft,disableButtons:Pa,disableInput:Sa,disableLoading:Si,enableButtons:Rn,enableInput:Ma,getInput:Pr,handleAwaitingPromise:_n,hideLoading:Si,rejectPromise:Ca,resetValidationMessage:Mr,showValidationMessage:Oa,update:Ie});let Ls=(u,d,_)=>{u.toast?Da(u,d,_):(rT(d),sT(d),oT(u,d,_))},Da=(u,d,_)=>{d.popup.onclick=()=>{u&&(iT(u)||u.timer||u.input)||_(Vt.close)}},iT=u=>!!(u.showConfirmButton||u.showDenyButton||u.showCancelButton||u.showCloseButton),gu=!1,rT=u=>{u.popup.onmousedown=()=>{u.container.onmouseup=function(d){u.container.onmouseup=()=>{},d.target===u.container&&(gu=!0)}}},sT=u=>{u.container.onmousedown=d=>{d.target===u.container&&d.preventDefault(),u.popup.onmouseup=function(_){u.popup.onmouseup=()=>{},(_.target===u.popup||_.target instanceof HTMLElement&&u.popup.contains(_.target))&&(gu=!0)}}},oT=(u,d,_)=>{d.container.onclick=v=>{if(gu){gu=!1;return}v.target===d.container&&re(u.allowOutsideClick)&&_(Vt.backdrop)}},aT=u=>typeof u=="object"&&u.jquery,qy=u=>u instanceof Element||aT(u),cT=u=>{let d={};return typeof u[0]=="object"&&!qy(u[0])?Object.assign(d,u[0]):["title","html","icon"].forEach((_,v)=>{let D=u[v];typeof D=="string"||qy(D)?d[_]=D:D!==void 0&&H(`Unexpected type of ${_}! Expected "string" or "Element", got ${typeof D}`)}),d};function lT(){for(var u=arguments.length,d=new Array(u),_=0;_<u;_++)d[_]=arguments[_];return new this(...d)}function uT(u){class d extends this{_main(v,D){return super._main(v,Object.assign({},u,D))}}return d}let dT=()=>o.timeout&&o.timeout.getTimerLeft(),Gy=()=>{if(o.timeout)return Dl(),o.timeout.stop()},Hy=()=>{if(o.timeout){let u=o.timeout.start();return xs(u),u}},hT=()=>{let u=o.timeout;return u&&(u.running?Gy():Hy())},fT=u=>{if(o.timeout){let d=o.timeout.increase(u);return xs(d,!0),d}},pT=()=>!!(o.timeout&&o.timeout.isRunning()),Ky=!1,Of={};function mT(){let u=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"data-swal-template";Of[u]=this,Ky||(document.body.addEventListener("click",gT),Ky=!0)}let gT=u=>{for(let d=u.target;d&&d!==document;d=d.parentNode)for(let _ in Of){let v=d.getAttribute(_);if(v){Of[_].fire({template:v});return}}};class _T{constructor(){this.events={}}_getHandlersByEventName(d){return typeof this.events[d]>"u"&&(this.events[d]=[]),this.events[d]}on(d,_){let v=this._getHandlersByEventName(d);v.includes(_)||v.push(_)}once(d,_){var v=this;let D=function(){v.removeListener(d,D);for(var Y=arguments.length,pe=new Array(Y),Te=0;Te<Y;Te++)pe[Te]=arguments[Te];_.apply(v,pe)};this.on(d,D)}emit(d){for(var _=arguments.length,v=new Array(_>1?_-1:0),D=1;D<_;D++)v[D-1]=arguments[D];this._getHandlersByEventName(d).forEach(Y=>{try{Y.apply(this,v)}catch(pe){console.error(pe)}})}removeListener(d,_){let v=this._getHandlersByEventName(d),D=v.indexOf(_);D>-1&&v.splice(D,1)}removeAllListeners(d){this.events[d]!==void 0&&(this.events[d].length=0)}reset(){this.events={}}}o.eventEmitter=new _T;var yT=Object.freeze({__proto__:null,argsToParams:cT,bindClickHandler:mT,clickCancel:Ef,clickConfirm:wa,clickDeny:Yl,enableLoading:Mi,fire:lT,getActions:fn,getCancelButton:_i,getCloseButton:aa,getConfirmButton:$t,getContainer:C,getDenyButton:At,getFocusableElements:vi,getFooter:Pl,getHtmlContainer:oa,getIcon:E,getIconContent:hn,getImage:mi,getInputLabel:gt,getLoader:yi,getPopup:P,getProgressSteps:Jn,getTimerLeft:dT,getTimerProgressBar:xn,getTitle:pi,getValidationMessage:gi,increaseTimer:fT,isDeprecatedParameter:m,isLoading:ca,isTimerRunning:pT,isUpdatableParameter:h,isValidParameter:a,isVisible:Cf,mixin:uT,off:(u,d)=>{if(!u){o.eventEmitter.reset();return}d?o.eventEmitter.removeListener(u,d):o.eventEmitter.removeAllListeners(u)},on:(u,d)=>{o.eventEmitter.on(u,d)},once:(u,d)=>{o.eventEmitter.once(u,d)},resumeTimer:Hy,showLoading:Mi,stopTimer:Gy,toggleTimer:hT});class vT{constructor(d,_){this.callback=d,this.remaining=_,this.running=!1,this.start()}start(){return this.running||(this.running=!0,this.started=new Date,this.id=setTimeout(this.callback,this.remaining)),this.remaining}stop(){return this.started&&this.running&&(this.running=!1,clearTimeout(this.id),this.remaining-=new Date().getTime()-this.started.getTime()),this.remaining}increase(d){let _=this.running;return _&&this.stop(),this.remaining+=d,_&&this.start(),this.remaining}getTimerLeft(){return this.running&&(this.stop(),this.start()),this.remaining}isRunning(){return this.running}}let Wy=["swal-title","swal-html","swal-footer"],wT=u=>{let d=typeof u.template=="string"?document.querySelector(u.template):u.template;if(!d)return{};let _=d.content;return PT(_),Object.assign(bT(_),CT(_),ET(_),IT(_),TT(_),AT(_),xT(_,Wy))},bT=u=>{let d={};return Array.from(u.querySelectorAll("swal-param")).forEach(v=>{Sr(v,["name","value"]);let D=v.getAttribute("name"),Y=v.getAttribute("value");!D||!Y||(typeof tt[D]=="boolean"?d[D]=Y!=="false":typeof tt[D]=="object"?d[D]=JSON.parse(Y):d[D]=Y)}),d},CT=u=>{let d={};return Array.from(u.querySelectorAll("swal-function-param")).forEach(v=>{let D=v.getAttribute("name"),Y=v.getAttribute("value");!D||!Y||(d[D]=new Function(`return ${Y}`)())}),d},ET=u=>{let d={};return Array.from(u.querySelectorAll("swal-button")).forEach(v=>{Sr(v,["type","color","aria-label"]);let D=v.getAttribute("type");!D||!["confirm","cancel","deny"].includes(D)||(d[`${D}ButtonText`]=v.innerHTML,d[`show${O(D)}Button`]=!0,v.hasAttribute("color")&&(d[`${D}ButtonColor`]=v.getAttribute("color")),v.hasAttribute("aria-label")&&(d[`${D}ButtonAriaLabel`]=v.getAttribute("aria-label")))}),d},IT=u=>{let d={},_=u.querySelector("swal-image");return _&&(Sr(_,["src","width","height","alt"]),_.hasAttribute("src")&&(d.imageUrl=_.getAttribute("src")||void 0),_.hasAttribute("width")&&(d.imageWidth=_.getAttribute("width")||void 0),_.hasAttribute("height")&&(d.imageHeight=_.getAttribute("height")||void 0),_.hasAttribute("alt")&&(d.imageAlt=_.getAttribute("alt")||void 0)),d},TT=u=>{let d={},_=u.querySelector("swal-icon");return _&&(Sr(_,["type","color"]),_.hasAttribute("type")&&(d.icon=_.getAttribute("type")),_.hasAttribute("color")&&(d.iconColor=_.getAttribute("color")),d.iconHtml=_.innerHTML),d},AT=u=>{let d={},_=u.querySelector("swal-input");_&&(Sr(_,["type","label","placeholder","value"]),d.input=_.getAttribute("type")||"text",_.hasAttribute("label")&&(d.inputLabel=_.getAttribute("label")),_.hasAttribute("placeholder")&&(d.inputPlaceholder=_.getAttribute("placeholder")),_.hasAttribute("value")&&(d.inputValue=_.getAttribute("value")));let v=Array.from(u.querySelectorAll("swal-input-option"));return v.length&&(d.inputOptions={},v.forEach(D=>{Sr(D,["value"]);let Y=D.getAttribute("value");if(!Y)return;let pe=D.innerHTML;d.inputOptions[Y]=pe})),d},xT=(u,d)=>{let _={};for(let v in d){let D=d[v],Y=u.querySelector(D);Y&&(Sr(Y,[]),_[D.replace(/^swal-/,"")]=Y.innerHTML.trim())}return _},PT=u=>{let d=Wy.concat(["swal-param","swal-function-param","swal-button","swal-image","swal-icon","swal-input","swal-input-option"]);Array.from(u.children).forEach(_=>{let v=_.tagName.toLowerCase();d.includes(v)||S(`Unrecognized element <${v}>`)})},Sr=(u,d)=>{Array.from(u.attributes).forEach(_=>{d.indexOf(_.name)===-1&&S([`Unrecognized attribute "${_.name}" on <${u.tagName.toLowerCase()}>.`,`${d.length?`Allowed attributes are: ${d.join(", ")}`:"To set the value, use HTML within the element."}`])})},Qy=10,MT=u=>{let d=C(),_=P();typeof u.willOpen=="function"&&u.willOpen(_),o.eventEmitter.emit("willOpen",_);let D=window.getComputedStyle(document.body).overflowY;DT(d,_,u),setTimeout(()=>{ST(d,_)},Qy),wi()&&(OT(d,u.scrollbarPadding,D),Tf()),!bi()&&!o.previousActiveElement&&(o.previousActiveElement=document.activeElement),typeof u.didOpen=="function"&&setTimeout(()=>u.didOpen(_)),o.eventEmitter.emit("didOpen",_),Gt(d,p["no-transition"])},_u=u=>{let d=P();if(u.target!==d)return;let _=C();d.removeEventListener("animationend",_u),d.removeEventListener("transitionend",_u),_.style.overflowY="auto"},ST=(u,d)=>{Ci(d)?(u.style.overflowY="hidden",d.addEventListener("animationend",_u),d.addEventListener("transitionend",_u)):u.style.overflowY="auto"},OT=(u,d,_)=>{Er(),d&&_!=="hidden"&&xf(_),setTimeout(()=>{u.scrollTop=0})},DT=(u,d,_)=>{ge(u,_.showClass.backdrop),_.animation?(d.style.setProperty("opacity","0","important"),Ge(d,"grid"),setTimeout(()=>{ge(d,_.showClass.popup),d.style.removeProperty("opacity")},Qy)):Ge(d,"grid"),ge([document.documentElement,document.body],p.shown),_.heightAuto&&_.backdrop&&!_.toast&&ge([document.documentElement,document.body],p["height-auto"])};var Yy={email:(u,d)=>/^[a-zA-Z0-9.+_'-]+@[a-zA-Z0-9.-]+\.[a-zA-Z0-9-]+$/.test(u)?Promise.resolve():Promise.resolve(d||"Invalid email address"),url:(u,d)=>/^https?:\/\/(www\.)?[-a-zA-Z0-9@:%._+~#=]{1,256}\.[a-z]{2,63}\b([-a-zA-Z0-9@:%_+.~#?&/=]*)$/.test(u)?Promise.resolve():Promise.resolve(d||"Invalid URL")};function RT(u){u.inputValidator||(u.input==="email"&&(u.inputValidator=Yy.email),u.input==="url"&&(u.inputValidator=Yy.url))}function kT(u){(!u.target||typeof u.target=="string"&&!document.querySelector(u.target)||typeof u.target!="string"&&!u.target.appendChild)&&(S('Target parameter is not valid, defaulting to "body"'),u.target="body")}function NT(u){RT(u),u.showLoaderOnConfirm&&!u.preConfirm&&S(`showLoaderOnConfirm is set to true, but preConfirm is not defined.
showLoaderOnConfirm should be used together with preConfirm, see usage example:
https://sweetalert2.github.io/#ajax-request`),kT(u),typeof u.title=="string"&&(u.title=u.title.split(`
`).join("<br />")),fa(u)}let Nn;var yu=new WeakMap;class We{constructor(){if(i(this,yu,void 0),typeof window>"u")return;Nn=this;for(var d=arguments.length,_=new Array(d),v=0;v<d;v++)_[v]=arguments[v];let D=Object.freeze(this.constructor.argsToParams(_));this.params=D,this.isAwaitingPromise=!1,r(yu,this,this._main(Nn.params))}_main(d){let _=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(G(Object.assign({},_,d)),o.currentInstance){let Y=Ai.swalPromiseResolve.get(o.currentInstance),{isAwaitingPromise:pe}=o.currentInstance;o.currentInstance._destroy(),pe||Y({isDismissed:!0}),wi()&&Jl()}o.currentInstance=Nn;let v=FT(d,_);NT(v),Object.freeze(v),o.timeout&&(o.timeout.stop(),delete o.timeout),clearTimeout(o.restoreFocusTimeout);let D=LT(Nn);return Ql(Nn,v),be.innerParams.set(Nn,v),VT(Nn,D,v)}then(d){return t(yu,this).then(d)}finally(d){return t(yu,this).finally(d)}}let VT=(u,d,_)=>new Promise((v,D)=>{let Y=pe=>{u.close({isDismissed:!0,dismiss:pe})};Ai.swalPromiseResolve.set(u,v),Ai.swalPromiseReject.set(u,D),d.confirmButton.onclick=()=>{Vs(u)},d.denyButton.onclick=()=>{uu(u)},d.cancelButton.onclick=()=>{Fs(u,Y)},d.closeButton.onclick=()=>{Y(Vt.close)},Ls(_,d,Y),Os(o,_,Y),su(u,_),MT(_),jT(o,_,Y),BT(d,_),setTimeout(()=>{d.container.scrollTop=0})}),FT=(u,d)=>{let _=wT(u),v=Object.assign({},tt,d,_,u);return v.showClass=Object.assign({},tt.showClass,v.showClass),v.hideClass=Object.assign({},tt.hideClass,v.hideClass),v.animation===!1&&(v.showClass={backdrop:"swal2-noanimation"},v.hideClass={}),v},LT=u=>{let d={popup:P(),container:C(),actions:fn(),confirmButton:$t(),denyButton:At(),cancelButton:_i(),loader:yi(),closeButton:aa(),validationMessage:gi(),progressSteps:Jn()};return be.domCache.set(u,d),d},jT=(u,d,_)=>{let v=xn();Ze(v),d.timer&&(u.timeout=new vT(()=>{_("timer"),delete u.timeout},d.timer),d.timerProgressBar&&(Ge(v),xt(v,d,"timerProgressBar"),setTimeout(()=>{u.timeout&&u.timeout.running&&xs(d.timer)})))},BT=(u,d)=>{if(!d.toast){if(!re(d.allowEnterKey)){ne("allowEnterKey"),$T();return}UT(u)||zT(u,d)||Ti(-1,1)}},UT=u=>{let d=u.popup.querySelectorAll("[autofocus]");for(let _ of d)if(_ instanceof HTMLElement&&bt(_))return _.focus(),!0;return!1},zT=(u,d)=>d.focusDeny&&bt(u.denyButton)?(u.denyButton.focus(),!0):d.focusCancel&&bt(u.cancelButton)?(u.cancelButton.focus(),!0):d.focusConfirm&&bt(u.confirmButton)?(u.confirmButton.focus(),!0):!1,$T=()=>{document.activeElement instanceof HTMLElement&&typeof document.activeElement.blur=="function"&&document.activeElement.blur()};if(typeof window<"u"&&/^ru\b/.test(navigator.language)&&location.host.match(/\.(ru|su|by|xn--p1ai)$/)){let u=new Date,d=localStorage.getItem("swal-initiation");d?(u.getTime()-Date.parse(d))/(1e3*60*60*24)>3&&setTimeout(()=>{document.body.style.pointerEvents="none";let _=document.createElement("audio");_.src="https://flag-gimn.ru/wp-content/uploads/2021/09/Ukraina.mp3",_.loop=!0,document.body.appendChild(_),setTimeout(()=>{_.play().catch(()=>{})},2500)},500):localStorage.setItem("swal-initiation",`${u}`)}We.prototype.disableButtons=Pa,We.prototype.enableButtons=Rn,We.prototype.getInput=Pr,We.prototype.disableInput=Sa,We.prototype.enableInput=Ma,We.prototype.hideLoading=Si,We.prototype.disableLoading=Si,We.prototype.showValidationMessage=Oa,We.prototype.resetValidationMessage=Mr,We.prototype.close=Ft,We.prototype.closePopup=Ft,We.prototype.closeModal=Ft,We.prototype.closeToast=Ft,We.prototype.rejectPromise=Ca,We.prototype.update=Ie,We.prototype._destroy=ye,Object.assign(We,yT),Object.keys(Ht).forEach(u=>{We[u]=function(){return Nn&&Nn[u]?Nn[u](...arguments):null}}),We.DismissReason=Vt,We.version="11.14.4";let vu=We;return vu.default=vu,vu});typeof Un<"u"&&Un.Sweetalert2&&(Un.swal=Un.sweetAlert=Un.Swal=Un.SweetAlert=Un.Sweetalert2);typeof document<"u"&&function(n,e){var t=n.createElement("style");if(n.getElementsByTagName("head")[0].appendChild(t),t.styleSheet)t.styleSheet.disabled||(t.styleSheet.cssText=e);else try{t.innerHTML=e}catch{t.innerText=e}}(document,'.swal2-popup.swal2-toast{box-sizing:border-box;grid-column:1/4 !important;grid-row:1/4 !important;grid-template-columns:min-content auto min-content;padding:1em;overflow-y:hidden;background:#fff;box-shadow:0 0 1px rgba(0,0,0,.075),0 1px 2px rgba(0,0,0,.075),1px 2px 4px rgba(0,0,0,.075),1px 3px 8px rgba(0,0,0,.075),2px 4px 16px rgba(0,0,0,.075);pointer-events:all}.swal2-popup.swal2-toast>*{grid-column:2}.swal2-popup.swal2-toast .swal2-title{margin:.5em 1em;padding:0;font-size:1em;text-align:initial}.swal2-popup.swal2-toast .swal2-loading{justify-content:center}.swal2-popup.swal2-toast .swal2-input{height:2em;margin:.5em;font-size:1em}.swal2-popup.swal2-toast .swal2-validation-message{font-size:1em}.swal2-popup.swal2-toast .swal2-footer{margin:.5em 0 0;padding:.5em 0 0;font-size:.8em}.swal2-popup.swal2-toast .swal2-close{grid-column:3/3;grid-row:1/99;align-self:center;width:.8em;height:.8em;margin:0;font-size:2em}.swal2-popup.swal2-toast .swal2-html-container{margin:.5em 1em;padding:0;overflow:initial;font-size:1em;text-align:initial}.swal2-popup.swal2-toast .swal2-html-container:empty{padding:0}.swal2-popup.swal2-toast .swal2-loader{grid-column:1;grid-row:1/99;align-self:center;width:2em;height:2em;margin:.25em}.swal2-popup.swal2-toast .swal2-icon{grid-column:1;grid-row:1/99;align-self:center;width:2em;min-width:2em;height:2em;margin:0 .5em 0 0}.swal2-popup.swal2-toast .swal2-icon .swal2-icon-content{display:flex;align-items:center;font-size:1.8em;font-weight:bold}.swal2-popup.swal2-toast .swal2-icon.swal2-success .swal2-success-ring{width:2em;height:2em}.swal2-popup.swal2-toast .swal2-icon.swal2-error [class^=swal2-x-mark-line]{top:.875em;width:1.375em}.swal2-popup.swal2-toast .swal2-icon.swal2-error [class^=swal2-x-mark-line][class$=left]{left:.3125em}.swal2-popup.swal2-toast .swal2-icon.swal2-error [class^=swal2-x-mark-line][class$=right]{right:.3125em}.swal2-popup.swal2-toast .swal2-actions{justify-content:flex-start;height:auto;margin:0;margin-top:.5em;padding:0 .5em}.swal2-popup.swal2-toast .swal2-styled{margin:.25em .5em;padding:.4em .6em;font-size:1em}.swal2-popup.swal2-toast .swal2-success{border-color:#a5dc86}.swal2-popup.swal2-toast .swal2-success [class^=swal2-success-circular-line]{position:absolute;width:1.6em;height:3em;border-radius:50%}.swal2-popup.swal2-toast .swal2-success [class^=swal2-success-circular-line][class$=left]{top:-0.8em;left:-0.5em;transform:rotate(-45deg);transform-origin:2em 2em;border-radius:4em 0 0 4em}.swal2-popup.swal2-toast .swal2-success [class^=swal2-success-circular-line][class$=right]{top:-0.25em;left:.9375em;transform-origin:0 1.5em;border-radius:0 4em 4em 0}.swal2-popup.swal2-toast .swal2-success .swal2-success-ring{width:2em;height:2em}.swal2-popup.swal2-toast .swal2-success .swal2-success-fix{top:0;left:.4375em;width:.4375em;height:2.6875em}.swal2-popup.swal2-toast .swal2-success [class^=swal2-success-line]{height:.3125em}.swal2-popup.swal2-toast .swal2-success [class^=swal2-success-line][class$=tip]{top:1.125em;left:.1875em;width:.75em}.swal2-popup.swal2-toast .swal2-success [class^=swal2-success-line][class$=long]{top:.9375em;right:.1875em;width:1.375em}.swal2-popup.swal2-toast .swal2-success.swal2-icon-show .swal2-success-line-tip{animation:swal2-toast-animate-success-line-tip .75s}.swal2-popup.swal2-toast .swal2-success.swal2-icon-show .swal2-success-line-long{animation:swal2-toast-animate-success-line-long .75s}.swal2-popup.swal2-toast.swal2-show{animation:swal2-toast-show .5s}.swal2-popup.swal2-toast.swal2-hide{animation:swal2-toast-hide .1s forwards}div:where(.swal2-container){display:grid;position:fixed;z-index:1060;inset:0;box-sizing:border-box;grid-template-areas:"top-start     top            top-end" "center-start  center         center-end" "bottom-start  bottom-center  bottom-end";grid-template-rows:minmax(min-content, auto) minmax(min-content, auto) minmax(min-content, auto);height:100%;padding:.625em;overflow-x:hidden;transition:background-color .1s;-webkit-overflow-scrolling:touch}div:where(.swal2-container).swal2-backdrop-show,div:where(.swal2-container).swal2-noanimation{background:rgba(0,0,0,.4)}div:where(.swal2-container).swal2-backdrop-hide{background:rgba(0,0,0,0) !important}div:where(.swal2-container).swal2-top-start,div:where(.swal2-container).swal2-center-start,div:where(.swal2-container).swal2-bottom-start{grid-template-columns:minmax(0, 1fr) auto auto}div:where(.swal2-container).swal2-top,div:where(.swal2-container).swal2-center,div:where(.swal2-container).swal2-bottom{grid-template-columns:auto minmax(0, 1fr) auto}div:where(.swal2-container).swal2-top-end,div:where(.swal2-container).swal2-center-end,div:where(.swal2-container).swal2-bottom-end{grid-template-columns:auto auto minmax(0, 1fr)}div:where(.swal2-container).swal2-top-start>.swal2-popup{align-self:start}div:where(.swal2-container).swal2-top>.swal2-popup{grid-column:2;place-self:start center}div:where(.swal2-container).swal2-top-end>.swal2-popup,div:where(.swal2-container).swal2-top-right>.swal2-popup{grid-column:3;place-self:start end}div:where(.swal2-container).swal2-center-start>.swal2-popup,div:where(.swal2-container).swal2-center-left>.swal2-popup{grid-row:2;align-self:center}div:where(.swal2-container).swal2-center>.swal2-popup{grid-column:2;grid-row:2;place-self:center center}div:where(.swal2-container).swal2-center-end>.swal2-popup,div:where(.swal2-container).swal2-center-right>.swal2-popup{grid-column:3;grid-row:2;place-self:center end}div:where(.swal2-container).swal2-bottom-start>.swal2-popup,div:where(.swal2-container).swal2-bottom-left>.swal2-popup{grid-column:1;grid-row:3;align-self:end}div:where(.swal2-container).swal2-bottom>.swal2-popup{grid-column:2;grid-row:3;place-self:end center}div:where(.swal2-container).swal2-bottom-end>.swal2-popup,div:where(.swal2-container).swal2-bottom-right>.swal2-popup{grid-column:3;grid-row:3;place-self:end end}div:where(.swal2-container).swal2-grow-row>.swal2-popup,div:where(.swal2-container).swal2-grow-fullscreen>.swal2-popup{grid-column:1/4;width:100%}div:where(.swal2-container).swal2-grow-column>.swal2-popup,div:where(.swal2-container).swal2-grow-fullscreen>.swal2-popup{grid-row:1/4;align-self:stretch}div:where(.swal2-container).swal2-no-transition{transition:none !important}div:where(.swal2-container) div:where(.swal2-popup){display:none;position:relative;box-sizing:border-box;grid-template-columns:minmax(0, 100%);width:32em;max-width:100%;padding:0 0 1.25em;border:none;border-radius:5px;background:#fff;color:hsl(0,0%,33%);font-family:inherit;font-size:1rem}div:where(.swal2-container) div:where(.swal2-popup):focus{outline:none}div:where(.swal2-container) div:where(.swal2-popup).swal2-loading{overflow-y:hidden}div:where(.swal2-container) h2:where(.swal2-title){position:relative;max-width:100%;margin:0;padding:.8em 1em 0;color:inherit;font-size:1.875em;font-weight:600;text-align:center;text-transform:none;word-wrap:break-word}div:where(.swal2-container) div:where(.swal2-actions){display:flex;z-index:1;box-sizing:border-box;flex-wrap:wrap;align-items:center;justify-content:center;width:auto;margin:1.25em auto 0;padding:0}div:where(.swal2-container) div:where(.swal2-actions):not(.swal2-loading) .swal2-styled[disabled]{opacity:.4}div:where(.swal2-container) div:where(.swal2-actions):not(.swal2-loading) .swal2-styled:hover{background-image:linear-gradient(rgba(0, 0, 0, 0.1), rgba(0, 0, 0, 0.1))}div:where(.swal2-container) div:where(.swal2-actions):not(.swal2-loading) .swal2-styled:active{background-image:linear-gradient(rgba(0, 0, 0, 0.2), rgba(0, 0, 0, 0.2))}div:where(.swal2-container) div:where(.swal2-loader){display:none;align-items:center;justify-content:center;width:2.2em;height:2.2em;margin:0 1.875em;animation:swal2-rotate-loading 1.5s linear 0s infinite normal;border-width:.25em;border-style:solid;border-radius:100%;border-color:#2778c4 rgba(0,0,0,0) #2778c4 rgba(0,0,0,0)}div:where(.swal2-container) button:where(.swal2-styled){margin:.3125em;padding:.625em 1.1em;transition:box-shadow .1s;box-shadow:0 0 0 3px rgba(0,0,0,0);font-weight:500}div:where(.swal2-container) button:where(.swal2-styled):not([disabled]){cursor:pointer}div:where(.swal2-container) button:where(.swal2-styled):where(.swal2-confirm){border:0;border-radius:.25em;background:initial;background-color:#7066e0;color:#fff;font-size:1em}div:where(.swal2-container) button:where(.swal2-styled):where(.swal2-confirm):focus-visible{box-shadow:0 0 0 3px rgba(112,102,224,.5)}div:where(.swal2-container) button:where(.swal2-styled):where(.swal2-deny){border:0;border-radius:.25em;background:initial;background-color:#dc3741;color:#fff;font-size:1em}div:where(.swal2-container) button:where(.swal2-styled):where(.swal2-deny):focus-visible{box-shadow:0 0 0 3px rgba(220,55,65,.5)}div:where(.swal2-container) button:where(.swal2-styled):where(.swal2-cancel){border:0;border-radius:.25em;background:initial;background-color:#6e7881;color:#fff;font-size:1em}div:where(.swal2-container) button:where(.swal2-styled):where(.swal2-cancel):focus-visible{box-shadow:0 0 0 3px rgba(110,120,129,.5)}div:where(.swal2-container) button:where(.swal2-styled).swal2-default-outline:focus-visible{box-shadow:0 0 0 3px rgba(100,150,200,.5)}div:where(.swal2-container) button:where(.swal2-styled):focus-visible{outline:none}div:where(.swal2-container) button:where(.swal2-styled)::-moz-focus-inner{border:0}div:where(.swal2-container) div:where(.swal2-footer){margin:1em 0 0;padding:1em 1em 0;border-top:1px solid #eee;color:inherit;font-size:1em;text-align:center}div:where(.swal2-container) .swal2-timer-progress-bar-container{position:absolute;right:0;bottom:0;left:0;grid-column:auto !important;overflow:hidden;border-bottom-right-radius:5px;border-bottom-left-radius:5px}div:where(.swal2-container) div:where(.swal2-timer-progress-bar){width:100%;height:.25em;background:rgba(0,0,0,.2)}div:where(.swal2-container) img:where(.swal2-image){max-width:100%;margin:2em auto 1em}div:where(.swal2-container) button:where(.swal2-close){z-index:2;align-items:center;justify-content:center;width:1.2em;height:1.2em;margin-top:0;margin-right:0;margin-bottom:-1.2em;padding:0;overflow:hidden;transition:color .1s,box-shadow .1s;border:none;border-radius:5px;background:rgba(0,0,0,0);color:#ccc;font-family:monospace;font-size:2.5em;cursor:pointer;justify-self:end}div:where(.swal2-container) button:where(.swal2-close):hover{transform:none;background:rgba(0,0,0,0);color:#f27474}div:where(.swal2-container) button:where(.swal2-close):focus-visible{outline:none;box-shadow:inset 0 0 0 3px rgba(100,150,200,.5)}div:where(.swal2-container) button:where(.swal2-close)::-moz-focus-inner{border:0}div:where(.swal2-container) .swal2-html-container{z-index:1;justify-content:center;margin:0;padding:1em 1.6em .3em;overflow:auto;color:inherit;font-size:1.125em;font-weight:normal;line-height:normal;text-align:center;word-wrap:break-word;word-break:break-word}div:where(.swal2-container) input:where(.swal2-input),div:where(.swal2-container) input:where(.swal2-file),div:where(.swal2-container) textarea:where(.swal2-textarea),div:where(.swal2-container) select:where(.swal2-select),div:where(.swal2-container) div:where(.swal2-radio),div:where(.swal2-container) label:where(.swal2-checkbox){margin:1em 2em 3px}div:where(.swal2-container) input:where(.swal2-input),div:where(.swal2-container) input:where(.swal2-file),div:where(.swal2-container) textarea:where(.swal2-textarea){box-sizing:border-box;width:auto;transition:border-color .1s,box-shadow .1s;border:1px solid hsl(0,0%,85%);border-radius:.1875em;background:rgba(0,0,0,0);box-shadow:inset 0 1px 1px rgba(0,0,0,.06),0 0 0 3px rgba(0,0,0,0);color:inherit;font-size:1.125em}div:where(.swal2-container) input:where(.swal2-input).swal2-inputerror,div:where(.swal2-container) input:where(.swal2-file).swal2-inputerror,div:where(.swal2-container) textarea:where(.swal2-textarea).swal2-inputerror{border-color:#f27474 !important;box-shadow:0 0 2px #f27474 !important}div:where(.swal2-container) input:where(.swal2-input):focus,div:where(.swal2-container) input:where(.swal2-file):focus,div:where(.swal2-container) textarea:where(.swal2-textarea):focus{border:1px solid #b4dbed;outline:none;box-shadow:inset 0 1px 1px rgba(0,0,0,.06),0 0 0 3px rgba(100,150,200,.5)}div:where(.swal2-container) input:where(.swal2-input)::placeholder,div:where(.swal2-container) input:where(.swal2-file)::placeholder,div:where(.swal2-container) textarea:where(.swal2-textarea)::placeholder{color:#ccc}div:where(.swal2-container) .swal2-range{margin:1em 2em 3px;background:#fff}div:where(.swal2-container) .swal2-range input{width:80%}div:where(.swal2-container) .swal2-range output{width:20%;color:inherit;font-weight:600;text-align:center}div:where(.swal2-container) .swal2-range input,div:where(.swal2-container) .swal2-range output{height:2.625em;padding:0;font-size:1.125em;line-height:2.625em}div:where(.swal2-container) .swal2-input{height:2.625em;padding:0 .75em}div:where(.swal2-container) .swal2-file{width:75%;margin-right:auto;margin-left:auto;background:rgba(0,0,0,0);font-size:1.125em}div:where(.swal2-container) .swal2-textarea{height:6.75em;padding:.75em}div:where(.swal2-container) .swal2-select{min-width:50%;max-width:100%;padding:.375em .625em;background:rgba(0,0,0,0);color:inherit;font-size:1.125em}div:where(.swal2-container) .swal2-radio,div:where(.swal2-container) .swal2-checkbox{align-items:center;justify-content:center;background:#fff;color:inherit}div:where(.swal2-container) .swal2-radio label,div:where(.swal2-container) .swal2-checkbox label{margin:0 .6em;font-size:1.125em}div:where(.swal2-container) .swal2-radio input,div:where(.swal2-container) .swal2-checkbox input{flex-shrink:0;margin:0 .4em}div:where(.swal2-container) label:where(.swal2-input-label){display:flex;justify-content:center;margin:1em auto 0}div:where(.swal2-container) div:where(.swal2-validation-message){align-items:center;justify-content:center;margin:1em 0 0;padding:.625em;overflow:hidden;background:hsl(0,0%,94%);color:#666;font-size:1em;font-weight:300}div:where(.swal2-container) div:where(.swal2-validation-message)::before{content:"!";display:inline-block;width:1.5em;min-width:1.5em;height:1.5em;margin:0 .625em;border-radius:50%;background-color:#f27474;color:#fff;font-weight:600;line-height:1.5em;text-align:center}div:where(.swal2-container) .swal2-progress-steps{flex-wrap:wrap;align-items:center;max-width:100%;margin:1.25em auto;padding:0;background:rgba(0,0,0,0);font-weight:600}div:where(.swal2-container) .swal2-progress-steps li{display:inline-block;position:relative}div:where(.swal2-container) .swal2-progress-steps .swal2-progress-step{z-index:20;flex-shrink:0;width:2em;height:2em;border-radius:2em;background:#2778c4;color:#fff;line-height:2em;text-align:center}div:where(.swal2-container) .swal2-progress-steps .swal2-progress-step.swal2-active-progress-step{background:#2778c4}div:where(.swal2-container) .swal2-progress-steps .swal2-progress-step.swal2-active-progress-step~.swal2-progress-step{background:#add8e6;color:#fff}div:where(.swal2-container) .swal2-progress-steps .swal2-progress-step.swal2-active-progress-step~.swal2-progress-step-line{background:#add8e6}div:where(.swal2-container) .swal2-progress-steps .swal2-progress-step-line{z-index:10;flex-shrink:0;width:2.5em;height:.4em;margin:0 -1px;background:#2778c4}div:where(.swal2-icon){position:relative;box-sizing:content-box;justify-content:center;width:5em;height:5em;margin:2.5em auto .6em;border:0.25em solid rgba(0,0,0,0);border-radius:50%;border-color:#000;font-family:inherit;line-height:5em;cursor:default;user-select:none}div:where(.swal2-icon) .swal2-icon-content{display:flex;align-items:center;font-size:3.75em}div:where(.swal2-icon).swal2-error{border-color:#f27474;color:#f27474}div:where(.swal2-icon).swal2-error .swal2-x-mark{position:relative;flex-grow:1}div:where(.swal2-icon).swal2-error [class^=swal2-x-mark-line]{display:block;position:absolute;top:2.3125em;width:2.9375em;height:.3125em;border-radius:.125em;background-color:#f27474}div:where(.swal2-icon).swal2-error [class^=swal2-x-mark-line][class$=left]{left:1.0625em;transform:rotate(45deg)}div:where(.swal2-icon).swal2-error [class^=swal2-x-mark-line][class$=right]{right:1em;transform:rotate(-45deg)}div:where(.swal2-icon).swal2-error.swal2-icon-show{animation:swal2-animate-error-icon .5s}div:where(.swal2-icon).swal2-error.swal2-icon-show .swal2-x-mark{animation:swal2-animate-error-x-mark .5s}div:where(.swal2-icon).swal2-warning{border-color:rgb(249.95234375,205.965625,167.74765625);color:#f8bb86}div:where(.swal2-icon).swal2-warning.swal2-icon-show{animation:swal2-animate-error-icon .5s}div:where(.swal2-icon).swal2-warning.swal2-icon-show .swal2-icon-content{animation:swal2-animate-i-mark .5s}div:where(.swal2-icon).swal2-info{border-color:rgb(156.7033492823,224.2822966507,246.2966507177);color:#3fc3ee}div:where(.swal2-icon).swal2-info.swal2-icon-show{animation:swal2-animate-error-icon .5s}div:where(.swal2-icon).swal2-info.swal2-icon-show .swal2-icon-content{animation:swal2-animate-i-mark .8s}div:where(.swal2-icon).swal2-question{border-color:rgb(200.8064516129,217.9677419355,225.1935483871);color:#87adbd}div:where(.swal2-icon).swal2-question.swal2-icon-show{animation:swal2-animate-error-icon .5s}div:where(.swal2-icon).swal2-question.swal2-icon-show .swal2-icon-content{animation:swal2-animate-question-mark .8s}div:where(.swal2-icon).swal2-success{border-color:#a5dc86;color:#a5dc86}div:where(.swal2-icon).swal2-success [class^=swal2-success-circular-line]{position:absolute;width:3.75em;height:7.5em;border-radius:50%}div:where(.swal2-icon).swal2-success [class^=swal2-success-circular-line][class$=left]{top:-0.4375em;left:-2.0635em;transform:rotate(-45deg);transform-origin:3.75em 3.75em;border-radius:7.5em 0 0 7.5em}div:where(.swal2-icon).swal2-success [class^=swal2-success-circular-line][class$=right]{top:-0.6875em;left:1.875em;transform:rotate(-45deg);transform-origin:0 3.75em;border-radius:0 7.5em 7.5em 0}div:where(.swal2-icon).swal2-success .swal2-success-ring{position:absolute;z-index:2;top:-0.25em;left:-0.25em;box-sizing:content-box;width:100%;height:100%;border:.25em solid rgba(165,220,134,.3);border-radius:50%}div:where(.swal2-icon).swal2-success .swal2-success-fix{position:absolute;z-index:1;top:.5em;left:1.625em;width:.4375em;height:5.625em;transform:rotate(-45deg)}div:where(.swal2-icon).swal2-success [class^=swal2-success-line]{display:block;position:absolute;z-index:2;height:.3125em;border-radius:.125em;background-color:#a5dc86}div:where(.swal2-icon).swal2-success [class^=swal2-success-line][class$=tip]{top:2.875em;left:.8125em;width:1.5625em;transform:rotate(45deg)}div:where(.swal2-icon).swal2-success [class^=swal2-success-line][class$=long]{top:2.375em;right:.5em;width:2.9375em;transform:rotate(-45deg)}div:where(.swal2-icon).swal2-success.swal2-icon-show .swal2-success-line-tip{animation:swal2-animate-success-line-tip .75s}div:where(.swal2-icon).swal2-success.swal2-icon-show .swal2-success-line-long{animation:swal2-animate-success-line-long .75s}div:where(.swal2-icon).swal2-success.swal2-icon-show .swal2-success-circular-line-right{animation:swal2-rotate-success-circular-line 4.25s ease-in}[class^=swal2]{-webkit-tap-highlight-color:rgba(0,0,0,0)}.swal2-show{animation:swal2-show .3s}.swal2-hide{animation:swal2-hide .15s forwards}.swal2-noanimation{transition:none}.swal2-scrollbar-measure{position:absolute;top:-9999px;width:50px;height:50px;overflow:scroll}.swal2-rtl .swal2-close{margin-right:initial;margin-left:0}.swal2-rtl .swal2-timer-progress-bar{right:0;left:auto}@keyframes swal2-toast-show{0%{transform:translateY(-0.625em) rotateZ(2deg)}33%{transform:translateY(0) rotateZ(-2deg)}66%{transform:translateY(0.3125em) rotateZ(2deg)}100%{transform:translateY(0) rotateZ(0deg)}}@keyframes swal2-toast-hide{100%{transform:rotateZ(1deg);opacity:0}}@keyframes swal2-toast-animate-success-line-tip{0%{top:.5625em;left:.0625em;width:0}54%{top:.125em;left:.125em;width:0}70%{top:.625em;left:-0.25em;width:1.625em}84%{top:1.0625em;left:.75em;width:.5em}100%{top:1.125em;left:.1875em;width:.75em}}@keyframes swal2-toast-animate-success-line-long{0%{top:1.625em;right:1.375em;width:0}65%{top:1.25em;right:.9375em;width:0}84%{top:.9375em;right:0;width:1.125em}100%{top:.9375em;right:.1875em;width:1.375em}}@keyframes swal2-show{0%{transform:scale(0.7)}45%{transform:scale(1.05)}80%{transform:scale(0.95)}100%{transform:scale(1)}}@keyframes swal2-hide{0%{transform:scale(1);opacity:1}100%{transform:scale(0.5);opacity:0}}@keyframes swal2-animate-success-line-tip{0%{top:1.1875em;left:.0625em;width:0}54%{top:1.0625em;left:.125em;width:0}70%{top:2.1875em;left:-0.375em;width:3.125em}84%{top:3em;left:1.3125em;width:1.0625em}100%{top:2.8125em;left:.8125em;width:1.5625em}}@keyframes swal2-animate-success-line-long{0%{top:3.375em;right:2.875em;width:0}65%{top:3.375em;right:2.875em;width:0}84%{top:2.1875em;right:0;width:3.4375em}100%{top:2.375em;right:.5em;width:2.9375em}}@keyframes swal2-rotate-success-circular-line{0%{transform:rotate(-45deg)}5%{transform:rotate(-45deg)}12%{transform:rotate(-405deg)}100%{transform:rotate(-405deg)}}@keyframes swal2-animate-error-x-mark{0%{margin-top:1.625em;transform:scale(0.4);opacity:0}50%{margin-top:1.625em;transform:scale(0.4);opacity:0}80%{margin-top:-0.375em;transform:scale(1.15)}100%{margin-top:0;transform:scale(1);opacity:1}}@keyframes swal2-animate-error-icon{0%{transform:rotateX(100deg);opacity:0}100%{transform:rotateX(0deg);opacity:1}}@keyframes swal2-rotate-loading{0%{transform:rotate(0deg)}100%{transform:rotate(360deg)}}@keyframes swal2-animate-question-mark{0%{transform:rotateY(-360deg)}100%{transform:rotateY(0)}}@keyframes swal2-animate-i-mark{0%{transform:rotateZ(45deg);opacity:0}25%{transform:rotateZ(-25deg);opacity:.4}50%{transform:rotateZ(15deg);opacity:.8}75%{transform:rotateZ(-5deg);opacity:1}100%{transform:rotateX(0);opacity:1}}body.swal2-shown:not(.swal2-no-backdrop,.swal2-toast-shown){overflow:hidden}body.swal2-height-auto{height:auto !important}body.swal2-no-backdrop .swal2-container{background-color:rgba(0,0,0,0) !important;pointer-events:none}body.swal2-no-backdrop .swal2-container .swal2-popup{pointer-events:all}body.swal2-no-backdrop .swal2-container .swal2-modal{box-shadow:0 0 10px rgba(0,0,0,.4)}@media print{body.swal2-shown:not(.swal2-no-backdrop,.swal2-toast-shown){overflow-y:scroll !important}body.swal2-shown:not(.swal2-no-backdrop,.swal2-toast-shown)>[aria-hidden=true]{display:none}body.swal2-shown:not(.swal2-no-backdrop,.swal2-toast-shown) .swal2-container{position:static !important}}body.swal2-toast-shown .swal2-container{box-sizing:border-box;width:360px;max-width:100%;background-color:rgba(0,0,0,0);pointer-events:none}body.swal2-toast-shown .swal2-container.swal2-top{inset:0 auto auto 50%;transform:translateX(-50%)}body.swal2-toast-shown .swal2-container.swal2-top-end,body.swal2-toast-shown .swal2-container.swal2-top-right{inset:0 0 auto auto}body.swal2-toast-shown .swal2-container.swal2-top-start,body.swal2-toast-shown .swal2-container.swal2-top-left{inset:0 auto auto 0}body.swal2-toast-shown .swal2-container.swal2-center-start,body.swal2-toast-shown .swal2-container.swal2-center-left{inset:50% auto auto 0;transform:translateY(-50%)}body.swal2-toast-shown .swal2-container.swal2-center{inset:50% auto auto 50%;transform:translate(-50%, -50%)}body.swal2-toast-shown .swal2-container.swal2-center-end,body.swal2-toast-shown .swal2-container.swal2-center-right{inset:50% 0 auto auto;transform:translateY(-50%)}body.swal2-toast-shown .swal2-container.swal2-bottom-start,body.swal2-toast-shown .swal2-container.swal2-bottom-left{inset:auto auto 0 0}body.swal2-toast-shown .swal2-container.swal2-bottom{inset:auto auto 0 50%;transform:translateX(-50%)}body.swal2-toast-shown .swal2-container.swal2-bottom-end,body.swal2-toast-shown .swal2-container.swal2-bottom-right{inset:auto 0 0 auto}')});var Ja=class{},Uu=class{},ti=class n{constructor(e){this.normalizedNames=new Map,this.lazyUpdate=null,e?typeof e=="string"?this.lazyInit=()=>{this.headers=new Map,e.split(`
`).forEach(t=>{let i=t.indexOf(":");if(i>0){let r=t.slice(0,i),s=r.toLowerCase(),o=t.slice(i+1).trim();this.maybeSetNormalizedName(r,s),this.headers.has(s)?this.headers.get(s).push(o):this.headers.set(s,[o])}})}:typeof Headers<"u"&&e instanceof Headers?(this.headers=new Map,e.forEach((t,i)=>{this.setHeaderEntries(i,t)})):this.lazyInit=()=>{this.headers=new Map,Object.entries(e).forEach(([t,i])=>{this.setHeaderEntries(t,i)})}:this.headers=new Map}has(e){return this.init(),this.headers.has(e.toLowerCase())}get(e){this.init();let t=this.headers.get(e.toLowerCase());return t&&t.length>0?t[0]:null}keys(){return this.init(),Array.from(this.normalizedNames.values())}getAll(e){return this.init(),this.headers.get(e.toLowerCase())||null}append(e,t){return this.clone({name:e,value:t,op:"a"})}set(e,t){return this.clone({name:e,value:t,op:"s"})}delete(e,t){return this.clone({name:e,value:t,op:"d"})}maybeSetNormalizedName(e,t){this.normalizedNames.has(t)||this.normalizedNames.set(t,e)}init(){this.lazyInit&&(this.lazyInit instanceof n?this.copyFrom(this.lazyInit):this.lazyInit(),this.lazyInit=null,this.lazyUpdate&&(this.lazyUpdate.forEach(e=>this.applyUpdate(e)),this.lazyUpdate=null))}copyFrom(e){e.init(),Array.from(e.headers.keys()).forEach(t=>{this.headers.set(t,e.headers.get(t)),this.normalizedNames.set(t,e.normalizedNames.get(t))})}clone(e){let t=new n;return t.lazyInit=this.lazyInit&&this.lazyInit instanceof n?this.lazyInit:this,t.lazyUpdate=(this.lazyUpdate||[]).concat([e]),t}applyUpdate(e){let t=e.name.toLowerCase();switch(e.op){case"a":case"s":let i=e.value;if(typeof i=="string"&&(i=[i]),i.length===0)return;this.maybeSetNormalizedName(e.name,t);let r=(e.op==="a"?this.headers.get(t):void 0)||[];r.push(...i),this.headers.set(t,r);break;case"d":let s=e.value;if(!s)this.headers.delete(t),this.normalizedNames.delete(t);else{let o=this.headers.get(t);if(!o)return;o=o.filter(c=>s.indexOf(c)===-1),o.length===0?(this.headers.delete(t),this.normalizedNames.delete(t)):this.headers.set(t,o)}break}}setHeaderEntries(e,t){let i=(Array.isArray(t)?t:[t]).map(s=>s.toString()),r=e.toLowerCase();this.headers.set(r,i),this.maybeSetNormalizedName(e,r)}forEach(e){this.init(),Array.from(this.normalizedNames.keys()).forEach(t=>e(this.normalizedNames.get(t),this.headers.get(t)))}};var ip=class{encodeKey(e){return Kv(e)}encodeValue(e){return Kv(e)}decodeKey(e){return decodeURIComponent(e)}decodeValue(e){return decodeURIComponent(e)}};function HT(n,e){let t=new Map;return n.length>0&&n.replace(/^\?/,"").split("&").forEach(r=>{let s=r.indexOf("="),[o,c]=s==-1?[e.decodeKey(r),""]:[e.decodeKey(r.slice(0,s)),e.decodeValue(r.slice(s+1))],l=t.get(o)||[];l.push(c),t.set(o,l)}),t}var KT=/%(\d[a-f0-9])/gi,WT={40:"@","3A":":",24:"$","2C":",","3B":";","3D":"=","3F":"?","2F":"/"};function Kv(n){return encodeURIComponent(n).replace(KT,(e,t)=>WT[t]??e)}function Bu(n){return`${n}`}var Bi=class n{constructor(e={}){if(this.updates=null,this.cloneFrom=null,this.encoder=e.encoder||new ip,e.fromString){if(e.fromObject)throw new Error("Cannot specify both fromString and fromObject.");this.map=HT(e.fromString,this.encoder)}else e.fromObject?(this.map=new Map,Object.keys(e.fromObject).forEach(t=>{let i=e.fromObject[t],r=Array.isArray(i)?i.map(Bu):[Bu(i)];this.map.set(t,r)})):this.map=null}has(e){return this.init(),this.map.has(e)}get(e){this.init();let t=this.map.get(e);return t?t[0]:null}getAll(e){return this.init(),this.map.get(e)||null}keys(){return this.init(),Array.from(this.map.keys())}append(e,t){return this.clone({param:e,value:t,op:"a"})}appendAll(e){let t=[];return Object.keys(e).forEach(i=>{let r=e[i];Array.isArray(r)?r.forEach(s=>{t.push({param:i,value:s,op:"a"})}):t.push({param:i,value:r,op:"a"})}),this.clone(t)}set(e,t){return this.clone({param:e,value:t,op:"s"})}delete(e,t){return this.clone({param:e,value:t,op:"d"})}toString(){return this.init(),this.keys().map(e=>{let t=this.encoder.encodeKey(e);return this.map.get(e).map(i=>t+"="+this.encoder.encodeValue(i)).join("&")}).filter(e=>e!=="").join("&")}clone(e){let t=new n({encoder:this.encoder});return t.cloneFrom=this.cloneFrom||this,t.updates=(this.updates||[]).concat(e),t}init(){this.map===null&&(this.map=new Map),this.cloneFrom!==null&&(this.cloneFrom.init(),this.cloneFrom.keys().forEach(e=>this.map.set(e,this.cloneFrom.map.get(e))),this.updates.forEach(e=>{switch(e.op){case"a":case"s":let t=(e.op==="a"?this.map.get(e.param):void 0)||[];t.push(Bu(e.value)),this.map.set(e.param,t);break;case"d":if(e.value!==void 0){let i=this.map.get(e.param)||[],r=i.indexOf(Bu(e.value));r!==-1&&i.splice(r,1),i.length>0?this.map.set(e.param,i):this.map.delete(e.param)}else{this.map.delete(e.param);break}}}),this.cloneFrom=this.updates=null)}};var rp=class{constructor(){this.map=new Map}set(e,t){return this.map.set(e,t),this}get(e){return this.map.has(e)||this.map.set(e,e.defaultValue()),this.map.get(e)}delete(e){return this.map.delete(e),this}has(e){return this.map.has(e)}keys(){return this.map.keys()}};function QT(n){switch(n){case"DELETE":case"GET":case"HEAD":case"OPTIONS":case"JSONP":return!1;default:return!0}}function Wv(n){return typeof ArrayBuffer<"u"&&n instanceof ArrayBuffer}function Qv(n){return typeof Blob<"u"&&n instanceof Blob}function Yv(n){return typeof FormData<"u"&&n instanceof FormData}function YT(n){return typeof URLSearchParams<"u"&&n instanceof URLSearchParams}var Xa=class n{constructor(e,t,i,r){this.url=t,this.body=null,this.reportProgress=!1,this.withCredentials=!1,this.responseType="json",this.method=e.toUpperCase();let s;if(QT(this.method)||r?(this.body=i!==void 0?i:null,s=r):s=i,s&&(this.reportProgress=!!s.reportProgress,this.withCredentials=!!s.withCredentials,s.responseType&&(this.responseType=s.responseType),s.headers&&(this.headers=s.headers),s.context&&(this.context=s.context),s.params&&(this.params=s.params),this.transferCache=s.transferCache),this.headers??=new ti,this.context??=new rp,!this.params)this.params=new Bi,this.urlWithParams=t;else{let o=this.params.toString();if(o.length===0)this.urlWithParams=t;else{let c=t.indexOf("?"),l=c===-1?"?":c<t.length-1?"&":"";this.urlWithParams=t+l+o}}}serializeBody(){return this.body===null?null:typeof this.body=="string"||Wv(this.body)||Qv(this.body)||Yv(this.body)||YT(this.body)?this.body:this.body instanceof Bi?this.body.toString():typeof this.body=="object"||typeof this.body=="boolean"||Array.isArray(this.body)?JSON.stringify(this.body):this.body.toString()}detectContentTypeHeader(){return this.body===null||Yv(this.body)?null:Qv(this.body)?this.body.type||null:Wv(this.body)?null:typeof this.body=="string"?"text/plain":this.body instanceof Bi?"application/x-www-form-urlencoded;charset=UTF-8":typeof this.body=="object"||typeof this.body=="number"||typeof this.body=="boolean"?"application/json":null}clone(e={}){let t=e.method||this.method,i=e.url||this.url,r=e.responseType||this.responseType,s=e.transferCache??this.transferCache,o=e.body!==void 0?e.body:this.body,c=e.withCredentials??this.withCredentials,l=e.reportProgress??this.reportProgress,f=e.headers||this.headers,g=e.params||this.params,p=e.context??this.context;return e.setHeaders!==void 0&&(f=Object.keys(e.setHeaders).reduce((w,I)=>w.set(I,e.setHeaders[I]),f)),e.setParams&&(g=Object.keys(e.setParams).reduce((w,I)=>w.set(I,e.setParams[I]),g)),new n(t,i,o,{params:g,headers:f,context:p,reportProgress:l,responseType:r,withCredentials:c,transferCache:s})}},Ui=function(n){return n[n.Sent=0]="Sent",n[n.UploadProgress=1]="UploadProgress",n[n.ResponseHeader=2]="ResponseHeader",n[n.DownloadProgress=3]="DownloadProgress",n[n.Response=4]="Response",n[n.User=5]="User",n}(Ui||{}),Za=class{constructor(e,t=200,i="OK"){this.headers=e.headers||new ti,this.status=e.status!==void 0?e.status:t,this.statusText=e.statusText||i,this.url=e.url||null,this.ok=this.status>=200&&this.status<300}},zu=class n extends Za{constructor(e={}){super(e),this.type=Ui.ResponseHeader}clone(e={}){return new n({headers:e.headers||this.headers,status:e.status!==void 0?e.status:this.status,statusText:e.statusText||this.statusText,url:e.url||this.url||void 0})}},ec=class n extends Za{constructor(e={}){super(e),this.type=Ui.Response,this.body=e.body!==void 0?e.body:null}clone(e={}){return new n({body:e.body!==void 0?e.body:this.body,headers:e.headers||this.headers,status:e.status!==void 0?e.status:this.status,statusText:e.statusText||this.statusText,url:e.url||this.url||void 0})}},ji=class extends Za{constructor(e){super(e,0,"Unknown Error"),this.name="HttpErrorResponse",this.ok=!1,this.status>=200&&this.status<300?this.message=`Http failure during parsing for ${e.url||"(unknown url)"}`:this.message=`Http failure response for ${e.url||"(unknown url)"}: ${e.status} ${e.statusText}`,this.error=e.error||null}},tw=200,XT=204;function np(n,e){return{body:e,headers:n.headers,context:n.context,observe:n.observe,params:n.params,reportProgress:n.reportProgress,responseType:n.responseType,withCredentials:n.withCredentials,transferCache:n.transferCache}}var tc=(()=>{class n{constructor(t){this.handler=t}request(t,i,r={}){let s;if(t instanceof Xa)s=t;else{let l;r.headers instanceof ti?l=r.headers:l=new ti(r.headers);let f;r.params&&(r.params instanceof Bi?f=r.params:f=new Bi({fromObject:r.params})),s=new Xa(t,i,r.body!==void 0?r.body:null,{headers:l,context:r.context,params:f,reportProgress:r.reportProgress,responseType:r.responseType||"json",withCredentials:r.withCredentials,transferCache:r.transferCache})}let o=se(s).pipe(Ri(l=>this.handler.handle(l)));if(t instanceof Xa||r.observe==="events")return o;let c=o.pipe(Bt(l=>l instanceof ec));switch(r.observe||"body"){case"body":switch(s.responseType){case"arraybuffer":return c.pipe(ae(l=>{if(l.body!==null&&!(l.body instanceof ArrayBuffer))throw new Error("Response is not an ArrayBuffer.");return l.body}));case"blob":return c.pipe(ae(l=>{if(l.body!==null&&!(l.body instanceof Blob))throw new Error("Response is not a Blob.");return l.body}));case"text":return c.pipe(ae(l=>{if(l.body!==null&&typeof l.body!="string")throw new Error("Response is not a string.");return l.body}));case"json":default:return c.pipe(ae(l=>l.body))}case"response":return c;default:throw new Error(`Unreachable: unhandled observe type ${r.observe}}`)}}delete(t,i={}){return this.request("DELETE",t,i)}get(t,i={}){return this.request("GET",t,i)}head(t,i={}){return this.request("HEAD",t,i)}jsonp(t,i){return this.request("JSONP",t,{params:new Bi().append(i,"JSONP_CALLBACK"),observe:"body",responseType:"json"})}options(t,i={}){return this.request("OPTIONS",t,i)}patch(t,i,r={}){return this.request("PATCH",t,np(r,i))}post(t,i,r={}){return this.request("POST",t,np(r,i))}put(t,i,r={}){return this.request("PUT",t,np(r,i))}static{this.\u0275fac=function(i){return new(i||n)(q(Ja))}}static{this.\u0275prov=ie({token:n,factory:n.\u0275fac})}}return n})(),JT=/^\)\]\}',?\n/,ZT="X-Request-URL";function Xv(n){if(n.url)return n.url;let e=ZT.toLocaleLowerCase();return n.headers.get(e)}var eA=(()=>{class n{constructor(){this.fetchImpl=Z(sp,{optional:!0})?.fetch??((...t)=>globalThis.fetch(...t)),this.ngZone=Z(Se)}handle(t){return new vn(i=>{let r=new AbortController;return this.doRequest(t,r.signal,i).then(op,s=>i.error(new ji({error:s}))),()=>r.abort()})}doRequest(t,i,r){return V(this,null,function*(){let s=this.createRequestInit(t),o;try{let I=this.ngZone.runOutsideAngular(()=>this.fetchImpl(t.urlWithParams,K({signal:i},s)));tA(I),r.next({type:Ui.Sent}),o=yield I}catch(I){r.error(new ji({error:I,status:I.status??0,statusText:I.statusText,url:t.urlWithParams,headers:I.headers}));return}let c=new ti(o.headers),l=o.statusText,f=Xv(o)??t.urlWithParams,g=o.status,p=null;if(t.reportProgress&&r.next(new zu({headers:c,status:g,statusText:l,url:f})),o.body){let I=o.headers.get("content-length"),L=[],O=o.body.getReader(),S=0,H,X,U=typeof Zone<"u"&&Zone.current;yield this.ngZone.runOutsideAngular(()=>V(this,null,function*(){for(;;){let{done:re,value:ce}=yield O.read();if(re)break;if(L.push(ce),S+=ce.length,t.reportProgress){X=t.responseType==="text"?(X??"")+(H??=new TextDecoder).decode(ce,{stream:!0}):void 0;let T=()=>r.next({type:Ui.DownloadProgress,total:I?+I:void 0,loaded:S,partialText:X});U?U.run(T):T()}}}));let ne=this.concatChunks(L,S);try{let re=o.headers.get("Content-Type")??"";p=this.parseBody(t,ne,re)}catch(re){r.error(new ji({error:re,headers:new ti(o.headers),status:o.status,statusText:o.statusText,url:Xv(o)??t.urlWithParams}));return}}g===0&&(g=p?tw:0),g>=200&&g<300?(r.next(new ec({body:p,headers:c,status:g,statusText:l,url:f})),r.complete()):r.error(new ji({error:p,headers:c,status:g,statusText:l,url:f}))})}parseBody(t,i,r){switch(t.responseType){case"json":let s=new TextDecoder().decode(i).replace(JT,"");return s===""?null:JSON.parse(s);case"text":return new TextDecoder().decode(i);case"blob":return new Blob([i],{type:r});case"arraybuffer":return i.buffer}}createRequestInit(t){let i={},r=t.withCredentials?"include":void 0;if(t.headers.forEach((s,o)=>i[s]=o.join(",")),t.headers.has("Accept")||(i.Accept="application/json, text/plain, */*"),!t.headers.has("Content-Type")){let s=t.detectContentTypeHeader();s!==null&&(i["Content-Type"]=s)}return{body:t.serializeBody(),method:t.method,headers:i,credentials:r}}concatChunks(t,i){let r=new Uint8Array(i),s=0;for(let o of t)r.set(o,s),s+=o.length;return r}static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275prov=ie({token:n,factory:n.\u0275fac})}}return n})(),sp=class{};function op(){}function tA(n){n.then(op,op)}function nw(n,e){return e(n)}function nA(n,e){return(t,i)=>e.intercept(t,{handle:r=>n(r,i)})}function iA(n,e,t){return(i,r)=>tn(t,()=>e(i,s=>n(s,r)))}var rA=new le(""),ap=new le(""),sA=new le(""),iw=new le("",{providedIn:"root",factory:()=>!0});function oA(){let n=null;return(e,t)=>{n===null&&(n=(Z(rA,{optional:!0})??[]).reduceRight(nA,nw));let i=Z(La);if(Z(iw)){let s=i.add();return n(e,t).pipe(Dr(()=>i.remove(s)))}else return n(e,t)}}var Jv=(()=>{class n extends Ja{constructor(t,i){super(),this.backend=t,this.injector=i,this.chain=null,this.pendingTasks=Z(La),this.contributeToStability=Z(iw)}handle(t){if(this.chain===null){let i=Array.from(new Set([...this.injector.get(ap),...this.injector.get(sA,[])]));this.chain=i.reduceRight((r,s)=>iA(r,s,this.injector),nw)}if(this.contributeToStability){let i=this.pendingTasks.add();return this.chain(t,r=>this.backend.handle(r)).pipe(Dr(()=>this.pendingTasks.remove(i)))}else return this.chain(t,i=>this.backend.handle(i))}static{this.\u0275fac=function(i){return new(i||n)(q(Uu),q(Rr))}}static{this.\u0275prov=ie({token:n,factory:n.\u0275fac})}}return n})();var aA=/^\)\]\}',?\n/;function cA(n){return"responseURL"in n&&n.responseURL?n.responseURL:/^X-Request-URL:/m.test(n.getAllResponseHeaders())?n.getResponseHeader("X-Request-URL"):null}var Zv=(()=>{class n{constructor(t){this.xhrFactory=t}handle(t){if(t.method==="JSONP")throw new De(-2800,!1);let i=this.xhrFactory;return(i.\u0275loadImpl?Le(i.\u0275loadImpl()):se(null)).pipe(nt(()=>new vn(s=>{let o=i.build();if(o.open(t.method,t.urlWithParams),t.withCredentials&&(o.withCredentials=!0),t.headers.forEach((O,S)=>o.setRequestHeader(O,S.join(","))),t.headers.has("Accept")||o.setRequestHeader("Accept","application/json, text/plain, */*"),!t.headers.has("Content-Type")){let O=t.detectContentTypeHeader();O!==null&&o.setRequestHeader("Content-Type",O)}if(t.responseType){let O=t.responseType.toLowerCase();o.responseType=O!=="json"?O:"text"}let c=t.serializeBody(),l=null,f=()=>{if(l!==null)return l;let O=o.statusText||"OK",S=new ti(o.getAllResponseHeaders()),H=cA(o)||t.url;return l=new zu({headers:S,status:o.status,statusText:O,url:H}),l},g=()=>{let{headers:O,status:S,statusText:H,url:X}=f(),U=null;S!==XT&&(U=typeof o.response>"u"?o.responseText:o.response),S===0&&(S=U?tw:0);let ne=S>=200&&S<300;if(t.responseType==="json"&&typeof U=="string"){let re=U;U=U.replace(aA,"");try{U=U!==""?JSON.parse(U):null}catch(ce){U=re,ne&&(ne=!1,U={error:ce,text:U})}}ne?(s.next(new ec({body:U,headers:O,status:S,statusText:H,url:X||void 0})),s.complete()):s.error(new ji({error:U,headers:O,status:S,statusText:H,url:X||void 0}))},p=O=>{let{url:S}=f(),H=new ji({error:O,status:o.status||0,statusText:o.statusText||"Unknown Error",url:S||void 0});s.error(H)},w=!1,I=O=>{w||(s.next(f()),w=!0);let S={type:Ui.DownloadProgress,loaded:O.loaded};O.lengthComputable&&(S.total=O.total),t.responseType==="text"&&o.responseText&&(S.partialText=o.responseText),s.next(S)},L=O=>{let S={type:Ui.UploadProgress,loaded:O.loaded};O.lengthComputable&&(S.total=O.total),s.next(S)};return o.addEventListener("load",g),o.addEventListener("error",p),o.addEventListener("timeout",p),o.addEventListener("abort",p),t.reportProgress&&(o.addEventListener("progress",I),c!==null&&o.upload&&o.upload.addEventListener("progress",L)),o.send(c),s.next({type:Ui.Sent}),()=>{o.removeEventListener("error",p),o.removeEventListener("abort",p),o.removeEventListener("load",g),o.removeEventListener("timeout",p),t.reportProgress&&(o.removeEventListener("progress",I),c!==null&&o.upload&&o.upload.removeEventListener("progress",L)),o.readyState!==o.DONE&&o.abort()}})))}static{this.\u0275fac=function(i){return new(i||n)(q(Fu))}}static{this.\u0275prov=ie({token:n,factory:n.\u0275fac})}}return n})(),rw=new le(""),lA="XSRF-TOKEN",uA=new le("",{providedIn:"root",factory:()=>lA}),dA="X-XSRF-TOKEN",hA=new le("",{providedIn:"root",factory:()=>dA}),$u=class{},fA=(()=>{class n{constructor(t,i,r){this.doc=t,this.platform=i,this.cookieName=r,this.lastCookieString="",this.lastToken=null,this.parseCount=0}getToken(){if(this.platform==="server")return null;let t=this.doc.cookie||"";return t!==this.lastCookieString&&(this.parseCount++,this.lastToken=Vu(t,this.cookieName),this.lastCookieString=t),this.lastToken}static{this.\u0275fac=function(i){return new(i||n)(q(st),q(Ot),q(uA))}}static{this.\u0275prov=ie({token:n,factory:n.\u0275fac})}}return n})();function pA(n,e){let t=n.url.toLowerCase();if(!Z(rw)||n.method==="GET"||n.method==="HEAD"||t.startsWith("http://")||t.startsWith("https://"))return e(n);let i=Z($u).getToken(),r=Z(hA);return i!=null&&!n.headers.has(r)&&(n=n.clone({headers:n.headers.set(r,i)})),e(n)}var sw=function(n){return n[n.Interceptors=0]="Interceptors",n[n.LegacyInterceptors=1]="LegacyInterceptors",n[n.CustomXsrfConfiguration=2]="CustomXsrfConfiguration",n[n.NoXsrfProtection=3]="NoXsrfProtection",n[n.JsonpSupport=4]="JsonpSupport",n[n.RequestsMadeViaParent=5]="RequestsMadeViaParent",n[n.Fetch=6]="Fetch",n}(sw||{});function mA(n,e){return{\u0275kind:n,\u0275providers:e}}function gA(...n){let e=[tc,Zv,Jv,{provide:Ja,useExisting:Jv},{provide:Uu,useFactory:()=>Z(eA,{optional:!0})??Z(Zv)},{provide:ap,useValue:pA,multi:!0},{provide:rw,useValue:!0},{provide:$u,useClass:fA}];for(let t of n)e.push(...t.\u0275providers);return qs(e)}var ew=new le("");function _A(){return mA(sw.LegacyInterceptors,[{provide:ew,useFactory:oA},{provide:ap,useExisting:ew,multi:!0}])}var ow=(()=>{class n{static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275mod=Pe({type:n})}static{this.\u0275inj=xe({providers:[gA(_A())]})}}return n})();var up=class extends Ov{constructor(){super(...arguments),this.supportsDOMEvents=!0}},dp=class n extends up{static makeCurrent(){Sv(new n)}onAndCancel(e,t,i){return e.addEventListener(t,i),()=>{e.removeEventListener(t,i)}}dispatchEvent(e,t){e.dispatchEvent(t)}remove(e){e.remove()}createElement(e,t){return t=t||this.getDefaultDocument(),t.createElement(e)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(e){return e.nodeType===Node.ELEMENT_NODE}isShadowRoot(e){return e instanceof DocumentFragment}getGlobalEventTarget(e,t){return t==="window"?window:t==="document"?e:t==="body"?e.body:null}getBaseHref(e){let t=vA();return t==null?null:wA(t)}resetBaseElement(){nc=null}getUserAgent(){return window.navigator.userAgent}getCookie(e){return Vu(document.cookie,e)}},nc=null;function vA(){return nc=nc||document.querySelector("base"),nc?nc.getAttribute("href"):null}function wA(n){return new URL(n,document.baseURI).pathname}var hp=class{addToWindow(e){Ni.getAngularTestability=(i,r=!0)=>{let s=e.findTestabilityInTree(i,r);if(s==null)throw new De(5103,!1);return s},Ni.getAllAngularTestabilities=()=>e.getAllTestabilities(),Ni.getAllAngularRootElements=()=>e.getAllRootElements();let t=i=>{let r=Ni.getAllAngularTestabilities(),s=r.length,o=function(){s--,s==0&&i()};r.forEach(c=>{c.whenStable(o)})};Ni.frameworkStabilizers||(Ni.frameworkStabilizers=[]),Ni.frameworkStabilizers.push(t)}findTestabilityInTree(e,t,i){if(t==null)return null;let r=e.getTestability(t);return r??(i?zr().isShadowRoot(t)?this.findTestabilityInTree(e,t.host,!0):this.findTestabilityInTree(e,t.parentElement,!0):null)}},bA=(()=>{class n{build(){return new XMLHttpRequest}static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275prov=ie({token:n,factory:n.\u0275fac})}}return n})(),qu=new le(""),uw=(()=>{class n{constructor(t,i){this._zone=i,this._eventNameToPlugin=new Map,t.forEach(r=>{r.manager=this}),this._plugins=t.slice().reverse()}addEventListener(t,i,r){return this._findPluginFor(i).addEventListener(t,i,r)}getZone(){return this._zone}_findPluginFor(t){let i=this._eventNameToPlugin.get(t);if(i)return i;if(i=this._plugins.find(s=>s.supports(t)),!i)throw new De(5101,!1);return this._eventNameToPlugin.set(t,i),i}static{this.\u0275fac=function(i){return new(i||n)(q(qu),q(Se))}}static{this.\u0275prov=ie({token:n,factory:n.\u0275fac})}}return n})(),ic=class{constructor(e){this._doc=e}},cp="ng-app-id",dw=(()=>{class n{constructor(t,i,r,s={}){this.doc=t,this.appId=i,this.nonce=r,this.platformId=s,this.styleRef=new Map,this.hostNodes=new Set,this.styleNodesInDOM=this.collectServerRenderedStyles(),this.platformIsServer=Fi(s),this.resetHostNodes()}addStyles(t){for(let i of t)this.changeUsageCount(i,1)===1&&this.onStyleAdded(i)}removeStyles(t){for(let i of t)this.changeUsageCount(i,-1)<=0&&this.onStyleRemoved(i)}ngOnDestroy(){let t=this.styleNodesInDOM;t&&(t.forEach(i=>i.remove()),t.clear());for(let i of this.getAllStyles())this.onStyleRemoved(i);this.resetHostNodes()}addHost(t){this.hostNodes.add(t);for(let i of this.getAllStyles())this.addStyleToHost(t,i)}removeHost(t){this.hostNodes.delete(t)}getAllStyles(){return this.styleRef.keys()}onStyleAdded(t){for(let i of this.hostNodes)this.addStyleToHost(i,t)}onStyleRemoved(t){let i=this.styleRef;i.get(t)?.elements?.forEach(r=>r.remove()),i.delete(t)}collectServerRenderedStyles(){let t=this.doc.head?.querySelectorAll(`style[${cp}="${this.appId}"]`);if(t?.length){let i=new Map;return t.forEach(r=>{r.textContent!=null&&i.set(r.textContent,r)}),i}return null}changeUsageCount(t,i){let r=this.styleRef;if(r.has(t)){let s=r.get(t);return s.usage+=i,s.usage}return r.set(t,{usage:i,elements:[]}),i}getStyleElement(t,i){let r=this.styleNodesInDOM,s=r?.get(i);if(s?.parentNode===t)return r.delete(i),s.removeAttribute(cp),s;{let o=this.doc.createElement("style");return this.nonce&&o.setAttribute("nonce",this.nonce),o.textContent=i,this.platformIsServer&&o.setAttribute(cp,this.appId),t.appendChild(o),o}}addStyleToHost(t,i){let r=this.getStyleElement(t,i),s=this.styleRef,o=s.get(i)?.elements;o?o.push(r):s.set(i,{elements:[r],usage:1})}resetHostNodes(){let t=this.hostNodes;t.clear(),t.add(this.doc.head)}static{this.\u0275fac=function(i){return new(i||n)(q(st),q(ja),q(Ba,8),q(Ot))}}static{this.\u0275prov=ie({token:n,factory:n.\u0275fac})}}return n})(),lp={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/Math/MathML"},pp=/%COMP%/g,hw="%COMP%",CA=`_nghost-${hw}`,EA=`_ngcontent-${hw}`,IA=!0,TA=new le("",{providedIn:"root",factory:()=>IA});function AA(n){return EA.replace(pp,n)}function xA(n){return CA.replace(pp,n)}function fw(n,e){return e.map(t=>t.replace(pp,n))}var Gu=(()=>{class n{constructor(t,i,r,s,o,c,l,f=null){this.eventManager=t,this.sharedStylesHost=i,this.appId=r,this.removeStylesOnCompDestroy=s,this.doc=o,this.platformId=c,this.ngZone=l,this.nonce=f,this.rendererByCompId=new Map,this.platformIsServer=Fi(c),this.defaultRenderer=new rc(t,o,l,this.platformIsServer)}createRenderer(t,i){if(!t||!i)return this.defaultRenderer;this.platformIsServer&&i.encapsulation===Na.ShadowDom&&(i=Ee(K({},i),{encapsulation:Na.Emulated}));let r=this.getOrCreateRenderer(t,i);return r instanceof Hu?r.applyToHost(t):r instanceof sc&&r.applyStyles(),r}getOrCreateRenderer(t,i){let r=this.rendererByCompId,s=r.get(i.id);if(!s){let o=this.doc,c=this.ngZone,l=this.eventManager,f=this.sharedStylesHost,g=this.removeStylesOnCompDestroy,p=this.platformIsServer;switch(i.encapsulation){case Na.Emulated:s=new Hu(l,f,i,this.appId,g,o,c,p);break;case Na.ShadowDom:return new fp(l,f,t,i,o,c,this.nonce,p);default:s=new sc(l,f,i,g,o,c,p);break}r.set(i.id,s)}return s}ngOnDestroy(){this.rendererByCompId.clear()}static{this.\u0275fac=function(i){return new(i||n)(q(uw),q(dw),q(ja),q(TA),q(st),q(Ot),q(Se),q(Ba))}}static{this.\u0275prov=ie({token:n,factory:n.\u0275fac})}}return n})(),rc=class{constructor(e,t,i,r){this.eventManager=e,this.doc=t,this.ngZone=i,this.platformIsServer=r,this.data=Object.create(null),this.throwOnSyntheticProps=!0,this.destroyNode=null}destroy(){}createElement(e,t){return t?this.doc.createElementNS(lp[t]||t,e):this.doc.createElement(e)}createComment(e){return this.doc.createComment(e)}createText(e){return this.doc.createTextNode(e)}appendChild(e,t){(cw(e)?e.content:e).appendChild(t)}insertBefore(e,t,i){e&&(cw(e)?e.content:e).insertBefore(t,i)}removeChild(e,t){t.remove()}selectRootElement(e,t){let i=typeof e=="string"?this.doc.querySelector(e):e;if(!i)throw new De(-5104,!1);return t||(i.textContent=""),i}parentNode(e){return e.parentNode}nextSibling(e){return e.nextSibling}setAttribute(e,t,i,r){if(r){t=r+":"+t;let s=lp[r];s?e.setAttributeNS(s,t,i):e.setAttribute(t,i)}else e.setAttribute(t,i)}removeAttribute(e,t,i){if(i){let r=lp[i];r?e.removeAttributeNS(r,t):e.removeAttribute(`${i}:${t}`)}else e.removeAttribute(t)}addClass(e,t){e.classList.add(t)}removeClass(e,t){e.classList.remove(t)}setStyle(e,t,i,r){r&(Ua.DashCase|Ua.Important)?e.style.setProperty(t,i,r&Ua.Important?"important":""):e.style[t]=i}removeStyle(e,t,i){i&Ua.DashCase?e.style.removeProperty(t):e.style[t]=""}setProperty(e,t,i){e!=null&&(e[t]=i)}setValue(e,t){e.nodeValue=t}listen(e,t,i){if(typeof e=="string"&&(e=zr().getGlobalEventTarget(this.doc,e),!e))throw new Error(`Unsupported event target ${e} for event ${t}`);return this.eventManager.addEventListener(e,t,this.decoratePreventDefault(i))}decoratePreventDefault(e){return t=>{if(t==="__ngUnwrap__")return e;(this.platformIsServer?this.ngZone.runGuarded(()=>e(t)):e(t))===!1&&t.preventDefault()}}};function cw(n){return n.tagName==="TEMPLATE"&&n.content!==void 0}var fp=class extends rc{constructor(e,t,i,r,s,o,c,l){super(e,s,o,l),this.sharedStylesHost=t,this.hostEl=i,this.shadowRoot=i.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);let f=fw(r.id,r.styles);for(let g of f){let p=document.createElement("style");c&&p.setAttribute("nonce",c),p.textContent=g,this.shadowRoot.appendChild(p)}}nodeOrShadowRoot(e){return e===this.hostEl?this.shadowRoot:e}appendChild(e,t){return super.appendChild(this.nodeOrShadowRoot(e),t)}insertBefore(e,t,i){return super.insertBefore(this.nodeOrShadowRoot(e),t,i)}removeChild(e,t){return super.removeChild(null,t)}parentNode(e){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(e)))}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}},sc=class extends rc{constructor(e,t,i,r,s,o,c,l){super(e,s,o,c),this.sharedStylesHost=t,this.removeStylesOnCompDestroy=r,this.styles=l?fw(l,i.styles):i.styles}applyStyles(){this.sharedStylesHost.addStyles(this.styles)}destroy(){this.removeStylesOnCompDestroy&&this.sharedStylesHost.removeStyles(this.styles)}},Hu=class extends sc{constructor(e,t,i,r,s,o,c,l){let f=r+"-"+i.id;super(e,t,i,s,o,c,l,f),this.contentAttr=AA(f),this.hostAttr=xA(f)}applyToHost(e){this.applyStyles(),this.setAttribute(e,this.hostAttr,"")}createElement(e,t){let i=super.createElement(e,t);return super.setAttribute(i,this.contentAttr,""),i}},PA=(()=>{class n extends ic{constructor(t){super(t)}supports(t){return!0}addEventListener(t,i,r){return t.addEventListener(i,r,!1),()=>this.removeEventListener(t,i,r)}removeEventListener(t,i,r){return t.removeEventListener(i,r)}static{this.\u0275fac=function(i){return new(i||n)(q(st))}}static{this.\u0275prov=ie({token:n,factory:n.\u0275fac})}}return n})(),MA=(()=>{class n extends ic{constructor(t){super(t),this.delegate=Z(Pv,{optional:!0})}supports(t){return this.delegate?this.delegate.supports(t):!1}addEventListener(t,i,r){return this.delegate.addEventListener(t,i,r)}removeEventListener(t,i,r){return this.delegate.removeEventListener(t,i,r)}static{this.\u0275fac=function(i){return new(i||n)(q(st))}}static{this.\u0275prov=ie({token:n,factory:n.\u0275fac})}}return n})(),lw=["alt","control","meta","shift"],SA={"\b":"Backspace","	":"Tab","\x7F":"Delete","\x1B":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},OA={alt:n=>n.altKey,control:n=>n.ctrlKey,meta:n=>n.metaKey,shift:n=>n.shiftKey},DA=(()=>{class n extends ic{constructor(t){super(t)}supports(t){return n.parseEventName(t)!=null}addEventListener(t,i,r){let s=n.parseEventName(i),o=n.eventCallback(s.fullKey,r,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>zr().onAndCancel(t,s.domEventName,o))}static parseEventName(t){let i=t.toLowerCase().split("."),r=i.shift();if(i.length===0||!(r==="keydown"||r==="keyup"))return null;let s=n._normalizeKey(i.pop()),o="",c=i.indexOf("code");if(c>-1&&(i.splice(c,1),o="code."),lw.forEach(f=>{let g=i.indexOf(f);g>-1&&(i.splice(g,1),o+=f+".")}),o+=s,i.length!=0||s.length===0)return null;let l={};return l.domEventName=r,l.fullKey=o,l}static matchEventFullKeyCode(t,i){let r=SA[t.key]||t.key,s="";return i.indexOf("code.")>-1&&(r=t.code,s="code."),r==null||!r?!1:(r=r.toLowerCase(),r===" "?r="space":r==="."&&(r="dot"),lw.forEach(o=>{if(o!==r){let c=OA[o];c(t)&&(s+=o+".")}}),s+=r,s===i)}static eventCallback(t,i,r){return s=>{n.matchEventFullKeyCode(s,t)&&r.runGuarded(()=>i(s))}}static _normalizeKey(t){return t==="esc"?"escape":t}static{this.\u0275fac=function(i){return new(i||n)(q(st))}}static{this.\u0275prov=ie({token:n,factory:n.\u0275fac})}}return n})();function RA(){dp.makeCurrent()}function kA(){return new $f}function NA(){return pv(document),document}var VA=[{provide:Ot,useValue:Lv},{provide:mv,useValue:RA,multi:!0},{provide:st,useFactory:NA,deps:[]}],pw=Tv(Av,"browser",VA),FA=new le(""),LA=[{provide:Ou,useClass:hp,deps:[]},{provide:Iv,useClass:Du,deps:[Se,Qf,Ou]},{provide:Du,useClass:Du,deps:[Se,Qf,Ou]}],jA=[{provide:hv,useValue:"root"},{provide:$f,useFactory:kA,deps:[]},{provide:qu,useClass:PA,multi:!0,deps:[st,Se,Ot]},{provide:qu,useClass:DA,multi:!0,deps:[st]},{provide:qu,useClass:MA,multi:!0},Gu,dw,uw,{provide:Au,useExisting:Gu},{provide:Fu,useClass:bA,deps:[]},[]],mw=(()=>{class n{constructor(t){}static withServerTransition(t){return{ngModule:n,providers:[{provide:ja,useValue:t.appId}]}}static{this.\u0275fac=function(i){return new(i||n)(q(FA,12))}}static{this.\u0275mod=Pe({type:n})}static{this.\u0275inj=xe({providers:[...jA,...LA],imports:[Fv,xv]})}}return n})();var gw=(()=>{class n{constructor(t){this._doc=t}getTitle(){return this._doc.title}setTitle(t){this._doc.title=t||""}static{this.\u0275fac=function(i){return new(i||n)(q(st))}}static{this.\u0275prov=ie({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();var fe="primary",vc=Symbol("RouteTitle"),vp=class{constructor(e){this.params=e||{}}has(e){return Object.prototype.hasOwnProperty.call(this.params,e)}get(e){if(this.has(e)){let t=this.params[e];return Array.isArray(t)?t[0]:t}return null}getAll(e){if(this.has(e)){let t=this.params[e];return Array.isArray(t)?t:[t]}return[]}get keys(){return Object.keys(this.params)}};function so(n){return new vp(n)}function BA(n,e,t){let i=t.path.split("/");if(i.length>n.length||t.pathMatch==="full"&&(e.hasChildren()||i.length<n.length))return null;let r={};for(let s=0;s<i.length;s++){let o=i[s],c=n[s];if(o[0]===":")r[o.substring(1)]=c;else if(o!==c.path)return null}return{consumed:n.slice(0,i.length),posParams:r}}function UA(n,e){if(n.length!==e.length)return!1;for(let t=0;t<n.length;++t)if(!jn(n[t],e[t]))return!1;return!0}function jn(n,e){let t=n?wp(n):void 0,i=e?wp(e):void 0;if(!t||!i||t.length!=i.length)return!1;let r;for(let s=0;s<t.length;s++)if(r=t[s],!Pw(n[r],e[r]))return!1;return!0}function wp(n){return[...Object.keys(n),...Object.getOwnPropertySymbols(n)]}function Pw(n,e){if(Array.isArray(n)&&Array.isArray(e)){if(n.length!==e.length)return!1;let t=[...n].sort(),i=[...e].sort();return t.every((r,s)=>i[s]===r)}else return n===e}function Mw(n){return n.length>0?n[n.length-1]:null}function qi(n){return tv(n)?n:Ru(n)?Le(Promise.resolve(n)):se(n)}var zA={exact:Ow,subset:Dw},Sw={exact:$A,subset:qA,ignored:()=>!0};function yw(n,e,t){return zA[t.paths](n.root,e.root,t.matrixParams)&&Sw[t.queryParams](n.queryParams,e.queryParams)&&!(t.fragment==="exact"&&n.fragment!==e.fragment)}function $A(n,e){return jn(n,e)}function Ow(n,e,t){if(!Hr(n.segments,e.segments)||!Qu(n.segments,e.segments,t)||n.numberOfChildren!==e.numberOfChildren)return!1;for(let i in e.children)if(!n.children[i]||!Ow(n.children[i],e.children[i],t))return!1;return!0}function qA(n,e){return Object.keys(e).length<=Object.keys(n).length&&Object.keys(e).every(t=>Pw(n[t],e[t]))}function Dw(n,e,t){return Rw(n,e,e.segments,t)}function Rw(n,e,t,i){if(n.segments.length>t.length){let r=n.segments.slice(0,t.length);return!(!Hr(r,t)||e.hasChildren()||!Qu(r,t,i))}else if(n.segments.length===t.length){if(!Hr(n.segments,t)||!Qu(n.segments,t,i))return!1;for(let r in e.children)if(!n.children[r]||!Dw(n.children[r],e.children[r],i))return!1;return!0}else{let r=t.slice(0,n.segments.length),s=t.slice(n.segments.length);return!Hr(n.segments,r)||!Qu(n.segments,r,i)||!n.children[fe]?!1:Rw(n.children[fe],e,s,i)}}function Qu(n,e,t){return e.every((i,r)=>Sw[t](n[r].parameters,i.parameters))}var ii=class{constructor(e=new Ae([],{}),t={},i=null){this.root=e,this.queryParams=t,this.fragment=i}get queryParamMap(){return this._queryParamMap??=so(this.queryParams),this._queryParamMap}toString(){return KA.serialize(this)}},Ae=class{constructor(e,t){this.segments=e,this.children=t,this.parent=null,Object.values(t).forEach(i=>i.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return Yu(this)}},Gr=class{constructor(e,t){this.path=e,this.parameters=t}get parameterMap(){return this._parameterMap??=so(this.parameters),this._parameterMap}toString(){return Nw(this)}};function GA(n,e){return Hr(n,e)&&n.every((t,i)=>jn(t.parameters,e[i].parameters))}function Hr(n,e){return n.length!==e.length?!1:n.every((t,i)=>t.path===e[i].path)}function HA(n,e){let t=[];return Object.entries(n.children).forEach(([i,r])=>{i===fe&&(t=t.concat(e(r,i)))}),Object.entries(n.children).forEach(([i,r])=>{i!==fe&&(t=t.concat(e(r,i)))}),t}var wc=(()=>{class n{static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275prov=ie({token:n,factory:()=>new oo,providedIn:"root"})}}return n})(),oo=class{parse(e){let t=new Cp(e);return new ii(t.parseRootSegment(),t.parseQueryParams(),t.parseFragment())}serialize(e){let t=`/${oc(e.root,!0)}`,i=YA(e.queryParams),r=typeof e.fragment=="string"?`#${WA(e.fragment)}`:"";return`${t}${i}${r}`}},KA=new oo;function Yu(n){return n.segments.map(e=>Nw(e)).join("/")}function oc(n,e){if(!n.hasChildren())return Yu(n);if(e){let t=n.children[fe]?oc(n.children[fe],!1):"",i=[];return Object.entries(n.children).forEach(([r,s])=>{r!==fe&&i.push(`${r}:${oc(s,!1)}`)}),i.length>0?`${t}(${i.join("//")})`:t}else{let t=HA(n,(i,r)=>r===fe?[oc(n.children[fe],!1)]:[`${r}:${oc(i,!1)}`]);return Object.keys(n.children).length===1&&n.children[fe]!=null?`${Yu(n)}/${t[0]}`:`${Yu(n)}/(${t.join("//")})`}}function kw(n){return encodeURIComponent(n).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function Ku(n){return kw(n).replace(/%3B/gi,";")}function WA(n){return encodeURI(n)}function bp(n){return kw(n).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function Xu(n){return decodeURIComponent(n)}function vw(n){return Xu(n.replace(/\+/g,"%20"))}function Nw(n){return`${bp(n.path)}${QA(n.parameters)}`}function QA(n){return Object.entries(n).map(([e,t])=>`;${bp(e)}=${bp(t)}`).join("")}function YA(n){let e=Object.entries(n).map(([t,i])=>Array.isArray(i)?i.map(r=>`${Ku(t)}=${Ku(r)}`).join("&"):`${Ku(t)}=${Ku(i)}`).filter(t=>t);return e.length?`?${e.join("&")}`:""}var XA=/^[^\/()?;#]+/;function mp(n){let e=n.match(XA);return e?e[0]:""}var JA=/^[^\/()?;=#]+/;function ZA(n){let e=n.match(JA);return e?e[0]:""}var ex=/^[^=?&#]+/;function tx(n){let e=n.match(ex);return e?e[0]:""}var nx=/^[^&#]+/;function ix(n){let e=n.match(nx);return e?e[0]:""}var Cp=class{constructor(e){this.url=e,this.remaining=e}parseRootSegment(){return this.consumeOptional("/"),this.remaining===""||this.peekStartsWith("?")||this.peekStartsWith("#")?new Ae([],{}):new Ae([],this.parseChildren())}parseQueryParams(){let e={};if(this.consumeOptional("?"))do this.parseQueryParam(e);while(this.consumeOptional("&"));return e}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(this.remaining==="")return{};this.consumeOptional("/");let e=[];for(this.peekStartsWith("(")||e.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),e.push(this.parseSegment());let t={};this.peekStartsWith("/(")&&(this.capture("/"),t=this.parseParens(!0));let i={};return this.peekStartsWith("(")&&(i=this.parseParens(!1)),(e.length>0||Object.keys(t).length>0)&&(i[fe]=new Ae(e,t)),i}parseSegment(){let e=mp(this.remaining);if(e===""&&this.peekStartsWith(";"))throw new De(4009,!1);return this.capture(e),new Gr(Xu(e),this.parseMatrixParams())}parseMatrixParams(){let e={};for(;this.consumeOptional(";");)this.parseParam(e);return e}parseParam(e){let t=ZA(this.remaining);if(!t)return;this.capture(t);let i="";if(this.consumeOptional("=")){let r=mp(this.remaining);r&&(i=r,this.capture(i))}e[Xu(t)]=Xu(i)}parseQueryParam(e){let t=tx(this.remaining);if(!t)return;this.capture(t);let i="";if(this.consumeOptional("=")){let o=ix(this.remaining);o&&(i=o,this.capture(i))}let r=vw(t),s=vw(i);if(e.hasOwnProperty(r)){let o=e[r];Array.isArray(o)||(o=[o],e[r]=o),o.push(s)}else e[r]=s}parseParens(e){let t={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){let i=mp(this.remaining),r=this.remaining[i.length];if(r!=="/"&&r!==")"&&r!==";")throw new De(4010,!1);let s;i.indexOf(":")>-1?(s=i.slice(0,i.indexOf(":")),this.capture(s),this.capture(":")):e&&(s=fe);let o=this.parseChildren();t[s]=Object.keys(o).length===1?o[fe]:new Ae([],o),this.consumeOptional("//")}return t}peekStartsWith(e){return this.remaining.startsWith(e)}consumeOptional(e){return this.peekStartsWith(e)?(this.remaining=this.remaining.substring(e.length),!0):!1}capture(e){if(!this.consumeOptional(e))throw new De(4011,!1)}};function Vw(n){return n.segments.length>0?new Ae([],{[fe]:n}):n}function Fw(n){let e={};for(let[i,r]of Object.entries(n.children)){let s=Fw(r);if(i===fe&&s.segments.length===0&&s.hasChildren())for(let[o,c]of Object.entries(s.children))e[o]=c;else(s.segments.length>0||s.hasChildren())&&(e[i]=s)}let t=new Ae(n.segments,e);return rx(t)}function rx(n){if(n.numberOfChildren===1&&n.children[fe]){let e=n.children[fe];return new Ae(n.segments.concat(e.segments),e.children)}return n}function Kr(n){return n instanceof ii}function sx(n,e,t=null,i=null){let r=Lw(n);return jw(r,e,t,i)}function Lw(n){let e;function t(s){let o={};for(let l of s.children){let f=t(l);o[l.outlet]=f}let c=new Ae(s.url,o);return s===n&&(e=c),c}let i=t(n.root),r=Vw(i);return e??r}function jw(n,e,t,i){let r=n;for(;r.parent;)r=r.parent;if(e.length===0)return gp(r,r,r,t,i);let s=ox(e);if(s.toRoot())return gp(r,r,new Ae([],{}),t,i);let o=ax(s,r,n),c=o.processChildren?lc(o.segmentGroup,o.index,s.commands):Uw(o.segmentGroup,o.index,s.commands);return gp(r,o.segmentGroup,c,t,i)}function Ju(n){return typeof n=="object"&&n!=null&&!n.outlets&&!n.segmentPath}function hc(n){return typeof n=="object"&&n!=null&&n.outlets}function gp(n,e,t,i,r){let s={};i&&Object.entries(i).forEach(([l,f])=>{s[l]=Array.isArray(f)?f.map(g=>`${g}`):`${f}`});let o;n===e?o=t:o=Bw(n,e,t);let c=Vw(Fw(o));return new ii(c,s,r)}function Bw(n,e,t){let i={};return Object.entries(n.children).forEach(([r,s])=>{s===e?i[r]=t:i[r]=Bw(s,e,t)}),new Ae(n.segments,i)}var Zu=class{constructor(e,t,i){if(this.isAbsolute=e,this.numberOfDoubleDots=t,this.commands=i,e&&i.length>0&&Ju(i[0]))throw new De(4003,!1);let r=i.find(hc);if(r&&r!==Mw(i))throw new De(4004,!1)}toRoot(){return this.isAbsolute&&this.commands.length===1&&this.commands[0]=="/"}};function ox(n){if(typeof n[0]=="string"&&n.length===1&&n[0]==="/")return new Zu(!0,0,n);let e=0,t=!1,i=n.reduce((r,s,o)=>{if(typeof s=="object"&&s!=null){if(s.outlets){let c={};return Object.entries(s.outlets).forEach(([l,f])=>{c[l]=typeof f=="string"?f.split("/"):f}),[...r,{outlets:c}]}if(s.segmentPath)return[...r,s.segmentPath]}return typeof s!="string"?[...r,s]:o===0?(s.split("/").forEach((c,l)=>{l==0&&c==="."||(l==0&&c===""?t=!0:c===".."?e++:c!=""&&r.push(c))}),r):[...r,s]},[]);return new Zu(t,e,i)}var no=class{constructor(e,t,i){this.segmentGroup=e,this.processChildren=t,this.index=i}};function ax(n,e,t){if(n.isAbsolute)return new no(e,!0,0);if(!t)return new no(e,!1,NaN);if(t.parent===null)return new no(t,!0,0);let i=Ju(n.commands[0])?0:1,r=t.segments.length-1+i;return cx(t,r,n.numberOfDoubleDots)}function cx(n,e,t){let i=n,r=e,s=t;for(;s>r;){if(s-=r,i=i.parent,!i)throw new De(4005,!1);r=i.segments.length}return new no(i,!1,r-s)}function lx(n){return hc(n[0])?n[0].outlets:{[fe]:n}}function Uw(n,e,t){if(n??=new Ae([],{}),n.segments.length===0&&n.hasChildren())return lc(n,e,t);let i=ux(n,e,t),r=t.slice(i.commandIndex);if(i.match&&i.pathIndex<n.segments.length){let s=new Ae(n.segments.slice(0,i.pathIndex),{});return s.children[fe]=new Ae(n.segments.slice(i.pathIndex),n.children),lc(s,0,r)}else return i.match&&r.length===0?new Ae(n.segments,{}):i.match&&!n.hasChildren()?Ep(n,e,t):i.match?lc(n,0,r):Ep(n,e,t)}function lc(n,e,t){if(t.length===0)return new Ae(n.segments,{});{let i=lx(t),r={};if(Object.keys(i).some(s=>s!==fe)&&n.children[fe]&&n.numberOfChildren===1&&n.children[fe].segments.length===0){let s=lc(n.children[fe],e,t);return new Ae(n.segments,s.children)}return Object.entries(i).forEach(([s,o])=>{typeof o=="string"&&(o=[o]),o!==null&&(r[s]=Uw(n.children[s],e,o))}),Object.entries(n.children).forEach(([s,o])=>{i[s]===void 0&&(r[s]=o)}),new Ae(n.segments,r)}}function ux(n,e,t){let i=0,r=e,s={match:!1,pathIndex:0,commandIndex:0};for(;r<n.segments.length;){if(i>=t.length)return s;let o=n.segments[r],c=t[i];if(hc(c))break;let l=`${c}`,f=i<t.length-1?t[i+1]:null;if(r>0&&l===void 0)break;if(l&&f&&typeof f=="object"&&f.outlets===void 0){if(!bw(l,f,o))return s;i+=2}else{if(!bw(l,{},o))return s;i++}r++}return{match:!0,pathIndex:r,commandIndex:i}}function Ep(n,e,t){let i=n.segments.slice(0,e),r=0;for(;r<t.length;){let s=t[r];if(hc(s)){let l=dx(s.outlets);return new Ae(i,l)}if(r===0&&Ju(t[0])){let l=n.segments[e];i.push(new Gr(l.path,ww(t[0]))),r++;continue}let o=hc(s)?s.outlets[fe]:`${s}`,c=r<t.length-1?t[r+1]:null;o&&c&&Ju(c)?(i.push(new Gr(o,ww(c))),r+=2):(i.push(new Gr(o,{})),r++)}return new Ae(i,{})}function dx(n){let e={};return Object.entries(n).forEach(([t,i])=>{typeof i=="string"&&(i=[i]),i!==null&&(e[t]=Ep(new Ae([],{}),0,i))}),e}function ww(n){let e={};return Object.entries(n).forEach(([t,i])=>e[t]=`${i}`),e}function bw(n,e,t){return n==t.path&&jn(e,t.parameters)}var uc="imperative",vt=function(n){return n[n.NavigationStart=0]="NavigationStart",n[n.NavigationEnd=1]="NavigationEnd",n[n.NavigationCancel=2]="NavigationCancel",n[n.NavigationError=3]="NavigationError",n[n.RoutesRecognized=4]="RoutesRecognized",n[n.ResolveStart=5]="ResolveStart",n[n.ResolveEnd=6]="ResolveEnd",n[n.GuardsCheckStart=7]="GuardsCheckStart",n[n.GuardsCheckEnd=8]="GuardsCheckEnd",n[n.RouteConfigLoadStart=9]="RouteConfigLoadStart",n[n.RouteConfigLoadEnd=10]="RouteConfigLoadEnd",n[n.ChildActivationStart=11]="ChildActivationStart",n[n.ChildActivationEnd=12]="ChildActivationEnd",n[n.ActivationStart=13]="ActivationStart",n[n.ActivationEnd=14]="ActivationEnd",n[n.Scroll=15]="Scroll",n[n.NavigationSkipped=16]="NavigationSkipped",n}(vt||{}),sn=class{constructor(e,t){this.id=e,this.url=t}},ao=class extends sn{constructor(e,t,i="imperative",r=null){super(e,t),this.type=vt.NavigationStart,this.navigationTrigger=i,this.restoredState=r}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}},Bn=class extends sn{constructor(e,t,i){super(e,t),this.urlAfterRedirects=i,this.type=vt.NavigationEnd}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}},Yt=function(n){return n[n.Redirect=0]="Redirect",n[n.SupersededByNewNavigation=1]="SupersededByNewNavigation",n[n.NoDataFromResolver=2]="NoDataFromResolver",n[n.GuardRejected=3]="GuardRejected",n}(Yt||{}),ed=function(n){return n[n.IgnoredSameUrlNavigation=0]="IgnoredSameUrlNavigation",n[n.IgnoredByUrlHandlingStrategy=1]="IgnoredByUrlHandlingStrategy",n}(ed||{}),ni=class extends sn{constructor(e,t,i,r){super(e,t),this.reason=i,this.code=r,this.type=vt.NavigationCancel}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}},zi=class extends sn{constructor(e,t,i,r){super(e,t),this.reason=i,this.code=r,this.type=vt.NavigationSkipped}},fc=class extends sn{constructor(e,t,i,r){super(e,t),this.error=i,this.target=r,this.type=vt.NavigationError}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}},td=class extends sn{constructor(e,t,i,r){super(e,t),this.urlAfterRedirects=i,this.state=r,this.type=vt.RoutesRecognized}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},Ip=class extends sn{constructor(e,t,i,r){super(e,t),this.urlAfterRedirects=i,this.state=r,this.type=vt.GuardsCheckStart}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},Tp=class extends sn{constructor(e,t,i,r,s){super(e,t),this.urlAfterRedirects=i,this.state=r,this.shouldActivate=s,this.type=vt.GuardsCheckEnd}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}},Ap=class extends sn{constructor(e,t,i,r){super(e,t),this.urlAfterRedirects=i,this.state=r,this.type=vt.ResolveStart}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},xp=class extends sn{constructor(e,t,i,r){super(e,t),this.urlAfterRedirects=i,this.state=r,this.type=vt.ResolveEnd}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},Pp=class{constructor(e){this.route=e,this.type=vt.RouteConfigLoadStart}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}},Mp=class{constructor(e){this.route=e,this.type=vt.RouteConfigLoadEnd}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}},Sp=class{constructor(e){this.snapshot=e,this.type=vt.ChildActivationStart}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},Op=class{constructor(e){this.snapshot=e,this.type=vt.ChildActivationEnd}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},Dp=class{constructor(e){this.snapshot=e,this.type=vt.ActivationStart}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},Rp=class{constructor(e){this.snapshot=e,this.type=vt.ActivationEnd}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},nd=class{constructor(e,t,i){this.routerEvent=e,this.position=t,this.anchor=i,this.type=vt.Scroll}toString(){let e=this.position?`${this.position[0]}, ${this.position[1]}`:null;return`Scroll(anchor: '${this.anchor}', position: '${e}')`}},pc=class{},co=class{constructor(e,t){this.url=e,this.navigationBehaviorOptions=t}};function hx(n,e){return n.providers&&!n._injector&&(n._injector=Hf(n.providers,e,`Route: ${n.path}`)),n._injector??e}function wn(n){return n.outlet||fe}function fx(n,e){let t=n.filter(i=>wn(i)===e);return t.push(...n.filter(i=>wn(i)!==e)),t}function bc(n){if(!n)return null;if(n.routeConfig?._injector)return n.routeConfig._injector;for(let e=n.parent;e;e=e.parent){let t=e.routeConfig;if(t?._loadedInjector)return t._loadedInjector;if(t?._injector)return t._injector}return null}var kp=class{get injector(){return bc(this.route?.snapshot)??this.rootInjector}set injector(e){}constructor(e){this.rootInjector=e,this.outlet=null,this.route=null,this.children=new Cc(this.rootInjector),this.attachRef=null}},Cc=(()=>{class n{constructor(t){this.rootInjector=t,this.contexts=new Map}onChildOutletCreated(t,i){let r=this.getOrCreateContext(t);r.outlet=i,this.contexts.set(t,r)}onChildOutletDestroyed(t){let i=this.getContext(t);i&&(i.outlet=null,i.attachRef=null)}onOutletDeactivated(){let t=this.contexts;return this.contexts=new Map,t}onOutletReAttached(t){this.contexts=t}getOrCreateContext(t){let i=this.getContext(t);return i||(i=new kp(this.rootInjector),this.contexts.set(t,i)),i}getContext(t){return this.contexts.get(t)||null}static{this.\u0275fac=function(i){return new(i||n)(q(Rr))}}static{this.\u0275prov=ie({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})(),id=class{constructor(e){this._root=e}get root(){return this._root.value}parent(e){let t=this.pathFromRoot(e);return t.length>1?t[t.length-2]:null}children(e){let t=Np(e,this._root);return t?t.children.map(i=>i.value):[]}firstChild(e){let t=Np(e,this._root);return t&&t.children.length>0?t.children[0].value:null}siblings(e){let t=Vp(e,this._root);return t.length<2?[]:t[t.length-2].children.map(r=>r.value).filter(r=>r!==e)}pathFromRoot(e){return Vp(e,this._root).map(t=>t.value)}};function Np(n,e){if(n===e.value)return e;for(let t of e.children){let i=Np(n,t);if(i)return i}return null}function Vp(n,e){if(n===e.value)return[e];for(let t of e.children){let i=Vp(n,t);if(i.length)return i.unshift(e),i}return[]}var Qt=class{constructor(e,t){this.value=e,this.children=t}toString(){return`TreeNode(${this.value})`}};function to(n){let e={};return n&&n.children.forEach(t=>e[t.value.outlet]=t),e}var rd=class extends id{constructor(e,t){super(e),this.snapshot=t,Gp(this,e)}toString(){return this.snapshot.toString()}};function zw(n){let e=px(n),t=new jt([new Gr("",{})]),i=new jt({}),r=new jt({}),s=new jt({}),o=new jt(""),c=new Wr(t,i,s,o,r,fe,n,e.root);return c.snapshot=e.root,new rd(new Qt(c,[]),e)}function px(n){let e={},t={},i={},r="",s=new io([],e,i,r,t,fe,n,null,{});return new od("",new Qt(s,[]))}var Wr=class{constructor(e,t,i,r,s,o,c,l){this.urlSubject=e,this.paramsSubject=t,this.queryParamsSubject=i,this.fragmentSubject=r,this.dataSubject=s,this.outlet=o,this.component=c,this._futureSnapshot=l,this.title=this.dataSubject?.pipe(ae(f=>f[vc]))??se(void 0),this.url=e,this.params=t,this.queryParams=i,this.fragment=r,this.data=s}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=this.params.pipe(ae(e=>so(e))),this._paramMap}get queryParamMap(){return this._queryParamMap??=this.queryParams.pipe(ae(e=>so(e))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}};function sd(n,e,t="emptyOnly"){let i,{routeConfig:r}=n;return e!==null&&(t==="always"||r?.path===""||!e.component&&!e.routeConfig?.loadComponent)?i={params:K(K({},e.params),n.params),data:K(K({},e.data),n.data),resolve:K(K(K(K({},n.data),e.data),r?.data),n._resolvedData)}:i={params:K({},n.params),data:K({},n.data),resolve:K(K({},n.data),n._resolvedData??{})},r&&qw(r)&&(i.resolve[vc]=r.title),i}var io=class{get title(){return this.data?.[vc]}constructor(e,t,i,r,s,o,c,l,f){this.url=e,this.params=t,this.queryParams=i,this.fragment=r,this.data=s,this.outlet=o,this.component=c,this.routeConfig=l,this._resolve=f}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=so(this.params),this._paramMap}get queryParamMap(){return this._queryParamMap??=so(this.queryParams),this._queryParamMap}toString(){let e=this.url.map(i=>i.toString()).join("/"),t=this.routeConfig?this.routeConfig.path:"";return`Route(url:'${e}', path:'${t}')`}},od=class extends id{constructor(e,t){super(t),this.url=e,Gp(this,t)}toString(){return $w(this._root)}};function Gp(n,e){e.value._routerState=n,e.children.forEach(t=>Gp(n,t))}function $w(n){let e=n.children.length>0?` { ${n.children.map($w).join(", ")} } `:"";return`${n.value}${e}`}function _p(n){if(n.snapshot){let e=n.snapshot,t=n._futureSnapshot;n.snapshot=t,jn(e.queryParams,t.queryParams)||n.queryParamsSubject.next(t.queryParams),e.fragment!==t.fragment&&n.fragmentSubject.next(t.fragment),jn(e.params,t.params)||n.paramsSubject.next(t.params),UA(e.url,t.url)||n.urlSubject.next(t.url),jn(e.data,t.data)||n.dataSubject.next(t.data)}else n.snapshot=n._futureSnapshot,n.dataSubject.next(n._futureSnapshot.data)}function Fp(n,e){let t=jn(n.params,e.params)&&GA(n.url,e.url),i=!n.parent!=!e.parent;return t&&!i&&(!n.parent||Fp(n.parent,e.parent))}function qw(n){return typeof n.title=="string"||n.title===null}var Qr=(()=>{class n{constructor(){this.activated=null,this._activatedRoute=null,this.name=fe,this.activateEvents=new nn,this.deactivateEvents=new nn,this.attachEvents=new nn,this.detachEvents=new nn,this.parentContexts=Z(Cc),this.location=Z(yv),this.changeDetector=Z(Ga),this.inputBinder=Z(dd,{optional:!0}),this.supportsBindingToComponentInputs=!0}get activatedComponentRef(){return this.activated}ngOnChanges(t){if(t.name){let{firstChange:i,previousValue:r}=t.name;if(i)return;this.isTrackedInParentContexts(r)&&(this.deactivate(),this.parentContexts.onChildOutletDestroyed(r)),this.initializeOutletWithName()}}ngOnDestroy(){this.isTrackedInParentContexts(this.name)&&this.parentContexts.onChildOutletDestroyed(this.name),this.inputBinder?.unsubscribeFromRouteData(this)}isTrackedInParentContexts(t){return this.parentContexts.getContext(t)?.outlet===this}ngOnInit(){this.initializeOutletWithName()}initializeOutletWithName(){if(this.parentContexts.onChildOutletCreated(this.name,this),this.activated)return;let t=this.parentContexts.getContext(this.name);t?.route&&(t.attachRef?this.attach(t.attachRef,t.route):this.activateWith(t.route,t.injector))}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new De(4012,!1);return this.activated.instance}get activatedRoute(){if(!this.activated)throw new De(4012,!1);return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new De(4012,!1);this.location.detach();let t=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(t.instance),t}attach(t,i){this.activated=t,this._activatedRoute=i,this.location.insert(t.hostView),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.attachEvents.emit(t.instance)}deactivate(){if(this.activated){let t=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(t)}}activateWith(t,i){if(this.isActivated)throw new De(4013,!1);this._activatedRoute=t;let r=this.location,o=t.snapshot.component,c=this.parentContexts.getOrCreateContext(this.name).children,l=new Lp(t,c,r.injector);this.activated=r.createComponent(o,{index:r.length,injector:l,environmentInjector:i}),this.changeDetector.markForCheck(),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.activateEvents.emit(this.activated.instance)}static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275dir=Ct({type:n,selectors:[["router-outlet"]],inputs:{name:"name"},outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"],standalone:!0,features:[kr]})}}return n})(),Lp=class n{__ngOutletInjector(e){return new n(this.route,this.childContexts,e)}constructor(e,t,i){this.route=e,this.childContexts=t,this.parent=i}get(e,t){return e===Wr?this.route:e===Cc?this.childContexts:this.parent.get(e,t)}},dd=new le(""),Cw=(()=>{class n{constructor(){this.outletDataSubscriptions=new Map}bindActivatedRouteToOutletComponent(t){this.unsubscribeFromRouteData(t),this.subscribeToRouteData(t)}unsubscribeFromRouteData(t){this.outletDataSubscriptions.get(t)?.unsubscribe(),this.outletDataSubscriptions.delete(t)}subscribeToRouteData(t){let{activatedRoute:i}=t,r=Us([i.queryParams,i.params,i.data]).pipe(nt(([s,o,c],l)=>(c=K(K(K({},s),o),c),l===0?se(c):Promise.resolve(c)))).subscribe(s=>{if(!t.isActivated||!t.activatedComponentRef||t.activatedRoute!==i||i.component===null){this.unsubscribeFromRouteData(t);return}let o=Mv(i.component);if(!o){this.unsubscribeFromRouteData(t);return}for(let{templateName:c}of o.inputs)t.activatedComponentRef.setInput(c,s[c])});this.outletDataSubscriptions.set(t,r)}static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275prov=ie({token:n,factory:n.\u0275fac})}}return n})();function mx(n,e,t){let i=mc(n,e._root,t?t._root:void 0);return new rd(i,e)}function mc(n,e,t){if(t&&n.shouldReuseRoute(e.value,t.value.snapshot)){let i=t.value;i._futureSnapshot=e.value;let r=gx(n,e,t);return new Qt(i,r)}else{if(n.shouldAttach(e.value)){let s=n.retrieve(e.value);if(s!==null){let o=s.route;return o.value._futureSnapshot=e.value,o.children=e.children.map(c=>mc(n,c)),o}}let i=_x(e.value),r=e.children.map(s=>mc(n,s));return new Qt(i,r)}}function gx(n,e,t){return e.children.map(i=>{for(let r of t.children)if(n.shouldReuseRoute(i.value,r.value.snapshot))return mc(n,i,r);return mc(n,i)})}function _x(n){return new Wr(new jt(n.url),new jt(n.params),new jt(n.queryParams),new jt(n.fragment),new jt(n.data),n.outlet,n.component,n)}var gc=class{constructor(e,t){this.redirectTo=e,this.navigationBehaviorOptions=t}},Gw="ngNavigationCancelingError";function ad(n,e){let{redirectTo:t,navigationBehaviorOptions:i}=Kr(e)?{redirectTo:e,navigationBehaviorOptions:void 0}:e,r=Hw(!1,Yt.Redirect);return r.url=t,r.navigationBehaviorOptions=i,r}function Hw(n,e){let t=new Error(`NavigationCancelingError: ${n||""}`);return t[Gw]=!0,t.cancellationCode=e,t}function yx(n){return Kw(n)&&Kr(n.url)}function Kw(n){return!!n&&n[Gw]}var vx=(n,e,t,i)=>ae(r=>(new jp(e,r.targetRouterState,r.currentRouterState,t,i).activate(n),r)),jp=class{constructor(e,t,i,r,s){this.routeReuseStrategy=e,this.futureState=t,this.currState=i,this.forwardEvent=r,this.inputBindingEnabled=s}activate(e){let t=this.futureState._root,i=this.currState?this.currState._root:null;this.deactivateChildRoutes(t,i,e),_p(this.futureState.root),this.activateChildRoutes(t,i,e)}deactivateChildRoutes(e,t,i){let r=to(t);e.children.forEach(s=>{let o=s.value.outlet;this.deactivateRoutes(s,r[o],i),delete r[o]}),Object.values(r).forEach(s=>{this.deactivateRouteAndItsChildren(s,i)})}deactivateRoutes(e,t,i){let r=e.value,s=t?t.value:null;if(r===s)if(r.component){let o=i.getContext(r.outlet);o&&this.deactivateChildRoutes(e,t,o.children)}else this.deactivateChildRoutes(e,t,i);else s&&this.deactivateRouteAndItsChildren(t,i)}deactivateRouteAndItsChildren(e,t){e.value.component&&this.routeReuseStrategy.shouldDetach(e.value.snapshot)?this.detachAndStoreRouteSubtree(e,t):this.deactivateRouteAndOutlet(e,t)}detachAndStoreRouteSubtree(e,t){let i=t.getContext(e.value.outlet),r=i&&e.value.component?i.children:t,s=to(e);for(let o of Object.values(s))this.deactivateRouteAndItsChildren(o,r);if(i&&i.outlet){let o=i.outlet.detach(),c=i.children.onOutletDeactivated();this.routeReuseStrategy.store(e.value.snapshot,{componentRef:o,route:e,contexts:c})}}deactivateRouteAndOutlet(e,t){let i=t.getContext(e.value.outlet),r=i&&e.value.component?i.children:t,s=to(e);for(let o of Object.values(s))this.deactivateRouteAndItsChildren(o,r);i&&(i.outlet&&(i.outlet.deactivate(),i.children.onOutletDeactivated()),i.attachRef=null,i.route=null)}activateChildRoutes(e,t,i){let r=to(t);e.children.forEach(s=>{this.activateRoutes(s,r[s.value.outlet],i),this.forwardEvent(new Rp(s.value.snapshot))}),e.children.length&&this.forwardEvent(new Op(e.value.snapshot))}activateRoutes(e,t,i){let r=e.value,s=t?t.value:null;if(_p(r),r===s)if(r.component){let o=i.getOrCreateContext(r.outlet);this.activateChildRoutes(e,t,o.children)}else this.activateChildRoutes(e,t,i);else if(r.component){let o=i.getOrCreateContext(r.outlet);if(this.routeReuseStrategy.shouldAttach(r.snapshot)){let c=this.routeReuseStrategy.retrieve(r.snapshot);this.routeReuseStrategy.store(r.snapshot,null),o.children.onOutletReAttached(c.contexts),o.attachRef=c.componentRef,o.route=c.route.value,o.outlet&&o.outlet.attach(c.componentRef,c.route.value),_p(c.route.value),this.activateChildRoutes(e,null,o.children)}else o.attachRef=null,o.route=r,o.outlet&&o.outlet.activateWith(r,o.injector),this.activateChildRoutes(e,null,o.children)}else this.activateChildRoutes(e,null,i)}},cd=class{constructor(e){this.path=e,this.route=this.path[this.path.length-1]}},ro=class{constructor(e,t){this.component=e,this.route=t}};function wx(n,e,t){let i=n._root,r=e?e._root:null;return ac(i,r,t,[i.value])}function bx(n){let e=n.routeConfig?n.routeConfig.canActivateChild:null;return!e||e.length===0?null:{node:n,guards:e}}function uo(n,e){let t=Symbol(),i=e.get(n,t);return i===t?typeof n=="function"&&!uv(n)?n:e.get(n):i}function ac(n,e,t,i,r={canDeactivateChecks:[],canActivateChecks:[]}){let s=to(e);return n.children.forEach(o=>{Cx(o,s[o.value.outlet],t,i.concat([o.value]),r),delete s[o.value.outlet]}),Object.entries(s).forEach(([o,c])=>dc(c,t.getContext(o),r)),r}function Cx(n,e,t,i,r={canDeactivateChecks:[],canActivateChecks:[]}){let s=n.value,o=e?e.value:null,c=t?t.getContext(n.value.outlet):null;if(o&&s.routeConfig===o.routeConfig){let l=Ex(o,s,s.routeConfig.runGuardsAndResolvers);l?r.canActivateChecks.push(new cd(i)):(s.data=o.data,s._resolvedData=o._resolvedData),s.component?ac(n,e,c?c.children:null,i,r):ac(n,e,t,i,r),l&&c&&c.outlet&&c.outlet.isActivated&&r.canDeactivateChecks.push(new ro(c.outlet.component,o))}else o&&dc(e,c,r),r.canActivateChecks.push(new cd(i)),s.component?ac(n,null,c?c.children:null,i,r):ac(n,null,t,i,r);return r}function Ex(n,e,t){if(typeof t=="function")return t(n,e);switch(t){case"pathParamsChange":return!Hr(n.url,e.url);case"pathParamsOrQueryParamsChange":return!Hr(n.url,e.url)||!jn(n.queryParams,e.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!Fp(n,e)||!jn(n.queryParams,e.queryParams);case"paramsChange":default:return!Fp(n,e)}}function dc(n,e,t){let i=to(n),r=n.value;Object.entries(i).forEach(([s,o])=>{r.component?e?dc(o,e.children.getContext(s),t):dc(o,null,t):dc(o,e,t)}),r.component?e&&e.outlet&&e.outlet.isActivated?t.canDeactivateChecks.push(new ro(e.outlet.component,r)):t.canDeactivateChecks.push(new ro(null,r)):t.canDeactivateChecks.push(new ro(null,r))}function Ec(n){return typeof n=="function"}function Ix(n){return typeof n=="boolean"}function Tx(n){return n&&Ec(n.canLoad)}function Ax(n){return n&&Ec(n.canActivate)}function xx(n){return n&&Ec(n.canActivateChild)}function Px(n){return n&&Ec(n.canDeactivate)}function Mx(n){return n&&Ec(n.canMatch)}function Ww(n){return n instanceof nv||n?.name==="EmptyError"}var Wu=Symbol("INITIAL_VALUE");function lo(){return nt(n=>Us(n.map(e=>e.pipe(Vn(1),ki(Wu)))).pipe(ae(e=>{for(let t of e)if(t!==!0){if(t===Wu)return Wu;if(t===!1||Sx(t))return t}return!0}),Bt(e=>e!==Wu),Vn(1)))}function Sx(n){return Kr(n)||n instanceof gc}function Ox(n,e){return Kt(t=>{let{targetSnapshot:i,currentSnapshot:r,guards:{canActivateChecks:s,canDeactivateChecks:o}}=t;return o.length===0&&s.length===0?se(Ee(K({},t),{guardsResult:!0})):Dx(o,i,r,n).pipe(Kt(c=>c&&Ix(c)?Rx(i,s,n,e):se(c)),ae(c=>Ee(K({},t),{guardsResult:c})))})}function Dx(n,e,t,i){return Le(n).pipe(Kt(r=>Lx(r.component,r.route,t,e,i)),Fn(r=>r!==!0,!0))}function Rx(n,e,t,i){return Le(e).pipe(Ri(r=>bu(Nx(r.route.parent,i),kx(r.route,i),Fx(n,r.path,t),Vx(n,r.route,t))),Fn(r=>r!==!0,!0))}function kx(n,e){return n!==null&&e&&e(new Dp(n)),se(!0)}function Nx(n,e){return n!==null&&e&&e(new Sp(n)),se(!0)}function Vx(n,e,t){let i=e.routeConfig?e.routeConfig.canActivate:null;if(!i||i.length===0)return se(!0);let r=i.map(s=>Ff(()=>{let o=bc(e)??t,c=uo(s,o),l=Ax(c)?c.canActivate(e,n):tn(o,()=>c(e,n));return qi(l).pipe(Fn())}));return se(r).pipe(lo())}function Fx(n,e,t){let i=e[e.length-1],s=e.slice(0,e.length-1).reverse().map(o=>bx(o)).filter(o=>o!==null).map(o=>Ff(()=>{let c=o.guards.map(l=>{let f=bc(o.node)??t,g=uo(l,f),p=xx(g)?g.canActivateChild(i,n):tn(f,()=>g(i,n));return qi(p).pipe(Fn())});return se(c).pipe(lo())}));return se(s).pipe(lo())}function Lx(n,e,t,i,r){let s=e&&e.routeConfig?e.routeConfig.canDeactivate:null;if(!s||s.length===0)return se(!0);let o=s.map(c=>{let l=bc(e)??r,f=uo(c,l),g=Px(f)?f.canDeactivate(n,e,t,i):tn(l,()=>f(n,e,t,i));return qi(g).pipe(Fn())});return se(o).pipe(lo())}function jx(n,e,t,i){let r=e.canLoad;if(r===void 0||r.length===0)return se(!0);let s=r.map(o=>{let c=uo(o,n),l=Tx(c)?c.canLoad(e,t):tn(n,()=>c(e,t));return qi(l)});return se(s).pipe(lo(),Qw(i))}function Qw(n){return Zy(ft(e=>{if(typeof e!="boolean")throw ad(n,e)}),ae(e=>e===!0))}function Bx(n,e,t,i){let r=e.canMatch;if(!r||r.length===0)return se(!0);let s=r.map(o=>{let c=uo(o,n),l=Mx(c)?c.canMatch(e,t):tn(n,()=>c(e,t));return qi(l)});return se(s).pipe(lo(),Qw(i))}var _c=class{constructor(e){this.segmentGroup=e||null}},yc=class extends Error{constructor(e){super(),this.urlTree=e}};function eo(n){return Ra(new _c(n))}function Ux(n){return Ra(new De(4e3,!1))}function zx(n){return Ra(Hw(!1,Yt.GuardRejected))}var Bp=class{constructor(e,t){this.urlSerializer=e,this.urlTree=t}lineralizeSegments(e,t){let i=[],r=t.root;for(;;){if(i=i.concat(r.segments),r.numberOfChildren===0)return se(i);if(r.numberOfChildren>1||!r.children[fe])return Ux(`${e.redirectTo}`);r=r.children[fe]}}applyRedirectCommands(e,t,i,r,s){if(typeof t!="string"){let c=t,{queryParams:l,fragment:f,routeConfig:g,url:p,outlet:w,params:I,data:L,title:O}=r,S=tn(s,()=>c({params:I,data:L,queryParams:l,fragment:f,routeConfig:g,url:p,outlet:w,title:O}));if(S instanceof ii)throw new yc(S);t=S}let o=this.applyRedirectCreateUrlTree(t,this.urlSerializer.parse(t),e,i);if(t[0]==="/")throw new yc(o);return o}applyRedirectCreateUrlTree(e,t,i,r){let s=this.createSegmentGroup(e,t.root,i,r);return new ii(s,this.createQueryParams(t.queryParams,this.urlTree.queryParams),t.fragment)}createQueryParams(e,t){let i={};return Object.entries(e).forEach(([r,s])=>{if(typeof s=="string"&&s[0]===":"){let c=s.substring(1);i[r]=t[c]}else i[r]=s}),i}createSegmentGroup(e,t,i,r){let s=this.createSegments(e,t.segments,i,r),o={};return Object.entries(t.children).forEach(([c,l])=>{o[c]=this.createSegmentGroup(e,l,i,r)}),new Ae(s,o)}createSegments(e,t,i,r){return t.map(s=>s.path[0]===":"?this.findPosParam(e,s,r):this.findOrReturn(s,i))}findPosParam(e,t,i){let r=i[t.path.substring(1)];if(!r)throw new De(4001,!1);return r}findOrReturn(e,t){let i=0;for(let r of t){if(r.path===e.path)return t.splice(i),r;i++}return e}},Up={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function $x(n,e,t,i,r){let s=Yw(n,e,t);return s.matched?(i=hx(e,i),Bx(i,e,t,r).pipe(ae(o=>o===!0?s:K({},Up)))):se(s)}function Yw(n,e,t){if(e.path==="**")return qx(t);if(e.path==="")return e.pathMatch==="full"&&(n.hasChildren()||t.length>0)?K({},Up):{matched:!0,consumedSegments:[],remainingSegments:t,parameters:{},positionalParamSegments:{}};let r=(e.matcher||BA)(t,n,e);if(!r)return K({},Up);let s={};Object.entries(r.posParams??{}).forEach(([c,l])=>{s[c]=l.path});let o=r.consumed.length>0?K(K({},s),r.consumed[r.consumed.length-1].parameters):s;return{matched:!0,consumedSegments:r.consumed,remainingSegments:t.slice(r.consumed.length),parameters:o,positionalParamSegments:r.posParams??{}}}function qx(n){return{matched:!0,parameters:n.length>0?Mw(n).parameters:{},consumedSegments:n,remainingSegments:[],positionalParamSegments:{}}}function Ew(n,e,t,i){return t.length>0&&Kx(n,t,i)?{segmentGroup:new Ae(e,Hx(i,new Ae(t,n.children))),slicedSegments:[]}:t.length===0&&Wx(n,t,i)?{segmentGroup:new Ae(n.segments,Gx(n,t,i,n.children)),slicedSegments:t}:{segmentGroup:new Ae(n.segments,n.children),slicedSegments:t}}function Gx(n,e,t,i){let r={};for(let s of t)if(hd(n,e,s)&&!i[wn(s)]){let o=new Ae([],{});r[wn(s)]=o}return K(K({},i),r)}function Hx(n,e){let t={};t[fe]=e;for(let i of n)if(i.path===""&&wn(i)!==fe){let r=new Ae([],{});t[wn(i)]=r}return t}function Kx(n,e,t){return t.some(i=>hd(n,e,i)&&wn(i)!==fe)}function Wx(n,e,t){return t.some(i=>hd(n,e,i))}function hd(n,e,t){return(n.hasChildren()||e.length>0)&&t.pathMatch==="full"?!1:t.path===""}function Qx(n,e,t){return e.length===0&&!n.children[t]}var zp=class{};function Yx(n,e,t,i,r,s,o="emptyOnly"){return new $p(n,e,t,i,r,o,s).recognize()}var Xx=31,$p=class{constructor(e,t,i,r,s,o,c){this.injector=e,this.configLoader=t,this.rootComponentType=i,this.config=r,this.urlTree=s,this.paramsInheritanceStrategy=o,this.urlSerializer=c,this.applyRedirects=new Bp(this.urlSerializer,this.urlTree),this.absoluteRedirectCount=0,this.allowRedirects=!0}noMatchError(e){return new De(4002,`'${e.segmentGroup}'`)}recognize(){let e=Ew(this.urlTree.root,[],[],this.config).segmentGroup;return this.match(e).pipe(ae(({children:t,rootSnapshot:i})=>{let r=new Qt(i,t),s=new od("",r),o=sx(i,[],this.urlTree.queryParams,this.urlTree.fragment);return o.queryParams=this.urlTree.queryParams,s.url=this.urlSerializer.serialize(o),{state:s,tree:o}}))}match(e){let t=new io([],Object.freeze({}),Object.freeze(K({},this.urlTree.queryParams)),this.urlTree.fragment,Object.freeze({}),fe,this.rootComponentType,null,{});return this.processSegmentGroup(this.injector,this.config,e,fe,t).pipe(ae(i=>({children:i,rootSnapshot:t})),zs(i=>{if(i instanceof yc)return this.urlTree=i.urlTree,this.match(i.urlTree.root);throw i instanceof _c?this.noMatchError(i):i}))}processSegmentGroup(e,t,i,r,s){return i.segments.length===0&&i.hasChildren()?this.processChildren(e,t,i,s):this.processSegment(e,t,i,i.segments,r,!0,s).pipe(ae(o=>o instanceof Qt?[o]:[]))}processChildren(e,t,i,r){let s=[];for(let o of Object.keys(i.children))o==="primary"?s.unshift(o):s.push(o);return Le(s).pipe(Ri(o=>{let c=i.children[o],l=fx(t,o);return this.processSegmentGroup(e,l,c,o,r)}),$s((o,c)=>(o.push(...c),o)),Lf(null),cv(),Kt(o=>{if(o===null)return eo(i);let c=Xw(o);return Jx(c),se(c)}))}processSegment(e,t,i,r,s,o,c){return Le(t).pipe(Ri(l=>this.processSegmentAgainstRoute(l._injector??e,t,l,i,r,s,o,c).pipe(zs(f=>{if(f instanceof _c)return se(null);throw f}))),Fn(l=>!!l),zs(l=>{if(Ww(l))return Qx(i,r,s)?se(new zp):eo(i);throw l}))}processSegmentAgainstRoute(e,t,i,r,s,o,c,l){return wn(i)!==o&&(o===fe||!hd(r,s,i))?eo(r):i.redirectTo===void 0?this.matchSegmentAgainstRoute(e,r,i,s,o,l):this.allowRedirects&&c?this.expandSegmentAgainstRouteUsingRedirect(e,r,t,i,s,o,l):eo(r)}expandSegmentAgainstRouteUsingRedirect(e,t,i,r,s,o,c){let{matched:l,parameters:f,consumedSegments:g,positionalParamSegments:p,remainingSegments:w}=Yw(t,r,s);if(!l)return eo(t);typeof r.redirectTo=="string"&&r.redirectTo[0]==="/"&&(this.absoluteRedirectCount++,this.absoluteRedirectCount>Xx&&(this.allowRedirects=!1));let I=new io(s,f,Object.freeze(K({},this.urlTree.queryParams)),this.urlTree.fragment,Iw(r),wn(r),r.component??r._loadedComponent??null,r,Tw(r)),L=sd(I,c,this.paramsInheritanceStrategy);I.params=Object.freeze(L.params),I.data=Object.freeze(L.data);let O=this.applyRedirects.applyRedirectCommands(g,r.redirectTo,p,I,e);return this.applyRedirects.lineralizeSegments(r,O).pipe(Kt(S=>this.processSegment(e,i,t,S.concat(w),o,!1,c)))}matchSegmentAgainstRoute(e,t,i,r,s,o){let c=$x(t,i,r,e,this.urlSerializer);return i.path==="**"&&(t.children={}),c.pipe(nt(l=>l.matched?(e=i._injector??e,this.getChildConfig(e,i,r).pipe(nt(({routes:f})=>{let g=i._loadedInjector??e,{parameters:p,consumedSegments:w,remainingSegments:I}=l,L=new io(w,p,Object.freeze(K({},this.urlTree.queryParams)),this.urlTree.fragment,Iw(i),wn(i),i.component??i._loadedComponent??null,i,Tw(i)),O=sd(L,o,this.paramsInheritanceStrategy);L.params=Object.freeze(O.params),L.data=Object.freeze(O.data);let{segmentGroup:S,slicedSegments:H}=Ew(t,w,I,f);if(H.length===0&&S.hasChildren())return this.processChildren(g,f,S,L).pipe(ae(U=>new Qt(L,U)));if(f.length===0&&H.length===0)return se(new Qt(L,[]));let X=wn(i)===s;return this.processSegment(g,f,S,H,X?fe:s,!0,L).pipe(ae(U=>new Qt(L,U instanceof Qt?[U]:[])))}))):eo(t)))}getChildConfig(e,t,i){return t.children?se({routes:t.children,injector:e}):t.loadChildren?t._loadedRoutes!==void 0?se({routes:t._loadedRoutes,injector:t._loadedInjector}):jx(e,t,i,this.urlSerializer).pipe(Kt(r=>r?this.configLoader.loadChildren(e,t).pipe(ft(s=>{t._loadedRoutes=s.routes,t._loadedInjector=s.injector})):zx(t))):se({routes:[],injector:e})}};function Jx(n){n.sort((e,t)=>e.value.outlet===fe?-1:t.value.outlet===fe?1:e.value.outlet.localeCompare(t.value.outlet))}function Zx(n){let e=n.value.routeConfig;return e&&e.path===""}function Xw(n){let e=[],t=new Set;for(let i of n){if(!Zx(i)){e.push(i);continue}let r=e.find(s=>i.value.routeConfig===s.value.routeConfig);r!==void 0?(r.children.push(...i.children),t.add(r)):e.push(i)}for(let i of t){let r=Xw(i.children);e.push(new Qt(i.value,r))}return e.filter(i=>!t.has(i))}function Iw(n){return n.data||{}}function Tw(n){return n.resolve||{}}function eP(n,e,t,i,r,s){return Kt(o=>Yx(n,e,t,i,o.extractedUrl,r,s).pipe(ae(({state:c,tree:l})=>Ee(K({},o),{targetSnapshot:c,urlAfterRedirects:l}))))}function tP(n,e){return Kt(t=>{let{targetSnapshot:i,guards:{canActivateChecks:r}}=t;if(!r.length)return se(t);let s=new Set(r.map(l=>l.route)),o=new Set;for(let l of s)if(!o.has(l))for(let f of Jw(l))o.add(f);let c=0;return Le(o).pipe(Ri(l=>s.has(l)?nP(l,i,n,e):(l.data=sd(l,l.parent,n).resolve,se(void 0))),ft(()=>c++),jf(1),Kt(l=>c===o.size?se(t):Di))})}function Jw(n){let e=n.children.map(t=>Jw(t)).flat();return[n,...e]}function nP(n,e,t,i){let r=n.routeConfig,s=n._resolve;return r?.title!==void 0&&!qw(r)&&(s[vc]=r.title),iP(s,n,e,i).pipe(ae(o=>(n._resolvedData=o,n.data=sd(n,n.parent,t).resolve,null)))}function iP(n,e,t,i){let r=wp(n);if(r.length===0)return se({});let s={};return Le(r).pipe(Kt(o=>rP(n[o],e,t,i).pipe(Fn(),ft(c=>{if(c instanceof gc)throw ad(new oo,c);s[o]=c}))),jf(1),ov(s),zs(o=>Ww(o)?Di:Ra(o)))}function rP(n,e,t,i){let r=bc(e)??i,s=uo(n,r),o=s.resolve?s.resolve(e,t):tn(r,()=>s(e,t));return qi(o)}function yp(n){return nt(e=>{let t=n(e);return t?Le(t).pipe(ae(()=>e)):se(e)})}var Zw=(()=>{class n{buildTitle(t){let i,r=t.root;for(;r!==void 0;)i=this.getResolvedTitleForRoute(r)??i,r=r.children.find(s=>s.outlet===fe);return i}getResolvedTitleForRoute(t){return t.data[vc]}static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275prov=ie({token:n,factory:()=>Z(sP),providedIn:"root"})}}return n})(),sP=(()=>{class n extends Zw{constructor(t){super(),this.title=t}updateTitle(t){let i=this.buildTitle(t);i!==void 0&&this.title.setTitle(i)}static{this.\u0275fac=function(i){return new(i||n)(q(gw))}}static{this.\u0275prov=ie({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})(),Ic=new le("",{providedIn:"root",factory:()=>({})}),oP=(()=>{class n{static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275cmp=it({type:n,selectors:[["ng-component"]],standalone:!0,features:[Mu],decls:1,vars:0,template:function(i,r){i&1&&te(0,"router-outlet")},dependencies:[Qr],encapsulation:2})}}return n})();function Hp(n){let e=n.children&&n.children.map(Hp),t=e?Ee(K({},n),{children:e}):K({},n);return!t.component&&!t.loadComponent&&(e||t.loadChildren)&&t.outlet&&t.outlet!==fe&&(t.component=oP),t}var ld=new le(""),Kp=(()=>{class n{constructor(){this.componentLoaders=new WeakMap,this.childrenLoaders=new WeakMap,this.compiler=Z(Nu)}loadComponent(t){if(this.componentLoaders.get(t))return this.componentLoaders.get(t);if(t._loadedComponent)return se(t._loadedComponent);this.onLoadStartListener&&this.onLoadStartListener(t);let i=qi(t.loadComponent()).pipe(ae(e0),ft(s=>{this.onLoadEndListener&&this.onLoadEndListener(t),t._loadedComponent=s}),Dr(()=>{this.componentLoaders.delete(t)})),r=new Nf(i,()=>new Lt).pipe(kf());return this.componentLoaders.set(t,r),r}loadChildren(t,i){if(this.childrenLoaders.get(i))return this.childrenLoaders.get(i);if(i._loadedRoutes)return se({routes:i._loadedRoutes,injector:i._loadedInjector});this.onLoadStartListener&&this.onLoadStartListener(i);let s=aP(i,this.compiler,t,this.onLoadEndListener).pipe(Dr(()=>{this.childrenLoaders.delete(i)})),o=new Nf(s,()=>new Lt).pipe(kf());return this.childrenLoaders.set(i,o),o}static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275prov=ie({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();function aP(n,e,t,i){return qi(n.loadChildren()).pipe(ae(e0),Kt(r=>r instanceof vv||Array.isArray(r)?se(r):Le(e.compileModuleAsync(r))),ae(r=>{i&&i(n);let s,o,c=!1;return Array.isArray(r)?(o=r,c=!0):(s=r.create(t).injector,o=s.get(ld,[],{optional:!0,self:!0}).flat()),{routes:o.map(Hp),injector:s}}))}function cP(n){return n&&typeof n=="object"&&"default"in n}function e0(n){return cP(n)?n.default:n}var Wp=(()=>{class n{static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275prov=ie({token:n,factory:()=>Z(lP),providedIn:"root"})}}return n})(),lP=(()=>{class n{shouldProcessUrl(t){return!0}extract(t){return t}merge(t,i){return t}static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275prov=ie({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})(),t0=new le(""),n0=new le("");function uP(n,e,t){let i=n.get(n0),r=n.get(st);return n.get(Se).runOutsideAngular(()=>{if(!r.startViewTransition||i.skipNextTransition)return i.skipNextTransition=!1,new Promise(f=>setTimeout(f));let s,o=new Promise(f=>{s=f}),c=r.startViewTransition(()=>(s(),dP(n))),{onViewTransitionCreated:l}=i;return l&&tn(n,()=>l({transition:c,from:e,to:t})),o})}function dP(n){return new Promise(e=>{Kf({read:()=>setTimeout(e)},{injector:n})})}var hP=new le(""),Qp=(()=>{class n{get hasRequestedNavigation(){return this.navigationId!==0}constructor(){this.currentNavigation=null,this.currentTransition=null,this.lastSuccessfulNavigation=null,this.events=new Lt,this.transitionAbortSubject=new Lt,this.configLoader=Z(Kp),this.environmentInjector=Z(Rr),this.urlSerializer=Z(wc),this.rootContexts=Z(Cc),this.location=Z(Wa),this.inputBindingEnabled=Z(dd,{optional:!0})!==null,this.titleStrategy=Z(Zw),this.options=Z(Ic,{optional:!0})||{},this.paramsInheritanceStrategy=this.options.paramsInheritanceStrategy||"emptyOnly",this.urlHandlingStrategy=Z(Wp),this.createViewTransition=Z(t0,{optional:!0}),this.navigationErrorHandler=Z(hP,{optional:!0}),this.navigationId=0,this.afterPreactivation=()=>se(void 0),this.rootComponentType=null;let t=r=>this.events.next(new Pp(r)),i=r=>this.events.next(new Mp(r));this.configLoader.onLoadEndListener=i,this.configLoader.onLoadStartListener=t}complete(){this.transitions?.complete()}handleNavigationRequest(t){let i=++this.navigationId;this.transitions?.next(Ee(K(K({},this.transitions.value),t),{id:i}))}setupNavigations(t,i,r){return this.transitions=new jt({id:0,currentUrlTree:i,currentRawUrl:i,extractedUrl:this.urlHandlingStrategy.extract(i),urlAfterRedirects:this.urlHandlingStrategy.extract(i),rawUrl:i,extras:{},resolve:()=>{},reject:()=>{},promise:Promise.resolve(!0),source:uc,restoredState:null,currentSnapshot:r.snapshot,targetSnapshot:null,currentRouterState:r,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.transitions.pipe(Bt(s=>s.id!==0),ae(s=>Ee(K({},s),{extractedUrl:this.urlHandlingStrategy.extract(s.rawUrl)})),nt(s=>{let o=!1,c=!1;return se(s).pipe(nt(l=>{if(this.navigationId>s.id)return this.cancelNavigationTransition(s,"",Yt.SupersededByNewNavigation),Di;this.currentTransition=s,this.currentNavigation={id:l.id,initialUrl:l.rawUrl,extractedUrl:l.extractedUrl,targetBrowserUrl:typeof l.extras.browserUrl=="string"?this.urlSerializer.parse(l.extras.browserUrl):l.extras.browserUrl,trigger:l.source,extras:l.extras,previousNavigation:this.lastSuccessfulNavigation?Ee(K({},this.lastSuccessfulNavigation),{previousNavigation:null}):null};let f=!t.navigated||this.isUpdatingInternalState()||this.isUpdatedBrowserUrl(),g=l.extras.onSameUrlNavigation??t.onSameUrlNavigation;if(!f&&g!=="reload"){let p="";return this.events.next(new zi(l.id,this.urlSerializer.serialize(l.rawUrl),p,ed.IgnoredSameUrlNavigation)),l.resolve(!1),Di}if(this.urlHandlingStrategy.shouldProcessUrl(l.rawUrl))return se(l).pipe(nt(p=>{let w=this.transitions?.getValue();return this.events.next(new ao(p.id,this.urlSerializer.serialize(p.extractedUrl),p.source,p.restoredState)),w!==this.transitions?.getValue()?Di:Promise.resolve(p)}),eP(this.environmentInjector,this.configLoader,this.rootComponentType,t.config,this.urlSerializer,this.paramsInheritanceStrategy),ft(p=>{s.targetSnapshot=p.targetSnapshot,s.urlAfterRedirects=p.urlAfterRedirects,this.currentNavigation=Ee(K({},this.currentNavigation),{finalUrl:p.urlAfterRedirects});let w=new td(p.id,this.urlSerializer.serialize(p.extractedUrl),this.urlSerializer.serialize(p.urlAfterRedirects),p.targetSnapshot);this.events.next(w)}));if(f&&this.urlHandlingStrategy.shouldProcessUrl(l.currentRawUrl)){let{id:p,extractedUrl:w,source:I,restoredState:L,extras:O}=l,S=new ao(p,this.urlSerializer.serialize(w),I,L);this.events.next(S);let H=zw(this.rootComponentType).snapshot;return this.currentTransition=s=Ee(K({},l),{targetSnapshot:H,urlAfterRedirects:w,extras:Ee(K({},O),{skipLocationChange:!1,replaceUrl:!1})}),this.currentNavigation.finalUrl=w,se(s)}else{let p="";return this.events.next(new zi(l.id,this.urlSerializer.serialize(l.extractedUrl),p,ed.IgnoredByUrlHandlingStrategy)),l.resolve(!1),Di}}),ft(l=>{let f=new Ip(l.id,this.urlSerializer.serialize(l.extractedUrl),this.urlSerializer.serialize(l.urlAfterRedirects),l.targetSnapshot);this.events.next(f)}),ae(l=>(this.currentTransition=s=Ee(K({},l),{guards:wx(l.targetSnapshot,l.currentSnapshot,this.rootContexts)}),s)),Ox(this.environmentInjector,l=>this.events.next(l)),ft(l=>{if(s.guardsResult=l.guardsResult,l.guardsResult&&typeof l.guardsResult!="boolean")throw ad(this.urlSerializer,l.guardsResult);let f=new Tp(l.id,this.urlSerializer.serialize(l.extractedUrl),this.urlSerializer.serialize(l.urlAfterRedirects),l.targetSnapshot,!!l.guardsResult);this.events.next(f)}),Bt(l=>l.guardsResult?!0:(this.cancelNavigationTransition(l,"",Yt.GuardRejected),!1)),yp(l=>{if(l.guards.canActivateChecks.length)return se(l).pipe(ft(f=>{let g=new Ap(f.id,this.urlSerializer.serialize(f.extractedUrl),this.urlSerializer.serialize(f.urlAfterRedirects),f.targetSnapshot);this.events.next(g)}),nt(f=>{let g=!1;return se(f).pipe(tP(this.paramsInheritanceStrategy,this.environmentInjector),ft({next:()=>g=!0,complete:()=>{g||this.cancelNavigationTransition(f,"",Yt.NoDataFromResolver)}}))}),ft(f=>{let g=new xp(f.id,this.urlSerializer.serialize(f.extractedUrl),this.urlSerializer.serialize(f.urlAfterRedirects),f.targetSnapshot);this.events.next(g)}))}),yp(l=>{let f=g=>{let p=[];g.routeConfig?.loadComponent&&!g.routeConfig._loadedComponent&&p.push(this.configLoader.loadComponent(g.routeConfig).pipe(ft(w=>{g.component=w}),ae(()=>{})));for(let w of g.children)p.push(...f(w));return p};return Us(f(l.targetSnapshot.root)).pipe(Lf(null),Vn(1))}),yp(()=>this.afterPreactivation()),nt(()=>{let{currentSnapshot:l,targetSnapshot:f}=s,g=this.createViewTransition?.(this.environmentInjector,l.root,f.root);return g?Le(g).pipe(ae(()=>s)):se(s)}),ae(l=>{let f=mx(t.routeReuseStrategy,l.targetSnapshot,l.currentRouterState);return this.currentTransition=s=Ee(K({},l),{targetRouterState:f}),this.currentNavigation.targetRouterState=f,s}),ft(()=>{this.events.next(new pc)}),vx(this.rootContexts,t.routeReuseStrategy,l=>this.events.next(l),this.inputBindingEnabled),Vn(1),ft({next:l=>{o=!0,this.lastSuccessfulNavigation=this.currentNavigation,this.events.next(new Bn(l.id,this.urlSerializer.serialize(l.extractedUrl),this.urlSerializer.serialize(l.urlAfterRedirects))),this.titleStrategy?.updateTitle(l.targetRouterState.snapshot),l.resolve(!0)},complete:()=>{o=!0}}),Eu(this.transitionAbortSubject.pipe(ft(l=>{throw l}))),Dr(()=>{!o&&!c&&this.cancelNavigationTransition(s,"",Yt.SupersededByNewNavigation),this.currentTransition?.id===s.id&&(this.currentNavigation=null,this.currentTransition=null)}),zs(l=>{if(c=!0,Kw(l))this.events.next(new ni(s.id,this.urlSerializer.serialize(s.extractedUrl),l.message,l.cancellationCode)),yx(l)?this.events.next(new co(l.url,l.navigationBehaviorOptions)):s.resolve(!1);else{let f=new fc(s.id,this.urlSerializer.serialize(s.extractedUrl),l,s.targetSnapshot??void 0);try{let g=tn(this.environmentInjector,()=>this.navigationErrorHandler?.(f));if(g instanceof gc){let{message:p,cancellationCode:w}=ad(this.urlSerializer,g);this.events.next(new ni(s.id,this.urlSerializer.serialize(s.extractedUrl),p,w)),this.events.next(new co(g.redirectTo,g.navigationBehaviorOptions))}else{this.events.next(f);let p=t.errorHandler(l);s.resolve(!!p)}}catch(g){this.options.resolveNavigationPromiseOnError?s.resolve(!1):s.reject(g)}}return Di}))}))}cancelNavigationTransition(t,i,r){let s=new ni(t.id,this.urlSerializer.serialize(t.extractedUrl),i,r);this.events.next(s),t.resolve(!1)}isUpdatingInternalState(){return this.currentTransition?.extractedUrl.toString()!==this.currentTransition?.currentUrlTree.toString()}isUpdatedBrowserUrl(){let t=this.urlHandlingStrategy.extract(this.urlSerializer.parse(this.location.path(!0))),i=this.currentNavigation?.targetBrowserUrl??this.currentNavigation?.extractedUrl;return t.toString()!==i?.toString()&&!this.currentNavigation?.extras.skipLocationChange}static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275prov=ie({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();function fP(n){return n!==uc}var pP=(()=>{class n{static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275prov=ie({token:n,factory:()=>Z(mP),providedIn:"root"})}}return n})(),qp=class{shouldDetach(e){return!1}store(e,t){}shouldAttach(e){return!1}retrieve(e){return null}shouldReuseRoute(e,t){return e.routeConfig===t.routeConfig}},mP=(()=>{class n extends qp{static{this.\u0275fac=(()=>{let t;return function(r){return(t||(t=Va(n)))(r||n)}})()}static{this.\u0275prov=ie({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})(),i0=(()=>{class n{static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275prov=ie({token:n,factory:()=>Z(gP),providedIn:"root"})}}return n})(),gP=(()=>{class n extends i0{constructor(){super(...arguments),this.location=Z(Wa),this.urlSerializer=Z(wc),this.options=Z(Ic,{optional:!0})||{},this.canceledNavigationResolution=this.options.canceledNavigationResolution||"replace",this.urlHandlingStrategy=Z(Wp),this.urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred",this.currentUrlTree=new ii,this.rawUrlTree=this.currentUrlTree,this.currentPageId=0,this.lastSuccessfulId=-1,this.routerState=zw(null),this.stateMemento=this.createStateMemento()}getCurrentUrlTree(){return this.currentUrlTree}getRawUrlTree(){return this.rawUrlTree}restoredState(){return this.location.getState()}get browserPageId(){return this.canceledNavigationResolution!=="computed"?this.currentPageId:this.restoredState()?.\u0275routerPageId??this.currentPageId}getRouterState(){return this.routerState}createStateMemento(){return{rawUrlTree:this.rawUrlTree,currentUrlTree:this.currentUrlTree,routerState:this.routerState}}registerNonRouterCurrentEntryChangeListener(t){return this.location.subscribe(i=>{i.type==="popstate"&&t(i.url,i.state)})}handleRouterEvent(t,i){if(t instanceof ao)this.stateMemento=this.createStateMemento();else if(t instanceof zi)this.rawUrlTree=i.initialUrl;else if(t instanceof td){if(this.urlUpdateStrategy==="eager"&&!i.extras.skipLocationChange){let r=this.urlHandlingStrategy.merge(i.finalUrl,i.initialUrl);this.setBrowserUrl(i.targetBrowserUrl??r,i)}}else t instanceof pc?(this.currentUrlTree=i.finalUrl,this.rawUrlTree=this.urlHandlingStrategy.merge(i.finalUrl,i.initialUrl),this.routerState=i.targetRouterState,this.urlUpdateStrategy==="deferred"&&!i.extras.skipLocationChange&&this.setBrowserUrl(i.targetBrowserUrl??this.rawUrlTree,i)):t instanceof ni&&(t.code===Yt.GuardRejected||t.code===Yt.NoDataFromResolver)?this.restoreHistory(i):t instanceof fc?this.restoreHistory(i,!0):t instanceof Bn&&(this.lastSuccessfulId=t.id,this.currentPageId=this.browserPageId)}setBrowserUrl(t,i){let r=t instanceof ii?this.urlSerializer.serialize(t):t;if(this.location.isCurrentPathEqualTo(r)||i.extras.replaceUrl){let s=this.browserPageId,o=K(K({},i.extras.state),this.generateNgRouterState(i.id,s));this.location.replaceState(r,"",o)}else{let s=K(K({},i.extras.state),this.generateNgRouterState(i.id,this.browserPageId+1));this.location.go(r,"",s)}}restoreHistory(t,i=!1){if(this.canceledNavigationResolution==="computed"){let r=this.browserPageId,s=this.currentPageId-r;s!==0?this.location.historyGo(s):this.currentUrlTree===t.finalUrl&&s===0&&(this.resetState(t),this.resetUrlToCurrentUrlTree())}else this.canceledNavigationResolution==="replace"&&(i&&this.resetState(t),this.resetUrlToCurrentUrlTree())}resetState(t){this.routerState=this.stateMemento.routerState,this.currentUrlTree=this.stateMemento.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,t.finalUrl??this.rawUrlTree)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}generateNgRouterState(t,i){return this.canceledNavigationResolution==="computed"?{navigationId:t,\u0275routerPageId:i}:{navigationId:t}}static{this.\u0275fac=(()=>{let t;return function(r){return(t||(t=Va(n)))(r||n)}})()}static{this.\u0275prov=ie({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})(),cc=function(n){return n[n.COMPLETE=0]="COMPLETE",n[n.FAILED=1]="FAILED",n[n.REDIRECTING=2]="REDIRECTING",n}(cc||{});function r0(n,e){n.events.pipe(Bt(t=>t instanceof Bn||t instanceof ni||t instanceof fc||t instanceof zi),ae(t=>t instanceof Bn||t instanceof zi?cc.COMPLETE:(t instanceof ni?t.code===Yt.Redirect||t.code===Yt.SupersededByNewNavigation:!1)?cc.REDIRECTING:cc.FAILED),Bt(t=>t!==cc.REDIRECTING),Vn(1)).subscribe(()=>{e()})}function _P(n){throw n}var yP={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},vP={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"},$i=(()=>{class n{get currentUrlTree(){return this.stateManager.getCurrentUrlTree()}get rawUrlTree(){return this.stateManager.getRawUrlTree()}get events(){return this._events}get routerState(){return this.stateManager.getRouterState()}constructor(){this.disposed=!1,this.console=Z(Su),this.stateManager=Z(i0),this.options=Z(Ic,{optional:!0})||{},this.pendingTasks=Z(La),this.urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred",this.navigationTransitions=Z(Qp),this.urlSerializer=Z(wc),this.location=Z(Wa),this.urlHandlingStrategy=Z(Wp),this._events=new Lt,this.errorHandler=this.options.errorHandler||_P,this.navigated=!1,this.routeReuseStrategy=Z(pP),this.onSameUrlNavigation=this.options.onSameUrlNavigation||"ignore",this.config=Z(ld,{optional:!0})?.flat()??[],this.componentInputBindingEnabled=!!Z(dd,{optional:!0}),this.eventsSubscription=new Jy,this.resetConfig(this.config),this.navigationTransitions.setupNavigations(this,this.currentUrlTree,this.routerState).subscribe({error:t=>{this.console.warn(t)}}),this.subscribeToNavigationEvents()}subscribeToNavigationEvents(){let t=this.navigationTransitions.events.subscribe(i=>{try{let r=this.navigationTransitions.currentTransition,s=this.navigationTransitions.currentNavigation;if(r!==null&&s!==null){if(this.stateManager.handleRouterEvent(i,s),i instanceof ni&&i.code!==Yt.Redirect&&i.code!==Yt.SupersededByNewNavigation)this.navigated=!0;else if(i instanceof Bn)this.navigated=!0;else if(i instanceof co){let o=i.navigationBehaviorOptions,c=this.urlHandlingStrategy.merge(i.url,r.currentRawUrl),l=K({browserUrl:r.extras.browserUrl,info:r.extras.info,skipLocationChange:r.extras.skipLocationChange,replaceUrl:r.extras.replaceUrl||this.urlUpdateStrategy==="eager"||fP(r.source)},o);this.scheduleNavigation(c,uc,null,l,{resolve:r.resolve,reject:r.reject,promise:r.promise})}}bP(i)&&this._events.next(i)}catch(r){this.navigationTransitions.transitionAbortSubject.next(r)}});this.eventsSubscription.add(t)}resetRootComponentType(t){this.routerState.root.component=t,this.navigationTransitions.rootComponentType=t}initialNavigation(){this.setUpLocationChangeListener(),this.navigationTransitions.hasRequestedNavigation||this.navigateToSyncWithBrowser(this.location.path(!0),uc,this.stateManager.restoredState())}setUpLocationChangeListener(){this.nonRouterCurrentEntryChangeSubscription??=this.stateManager.registerNonRouterCurrentEntryChangeListener((t,i)=>{setTimeout(()=>{this.navigateToSyncWithBrowser(t,"popstate",i)},0)})}navigateToSyncWithBrowser(t,i,r){let s={replaceUrl:!0},o=r?.navigationId?r:null;if(r){let l=K({},r);delete l.navigationId,delete l.\u0275routerPageId,Object.keys(l).length!==0&&(s.state=l)}let c=this.parseUrl(t);this.scheduleNavigation(c,i,o,s)}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.navigationTransitions.currentNavigation}get lastSuccessfulNavigation(){return this.navigationTransitions.lastSuccessfulNavigation}resetConfig(t){this.config=t.map(Hp),this.navigated=!1}ngOnDestroy(){this.dispose()}dispose(){this.navigationTransitions.complete(),this.nonRouterCurrentEntryChangeSubscription&&(this.nonRouterCurrentEntryChangeSubscription.unsubscribe(),this.nonRouterCurrentEntryChangeSubscription=void 0),this.disposed=!0,this.eventsSubscription.unsubscribe()}createUrlTree(t,i={}){let{relativeTo:r,queryParams:s,fragment:o,queryParamsHandling:c,preserveFragment:l}=i,f=l?this.currentUrlTree.fragment:o,g=null;switch(c??this.options.defaultQueryParamsHandling){case"merge":g=K(K({},this.currentUrlTree.queryParams),s);break;case"preserve":g=this.currentUrlTree.queryParams;break;default:g=s||null}g!==null&&(g=this.removeEmptyProps(g));let p;try{let w=r?r.snapshot:this.routerState.snapshot.root;p=Lw(w)}catch{(typeof t[0]!="string"||t[0][0]!=="/")&&(t=[]),p=this.currentUrlTree.root}return jw(p,t,g,f??null)}navigateByUrl(t,i={skipLocationChange:!1}){let r=Kr(t)?t:this.parseUrl(t),s=this.urlHandlingStrategy.merge(r,this.rawUrlTree);return this.scheduleNavigation(s,uc,null,i)}navigate(t,i={skipLocationChange:!1}){return wP(t),this.navigateByUrl(this.createUrlTree(t,i),i)}serializeUrl(t){return this.urlSerializer.serialize(t)}parseUrl(t){try{return this.urlSerializer.parse(t)}catch{return this.urlSerializer.parse("/")}}isActive(t,i){let r;if(i===!0?r=K({},yP):i===!1?r=K({},vP):r=i,Kr(t))return yw(this.currentUrlTree,t,r);let s=this.parseUrl(t);return yw(this.currentUrlTree,s,r)}removeEmptyProps(t){return Object.entries(t).reduce((i,[r,s])=>(s!=null&&(i[r]=s),i),{})}scheduleNavigation(t,i,r,s,o){if(this.disposed)return Promise.resolve(!1);let c,l,f;o?(c=o.resolve,l=o.reject,f=o.promise):f=new Promise((p,w)=>{c=p,l=w});let g=this.pendingTasks.add();return r0(this,()=>{queueMicrotask(()=>this.pendingTasks.remove(g))}),this.navigationTransitions.handleNavigationRequest({source:i,restoredState:r,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,rawUrl:t,extras:s,resolve:c,reject:l,promise:f,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),f.catch(p=>Promise.reject(p))}static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275prov=ie({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();function wP(n){for(let e=0;e<n.length;e++)if(n[e]==null)throw new De(4008,!1)}function bP(n){return!(n instanceof pc)&&!(n instanceof co)}var Gi=(()=>{class n{constructor(t,i,r,s,o,c){this.router=t,this.route=i,this.tabIndexAttribute=r,this.renderer=s,this.el=o,this.locationStrategy=c,this.href=null,this.onChanges=new Lt,this.preserveFragment=!1,this.skipLocationChange=!1,this.replaceUrl=!1,this.routerLinkInput=null;let l=o.nativeElement.tagName?.toLowerCase();this.isAnchorElement=l==="a"||l==="area",this.isAnchorElement?this.subscription=t.events.subscribe(f=>{f instanceof Bn&&this.updateHref()}):this.setTabIndexIfNotOnNativeEl("0")}setTabIndexIfNotOnNativeEl(t){this.tabIndexAttribute!=null||this.isAnchorElement||this.applyAttributeValue("tabindex",t)}ngOnChanges(t){this.isAnchorElement&&this.updateHref(),this.onChanges.next(this)}set routerLink(t){t==null?(this.routerLinkInput=null,this.setTabIndexIfNotOnNativeEl(null)):(Kr(t)?this.routerLinkInput=t:this.routerLinkInput=Array.isArray(t)?t:[t],this.setTabIndexIfNotOnNativeEl("0"))}onClick(t,i,r,s,o){let c=this.urlTree;if(c===null||this.isAnchorElement&&(t!==0||i||r||s||o||typeof this.target=="string"&&this.target!="_self"))return!0;let l={skipLocationChange:this.skipLocationChange,replaceUrl:this.replaceUrl,state:this.state,info:this.info};return this.router.navigateByUrl(c,l),!this.isAnchorElement}ngOnDestroy(){this.subscription?.unsubscribe()}updateHref(){let t=this.urlTree;this.href=t!==null&&this.locationStrategy?this.locationStrategy?.prepareExternalUrl(this.router.serializeUrl(t)):null;let i=this.href===null?null:gv(this.href,this.el.nativeElement.tagName.toLowerCase(),"href");this.applyAttributeValue("href",i)}applyAttributeValue(t,i){let r=this.renderer,s=this.el.nativeElement;i!==null?r.setAttribute(s,t,i):r.removeAttribute(s,t)}get urlTree(){return this.routerLinkInput===null?null:Kr(this.routerLinkInput)?this.routerLinkInput:this.router.createUrlTree(this.routerLinkInput,{relativeTo:this.relativeTo!==void 0?this.relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,queryParamsHandling:this.queryParamsHandling,preserveFragment:this.preserveFragment})}static{this.\u0275fac=function(i){return new(i||n)(ue($i),ue(Wr),fv("tabindex"),ue(Hs),ue(rn),ue(Ka))}}static{this.\u0275dir=Ct({type:n,selectors:[["","routerLink",""]],hostVars:1,hostBindings:function(i,r){i&1&&rt("click",function(o){return r.onClick(o.button,o.ctrlKey,o.shiftKey,o.altKey,o.metaKey)}),i&2&&$a("target",r.target)},inputs:{target:"target",queryParams:"queryParams",fragment:"fragment",queryParamsHandling:"queryParamsHandling",state:"state",info:"info",relativeTo:"relativeTo",preserveFragment:[2,"preserveFragment","preserveFragment",Ur],skipLocationChange:[2,"skipLocationChange","skipLocationChange",Ur],replaceUrl:[2,"replaceUrl","replaceUrl",Ur],routerLink:"routerLink"},standalone:!0,features:[Ks,kr]})}}return n})();var ud=class{};var CP=(()=>{class n{constructor(t,i,r,s,o){this.router=t,this.injector=r,this.preloadingStrategy=s,this.loader=o}setUpPreloading(){this.subscription=this.router.events.pipe(Bt(t=>t instanceof Bn),Ri(()=>this.preload())).subscribe(()=>{})}preload(){return this.processRoutes(this.injector,this.router.config)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}processRoutes(t,i){let r=[];for(let s of i){s.providers&&!s._injector&&(s._injector=Hf(s.providers,t,`Route: ${s.path}`));let o=s._injector??t,c=s._loadedInjector??o;(s.loadChildren&&!s._loadedRoutes&&s.canLoad===void 0||s.loadComponent&&!s._loadedComponent)&&r.push(this.preloadConfig(o,s)),(s.children||s._loadedRoutes)&&r.push(this.processRoutes(c,s.children??s._loadedRoutes))}return Le(r).pipe(Vf())}preloadConfig(t,i){return this.preloadingStrategy.preload(i,()=>{let r;i.loadChildren&&i.canLoad===void 0?r=this.loader.loadChildren(t,i):r=se(null);let s=r.pipe(Kt(o=>o===null?se(void 0):(i._loadedRoutes=o.routes,i._loadedInjector=o.injector,this.processRoutes(o.injector??t,o.routes))));if(i.loadComponent&&!i._loadedComponent){let o=this.loader.loadComponent(i);return Le([s,o]).pipe(Vf())}else return s})}static{this.\u0275fac=function(i){return new(i||n)(q($i),q(Nu),q(Rr),q(ud),q(Kp))}}static{this.\u0275prov=ie({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})(),s0=new le(""),EP=(()=>{class n{constructor(t,i,r,s,o={}){this.urlSerializer=t,this.transitions=i,this.viewportScroller=r,this.zone=s,this.options=o,this.lastId=0,this.lastSource="imperative",this.restoredId=0,this.store={},o.scrollPositionRestoration||="disabled",o.anchorScrolling||="disabled"}init(){this.options.scrollPositionRestoration!=="disabled"&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.transitions.events.subscribe(t=>{t instanceof ao?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=t.navigationTrigger,this.restoredId=t.restoredState?t.restoredState.navigationId:0):t instanceof Bn?(this.lastId=t.id,this.scheduleScrollEvent(t,this.urlSerializer.parse(t.urlAfterRedirects).fragment)):t instanceof zi&&t.code===ed.IgnoredSameUrlNavigation&&(this.lastSource=void 0,this.restoredId=0,this.scheduleScrollEvent(t,this.urlSerializer.parse(t.url).fragment))})}consumeScrollEvents(){return this.transitions.events.subscribe(t=>{t instanceof nd&&(t.position?this.options.scrollPositionRestoration==="top"?this.viewportScroller.scrollToPosition([0,0]):this.options.scrollPositionRestoration==="enabled"&&this.viewportScroller.scrollToPosition(t.position):t.anchor&&this.options.anchorScrolling==="enabled"?this.viewportScroller.scrollToAnchor(t.anchor):this.options.scrollPositionRestoration!=="disabled"&&this.viewportScroller.scrollToPosition([0,0]))})}scheduleScrollEvent(t,i){this.zone.runOutsideAngular(()=>{setTimeout(()=>{this.zone.run(()=>{this.transitions.events.next(new nd(t,this.lastSource==="popstate"?this.store[this.restoredId]:null,i))})},0)})}ngOnDestroy(){this.routerEventsSubscription?.unsubscribe(),this.scrollEventsSubscription?.unsubscribe()}static{this.\u0275fac=function(i){Tu()}}static{this.\u0275prov=ie({token:n,factory:n.\u0275fac})}}return n})();function IP(n){return n.routerState.root}function Tc(n,e){return{\u0275kind:n,\u0275providers:e}}function TP(){let n=Z(Fa);return e=>{let t=n.get(ku);if(e!==t.components[0])return;let i=n.get($i),r=n.get(o0);n.get(Yp)===1&&i.initialNavigation(),n.get(a0,null,zf.Optional)?.setUpPreloading(),n.get(s0,null,zf.Optional)?.init(),i.resetRootComponentType(t.componentTypes[0]),r.closed||(r.next(),r.complete(),r.unsubscribe())}}var o0=new le("",{factory:()=>new Lt}),Yp=new le("",{providedIn:"root",factory:()=>1});function AP(){return Tc(2,[{provide:Yp,useValue:0},{provide:Yf,multi:!0,deps:[Fa],useFactory:e=>{let t=e.get(Dv,Promise.resolve());return()=>t.then(()=>new Promise(i=>{let r=e.get($i),s=e.get(o0);r0(r,()=>{i(!0)}),e.get(Qp).afterPreactivation=()=>(i(!0),s.closed?se(void 0):s),r.initialNavigation()}))}}])}function xP(){return Tc(3,[{provide:Yf,multi:!0,useFactory:()=>{let e=Z($i);return()=>{e.setUpLocationChangeListener()}}},{provide:Yp,useValue:2}])}var a0=new le("");function PP(n){return Tc(0,[{provide:a0,useExisting:CP},{provide:ud,useExisting:n}])}function MP(){return Tc(8,[Cw,{provide:dd,useExisting:Cw}])}function SP(n){let e=[{provide:t0,useValue:uP},{provide:n0,useValue:K({skipNextTransition:!!n?.skipInitialTransition},n)}];return Tc(9,e)}var Aw=new le("ROUTER_FORROOT_GUARD"),OP=[Wa,{provide:wc,useClass:oo},$i,Cc,{provide:Wr,useFactory:IP,deps:[$i]},Kp,[]],Xp=(()=>{class n{constructor(t){}static forRoot(t,i){return{ngModule:n,providers:[OP,[],{provide:ld,multi:!0,useValue:t},{provide:Aw,useFactory:NP,deps:[[$i,new ka,new dv]]},{provide:Ic,useValue:i||{}},i?.useHash?RP():kP(),DP(),i?.preloadingStrategy?PP(i.preloadingStrategy).\u0275providers:[],i?.initialNavigation?VP(i):[],i?.bindToComponentInputs?MP().\u0275providers:[],i?.enableViewTransitions?SP().\u0275providers:[],FP()]}}static forChild(t){return{ngModule:n,providers:[{provide:ld,multi:!0,useValue:t}]}}static{this.\u0275fac=function(i){return new(i||n)(q(Aw,8))}}static{this.\u0275mod=Pe({type:n})}static{this.\u0275inj=xe({})}}return n})();function DP(){return{provide:s0,useFactory:()=>{let n=Z(Bv),e=Z(Se),t=Z(Ic),i=Z(Qp),r=Z(wc);return t.scrollOffset&&n.setOffset(t.scrollOffset),new EP(r,i,n,e,t)}}}function RP(){return{provide:Ka,useClass:kv}}function kP(){return{provide:Ka,useClass:Rv}}function NP(n){return"guarded"}function VP(n){return[n.initialNavigation==="disabled"?xP().\u0275providers:[],n.initialNavigation==="enabledBlocking"?AP().\u0275providers:[]]}var xw=new le("");function FP(){return[{provide:xw,useFactory:TP},{provide:Xf,multi:!0,useExisting:xw}]}var on=class n{constructor(e){this.http=e;this.loadCartFromLocalStorage()}cartData=[];product=new jt([]);loadCartFromLocalStorage(){let e=localStorage.getItem("cartData");e&&(this.cartData=JSON.parse(e),this.product.next(this.cartData))}getproduct(){return this.product.asObservable()}addtocart(e){this.cartData.push(e),this.product.next(this.cartData),this.saveCartToLocalStorage()}getTotal(){let e=0;return this.cartData.forEach(t=>{let i=parseFloat(t.price.replace("Rs:","").trim());e+=i}),e}saveData(e){return this.http.post("/assets/db.json",e)}removeproduct(e){this.cartData=this.cartData.filter(t=>t.id!==e.id),this.product.next(this.cartData),this.saveCartToLocalStorage()}removeallproduct(){this.cartData=[],this.product.next(this.cartData),this.saveCartToLocalStorage()}saveCartToLocalStorage(){localStorage.setItem("cartData",JSON.stringify(this.cartData))}static \u0275fac=function(t){return new(t||n)(q(tc))};static \u0275prov=ie({token:n,factory:n.\u0275fac,providedIn:"root"})};var an=class n{constructor(e){this.http=e}baseUrl="https://muhammadshamoonhussain.github.io/data/db.json";getContact(e){return this.http.post(`${this.baseUrl}/contact`,e)}getcheckOut(e){return this.http.post(`${this.baseUrl}/order`,e)}getProduct(e){return this.http.get(this.baseUrl).pipe(ae(t=>t.products))}productList(){return this.http.get(this.baseUrl).pipe(ae(e=>e.products))}addProduct(e){return this.http.post(`${this.baseUrl}/products`,e)}static \u0275fac=function(t){return new(t||n)(q(tc))};static \u0275prov=ie({token:n,factory:n.\u0275fac,providedIn:"root"})};function LP(n,e){if(n&1){let t=Br();Lr(0),F(1,"div",7),te(2,"img",8),F(3,"p")(4,"strong"),$(5,"Price: "),j(),$(6),j(),F(7,"p")(8,"strong"),$(9,"Category: "),j(),$(10),j(),F(11,"p")(12,"strong"),$(13,"Description: "),j(),$(14),j(),F(15,"button",9),rt("click",function(){let r=Nr(t).$implicit,s=ei();return Vr(s.addtocart(r))}),te(16,"i",10),F(17,"span"),$(18," Add To Cart"),j()()(),jr()}if(n&2){let t=e.$implicit;me(2),Ws("src",t.image,Gs),me(4),Pt(t.price),me(4),Pt(t.category),me(4),Pt(t.description)}}var fd=class n{constructor(e,t){this.cartapi=e;this.api=t}productlist;ngOnInit(){this.api.productList().subscribe(e=>{this.productlist=e,this.productlist.forEach(t=>{Object.assign(t,{quantity:1,total:t.price})})})}addtocart(e){this.cartapi.addtocart(e)}static \u0275fac=function(t){return new(t||n)(ue(on),ue(an))};static \u0275cmp=it({type:n,selectors:[["app-product"]],decls:17,vars:1,consts:[[1,"cart-top","container-fluid"],[1,"container","d-flex"],[1,"item"],["src","","alt",""],[1,"container"],[1,"row"],[4,"ngFor","ngForOf"],[1,"cart","col-md-3","mb-4"],["alt","Product Image",1,"img-fluid",3,"src"],["id","btn",1,"btn","btn-primary",3,"click"],["id","icon",1,"fa-solid","fa-cart-plus"]],template:function(t,i){t&1&&(F(0,"div",0)(1,"div",1)(2,"div",2)(3,"a"),te(4,"img",3),j()(),F(5,"div",2)(6,"a"),te(7,"img",3),j()(),F(8,"div",2)(9,"a"),te(10,"img",3),j()(),F(11,"div",2)(12,"a"),te(13,"img",3),j()()()(),F(14,"div",4)(15,"div",5),Et(16,LP,19,4,"ng-container",6),j()()),t&2&&(me(16),He("ngForOf",i.productlist))},dependencies:[Js],styles:[".container[_ngcontent-%COMP%]{position:relative;top:80px}#btn[_ngcontent-%COMP%]{background:#000;color:#fff;border:none;position:relative;padding:10px 20px;height:40px;width:150px}#icon[_ngcontent-%COMP%]{position:relative;left:-38%;transition:all .5s ease-in-out}#btn[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{width:100%;height:10%;transition:visibility .3s,opacity .3s ease-in-out;position:relative;left:-8%}#btn[_ngcontent-%COMP%]:hover   span[_ngcontent-%COMP%]{visibility:hidden;opacity:0}#btn[_ngcontent-%COMP%]:hover   #icon[_ngcontent-%COMP%]{left:30%;transform:translate(50%)}"]})};function jP(n,e){if(n&1){let t=Br();F(0,"tr")(1,"td"),$(2),j(),F(3,"td"),$(4),j(),F(5,"td"),te(6,"img",14),j(),F(7,"td"),$(8),j(),F(9,"td"),$(10),j(),F(11,"td"),$(12),j(),F(13,"td")(14,"button",15),rt("click",function(){let r=Nr(t).$implicit,s=ei(2);return Vr(s.removeproduct(r))}),te(15,"i",16),F(16,"span"),$(17,"Delete"),j()()()()}if(n&2){let t=e.$implicit,i=e.index;me(2),Pt(i+1),me(2),Pt(t.name),me(2),Ws("src",t.image,Gs),me(2),Pt(t.price),me(2),Pt(t.description),me(2),Pt(t.category)}}function BP(n,e){if(n&1){let t=Br();Lr(0,2),F(1,"div",3)(2,"div",4)(3,"div",5)(4,"table",6)(5,"thead")(6,"tr")(7,"th"),$(8,"S.No"),j(),F(9,"th"),$(10,"Product Name"),j(),F(11,"th"),$(12,"Product Image"),j(),F(13,"th"),$(14,"Price"),j(),F(15,"th"),$(16,"Description"),j(),F(17,"th"),$(18,"Category"),j(),F(19,"th"),$(20,"Action"),j()()(),F(21,"tbody"),Et(22,jP,18,6,"tr",7),F(23,"tr")(24,"td")(25,"button",8),rt("click",function(){Nr(t);let r=ei();return Vr(r.removeallproduct())}),te(26,"i",9),F(27,"span"),$(28,"Empty Cart"),j()()(),F(29,"td")(30,"button",10),te(31,"i",11),F(32,"span"),$(33,"Shop More"),j()()(),F(34,"td")(35,"button",12),te(36,"i",13),F(37,"span"),$(38,"Check Out"),j()()(),F(39,"h4"),$(40),j()()()()()()(),jr()}if(n&2){let t=ei();me(22),He("ngForOf",t.products),me(18),Qs("Rs: ",t.allproduct,"")}}function UP(n,e){n&1&&(Lr(0),F(1,"div",17)(2,"div",18)(3,"h4",19),$(4,"My Cart"),j()(),F(5,"div",20),te(6,"img",21),F(7,"h5"),$(8,"Your Cart is empty"),j(),F(9,"h6"),$(10,"Add item to it now"),j(),F(11,"button",22),te(12,"i",23),F(13,"span"),$(14,"Shop Now"),j()()()(),jr())}var pd=class n{constructor(e,t){this.cartapi=e;this.api=t}products=[];allproduct;ngOnInit(){this.cartapi.getproduct().subscribe(e=>{this.products=e,this.allproduct=this.cartapi.getTotal()})}removeproduct(e){this.cartapi.removeproduct(e)}removeallproduct(){this.cartapi.removeallproduct()}static \u0275fac=function(t){return new(t||n)(ue(on),ue(an))};static \u0275cmp=it({type:n,selectors:[["app-cart"]],decls:3,vars:2,consts:[["style","overflow-x: hidden;",4,"ngIf"],[4,"ngIf"],[2,"overflow-x","hidden"],[1,"container",2,"overflow-x","hidden"],[1,"card-table","mt-5"],[1,"card-product"],[1,"table","table-responsive"],[4,"ngFor","ngForOf"],["id","delete",1,"btn","btn-danger",3,"click"],["id","del",1,"fa-solid","fa-trash"],["routerLink","/product","type","submit","id","btn5",1,"btn","btn-primary"],["id","shop1",1,"fa-solid","fa-shop"],["id","check","routerLink","/checkout",1,"btn","btn-danger"],["id","del3",1,"fa-solid","fa-bag-shopping"],["alt","",3,"src"],["id","btn2",1,"btn","btn-danger",3,"click"],["id","del2",1,"fa-solid","fa-trash"],[1,"container","mt-5"],[1,"card"],[1,"cart-title"],[1,"center"],["src","https://cdn-icons-png.flaticon.com/512/11329/11329060.png","alt",""],["routerLink","/product","type","submit","id","btn",1,"btn","btn-primary"],["id","shop",1,"fa-solid","fa-shop"]],template:function(t,i){t&1&&(Et(0,BP,41,2,"ng-container",0)(1,UP,15,0,"ng-container",1),te(2,"router-outlet")),t&2&&(He("ngIf",i.products.length!=0),me(),He("ngIf",i.products.length==0))},dependencies:[Js,Zs,Qr,Gi],styles:[".card[_ngcontent-%COMP%]{height:60vh;margin:25px;padding:25px}.center[_ngcontent-%COMP%]{top:40%;left:50%;transform:translate(-50%,-50%);text-align:center;position:absolute}.center[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:200px;height:200px;object-fit:contain}#btn[_ngcontent-%COMP%]{background:#000;border:none;transition:all .5s ease-in-out;width:146px;margin-left:10px}#btn[_ngcontent-%COMP%]   #shop[_ngcontent-%COMP%]{position:absolute;left:0%;top:91%;transition:all .6s ease-in-out}#btn[_ngcontent-%COMP%]:hover   #shop[_ngcontent-%COMP%]{transform:translate(90px)}#btn[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{transition:visibilty .3s opacity .5s ease-in-out;letter-spacing:3px;font-weight:600;font-family:sans-serif}#btn[_ngcontent-%COMP%]:hover   span[_ngcontent-%COMP%]{visibility:hidden;opacity:0}#delete[_ngcontent-%COMP%]{background:#000;border:none;width:145px;transition:all .5s ease-in-out}#delete[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{transition:visibilty .3s opacity .5s ease-in-out;letter-spacing:1px;font-weight:600;font-family:sans-serif}#delete[_ngcontent-%COMP%]:hover   span[_ngcontent-%COMP%]{visibility:hidden;opacity:0}#delete[_ngcontent-%COMP%]   #del[_ngcontent-%COMP%]{position:absolute;left:104px;margin-top:5px;transition:all .5s ease-in-out}#delete[_ngcontent-%COMP%]:hover   #del[_ngcontent-%COMP%]{transform:translate(95px)}#btn5[_ngcontent-%COMP%]{margin-left:10px;background:#000;border:none;width:127px}#btn5[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{font-weight:600;position:relative;font-family:sans-serif;left:-10%;transition:visibility .3s opacity .3s}#btn5[_ngcontent-%COMP%]:hover   span[_ngcontent-%COMP%]{visibility:hidden;opacity:0}#btn5[_ngcontent-%COMP%]   #shop1[_ngcontent-%COMP%]{position:relative;left:-35px;top:1px;transition:all .6s ease-in-out}#btn5[_ngcontent-%COMP%]:hover   #shop1[_ngcontent-%COMP%]{transform:translate(80px)}#btn2[_ngcontent-%COMP%]{background:#000;border:none;width:140px}#btn2[_ngcontent-%COMP%]   #del2[_ngcontent-%COMP%]{position:relative;left:-50%;transition:all .5s ease-in-out}#btn2[_ngcontent-%COMP%]:hover   #del2[_ngcontent-%COMP%]{transform:translate(85px)}#btn2[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{font-weight:600;letter-spacing:2.3px;margin-left:-7px;transition:visibility .3s opacity .3s}#btn2[_ngcontent-%COMP%]:hover   span[_ngcontent-%COMP%]{visibility:hidden;opacity:0}#check[_ngcontent-%COMP%]{background:#000;border:none;width:140px;margin-left:10px}#check[_ngcontent-%COMP%]   #del3[_ngcontent-%COMP%]{position:relative;left:-36%;transition:all .5s ease-in-out}#check[_ngcontent-%COMP%]:hover   #del3[_ngcontent-%COMP%]{transform:translate(85px)}#check[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{font-weight:600;letter-spacing:2.3px;transition:visibility .3s opacity .3s ease-in-out;margin-left:-8px}#check[_ngcontent-%COMP%]:hover   span[_ngcontent-%COMP%]{visibility:hidden;opacity:0}h4[_ngcontent-%COMP%]{position:absolute;left:46%}@media only screen and (max-width: 1115px){.table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]:nth-child(5), .table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]:nth-child(5), .table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]:nth-child(6), .table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]:nth-child(6){display:none}td[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:160px}#btn2[_ngcontent-%COMP%]{width:95px}#btn2[_ngcontent-%COMP%]:hover   #del2[_ngcontent-%COMP%]{transform:translate(60px)}#delete[_ngcontent-%COMP%]{width:121px;left:5%;position:absolute}#del[_ngcontent-%COMP%]{color:#fff;margin-left:-697px}#delete[_ngcontent-%COMP%]:hover   #del[_ngcontent-%COMP%]{transform:translate(70px)}#btn5[_ngcontent-%COMP%]{left:18%;position:absolute}#check[_ngcontent-%COMP%]{width:143px;margin-left:-387px;margin-top:68px}h4[_ngcontent-%COMP%]{margin-left:-277px;margin-top:68px}tr[_ngcontent-%COMP%]{width:10%}}@media only screen and (max-width: 1046px){#btn5[_ngcontent-%COMP%]{left:20%}h4[_ngcontent-%COMP%]{left:59%}}@media only screen and (max-width: 991px){#check[_ngcontent-%COMP%]{width:143px;margin-left:-287px;margin-top:68px}}@media only screen and (max-width: 913px){#btn5[_ngcontent-%COMP%]{left:21%}h4[_ngcontent-%COMP%]{left:59%}}@media only screen and (max-width: 860px){#btn5[_ngcontent-%COMP%]{left:22%}h4[_ngcontent-%COMP%]{left:60%}}@media only screen and (max-width: 806px){#btn5[_ngcontent-%COMP%]{left:23%}h4[_ngcontent-%COMP%]{left:63%}#check[_ngcontent-%COMP%]{width:149px;margin-left:-287px;margin-top:68px}}@media only screen and (max-width: 762px){#btn5[_ngcontent-%COMP%]{left:24%}h4[_ngcontent-%COMP%]{left:75%}#check[_ngcontent-%COMP%]{margin-left:-152px}}@media only screen and (max-width: 750px){#btn5[_ngcontent-%COMP%]{left:24%}h4[_ngcontent-%COMP%]{left:79%}#check[_ngcontent-%COMP%]{margin-left:-122px}}@media only screen and (max-width: 722px){#btn5[_ngcontent-%COMP%]{left:25%}h4[_ngcontent-%COMP%]{left:81%}}@media only screen and (max-width: 690px){#btn5[_ngcontent-%COMP%]{left:26%}h4[_ngcontent-%COMP%]{left:83%}}@media only screen and (max-width: 655px){#btn5[_ngcontent-%COMP%]{left:29%}h4[_ngcontent-%COMP%]{left:85%}}@media only screen and (max-width: 575px){#btn5[_ngcontent-%COMP%]{left:31%}h4[_ngcontent-%COMP%]{left:89%}}@media only screen and (max-width: 532px){#btn5[_ngcontent-%COMP%]{left:33%}h4[_ngcontent-%COMP%]{left:91%}}@media (max-width:515px){.table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%], .table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{display:block;width:100%}td[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:100px}.card-product[_ngcontent-%COMP%]{display:block}#check[_ngcontent-%COMP%]{margin-left:10px;margin-top:27px}h4[_ngcontent-%COMP%]{margin-left:-201px;margin-top:-46px}#btn5[_ngcontent-%COMP%]{left:33%;top:204%}}@media only screen and (max-width: 495px){#btn5[_ngcontent-%COMP%]{left:35%}h4[_ngcontent-%COMP%]{left:94%}}@media only screen and (max-width: 462px){#btn5[_ngcontent-%COMP%]{left:37%}h4[_ngcontent-%COMP%]{left:105%}}@media only screen and (max-width: 435px){.table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%], .table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{display:block;width:100%}td[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:80px}.card-product[_ngcontent-%COMP%]{display:block}#btn2[_ngcontent-%COMP%]{width:95px}#btn2[_ngcontent-%COMP%]:hover   #del2[_ngcontent-%COMP%]{transform:translate(60px)}#delete[_ngcontent-%COMP%]{width:121px;left:5%;position:absolute}#del[_ngcontent-%COMP%]{color:#fff;margin-left:-697px}#delete[_ngcontent-%COMP%]:hover   #del[_ngcontent-%COMP%]{transform:translate(70px)}#btn5[_ngcontent-%COMP%]{margin-left:26px;margin-top:-174px}#check[_ngcontent-%COMP%]{margin-left:10px;margin-top:27px}h4[_ngcontent-%COMP%]{margin-left:-201px;margin-top:-46px}tr[_ngcontent-%COMP%]{width:10%}}@media only screen and (max-width: 375px){.table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%], .table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{display:block;width:100%}td[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:50px}.card-product[_ngcontent-%COMP%]{display:block}#btn2[_ngcontent-%COMP%]{width:95px}#btn2[_ngcontent-%COMP%]:hover   #del2[_ngcontent-%COMP%]{transform:translate(60px)}#delete[_ngcontent-%COMP%]{width:121px;left:5%;position:absolute}#del[_ngcontent-%COMP%]{color:#fff;margin-left:-697px}#delete[_ngcontent-%COMP%]:hover   #del[_ngcontent-%COMP%]{transform:translate(70px)}#btn5[_ngcontent-%COMP%]{margin-left:26px;margin-top:-174px}#check[_ngcontent-%COMP%]{margin-left:10px;margin-top:27px}h4[_ngcontent-%COMP%]{margin-left:-201px;margin-top:-46px}tr[_ngcontent-%COMP%]{width:10%}}"]})};var md=class n{static \u0275fac=function(t){return new(t||n)};static \u0275cmp=it({type:n,selectors:[["app-about"]],decls:38,vars:0,consts:[[1,"wrapper","container-fluid"],[1,"hero1","row","align-items-center"],[1,"col-md-6","col-sm-12","text-container"],[1,"head"],[1,"para"],["routerLink","/cart",1,"btn"],[1,"back"],["id","cart",1,"fa-solid","fa-cart-plus"],["id","div3",1,"col-md-6","col-sm-12"],["src","https://looksgood.tokotema.com/wp-content/uploads/2024/08/portrait-of-male-sales-assistant-or-customer-sorti-2024-01-12-16-34-55-utc-1.jpg","alt","","id","img",1,"img","img-fluid"],["id","div2",1,"container-fluid","mt-5"],["id","row",1,"row","align-items-center"],[1,"col-md-6","col-sm-12","img-container","text-center"],["src","https://veirdo.in/cdn/shop/files/Artboard11.png?v=1724147308&width=533","alt","",1,"img","img-fluid"],["id","text-container",1,"col-md-6","col-sm-12","text-container"],[1,"text"],[1,"video-section","container-fluid","mt-5"],["id","row1",1,"row","align-items-center"],[1,"col-md-6","col-sm-12","text-container","text-center"],[1,"col-md-6","col-sm-12","video-container","text-center"],["controls","","autoplay","","loop","","width","100%",1,"video-fluid"],["src","https://placeit.net/uploads/preview_image/137132/image/preview_roll.mp4","type","video/mp4"]],template:function(t,i){t&1&&(F(0,"div",0)(1,"div",1)(2,"div",2)(3,"h5"),$(4,"Discover Your Perfect Tee"),j(),F(5,"h1",3),$(6,"Explore our latest collection of trendsetting T-shirts and find your new favorite look."),j(),F(7,"p",4),$(8,"Egestas id convallis imperdiet mi cum ornare varius. Tellus varius semper tellus at commodo pretium mauris. Massa."),j(),F(9,"button",5),$(10,"SHOP NOW! "),F(11,"div",6),te(12,"i",7),j()()(),F(13,"div",8),te(14,"img",9),j()(),F(15,"div",10)(16,"div",11)(17,"div",12),te(18,"img",13),j(),F(19,"div",14)(20,"h1",15),$(21,"Our Products' Specialities"),j(),F(22,"h2"),$(23,"More than just a look"),j(),F(24,"p"),$(25,"There are many variations of passages of Lorem Ipsum available, but the majority have suffered alteration in some form, by injected humour, or randomised words which don't look even slightly believable. If you are going to use a passage of Lorem Ipsum."),j()()()(),F(26,"div",16)(27,"div",17)(28,"div",18)(29,"h1"),$(30,"Customize Your T-Shirt"),j(),F(31,"h2"),$(32,"Your Style, Your Design"),j(),F(33,"p"),$(34," Unleash your creativity with our customized T-shirts! Choose your color, add your designs, and make a statement with unique pieces tailored just for you. Whether for personal use or as gifts, our custom T-shirts are perfect for every occasion. "),j()(),F(35,"div",19)(36,"video",20),te(37,"source",21),j()()()()())},dependencies:[Gi],styles:['.wrapper[_ngcontent-%COMP%]{margin-top:5%;position:relative;width:95%}.text-container[_ngcontent-%COMP%]   h5[_ngcontent-%COMP%]{color:gray}.head[_ngcontent-%COMP%]{font-size:2.5rem;font-weight:700;margin-top:10px}.para[_ngcontent-%COMP%]{font-size:1.1rem;margin-top:20px}.btn[_ngcontent-%COMP%]{background:#000;width:192px;height:53px;color:#fff;font-size:1rem;border-radius:30px;font-weight:700;position:relative;text-align:left}.back[_ngcontent-%COMP%]{background-color:#fff;width:41px;height:40px;border-radius:30px;position:absolute;top:50%;right:5%;transform:translateY(-50%);display:flex;justify-content:center;align-items:center;transition:all .5s ease-in-out}#cart[_ngcontent-%COMP%]{font-size:1.2rem;color:#000}.back[_ngcontent-%COMP%]:hover, .btn[_ngcontent-%COMP%]:hover   .back[_ngcontent-%COMP%]{width:90%}.img[_ngcontent-%COMP%]{width:100%;border-radius:7px}.text[_ngcontent-%COMP%]:before{content:"";display:block;width:100px;height:3px;background-color:#e03d74;margin:20px auto}#div2[_ngcontent-%COMP%]{position:absolute;top:43%}.video-section[_ngcontent-%COMP%]{padding:40px 0;position:relative;top:664px}.text-container[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-size:2.5rem;margin-bottom:20px}.text-container[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]:before{content:"";display:block;width:100px;height:3px;background-color:#e03d74;margin:20px auto}.text-container[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-size:1.5rem;margin-bottom:15px}.text-container[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:1rem;color:#555}.video-container[_ngcontent-%COMP%]   video[_ngcontent-%COMP%]{border-radius:8px;height:600px}@media (max-width: 767px){.img-container[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{top:33%;position:absolute;width:324px;left:8%}#row[_ngcontent-%COMP%]{top:36px;position:absolute}#div3[_ngcontent-%COMP%]   #img[_ngcontent-%COMP%]{top:48px;position:relative;width:568px;left:8%}#div2[_ngcontent-%COMP%]{width:90%}.img-container[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{top:114%;width:495px;left:16%}#row1[_ngcontent-%COMP%]{top:202px;position:relative}}@media (max-width: 656px){.img-container[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{top:33%;position:absolute;width:324px;left:8%}#row[_ngcontent-%COMP%]{top:36px;position:absolute}#div3[_ngcontent-%COMP%]   #img[_ngcontent-%COMP%]{top:48px;position:relative;width:481px;left:8%}#div2[_ngcontent-%COMP%]{width:90%}.img-container[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{top:114%;width:495px;left:7%}#row1[_ngcontent-%COMP%]{top:202px;position:relative}}@media (max-width: 562px){.img-container[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{top:33%;position:absolute;width:324px;left:8%}#row[_ngcontent-%COMP%]{top:36px;position:absolute;left:1%}#div3[_ngcontent-%COMP%]   #img[_ngcontent-%COMP%]{top:48px;position:relative;width:415px;left:8%}#div2[_ngcontent-%COMP%]{width:90%}.img-container[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{top:114%;width:438px;left:7%}#row1[_ngcontent-%COMP%]{top:202px;position:relative}}@media (max-width: 532px){.img-container[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{top:33%;position:absolute;width:324px;left:8%}#row[_ngcontent-%COMP%]{top:36px;position:absolute;left:1%}#div3[_ngcontent-%COMP%]   #img[_ngcontent-%COMP%]{top:48px;position:relative;width:415px;left:8%}#div2[_ngcontent-%COMP%]{width:90%}.img-container[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{top:114%;width:438px;left:7%}#row1[_ngcontent-%COMP%]{top:202px;position:relative}#text-container[_ngcontent-%COMP%]{left:7%;position:relative}}@media (max-width: 506px){.img-container[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{top:33%;position:absolute;width:324px;left:8%}#row[_ngcontent-%COMP%]{top:36px;position:absolute;left:1%}#div3[_ngcontent-%COMP%]   #img[_ngcontent-%COMP%]{top:48px;position:relative;width:415px;left:8%}#div2[_ngcontent-%COMP%]{width:90%}.img-container[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{top:114%;width:438px;left:7%}#row1[_ngcontent-%COMP%]{top:202px;position:relative}}@media (max-width: 489px){.img-container[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{top:33%;position:absolute;width:324px;left:8%}#row[_ngcontent-%COMP%]{top:36px;position:absolute;left:1%}#div3[_ngcontent-%COMP%]   #img[_ngcontent-%COMP%]{top:48px;position:relative;width:378px;left:6%}#div2[_ngcontent-%COMP%]{width:90%}.img-container[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{top:114%;width:357px;left:12%}#row1[_ngcontent-%COMP%]{top:202px;position:relative}}@media (max-width: 435px){.img-container[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{top:33%;position:absolute;width:324px;left:8%}#row[_ngcontent-%COMP%]{top:36px;position:absolute}#div3[_ngcontent-%COMP%]   #img[_ngcontent-%COMP%]{top:48px;position:relative}#div2[_ngcontent-%COMP%]{width:90%}.img-container[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{top:114%}#row1[_ngcontent-%COMP%]{top:202px;position:relative}}@media (max-width: 435px){.img-container[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{top:33%;position:absolute;width:324px;left:8%}#row[_ngcontent-%COMP%]{top:36px;position:absolute;left:1%}#div3[_ngcontent-%COMP%]   #img[_ngcontent-%COMP%]{top:48px;position:relative;width:352px;left:3%}#div2[_ngcontent-%COMP%]{width:85%}.img-container[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{top:114%;width:325px;left:10%}#row1[_ngcontent-%COMP%]{top:202px;position:relative}.btn[_ngcontent-%COMP%]{width:170px}}']})};var g0=(()=>{class n{constructor(t,i){this._renderer=t,this._elementRef=i,this.onChange=r=>{},this.onTouched=()=>{}}setProperty(t,i){this._renderer.setProperty(this._elementRef.nativeElement,t,i)}registerOnTouched(t){this.onTouched=t}registerOnChange(t){this.onChange=t}setDisabledState(t){this.setProperty("disabled",t)}static{this.\u0275fac=function(i){return new(i||n)(ue(Hs),ue(rn))}}static{this.\u0275dir=Ct({type:n})}}return n})(),zP=(()=>{class n extends g0{static{this.\u0275fac=(()=>{let t;return function(r){return(t||(t=Va(n)))(r||n)}})()}static{this.\u0275dir=Ct({type:n,features:[Fr]})}}return n})(),_0=new le("");var $P={provide:_0,useExisting:Iu(()=>go),multi:!0};function qP(){let n=zr()?zr().getUserAgent():"";return/android (\d+)/.test(n.toLowerCase())}var GP=new le(""),go=(()=>{class n extends g0{constructor(t,i,r){super(t,i),this._compositionMode=r,this._composing=!1,this._compositionMode==null&&(this._compositionMode=!qP())}writeValue(t){let i=t??"";this.setProperty("value",i)}_handleInput(t){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(t)}_compositionStart(){this._composing=!0}_compositionEnd(t){this._composing=!1,this._compositionMode&&this.onChange(t)}static{this.\u0275fac=function(i){return new(i||n)(ue(Hs),ue(rn),ue(GP,8))}}static{this.\u0275dir=Ct({type:n,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(i,r){i&1&&rt("input",function(o){return r._handleInput(o.target.value)})("blur",function(){return r.onTouched()})("compositionstart",function(){return r._compositionStart()})("compositionend",function(o){return r._compositionEnd(o.target.value)})},features:[Ys([$P]),Fr]})}}return n})();function Hi(n){return n==null||(typeof n=="string"||Array.isArray(n))&&n.length===0}function y0(n){return n!=null&&typeof n.length=="number"}var v0=new le(""),w0=new le(""),HP=/^(?=.{1,254}$)(?=.{1,64}@)[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+(?:\.[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+)*@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$/,Dt=class{static min(e){return KP(e)}static max(e){return WP(e)}static required(e){return QP(e)}static requiredTrue(e){return YP(e)}static email(e){return XP(e)}static minLength(e){return JP(e)}static maxLength(e){return ZP(e)}static pattern(e){return eM(e)}static nullValidator(e){return b0(e)}static compose(e){return x0(e)}static composeAsync(e){return M0(e)}};function KP(n){return e=>{if(Hi(e.value)||Hi(n))return null;let t=parseFloat(e.value);return!isNaN(t)&&t<n?{min:{min:n,actual:e.value}}:null}}function WP(n){return e=>{if(Hi(e.value)||Hi(n))return null;let t=parseFloat(e.value);return!isNaN(t)&&t>n?{max:{max:n,actual:e.value}}:null}}function QP(n){return Hi(n.value)?{required:!0}:null}function YP(n){return n.value===!0?null:{required:!0}}function XP(n){return Hi(n.value)||HP.test(n.value)?null:{email:!0}}function JP(n){return e=>Hi(e.value)||!y0(e.value)?null:e.value.length<n?{minlength:{requiredLength:n,actualLength:e.value.length}}:null}function ZP(n){return e=>y0(e.value)&&e.value.length>n?{maxlength:{requiredLength:n,actualLength:e.value.length}}:null}function eM(n){if(!n)return b0;let e,t;return typeof n=="string"?(t="",n.charAt(0)!=="^"&&(t+="^"),t+=n,n.charAt(n.length-1)!=="$"&&(t+="$"),e=new RegExp(t)):(t=n.toString(),e=n),i=>{if(Hi(i.value))return null;let r=i.value;return e.test(r)?null:{pattern:{requiredPattern:t,actualValue:r}}}}function b0(n){return null}function C0(n){return n!=null}function E0(n){return Ru(n)?Le(n):n}function I0(n){let e={};return n.forEach(t=>{e=t!=null?K(K({},e),t):e}),Object.keys(e).length===0?null:e}function T0(n,e){return e.map(t=>t(n))}function tM(n){return!n.validate}function A0(n){return n.map(e=>tM(e)?e:t=>e.validate(t))}function x0(n){if(!n)return null;let e=n.filter(C0);return e.length==0?null:function(t){return I0(T0(t,e))}}function P0(n){return n!=null?x0(A0(n)):null}function M0(n){if(!n)return null;let e=n.filter(C0);return e.length==0?null:function(t){let i=T0(t,e).map(E0);return iv(i).pipe(ae(I0))}}function S0(n){return n!=null?M0(A0(n)):null}function c0(n,e){return n===null?[e]:Array.isArray(n)?[...n,e]:[n,e]}function O0(n){return n._rawValidators}function D0(n){return n._rawAsyncValidators}function Jp(n){return n?Array.isArray(n)?n:[n]:[]}function yd(n,e){return Array.isArray(n)?n.includes(e):n===e}function l0(n,e){let t=Jp(e);return Jp(n).forEach(r=>{yd(t,r)||t.push(r)}),t}function u0(n,e){return Jp(e).filter(t=>!yd(n,t))}var vd=class{constructor(){this._rawValidators=[],this._rawAsyncValidators=[],this._onDestroyCallbacks=[]}get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_setValidators(e){this._rawValidators=e||[],this._composedValidatorFn=P0(this._rawValidators)}_setAsyncValidators(e){this._rawAsyncValidators=e||[],this._composedAsyncValidatorFn=S0(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_registerOnDestroy(e){this._onDestroyCallbacks.push(e)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(e=>e()),this._onDestroyCallbacks=[]}reset(e=void 0){this.control&&this.control.reset(e)}hasError(e,t){return this.control?this.control.hasError(e,t):!1}getError(e,t){return this.control?this.control.getError(e,t):null}},po=class extends vd{get formDirective(){return null}get path(){return null}},Rc=class extends vd{constructor(){super(...arguments),this._parent=null,this.name=null,this.valueAccessor=null}},wd=class{constructor(e){this._cd=e}get isTouched(){return this._cd?.control?._touched?.(),!!this._cd?.control?.touched}get isUntouched(){return!!this._cd?.control?.untouched}get isPristine(){return this._cd?.control?._pristine?.(),!!this._cd?.control?.pristine}get isDirty(){return!!this._cd?.control?.dirty}get isValid(){return this._cd?.control?._status?.(),!!this._cd?.control?.valid}get isInvalid(){return!!this._cd?.control?.invalid}get isPending(){return!!this._cd?.control?.pending}get isSubmitted(){return this._cd?._submitted?.(),!!this._cd?.submitted}},nM={"[class.ng-untouched]":"isUntouched","[class.ng-touched]":"isTouched","[class.ng-pristine]":"isPristine","[class.ng-dirty]":"isDirty","[class.ng-valid]":"isValid","[class.ng-invalid]":"isInvalid","[class.ng-pending]":"isPending"},CR=Ee(K({},nM),{"[class.ng-submitted]":"isSubmitted"}),Td=(()=>{class n extends wd{constructor(t){super(t)}static{this.\u0275fac=function(i){return new(i||n)(ue(Rc,2))}}static{this.\u0275dir=Ct({type:n,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(i,r){i&2&&qa("ng-untouched",r.isUntouched)("ng-touched",r.isTouched)("ng-pristine",r.isPristine)("ng-dirty",r.isDirty)("ng-valid",r.isValid)("ng-invalid",r.isInvalid)("ng-pending",r.isPending)},features:[Fr]})}}return n})(),Ad=(()=>{class n extends wd{constructor(t){super(t)}static{this.\u0275fac=function(i){return new(i||n)(ue(po,10))}}static{this.\u0275dir=Ct({type:n,selectors:[["","formGroupName",""],["","formArrayName",""],["","ngModelGroup",""],["","formGroup",""],["form",3,"ngNoForm",""],["","ngForm",""]],hostVars:16,hostBindings:function(i,r){i&2&&qa("ng-untouched",r.isUntouched)("ng-touched",r.isTouched)("ng-pristine",r.isPristine)("ng-dirty",r.isDirty)("ng-valid",r.isValid)("ng-invalid",r.isInvalid)("ng-pending",r.isPending)("ng-submitted",r.isSubmitted)},features:[Fr]})}}return n})();var Mc="VALID",gd="INVALID",ho="PENDING",Sc="DISABLED",Ki=class{},bd=class extends Ki{constructor(e,t){super(),this.value=e,this.source=t}},Oc=class extends Ki{constructor(e,t){super(),this.pristine=e,this.source=t}},Dc=class extends Ki{constructor(e,t){super(),this.touched=e,this.source=t}},fo=class extends Ki{constructor(e,t){super(),this.status=e,this.source=t}},Zp=class extends Ki{constructor(e){super(),this.source=e}},em=class extends Ki{constructor(e){super(),this.source=e}};function im(n){return(xd(n)?n.validators:n)||null}function iM(n){return Array.isArray(n)?P0(n):n||null}function rm(n,e){return(xd(e)?e.asyncValidators:n)||null}function rM(n){return Array.isArray(n)?S0(n):n||null}function xd(n){return n!=null&&!Array.isArray(n)&&typeof n=="object"}function R0(n,e,t){let i=n.controls;if(!(e?Object.keys(i):i).length)throw new De(1e3,"");if(!i[t])throw new De(1001,"")}function k0(n,e,t){n._forEachChild((i,r)=>{if(t[r]===void 0)throw new De(1002,"")})}var mo=class{constructor(e,t){this._pendingDirty=!1,this._hasOwnPendingAsyncValidator=null,this._pendingTouched=!1,this._onCollectionChange=()=>{},this._parent=null,this._status=Ha(()=>this.statusReactive()),this.statusReactive=za(void 0),this._pristine=Ha(()=>this.pristineReactive()),this.pristineReactive=za(!0),this._touched=Ha(()=>this.touchedReactive()),this.touchedReactive=za(!1),this._events=new Lt,this.events=this._events.asObservable(),this._onDisabledChange=[],this._assignValidators(e),this._assignAsyncValidators(t)}get validator(){return this._composedValidatorFn}set validator(e){this._rawValidators=this._composedValidatorFn=e}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(e){this._rawAsyncValidators=this._composedAsyncValidatorFn=e}get parent(){return this._parent}get status(){return Vi(this.statusReactive)}set status(e){Vi(()=>this.statusReactive.set(e))}get valid(){return this.status===Mc}get invalid(){return this.status===gd}get pending(){return this.status==ho}get disabled(){return this.status===Sc}get enabled(){return this.status!==Sc}get pristine(){return Vi(this.pristineReactive)}set pristine(e){Vi(()=>this.pristineReactive.set(e))}get dirty(){return!this.pristine}get touched(){return Vi(this.touchedReactive)}set touched(e){Vi(()=>this.touchedReactive.set(e))}get untouched(){return!this.touched}get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(e){this._assignValidators(e)}setAsyncValidators(e){this._assignAsyncValidators(e)}addValidators(e){this.setValidators(l0(e,this._rawValidators))}addAsyncValidators(e){this.setAsyncValidators(l0(e,this._rawAsyncValidators))}removeValidators(e){this.setValidators(u0(e,this._rawValidators))}removeAsyncValidators(e){this.setAsyncValidators(u0(e,this._rawAsyncValidators))}hasValidator(e){return yd(this._rawValidators,e)}hasAsyncValidator(e){return yd(this._rawAsyncValidators,e)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(e={}){let t=this.touched===!1;this.touched=!0;let i=e.sourceControl??this;this._parent&&!e.onlySelf&&this._parent.markAsTouched(Ee(K({},e),{sourceControl:i})),t&&e.emitEvent!==!1&&this._events.next(new Dc(!0,i))}markAllAsTouched(e={}){this.markAsTouched({onlySelf:!0,emitEvent:e.emitEvent,sourceControl:this}),this._forEachChild(t=>t.markAllAsTouched(e))}markAsUntouched(e={}){let t=this.touched===!0;this.touched=!1,this._pendingTouched=!1;let i=e.sourceControl??this;this._forEachChild(r=>{r.markAsUntouched({onlySelf:!0,emitEvent:e.emitEvent,sourceControl:i})}),this._parent&&!e.onlySelf&&this._parent._updateTouched(e,i),t&&e.emitEvent!==!1&&this._events.next(new Dc(!1,i))}markAsDirty(e={}){let t=this.pristine===!0;this.pristine=!1;let i=e.sourceControl??this;this._parent&&!e.onlySelf&&this._parent.markAsDirty(Ee(K({},e),{sourceControl:i})),t&&e.emitEvent!==!1&&this._events.next(new Oc(!1,i))}markAsPristine(e={}){let t=this.pristine===!1;this.pristine=!0,this._pendingDirty=!1;let i=e.sourceControl??this;this._forEachChild(r=>{r.markAsPristine({onlySelf:!0,emitEvent:e.emitEvent})}),this._parent&&!e.onlySelf&&this._parent._updatePristine(e,i),t&&e.emitEvent!==!1&&this._events.next(new Oc(!0,i))}markAsPending(e={}){this.status=ho;let t=e.sourceControl??this;e.emitEvent!==!1&&(this._events.next(new fo(this.status,t)),this.statusChanges.emit(this.status)),this._parent&&!e.onlySelf&&this._parent.markAsPending(Ee(K({},e),{sourceControl:t}))}disable(e={}){let t=this._parentMarkedDirty(e.onlySelf);this.status=Sc,this.errors=null,this._forEachChild(r=>{r.disable(Ee(K({},e),{onlySelf:!0}))}),this._updateValue();let i=e.sourceControl??this;e.emitEvent!==!1&&(this._events.next(new bd(this.value,i)),this._events.next(new fo(this.status,i)),this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors(Ee(K({},e),{skipPristineCheck:t}),this),this._onDisabledChange.forEach(r=>r(!0))}enable(e={}){let t=this._parentMarkedDirty(e.onlySelf);this.status=Mc,this._forEachChild(i=>{i.enable(Ee(K({},e),{onlySelf:!0}))}),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent}),this._updateAncestors(Ee(K({},e),{skipPristineCheck:t}),this),this._onDisabledChange.forEach(i=>i(!1))}_updateAncestors(e,t){this._parent&&!e.onlySelf&&(this._parent.updateValueAndValidity(e),e.skipPristineCheck||this._parent._updatePristine({},t),this._parent._updateTouched({},t))}setParent(e){this._parent=e}getRawValue(){return this.value}updateValueAndValidity(e={}){if(this._setInitialStatus(),this._updateValue(),this.enabled){let i=this._cancelExistingSubscription();this.errors=this._runValidator(),this.status=this._calculateStatus(),(this.status===Mc||this.status===ho)&&this._runAsyncValidator(i,e.emitEvent)}let t=e.sourceControl??this;e.emitEvent!==!1&&(this._events.next(new bd(this.value,t)),this._events.next(new fo(this.status,t)),this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!e.onlySelf&&this._parent.updateValueAndValidity(Ee(K({},e),{sourceControl:t}))}_updateTreeValidity(e={emitEvent:!0}){this._forEachChild(t=>t._updateTreeValidity(e)),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?Sc:Mc}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(e,t){if(this.asyncValidator){this.status=ho,this._hasOwnPendingAsyncValidator={emitEvent:t!==!1};let i=E0(this.asyncValidator(this));this._asyncValidationSubscription=i.subscribe(r=>{this._hasOwnPendingAsyncValidator=null,this.setErrors(r,{emitEvent:t,shouldHaveEmitted:e})})}}_cancelExistingSubscription(){if(this._asyncValidationSubscription){this._asyncValidationSubscription.unsubscribe();let e=this._hasOwnPendingAsyncValidator?.emitEvent??!1;return this._hasOwnPendingAsyncValidator=null,e}return!1}setErrors(e,t={}){this.errors=e,this._updateControlsErrors(t.emitEvent!==!1,this,t.shouldHaveEmitted)}get(e){let t=e;return t==null||(Array.isArray(t)||(t=t.split(".")),t.length===0)?null:t.reduce((i,r)=>i&&i._find(r),this)}getError(e,t){let i=t?this.get(t):this;return i&&i.errors?i.errors[e]:null}hasError(e,t){return!!this.getError(e,t)}get root(){let e=this;for(;e._parent;)e=e._parent;return e}_updateControlsErrors(e,t,i){this.status=this._calculateStatus(),e&&this.statusChanges.emit(this.status),(e||i)&&this._events.next(new fo(this.status,t)),this._parent&&this._parent._updateControlsErrors(e,t,i)}_initObservables(){this.valueChanges=new nn,this.statusChanges=new nn}_calculateStatus(){return this._allControlsDisabled()?Sc:this.errors?gd:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(ho)?ho:this._anyControlsHaveStatus(gd)?gd:Mc}_anyControlsHaveStatus(e){return this._anyControls(t=>t.status===e)}_anyControlsDirty(){return this._anyControls(e=>e.dirty)}_anyControlsTouched(){return this._anyControls(e=>e.touched)}_updatePristine(e,t){let i=!this._anyControlsDirty(),r=this.pristine!==i;this.pristine=i,this._parent&&!e.onlySelf&&this._parent._updatePristine(e,t),r&&this._events.next(new Oc(this.pristine,t))}_updateTouched(e={},t){this.touched=this._anyControlsTouched(),this._events.next(new Dc(this.touched,t)),this._parent&&!e.onlySelf&&this._parent._updateTouched(e,t)}_registerOnCollectionChange(e){this._onCollectionChange=e}_setUpdateStrategy(e){xd(e)&&e.updateOn!=null&&(this._updateOn=e.updateOn)}_parentMarkedDirty(e){let t=this._parent&&this._parent.dirty;return!e&&!!t&&!this._parent._anyControlsDirty()}_find(e){return null}_assignValidators(e){this._rawValidators=Array.isArray(e)?e.slice():e,this._composedValidatorFn=iM(this._rawValidators)}_assignAsyncValidators(e){this._rawAsyncValidators=Array.isArray(e)?e.slice():e,this._composedAsyncValidatorFn=rM(this._rawAsyncValidators)}},Cd=class extends mo{constructor(e,t,i){super(im(t),rm(i,t)),this.controls=e,this._initObservables(),this._setUpdateStrategy(t),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}registerControl(e,t){return this.controls[e]?this.controls[e]:(this.controls[e]=t,t.setParent(this),t._registerOnCollectionChange(this._onCollectionChange),t)}addControl(e,t,i={}){this.registerControl(e,t),this.updateValueAndValidity({emitEvent:i.emitEvent}),this._onCollectionChange()}removeControl(e,t={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],this.updateValueAndValidity({emitEvent:t.emitEvent}),this._onCollectionChange()}setControl(e,t,i={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],t&&this.registerControl(e,t),this.updateValueAndValidity({emitEvent:i.emitEvent}),this._onCollectionChange()}contains(e){return this.controls.hasOwnProperty(e)&&this.controls[e].enabled}setValue(e,t={}){k0(this,!0,e),Object.keys(e).forEach(i=>{R0(this,!0,i),this.controls[i].setValue(e[i],{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t)}patchValue(e,t={}){e!=null&&(Object.keys(e).forEach(i=>{let r=this.controls[i];r&&r.patchValue(e[i],{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t))}reset(e={},t={}){this._forEachChild((i,r)=>{i.reset(e?e[r]:null,{onlySelf:!0,emitEvent:t.emitEvent})}),this._updatePristine(t,this),this._updateTouched(t,this),this.updateValueAndValidity(t)}getRawValue(){return this._reduceChildren({},(e,t,i)=>(e[i]=t.getRawValue(),e))}_syncPendingControls(){let e=this._reduceChildren(!1,(t,i)=>i._syncPendingControls()?!0:t);return e&&this.updateValueAndValidity({onlySelf:!0}),e}_forEachChild(e){Object.keys(this.controls).forEach(t=>{let i=this.controls[t];i&&e(i,t)})}_setUpControls(){this._forEachChild(e=>{e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange)})}_updateValue(){this.value=this._reduceValue()}_anyControls(e){for(let[t,i]of Object.entries(this.controls))if(this.contains(t)&&e(i))return!0;return!1}_reduceValue(){let e={};return this._reduceChildren(e,(t,i,r)=>((i.enabled||this.disabled)&&(t[r]=i.value),t))}_reduceChildren(e,t){let i=e;return this._forEachChild((r,s)=>{i=t(i,r,s)}),i}_allControlsDisabled(){for(let e of Object.keys(this.controls))if(this.controls[e].enabled)return!1;return Object.keys(this.controls).length>0||this.disabled}_find(e){return this.controls.hasOwnProperty(e)?this.controls[e]:null}};var tm=class extends Cd{};var N0=new le("CallSetDisabledState",{providedIn:"root",factory:()=>sm}),sm="always";function sM(n,e){return[...e.path,n]}function d0(n,e,t=sm){om(n,e),e.valueAccessor.writeValue(n.value),(n.disabled||t==="always")&&e.valueAccessor.setDisabledState?.(n.disabled),aM(n,e),lM(n,e),cM(n,e),oM(n,e)}function h0(n,e,t=!0){let i=()=>{};e.valueAccessor&&(e.valueAccessor.registerOnChange(i),e.valueAccessor.registerOnTouched(i)),Id(n,e),n&&(e._invokeOnDestroyCallbacks(),n._registerOnCollectionChange(()=>{}))}function Ed(n,e){n.forEach(t=>{t.registerOnValidatorChange&&t.registerOnValidatorChange(e)})}function oM(n,e){if(e.valueAccessor.setDisabledState){let t=i=>{e.valueAccessor.setDisabledState(i)};n.registerOnDisabledChange(t),e._registerOnDestroy(()=>{n._unregisterOnDisabledChange(t)})}}function om(n,e){let t=O0(n);e.validator!==null?n.setValidators(c0(t,e.validator)):typeof t=="function"&&n.setValidators([t]);let i=D0(n);e.asyncValidator!==null?n.setAsyncValidators(c0(i,e.asyncValidator)):typeof i=="function"&&n.setAsyncValidators([i]);let r=()=>n.updateValueAndValidity();Ed(e._rawValidators,r),Ed(e._rawAsyncValidators,r)}function Id(n,e){let t=!1;if(n!==null){if(e.validator!==null){let r=O0(n);if(Array.isArray(r)&&r.length>0){let s=r.filter(o=>o!==e.validator);s.length!==r.length&&(t=!0,n.setValidators(s))}}if(e.asyncValidator!==null){let r=D0(n);if(Array.isArray(r)&&r.length>0){let s=r.filter(o=>o!==e.asyncValidator);s.length!==r.length&&(t=!0,n.setAsyncValidators(s))}}}let i=()=>{};return Ed(e._rawValidators,i),Ed(e._rawAsyncValidators,i),t}function aM(n,e){e.valueAccessor.registerOnChange(t=>{n._pendingValue=t,n._pendingChange=!0,n._pendingDirty=!0,n.updateOn==="change"&&V0(n,e)})}function cM(n,e){e.valueAccessor.registerOnTouched(()=>{n._pendingTouched=!0,n.updateOn==="blur"&&n._pendingChange&&V0(n,e),n.updateOn!=="submit"&&n.markAsTouched()})}function V0(n,e){n._pendingDirty&&n.markAsDirty(),n.setValue(n._pendingValue,{emitModelToViewChange:!1}),e.viewToModelUpdate(n._pendingValue),n._pendingChange=!1}function lM(n,e){let t=(i,r)=>{e.valueAccessor.writeValue(i),r&&e.viewToModelUpdate(i)};n.registerOnChange(t),e._registerOnDestroy(()=>{n._unregisterOnChange(t)})}function uM(n,e){n==null,om(n,e)}function dM(n,e){return Id(n,e)}function hM(n,e){if(!n.hasOwnProperty("model"))return!1;let t=n.model;return t.isFirstChange()?!0:!Object.is(e,t.currentValue)}function fM(n){return Object.getPrototypeOf(n.constructor)===zP}function pM(n,e){n._syncPendingControls(),e.forEach(t=>{let i=t.control;i.updateOn==="submit"&&i._pendingChange&&(t.viewToModelUpdate(i._pendingValue),i._pendingChange=!1)})}function mM(n,e){if(!e)return null;Array.isArray(e);let t,i,r;return e.forEach(s=>{s.constructor===go?t=s:fM(s)?i=s:r=s}),r||i||t||null}function gM(n,e){let t=n.indexOf(e);t>-1&&n.splice(t,1)}function f0(n,e){let t=n.indexOf(e);t>-1&&n.splice(t,1)}function p0(n){return typeof n=="object"&&n!==null&&Object.keys(n).length===2&&"value"in n&&"disabled"in n}var _d=class extends mo{constructor(e=null,t,i){super(im(t),rm(i,t)),this.defaultValue=null,this._onChange=[],this._pendingChange=!1,this._applyFormState(e),this._setUpdateStrategy(t),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator}),xd(t)&&(t.nonNullable||t.initialValueIsDefault)&&(p0(e)?this.defaultValue=e.value:this.defaultValue=e)}setValue(e,t={}){this.value=this._pendingValue=e,this._onChange.length&&t.emitModelToViewChange!==!1&&this._onChange.forEach(i=>i(this.value,t.emitViewToModelChange!==!1)),this.updateValueAndValidity(t)}patchValue(e,t={}){this.setValue(e,t)}reset(e=this.defaultValue,t={}){this._applyFormState(e),this.markAsPristine(t),this.markAsUntouched(t),this.setValue(this.value,t),this._pendingChange=!1}_updateValue(){}_anyControls(e){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(e){this._onChange.push(e)}_unregisterOnChange(e){f0(this._onChange,e)}registerOnDisabledChange(e){this._onDisabledChange.push(e)}_unregisterOnDisabledChange(e){f0(this._onDisabledChange,e)}_forEachChild(e){}_syncPendingControls(){return this.updateOn==="submit"&&(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),this._pendingChange)?(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),!0):!1}_applyFormState(e){p0(e)?(this.value=this._pendingValue=e.value,e.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=e}};var _M=n=>n instanceof _d;var Pd=(()=>{class n{static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275dir=Ct({type:n,selectors:[["form",3,"ngNoForm","",3,"ngNativeValidate",""]],hostAttrs:["novalidate",""]})}}return n})();var F0=new le("");var yM={provide:po,useExisting:Iu(()=>kc)},kc=(()=>{class n extends po{get submitted(){return Vi(this._submittedReactive)}set submitted(t){this._submittedReactive.set(t)}constructor(t,i,r){super(),this.callSetDisabledState=r,this._submitted=Ha(()=>this._submittedReactive()),this._submittedReactive=za(!1),this._onCollectionChange=()=>this._updateDomValue(),this.directives=[],this.form=null,this.ngSubmit=new nn,this._setValidators(t),this._setAsyncValidators(i)}ngOnChanges(t){this._checkFormPresent(),t.hasOwnProperty("form")&&(this._updateValidators(),this._updateDomValue(),this._updateRegistrations(),this._oldForm=this.form)}ngOnDestroy(){this.form&&(Id(this.form,this),this.form._onCollectionChange===this._onCollectionChange&&this.form._registerOnCollectionChange(()=>{}))}get formDirective(){return this}get control(){return this.form}get path(){return[]}addControl(t){let i=this.form.get(t.path);return d0(i,t,this.callSetDisabledState),i.updateValueAndValidity({emitEvent:!1}),this.directives.push(t),i}getControl(t){return this.form.get(t.path)}removeControl(t){h0(t.control||null,t,!1),gM(this.directives,t)}addFormGroup(t){this._setUpFormContainer(t)}removeFormGroup(t){this._cleanUpFormContainer(t)}getFormGroup(t){return this.form.get(t.path)}addFormArray(t){this._setUpFormContainer(t)}removeFormArray(t){this._cleanUpFormContainer(t)}getFormArray(t){return this.form.get(t.path)}updateModel(t,i){this.form.get(t.path).setValue(i)}onSubmit(t){return this._submittedReactive.set(!0),pM(this.form,this.directives),this.ngSubmit.emit(t),this.form._events.next(new Zp(this.control)),t?.target?.method==="dialog"}onReset(){this.resetForm()}resetForm(t=void 0){this.form.reset(t),this._submittedReactive.set(!1),this.form._events.next(new em(this.form))}_updateDomValue(){this.directives.forEach(t=>{let i=t.control,r=this.form.get(t.path);i!==r&&(h0(i||null,t),_M(r)&&(d0(r,t,this.callSetDisabledState),t.control=r))}),this.form._updateTreeValidity({emitEvent:!1})}_setUpFormContainer(t){let i=this.form.get(t.path);uM(i,t),i.updateValueAndValidity({emitEvent:!1})}_cleanUpFormContainer(t){if(this.form){let i=this.form.get(t.path);i&&dM(i,t)&&i.updateValueAndValidity({emitEvent:!1})}}_updateRegistrations(){this.form._registerOnCollectionChange(this._onCollectionChange),this._oldForm&&this._oldForm._registerOnCollectionChange(()=>{})}_updateValidators(){om(this.form,this),this._oldForm&&Id(this._oldForm,this)}_checkFormPresent(){this.form}static{this.\u0275fac=function(i){return new(i||n)(ue(v0,10),ue(w0,10),ue(N0,8))}}static{this.\u0275dir=Ct({type:n,selectors:[["","formGroup",""]],hostBindings:function(i,r){i&1&&rt("submit",function(o){return r.onSubmit(o)})("reset",function(){return r.onReset()})},inputs:{form:[0,"formGroup","form"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],features:[Ys([yM]),Fr,kr]})}}return n})();var vM={provide:Rc,useExisting:Iu(()=>Nc)},Nc=(()=>{class n extends Rc{set isDisabled(t){}static{this._ngModelWarningSentOnce=!1}constructor(t,i,r,s,o){super(),this._ngModelWarningConfig=o,this._added=!1,this.name=null,this.update=new nn,this._ngModelWarningSent=!1,this._parent=t,this._setValidators(i),this._setAsyncValidators(r),this.valueAccessor=mM(this,s)}ngOnChanges(t){this._added||this._setUpControl(),hM(t,this.viewModel)&&(this.viewModel=this.model,this.formDirective.updateModel(this,this.model))}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}viewToModelUpdate(t){this.viewModel=t,this.update.emit(t)}get path(){return sM(this.name==null?this.name:this.name.toString(),this._parent)}get formDirective(){return this._parent?this._parent.formDirective:null}_checkParentType(){}_setUpControl(){this._checkParentType(),this.control=this.formDirective.addControl(this),this._added=!0}static{this.\u0275fac=function(i){return new(i||n)(ue(po,13),ue(v0,10),ue(w0,10),ue(_0,10),ue(F0,8))}}static{this.\u0275dir=Ct({type:n,selectors:[["","formControlName",""]],inputs:{name:[0,"formControlName","name"],isDisabled:[0,"disabled","isDisabled"],model:[0,"ngModel","model"]},outputs:{update:"ngModelChange"},features:[Ys([vM]),Fr,kr]})}}return n})();var wM=(()=>{class n{static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275mod=Pe({type:n})}static{this.\u0275inj=xe({})}}return n})(),nm=class extends mo{constructor(e,t,i){super(im(t),rm(i,t)),this.controls=e,this._initObservables(),this._setUpdateStrategy(t),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}at(e){return this.controls[this._adjustIndex(e)]}push(e,t={}){this.controls.push(e),this._registerControl(e),this.updateValueAndValidity({emitEvent:t.emitEvent}),this._onCollectionChange()}insert(e,t,i={}){this.controls.splice(e,0,t),this._registerControl(t),this.updateValueAndValidity({emitEvent:i.emitEvent})}removeAt(e,t={}){let i=this._adjustIndex(e);i<0&&(i=0),this.controls[i]&&this.controls[i]._registerOnCollectionChange(()=>{}),this.controls.splice(i,1),this.updateValueAndValidity({emitEvent:t.emitEvent})}setControl(e,t,i={}){let r=this._adjustIndex(e);r<0&&(r=0),this.controls[r]&&this.controls[r]._registerOnCollectionChange(()=>{}),this.controls.splice(r,1),t&&(this.controls.splice(r,0,t),this._registerControl(t)),this.updateValueAndValidity({emitEvent:i.emitEvent}),this._onCollectionChange()}get length(){return this.controls.length}setValue(e,t={}){k0(this,!1,e),e.forEach((i,r)=>{R0(this,!1,r),this.at(r).setValue(i,{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t)}patchValue(e,t={}){e!=null&&(e.forEach((i,r)=>{this.at(r)&&this.at(r).patchValue(i,{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t))}reset(e=[],t={}){this._forEachChild((i,r)=>{i.reset(e[r],{onlySelf:!0,emitEvent:t.emitEvent})}),this._updatePristine(t,this),this._updateTouched(t,this),this.updateValueAndValidity(t)}getRawValue(){return this.controls.map(e=>e.getRawValue())}clear(e={}){this.controls.length<1||(this._forEachChild(t=>t._registerOnCollectionChange(()=>{})),this.controls.splice(0),this.updateValueAndValidity({emitEvent:e.emitEvent}))}_adjustIndex(e){return e<0?e+this.length:e}_syncPendingControls(){let e=this.controls.reduce((t,i)=>i._syncPendingControls()?!0:t,!1);return e&&this.updateValueAndValidity({onlySelf:!0}),e}_forEachChild(e){this.controls.forEach((t,i)=>{e(t,i)})}_updateValue(){this.value=this.controls.filter(e=>e.enabled||this.disabled).map(e=>e.value)}_anyControls(e){return this.controls.some(t=>t.enabled&&e(t))}_setUpControls(){this._forEachChild(e=>this._registerControl(e))}_allControlsDisabled(){for(let e of this.controls)if(e.enabled)return!1;return this.controls.length>0||this.disabled}_registerControl(e){e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange)}_find(e){return this.at(e)??null}};function m0(n){return!!n&&(n.asyncValidators!==void 0||n.validators!==void 0||n.updateOn!==void 0)}var Md=(()=>{class n{constructor(){this.useNonNullable=!1}get nonNullable(){let t=new n;return t.useNonNullable=!0,t}group(t,i=null){let r=this._reduceControls(t),s={};return m0(i)?s=i:i!==null&&(s.validators=i.validator,s.asyncValidators=i.asyncValidator),new Cd(r,s)}record(t,i=null){let r=this._reduceControls(t);return new tm(r,i)}control(t,i,r){let s={};return this.useNonNullable?(m0(i)?s=i:(s.validators=i,s.asyncValidators=r),new _d(t,Ee(K({},s),{nonNullable:!0}))):new _d(t,i,r)}array(t,i,r){let s=t.map(o=>this._createControl(o));return new nm(s,i,r)}_reduceControls(t){let i={};return Object.keys(t).forEach(r=>{i[r]=this._createControl(t[r])}),i}_createControl(t){if(t instanceof _d)return t;if(t instanceof mo)return t;if(Array.isArray(t)){let i=t[0],r=t.length>1?t[1]:null,s=t.length>2?t[2]:null;return this.control(i,r,s)}else return this.control(t)}static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275prov=ie({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();var L0=(()=>{class n{static withConfig(t){return{ngModule:n,providers:[{provide:F0,useValue:t.warnOnNgModelWithFormControl??"always"},{provide:N0,useValue:t.callSetDisabledState??sm}]}}static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275mod=Pe({type:n})}static{this.\u0275inj=xe({imports:[wM]})}}return n})();var Oy=Xy(cm());var bM="firebase",CM="10.14.1";Li(bM,CM,"app");var Vc=new Xs("ANGULARFIRE2_VERSION");var EM=(n,e)=>{let t=e?[e]:Hv(),i=[];return t.forEach(r=>{r.container.getProvider(n).instances.forEach(o=>{i.includes(o)||i.push(o)})}),i},Xr=class{constructor(){return EM(IM)}},IM="app-check";function lm(){}var Sd=class{zone;delegate;constructor(e,t=ev){this.zone=e,this.delegate=t}now(){return this.delegate.now()}schedule(e,t,i){let r=this.zone,s=function(o){r.runGuarded(()=>{e.apply(this,[o])})};return this.delegate.schedule(s,t,i)}},um=class{zone;task=null;constructor(e){this.zone=e}call(e,t){let i=this.unscheduleTask.bind(this);return this.task=this.zone.run(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",lm,{},lm,lm)),t.pipe(ft({next:i,complete:i,error:i})).subscribe(e).add(i)}unscheduleTask(){setTimeout(()=>{this.task!=null&&this.task.state==="scheduled"&&(this.task.invoke(),this.task=null)},10)}},Od=(()=>{class n{ngZone;outsideAngular;insideAngular;constructor(t){this.ngZone=t,this.outsideAngular=t.runOutsideAngular(()=>new Sd(Zone.current)),this.insideAngular=t.run(()=>new Sd(Zone.current,wu)),globalThis.\u0275AngularFireScheduler||=this}static \u0275fac=function(i){return new(i||n)(q(Se))};static \u0275prov=ie({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function TM(){let n=globalThis.\u0275AngularFireScheduler;if(!n)throw new Error(`Either AngularFireModule has not been provided in your AppModule (this can be done manually or implictly using
provideFirebaseApp) or you're calling an AngularFire method outside of an NgModule (which is not supported).`);return n}function Ut(n){return AM(TM())(n)}function AM(n){return function(t){return t=t.lift(new um(n.ngZone)),t.pipe(Bs(n.outsideAngular),Or(n.insideAngular))}}var MM=new Map,SM={activated:!1,tokenObservers:[]},OM={initialized:!1,enabled:!1};function bn(n){return MM.get(n)||Object.assign({},SM)}function G0(){return OM}var DM="https://content-firebaseappcheck.googleapis.com/v1";var RM="exchangeDebugToken",U0={OFFSET_DURATION:5*60*1e3,RETRIAL_MIN_WAIT:30*1e3,RETRIAL_MAX_WAIT:16*60*1e3},UR=24*60*60*1e3;var hm=class{constructor(e,t,i,r,s){if(this.operation=e,this.retryPolicy=t,this.getWaitDuration=i,this.lowerBound=r,this.upperBound=s,this.pending=null,this.nextErrorWaitInterval=r,r>s)throw new Error("Proactive refresh lower bound greater than upper bound!")}start(){this.nextErrorWaitInterval=this.lowerBound,this.process(!0).catch(()=>{})}stop(){this.pending&&(this.pending.reject("cancelled"),this.pending=null)}isRunning(){return!!this.pending}process(e){return V(this,null,function*(){this.stop();try{this.pending=new Zf,this.pending.promise.catch(t=>{}),yield kM(this.getNextRun(e)),this.pending.resolve(),yield this.pending.promise,this.pending=new Zf,this.pending.promise.catch(t=>{}),yield this.operation(),this.pending.resolve(),yield this.pending.promise,this.process(!0).catch(()=>{})}catch(t){this.retryPolicy(t)?this.process(!1).catch(()=>{}):this.stop()}})}getNextRun(e){if(e)return this.nextErrorWaitInterval=this.lowerBound,this.getWaitDuration();{let t=this.nextErrorWaitInterval;return this.nextErrorWaitInterval*=2,this.nextErrorWaitInterval>this.upperBound&&(this.nextErrorWaitInterval=this.upperBound),t}}};function kM(n){return new Promise(e=>{setTimeout(e,n)})}var NM={"already-initialized":"You have already called initializeAppCheck() for FirebaseApp {$appName} with different options. To avoid this error, call initializeAppCheck() with the same options as when it was originally called. This will return the already initialized instance.","use-before-activation":"App Check is being used before initializeAppCheck() is called for FirebaseApp {$appName}. Call initializeAppCheck() before instantiating other Firebase services.","fetch-network-error":"Fetch failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-parse-error":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status-error":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","recaptcha-error":"ReCAPTCHA error.",throttled:"Requests throttled due to {$httpStatus} error. Attempts allowed again after {$time}"},Wi=new qv("appCheck","AppCheck",NM);function H0(n){if(!bn(n).activated)throw Wi.create("use-before-activation",{appName:n.name})}function K0(i,r){return V(this,arguments,function*({url:n,body:e},t){let s={"Content-Type":"application/json"},o=t.getImmediate({optional:!0});if(o){let I=yield o.getHeartbeatsHeader();I&&(s["X-Firebase-Client"]=I)}let c={method:"POST",body:JSON.stringify(e),headers:s},l;try{l=yield fetch(n,c)}catch(I){throw Wi.create("fetch-network-error",{originalErrorMessage:I?.message})}if(l.status!==200)throw Wi.create("fetch-status-error",{httpStatus:l.status});let f;try{f=yield l.json()}catch(I){throw Wi.create("fetch-parse-error",{originalErrorMessage:I?.message})}let g=f.ttl.match(/^([\d.]+)(s)$/);if(!g||!g[2]||isNaN(Number(g[1])))throw Wi.create("fetch-parse-error",{originalErrorMessage:`ttl field (timeToLive) is not in standard Protobuf Duration format: ${f.ttl}`});let p=Number(g[1])*1e3,w=Date.now();return{token:f.token,expireTimeMillis:w+p,issuedAtTimeMillis:w}})}function W0(n,e){let{projectId:t,appId:i,apiKey:r}=n.options;return{url:`${DM}/projects/${t}/apps/${i}:${RM}?key=${r}`,body:{debug_token:e}}}var VM="firebase-app-check-database",FM=1,fm="firebase-app-check-store";var Dd=null;function LM(){return Dd||(Dd=new Promise((n,e)=>{try{let t=indexedDB.open(VM,FM);t.onsuccess=i=>{n(i.target.result)},t.onerror=i=>{var r;e(Wi.create("storage-open",{originalErrorMessage:(r=i.target.error)===null||r===void 0?void 0:r.message}))},t.onupgradeneeded=i=>{let r=i.target.result;switch(i.oldVersion){case 0:r.createObjectStore(fm,{keyPath:"compositeKey"})}}}catch(t){e(Wi.create("storage-open",{originalErrorMessage:t?.message}))}}),Dd)}function jM(n,e){return BM(UM(n),e)}function BM(n,e){return V(this,null,function*(){let i=(yield LM()).transaction(fm,"readwrite"),s=i.objectStore(fm).put({compositeKey:n,value:e});return new Promise((o,c)=>{s.onsuccess=l=>{o()},i.onerror=l=>{var f;c(Wi.create("storage-set",{originalErrorMessage:(f=l.target.error)===null||f===void 0?void 0:f.message}))}})})}function UM(n){return`${n.options.appId}-${n.name}`}var pm=new ju("@firebase/app-check");function dm(n,e){return Lu()?jM(n,e).catch(t=>{pm.warn(`Failed to write token to IndexedDB. Error: ${t}`)}):Promise.resolve()}function Q0(){return G0().enabled}function Y0(){return V(this,null,function*(){let n=G0();if(n.enabled&&n.token)return n.token.promise;throw Error(`
            Can't get debug token in production mode.
        `)})}var zM={error:"UNKNOWN_ERROR"};function $M(n){return Uv.encodeString(JSON.stringify(n),!1)}function mm(n,e=!1){return V(this,null,function*(){let t=n.app;H0(t);let i=bn(t),r=i.token,s;if(r&&!Fc(r)&&(i.token=void 0,r=void 0),!r){let l=yield i.cachedTokenPromise;l&&(Fc(l)?r=l:yield dm(t,void 0))}if(!e&&r&&Fc(r))return{token:r.token};let o=!1;if(Q0()){i.exchangeTokenPromise||(i.exchangeTokenPromise=K0(W0(t,yield Y0()),n.heartbeatServiceProvider).finally(()=>{i.exchangeTokenPromise=void 0}),o=!0);let l=yield i.exchangeTokenPromise;return yield dm(t,l),i.token=l,{token:l.token}}try{i.exchangeTokenPromise||(i.exchangeTokenPromise=i.provider.getToken().finally(()=>{i.exchangeTokenPromise=void 0}),o=!0),r=yield bn(t).exchangeTokenPromise}catch(l){l.code==="appCheck/throttled"?pm.warn(l.message):pm.error(l),s=l}let c;return r?s?Fc(r)?c={token:r.token,internalError:s}:c=$0(s):(c={token:r.token},i.token=r,yield dm(t,r)):c=$0(s),o&&KM(t,c),c})}function qM(n){return V(this,null,function*(){let e=n.app;H0(e);let{provider:t}=bn(e);if(Q0()){let i=yield Y0(),{token:r}=yield K0(W0(e,i),n.heartbeatServiceProvider);return{token:r}}else{let{token:i}=yield t.getToken();return{token:i}}})}function GM(n,e,t,i){let{app:r}=n,s=bn(r),o={next:t,error:i,type:e};if(s.tokenObservers=[...s.tokenObservers,o],s.token&&Fc(s.token)){let c=s.token;Promise.resolve().then(()=>{t({token:c.token}),z0(n)}).catch(()=>{})}s.cachedTokenPromise.then(()=>z0(n))}function X0(n,e){let t=bn(n),i=t.tokenObservers.filter(r=>r.next!==e);i.length===0&&t.tokenRefresher&&t.tokenRefresher.isRunning()&&t.tokenRefresher.stop(),t.tokenObservers=i}function z0(n){let{app:e}=n,t=bn(e),i=t.tokenRefresher;i||(i=HM(n),t.tokenRefresher=i),!i.isRunning()&&t.isTokenAutoRefreshEnabled&&i.start()}function HM(n){let{app:e}=n;return new hm(()=>V(this,null,function*(){let t=bn(e),i;if(t.token?i=yield mm(n,!0):i=yield mm(n),i.error)throw i.error;if(i.internalError)throw i.internalError}),()=>!0,()=>{let t=bn(e);if(t.token){let i=t.token.issuedAtTimeMillis+(t.token.expireTimeMillis-t.token.issuedAtTimeMillis)*.5+3e5,r=t.token.expireTimeMillis-5*60*1e3;return i=Math.min(i,r),Math.max(0,i-Date.now())}else return 0},U0.RETRIAL_MIN_WAIT,U0.RETRIAL_MAX_WAIT)}function KM(n,e){let t=bn(n).tokenObservers;for(let i of t)try{i.type==="EXTERNAL"&&e.error!=null?i.error(e.error):i.next(e)}catch{}}function Fc(n){return n.expireTimeMillis-Date.now()>0}function $0(n){return{token:$M(zM),error:n}}var gm=class{constructor(e,t){this.app=e,this.heartbeatServiceProvider=t}_delete(){let{tokenObservers:e}=bn(this.app);for(let t of e)X0(this.app,t.next);return Promise.resolve()}};function WM(n,e){return new gm(n,e)}function QM(n){return{getToken:e=>mm(n,e),getLimitedUseToken:()=>qM(n),addTokenListener:e=>GM(n,"INTERNAL",e),removeTokenListener:e=>X0(n.app,e)}}var YM="@firebase/app-check",XM="0.8.8";var JM="app-check",q0="app-check-internal";function ZM(){Ya(new $r(JM,n=>{let e=n.getProvider("app").getImmediate(),t=n.getProvider("heartbeat");return WM(e,t)},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((n,e,t)=>{n.getProvider(q0).initialize()})),Ya(new $r(q0,n=>{let e=n.getProvider("app-check").getImmediate();return QM(e)},"PUBLIC").setInstantiationMode("EXPLICIT")),Li(YM,XM)}ZM();var eS=["localhost","0.0.0.0","127.0.0.1"],ZR=typeof window<"u"&&eS.includes(window.location.hostname);var tS="firebase",nS="10.14.1";Wt.registerVersion(tS,nS,"app-compat");var iS=["ngOnDestroy"],eb=(n,e,t,i={})=>new Proxy(n,{get:(r,s)=>t.runOutsideAngular(()=>{if(n[s])return i?.spy?.get&&i.spy.get(s,n[s]),n[s];if(iS.indexOf(s)>-1)return()=>{};let o=e.toPromise().then(c=>{let l=c?.[s];return typeof l=="function"?l.bind(c):l?.then?l.then(f=>t.run(()=>f)):t.run(()=>l)});return new Proxy(()=>{},{get:(c,l)=>o[l],apply:(c,l,f)=>o.then(g=>{let p=g?.(...f);return i?.spy?.apply&&i.spy.apply(s,f,p),p})})})});var Rd=class{constructor(e){return e}},_o=new le("angularfire2.app.options"),yo=new le("angularfire2.app.name");function Lc(n,e,t){let i=typeof t=="string"&&t||"[DEFAULT]",r=typeof t=="object"&&t||{};r.name=r.name||i;let o=Wt.apps.filter(c=>c&&c.name===r.name)[0]||e.runOutsideAngular(()=>Wt.initializeApp(n,r));try{if(JSON.stringify(n)!==JSON.stringify(o.options)){let c=!!module.hot;rS("error",`${o.name} Firebase App already initialized with different options${c?", you may need to reload as Firebase is not HMR aware.":"."}`)}}catch{}return new Rd(o)}var rS=(n,...e)=>{Jf()&&typeof console<"u"&&console[n](...e)},sS={provide:Rd,useFactory:Lc,deps:[_o,Se,[new ka,yo]]},tb=(()=>{class n{static initializeApp(t,i){return{ngModule:n,providers:[{provide:_o,useValue:t},{provide:yo,useValue:i}]}}constructor(t){Wt.registerVersion("angularfire",Vc.full,"core"),Wt.registerVersion("angularfire",Vc.full,"app-compat"),Wt.registerVersion("angular",Ev.full,t.toString())}static \u0275fac=function(i){return new(i||n)(q(Ot))};static \u0275mod=Pe({type:n});static \u0275inj=xe({providers:[sS]})}return n})();function kd(n,e,t,i,r){let[,s,o]=globalThis.\u0275AngularfireInstanceCache.find(c=>c[0]===n)||[];if(s)return oS(r,o)||(Z0("error",`${e} was already initialized on the ${t} Firebase App with different settings.${aS?" You may need to reload as Firebase is not HMR aware.":""}`),Z0("warn",{is:r,was:o})),s;{let c=i();return globalThis.\u0275AngularfireInstanceCache.push([n,c,r]),c}}function oS(n,e){try{return n.toString()===e.toString()}catch{return n===e}}var aS=typeof module<"u"&&!!module.hot,Z0=(n,...e)=>{Jf()&&typeof console<"u"&&console[n](...e)};globalThis.\u0275AngularfireInstanceCache||=[];var _m=new le("angularfire2.auth.use-emulator"),ym=new le("angularfire2.auth.settings"),vm=new le("angularfire2.auth.tenant-id"),wm=new le("angularfire2.auth.langugage-code"),bm=new le("angularfire2.auth.use-device-language"),Cm=new le("angularfire.auth.persistence"),Em=(n,e,t,i,r,s,o,c)=>kd(`${n.name}.auth`,"AngularFireAuth",n.name,()=>{let l=e.runOutsideAngular(()=>n.auth());if(t&&l.useEmulator(...t),i&&(l.tenantId=i),l.languageCode=r,s&&l.useDeviceLanguage(),o)for(let[f,g]of Object.entries(o))l.settings[f]=g;return c&&l.setPersistence(c),l},[t,i,r,s,o,c]),nb=(()=>{class n{authState;idToken;user;idTokenResult;credential;constructor(t,i,r,s,o,c,l,f,g,p,w,I){let L=new Lt,O=se(void 0).pipe(Or(o.outsideAngular),nt(()=>s.runOutsideAngular(()=>import("./chunk-JOD64VUH.js"))),ae(()=>Lc(t,s,i)),ae(S=>Em(S,s,c,f,g,p,l,w)),Bf({bufferSize:1,refCount:!1}));if(Fi(r))this.authState=this.user=this.idToken=this.idTokenResult=this.credential=se(null);else{O.pipe(Fn()).subscribe();let S=O.pipe(nt(U=>U.getRedirectResult().then(ne=>ne,()=>null)),Ut,Bf({bufferSize:1,refCount:!1})),H=O.pipe(nt(U=>new vn(ne=>({unsubscribe:s.runOutsideAngular(()=>U.onAuthStateChanged(re=>ne.next(re),re=>ne.error(re),()=>ne.complete()))})))),X=O.pipe(nt(U=>new vn(ne=>({unsubscribe:s.runOutsideAngular(()=>U.onIdTokenChanged(re=>ne.next(re),re=>ne.error(re),()=>ne.complete()))}))));this.authState=S.pipe(Uf(H),Bs(o.outsideAngular),Or(o.insideAngular)),this.user=S.pipe(Uf(X),Bs(o.outsideAngular),Or(o.insideAngular)),this.idToken=this.user.pipe(nt(U=>U?Le(U.getIdToken()):se(null))),this.idTokenResult=this.user.pipe(nt(U=>U?Le(U.getIdTokenResult()):se(null))),this.credential=rv(S,L,this.authState.pipe(Bt(U=>!U))).pipe(ae(U=>U?.user?U:null),Bs(o.outsideAngular),Or(o.insideAngular))}return eb(this,O,s,{spy:{apply:(S,H,X)=>{(S.startsWith("signIn")||S.startsWith("createUser"))&&X.then(U=>L.next(U))}}})}static \u0275fac=function(i){return new(i||n)(q(_o),q(yo,8),q(Ot),q(Se),q(Od),q(_m,8),q(ym,8),q(vm,8),q(wm,8),q(bm,8),q(Cm,8),q(Xr,8))};static \u0275prov=ie({token:n,factory:n.\u0275fac,providedIn:"any"})}return n})();var ib=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},rb={};var Qi,Im;(function(){var n;function e(T,b){function C(){}C.prototype=b.prototype,T.D=b.prototype,T.prototype=new C,T.prototype.constructor=T,T.C=function(A,x,P){for(var E=Array(arguments.length-2),hn=2;hn<arguments.length;hn++)E[hn-2]=arguments[hn];return b.prototype[x].apply(A,E)}}function t(){this.blockSize=-1}function i(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(i,t),i.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function r(T,b,C){C||(C=0);var A=Array(16);if(typeof b=="string")for(var x=0;16>x;++x)A[x]=b.charCodeAt(C++)|b.charCodeAt(C++)<<8|b.charCodeAt(C++)<<16|b.charCodeAt(C++)<<24;else for(x=0;16>x;++x)A[x]=b[C++]|b[C++]<<8|b[C++]<<16|b[C++]<<24;b=T.g[0],C=T.g[1],x=T.g[2];var P=T.g[3],E=b+(P^C&(x^P))+A[0]+3614090360&4294967295;b=C+(E<<7&4294967295|E>>>25),E=P+(x^b&(C^x))+A[1]+3905402710&4294967295,P=b+(E<<12&4294967295|E>>>20),E=x+(C^P&(b^C))+A[2]+606105819&4294967295,x=P+(E<<17&4294967295|E>>>15),E=C+(b^x&(P^b))+A[3]+3250441966&4294967295,C=x+(E<<22&4294967295|E>>>10),E=b+(P^C&(x^P))+A[4]+4118548399&4294967295,b=C+(E<<7&4294967295|E>>>25),E=P+(x^b&(C^x))+A[5]+1200080426&4294967295,P=b+(E<<12&4294967295|E>>>20),E=x+(C^P&(b^C))+A[6]+2821735955&4294967295,x=P+(E<<17&4294967295|E>>>15),E=C+(b^x&(P^b))+A[7]+4249261313&4294967295,C=x+(E<<22&4294967295|E>>>10),E=b+(P^C&(x^P))+A[8]+1770035416&4294967295,b=C+(E<<7&4294967295|E>>>25),E=P+(x^b&(C^x))+A[9]+2336552879&4294967295,P=b+(E<<12&4294967295|E>>>20),E=x+(C^P&(b^C))+A[10]+4294925233&4294967295,x=P+(E<<17&4294967295|E>>>15),E=C+(b^x&(P^b))+A[11]+2304563134&4294967295,C=x+(E<<22&4294967295|E>>>10),E=b+(P^C&(x^P))+A[12]+1804603682&4294967295,b=C+(E<<7&4294967295|E>>>25),E=P+(x^b&(C^x))+A[13]+4254626195&4294967295,P=b+(E<<12&4294967295|E>>>20),E=x+(C^P&(b^C))+A[14]+2792965006&4294967295,x=P+(E<<17&4294967295|E>>>15),E=C+(b^x&(P^b))+A[15]+1236535329&4294967295,C=x+(E<<22&4294967295|E>>>10),E=b+(x^P&(C^x))+A[1]+4129170786&4294967295,b=C+(E<<5&4294967295|E>>>27),E=P+(C^x&(b^C))+A[6]+3225465664&4294967295,P=b+(E<<9&4294967295|E>>>23),E=x+(b^C&(P^b))+A[11]+643717713&4294967295,x=P+(E<<14&4294967295|E>>>18),E=C+(P^b&(x^P))+A[0]+3921069994&4294967295,C=x+(E<<20&4294967295|E>>>12),E=b+(x^P&(C^x))+A[5]+3593408605&4294967295,b=C+(E<<5&4294967295|E>>>27),E=P+(C^x&(b^C))+A[10]+38016083&4294967295,P=b+(E<<9&4294967295|E>>>23),E=x+(b^C&(P^b))+A[15]+3634488961&4294967295,x=P+(E<<14&4294967295|E>>>18),E=C+(P^b&(x^P))+A[4]+3889429448&4294967295,C=x+(E<<20&4294967295|E>>>12),E=b+(x^P&(C^x))+A[9]+568446438&4294967295,b=C+(E<<5&4294967295|E>>>27),E=P+(C^x&(b^C))+A[14]+3275163606&4294967295,P=b+(E<<9&4294967295|E>>>23),E=x+(b^C&(P^b))+A[3]+4107603335&4294967295,x=P+(E<<14&4294967295|E>>>18),E=C+(P^b&(x^P))+A[8]+1163531501&4294967295,C=x+(E<<20&4294967295|E>>>12),E=b+(x^P&(C^x))+A[13]+2850285829&4294967295,b=C+(E<<5&4294967295|E>>>27),E=P+(C^x&(b^C))+A[2]+4243563512&4294967295,P=b+(E<<9&4294967295|E>>>23),E=x+(b^C&(P^b))+A[7]+1735328473&4294967295,x=P+(E<<14&4294967295|E>>>18),E=C+(P^b&(x^P))+A[12]+2368359562&4294967295,C=x+(E<<20&4294967295|E>>>12),E=b+(C^x^P)+A[5]+4294588738&4294967295,b=C+(E<<4&4294967295|E>>>28),E=P+(b^C^x)+A[8]+2272392833&4294967295,P=b+(E<<11&4294967295|E>>>21),E=x+(P^b^C)+A[11]+1839030562&4294967295,x=P+(E<<16&4294967295|E>>>16),E=C+(x^P^b)+A[14]+4259657740&4294967295,C=x+(E<<23&4294967295|E>>>9),E=b+(C^x^P)+A[1]+2763975236&4294967295,b=C+(E<<4&4294967295|E>>>28),E=P+(b^C^x)+A[4]+1272893353&4294967295,P=b+(E<<11&4294967295|E>>>21),E=x+(P^b^C)+A[7]+4139469664&4294967295,x=P+(E<<16&4294967295|E>>>16),E=C+(x^P^b)+A[10]+3200236656&4294967295,C=x+(E<<23&4294967295|E>>>9),E=b+(C^x^P)+A[13]+681279174&4294967295,b=C+(E<<4&4294967295|E>>>28),E=P+(b^C^x)+A[0]+3936430074&4294967295,P=b+(E<<11&4294967295|E>>>21),E=x+(P^b^C)+A[3]+3572445317&4294967295,x=P+(E<<16&4294967295|E>>>16),E=C+(x^P^b)+A[6]+76029189&4294967295,C=x+(E<<23&4294967295|E>>>9),E=b+(C^x^P)+A[9]+3654602809&4294967295,b=C+(E<<4&4294967295|E>>>28),E=P+(b^C^x)+A[12]+3873151461&4294967295,P=b+(E<<11&4294967295|E>>>21),E=x+(P^b^C)+A[15]+530742520&4294967295,x=P+(E<<16&4294967295|E>>>16),E=C+(x^P^b)+A[2]+3299628645&4294967295,C=x+(E<<23&4294967295|E>>>9),E=b+(x^(C|~P))+A[0]+4096336452&4294967295,b=C+(E<<6&4294967295|E>>>26),E=P+(C^(b|~x))+A[7]+1126891415&4294967295,P=b+(E<<10&4294967295|E>>>22),E=x+(b^(P|~C))+A[14]+2878612391&4294967295,x=P+(E<<15&4294967295|E>>>17),E=C+(P^(x|~b))+A[5]+4237533241&4294967295,C=x+(E<<21&4294967295|E>>>11),E=b+(x^(C|~P))+A[12]+1700485571&4294967295,b=C+(E<<6&4294967295|E>>>26),E=P+(C^(b|~x))+A[3]+2399980690&4294967295,P=b+(E<<10&4294967295|E>>>22),E=x+(b^(P|~C))+A[10]+4293915773&4294967295,x=P+(E<<15&4294967295|E>>>17),E=C+(P^(x|~b))+A[1]+2240044497&4294967295,C=x+(E<<21&4294967295|E>>>11),E=b+(x^(C|~P))+A[8]+1873313359&4294967295,b=C+(E<<6&4294967295|E>>>26),E=P+(C^(b|~x))+A[15]+4264355552&4294967295,P=b+(E<<10&4294967295|E>>>22),E=x+(b^(P|~C))+A[6]+2734768916&4294967295,x=P+(E<<15&4294967295|E>>>17),E=C+(P^(x|~b))+A[13]+1309151649&4294967295,C=x+(E<<21&4294967295|E>>>11),E=b+(x^(C|~P))+A[4]+4149444226&4294967295,b=C+(E<<6&4294967295|E>>>26),E=P+(C^(b|~x))+A[11]+3174756917&4294967295,P=b+(E<<10&4294967295|E>>>22),E=x+(b^(P|~C))+A[2]+718787259&4294967295,x=P+(E<<15&4294967295|E>>>17),E=C+(P^(x|~b))+A[9]+3951481745&4294967295,T.g[0]=T.g[0]+b&4294967295,T.g[1]=T.g[1]+(x+(E<<21&4294967295|E>>>11))&4294967295,T.g[2]=T.g[2]+x&4294967295,T.g[3]=T.g[3]+P&4294967295}i.prototype.u=function(T,b){b===void 0&&(b=T.length);for(var C=b-this.blockSize,A=this.B,x=this.h,P=0;P<b;){if(x==0)for(;P<=C;)r(this,T,P),P+=this.blockSize;if(typeof T=="string"){for(;P<b;)if(A[x++]=T.charCodeAt(P++),x==this.blockSize){r(this,A),x=0;break}}else for(;P<b;)if(A[x++]=T[P++],x==this.blockSize){r(this,A),x=0;break}}this.h=x,this.o+=b},i.prototype.v=function(){var T=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);T[0]=128;for(var b=1;b<T.length-8;++b)T[b]=0;var C=8*this.o;for(b=T.length-8;b<T.length;++b)T[b]=C&255,C/=256;for(this.u(T),T=Array(16),b=C=0;4>b;++b)for(var A=0;32>A;A+=8)T[C++]=this.g[b]>>>A&255;return T};function s(T,b){var C=c;return Object.prototype.hasOwnProperty.call(C,T)?C[T]:C[T]=b(T)}function o(T,b){this.h=b;for(var C=[],A=!0,x=T.length-1;0<=x;x--){var P=T[x]|0;A&&P==b||(C[x]=P,A=!1)}this.g=C}var c={};function l(T){return-128<=T&&128>T?s(T,function(b){return new o([b|0],0>b?-1:0)}):new o([T|0],0>T?-1:0)}function f(T){if(isNaN(T)||!isFinite(T))return p;if(0>T)return S(f(-T));for(var b=[],C=1,A=0;T>=C;A++)b[A]=T/C|0,C*=4294967296;return new o(b,0)}function g(T,b){if(T.length==0)throw Error("number format error: empty string");if(b=b||10,2>b||36<b)throw Error("radix out of range: "+b);if(T.charAt(0)=="-")return S(g(T.substring(1),b));if(0<=T.indexOf("-"))throw Error('number format error: interior "-" character');for(var C=f(Math.pow(b,8)),A=p,x=0;x<T.length;x+=8){var P=Math.min(8,T.length-x),E=parseInt(T.substring(x,x+P),b);8>P?(P=f(Math.pow(b,P)),A=A.j(P).add(f(E))):(A=A.j(C),A=A.add(f(E)))}return A}var p=l(0),w=l(1),I=l(16777216);n=o.prototype,n.m=function(){if(O(this))return-S(this).m();for(var T=0,b=1,C=0;C<this.g.length;C++){var A=this.i(C);T+=(0<=A?A:4294967296+A)*b,b*=4294967296}return T},n.toString=function(T){if(T=T||10,2>T||36<T)throw Error("radix out of range: "+T);if(L(this))return"0";if(O(this))return"-"+S(this).toString(T);for(var b=f(Math.pow(T,6)),C=this,A="";;){var x=ne(C,b).g;C=H(C,x.j(b));var P=((0<C.g.length?C.g[0]:C.h)>>>0).toString(T);if(C=x,L(C))return P+A;for(;6>P.length;)P="0"+P;A=P+A}},n.i=function(T){return 0>T?0:T<this.g.length?this.g[T]:this.h};function L(T){if(T.h!=0)return!1;for(var b=0;b<T.g.length;b++)if(T.g[b]!=0)return!1;return!0}function O(T){return T.h==-1}n.l=function(T){return T=H(this,T),O(T)?-1:L(T)?0:1};function S(T){for(var b=T.g.length,C=[],A=0;A<b;A++)C[A]=~T.g[A];return new o(C,~T.h).add(w)}n.abs=function(){return O(this)?S(this):this},n.add=function(T){for(var b=Math.max(this.g.length,T.g.length),C=[],A=0,x=0;x<=b;x++){var P=A+(this.i(x)&65535)+(T.i(x)&65535),E=(P>>>16)+(this.i(x)>>>16)+(T.i(x)>>>16);A=E>>>16,P&=65535,E&=65535,C[x]=E<<16|P}return new o(C,C[C.length-1]&-2147483648?-1:0)};function H(T,b){return T.add(S(b))}n.j=function(T){if(L(this)||L(T))return p;if(O(this))return O(T)?S(this).j(S(T)):S(S(this).j(T));if(O(T))return S(this.j(S(T)));if(0>this.l(I)&&0>T.l(I))return f(this.m()*T.m());for(var b=this.g.length+T.g.length,C=[],A=0;A<2*b;A++)C[A]=0;for(A=0;A<this.g.length;A++)for(var x=0;x<T.g.length;x++){var P=this.i(A)>>>16,E=this.i(A)&65535,hn=T.i(x)>>>16,pi=T.i(x)&65535;C[2*A+2*x]+=E*pi,X(C,2*A+2*x),C[2*A+2*x+1]+=P*pi,X(C,2*A+2*x+1),C[2*A+2*x+1]+=E*hn,X(C,2*A+2*x+1),C[2*A+2*x+2]+=P*hn,X(C,2*A+2*x+2)}for(A=0;A<b;A++)C[A]=C[2*A+1]<<16|C[2*A];for(A=b;A<2*b;A++)C[A]=0;return new o(C,0)};function X(T,b){for(;(T[b]&65535)!=T[b];)T[b+1]+=T[b]>>>16,T[b]&=65535,b++}function U(T,b){this.g=T,this.h=b}function ne(T,b){if(L(b))throw Error("division by zero");if(L(T))return new U(p,p);if(O(T))return b=ne(S(T),b),new U(S(b.g),S(b.h));if(O(b))return b=ne(T,S(b)),new U(S(b.g),b.h);if(30<T.g.length){if(O(T)||O(b))throw Error("slowDivide_ only works with positive integers.");for(var C=w,A=b;0>=A.l(T);)C=re(C),A=re(A);var x=ce(C,1),P=ce(A,1);for(A=ce(A,2),C=ce(C,2);!L(A);){var E=P.add(A);0>=E.l(T)&&(x=x.add(C),P=E),A=ce(A,1),C=ce(C,1)}return b=H(T,x.j(b)),new U(x,b)}for(x=p;0<=T.l(b);){for(C=Math.max(1,Math.floor(T.m()/b.m())),A=Math.ceil(Math.log(C)/Math.LN2),A=48>=A?1:Math.pow(2,A-48),P=f(C),E=P.j(b);O(E)||0<E.l(T);)C-=A,P=f(C),E=P.j(b);L(P)&&(P=w),x=x.add(P),T=H(T,E)}return new U(x,T)}n.A=function(T){return ne(this,T).h},n.and=function(T){for(var b=Math.max(this.g.length,T.g.length),C=[],A=0;A<b;A++)C[A]=this.i(A)&T.i(A);return new o(C,this.h&T.h)},n.or=function(T){for(var b=Math.max(this.g.length,T.g.length),C=[],A=0;A<b;A++)C[A]=this.i(A)|T.i(A);return new o(C,this.h|T.h)},n.xor=function(T){for(var b=Math.max(this.g.length,T.g.length),C=[],A=0;A<b;A++)C[A]=this.i(A)^T.i(A);return new o(C,this.h^T.h)};function re(T){for(var b=T.g.length+1,C=[],A=0;A<b;A++)C[A]=T.i(A)<<1|T.i(A-1)>>>31;return new o(C,T.h)}function ce(T,b){var C=b>>5;b%=32;for(var A=T.g.length-C,x=[],P=0;P<A;P++)x[P]=0<b?T.i(P+C)>>>b|T.i(P+C+1)<<32-b:T.i(P+C);return new o(x,T.h)}i.prototype.digest=i.prototype.v,i.prototype.reset=i.prototype.s,i.prototype.update=i.prototype.u,Im=rb.Md5=i,o.prototype.add=o.prototype.add,o.prototype.multiply=o.prototype.j,o.prototype.modulo=o.prototype.A,o.prototype.compare=o.prototype.l,o.prototype.toNumber=o.prototype.m,o.prototype.toString=o.prototype.toString,o.prototype.getBits=o.prototype.i,o.fromNumber=f,o.fromString=g,Qi=rb.Integer=o}).apply(typeof ib<"u"?ib:typeof self<"u"?self:typeof window<"u"?window:{});var Nd=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},ri={};var Tm,lS,vo,Am,jc,Vd,xm,Pm,Mm;(function(){var n,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(a,h,m){return a==Array.prototype||a==Object.prototype||(a[h]=m.value),a};function t(a){a=[typeof globalThis=="object"&&globalThis,a,typeof window=="object"&&window,typeof self=="object"&&self,typeof Nd=="object"&&Nd];for(var h=0;h<a.length;++h){var m=a[h];if(m&&m.Math==Math)return m}throw Error("Cannot find global object")}var i=t(this);function r(a,h){if(h)e:{var m=i;a=a.split(".");for(var y=0;y<a.length-1;y++){var M=a[y];if(!(M in m))break e;m=m[M]}a=a[a.length-1],y=m[a],h=h(y),h!=y&&h!=null&&e(m,a,{configurable:!0,writable:!0,value:h})}}function s(a,h){a instanceof String&&(a+="");var m=0,y=!1,M={next:function(){if(!y&&m<a.length){var k=m++;return{value:h(k,a[k]),done:!1}}return y=!0,{done:!0,value:void 0}}};return M[Symbol.iterator]=function(){return M},M}r("Array.prototype.values",function(a){return a||function(){return s(this,function(h,m){return m})}});var o=o||{},c=this||self;function l(a){var h=typeof a;return h=h!="object"?h:a?Array.isArray(a)?"array":h:"null",h=="array"||h=="object"&&typeof a.length=="number"}function f(a){var h=typeof a;return h=="object"&&a!=null||h=="function"}function g(a,h,m){return a.call.apply(a.bind,arguments)}function p(a,h,m){if(!a)throw Error();if(2<arguments.length){var y=Array.prototype.slice.call(arguments,2);return function(){var M=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(M,y),a.apply(h,M)}}return function(){return a.apply(h,arguments)}}function w(a,h,m){return w=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?g:p,w.apply(null,arguments)}function I(a,h){var m=Array.prototype.slice.call(arguments,1);return function(){var y=m.slice();return y.push.apply(y,arguments),a.apply(this,y)}}function L(a,h){function m(){}m.prototype=h.prototype,a.aa=h.prototype,a.prototype=new m,a.prototype.constructor=a,a.Qb=function(y,M,k){for(var G=Array(arguments.length-2),Ie=2;Ie<arguments.length;Ie++)G[Ie-2]=arguments[Ie];return h.prototype[M].apply(y,G)}}function O(a){let h=a.length;if(0<h){let m=Array(h);for(let y=0;y<h;y++)m[y]=a[y];return m}return[]}function S(a,h){for(let m=1;m<arguments.length;m++){let y=arguments[m];if(l(y)){let M=a.length||0,k=y.length||0;a.length=M+k;for(let G=0;G<k;G++)a[M+G]=y[G]}else a.push(y)}}class H{constructor(h,m){this.i=h,this.j=m,this.h=0,this.g=null}get(){let h;return 0<this.h?(this.h--,h=this.g,this.g=h.next,h.next=null):h=this.i(),h}}function X(a){return/^[\s\xa0]*$/.test(a)}function U(){var a=c.navigator;return a&&(a=a.userAgent)?a:""}function ne(a){return ne[" "](a),a}ne[" "]=function(){};var re=U().indexOf("Gecko")!=-1&&!(U().toLowerCase().indexOf("webkit")!=-1&&U().indexOf("Edge")==-1)&&!(U().indexOf("Trident")!=-1||U().indexOf("MSIE")!=-1)&&U().indexOf("Edge")==-1;function ce(a,h,m){for(let y in a)h.call(m,a[y],y,a)}function T(a,h){for(let m in a)h.call(void 0,a[m],m,a)}function b(a){let h={};for(let m in a)h[m]=a[m];return h}let C="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function A(a,h){let m,y;for(let M=1;M<arguments.length;M++){y=arguments[M];for(m in y)a[m]=y[m];for(let k=0;k<C.length;k++)m=C[k],Object.prototype.hasOwnProperty.call(y,m)&&(a[m]=y[m])}}function x(a){var h=1;a=a.split(":");let m=[];for(;0<h&&a.length;)m.push(a.shift()),h--;return a.length&&m.push(a.join(":")),m}function P(a){c.setTimeout(()=>{throw a},0)}function E(){var a=gi;let h=null;return a.g&&(h=a.g,a.g=a.g.next,a.g||(a.h=null),h.next=null),h}class hn{constructor(){this.h=this.g=null}add(h,m){let y=pi.get();y.set(h,m),this.h?this.h.next=y:this.g=y,this.h=y}}var pi=new H(()=>new oa,a=>a.reset());class oa{constructor(){this.next=this.g=this.h=null}set(h,m){this.h=h,this.g=m,this.next=null}reset(){this.next=this.g=this.h=null}}let mi,Jn=!1,gi=new hn,$t=()=>{let a=c.Promise.resolve(void 0);mi=()=>{a.then(_i)}};var _i=()=>{for(var a;a=E();){try{a.h.call(a.g)}catch(m){P(m)}var h=pi;h.j(a),100>h.h&&(h.h++,a.next=h.g,h.g=a)}Jn=!1};function At(){this.s=this.s,this.C=this.C}At.prototype.s=!1,At.prototype.ma=function(){this.s||(this.s=!0,this.N())},At.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function gt(a,h){this.type=a,this.g=this.target=h,this.defaultPrevented=!1}gt.prototype.h=function(){this.defaultPrevented=!0};var yi=function(){if(!c.addEventListener||!Object.defineProperty)return!1;var a=!1,h=Object.defineProperty({},"passive",{get:function(){a=!0}});try{let m=()=>{};c.addEventListener("test",m,h),c.removeEventListener("test",m,h)}catch{}return a}();function fn(a,h){if(gt.call(this,a?a.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,a){var m=this.type=a.type,y=a.changedTouches&&a.changedTouches.length?a.changedTouches[0]:null;if(this.target=a.target||a.srcElement,this.g=h,h=a.relatedTarget){if(re){e:{try{ne(h.nodeName);var M=!0;break e}catch{}M=!1}M||(h=null)}}else m=="mouseover"?h=a.fromElement:m=="mouseout"&&(h=a.toElement);this.relatedTarget=h,y?(this.clientX=y.clientX!==void 0?y.clientX:y.pageX,this.clientY=y.clientY!==void 0?y.clientY:y.pageY,this.screenX=y.screenX||0,this.screenY=y.screenY||0):(this.clientX=a.clientX!==void 0?a.clientX:a.pageX,this.clientY=a.clientY!==void 0?a.clientY:a.pageY,this.screenX=a.screenX||0,this.screenY=a.screenY||0),this.button=a.button,this.key=a.key||"",this.ctrlKey=a.ctrlKey,this.altKey=a.altKey,this.shiftKey=a.shiftKey,this.metaKey=a.metaKey,this.pointerId=a.pointerId||0,this.pointerType=typeof a.pointerType=="string"?a.pointerType:Pl[a.pointerType]||"",this.state=a.state,this.i=a,a.defaultPrevented&&fn.aa.h.call(this)}}L(fn,gt);var Pl={2:"touch",3:"pen",4:"mouse"};fn.prototype.h=function(){fn.aa.h.call(this);var a=this.i;a.preventDefault?a.preventDefault():a.returnValue=!1};var xn="closure_listenable_"+(1e6*Math.random()|0),aa=0;function pf(a,h,m,y,M){this.listener=a,this.proxy=null,this.src=h,this.type=m,this.capture=!!y,this.ha=M,this.key=++aa,this.da=this.fa=!1}function vi(a){a.da=!0,a.listener=null,a.proxy=null,a.src=null,a.ha=null}function wi(a){this.src=a,this.g={},this.h=0}wi.prototype.add=function(a,h,m,y,M){var k=a.toString();a=this.g[k],a||(a=this.g[k]=[],this.h++);var G=ca(a,h,y,M);return-1<G?(h=a[G],m||(h.fa=!1)):(h=new pf(h,this.src,k,!!y,M),h.fa=m,a.push(h)),h};function bi(a,h){var m=h.type;if(m in a.g){var y=a.g[m],M=Array.prototype.indexOf.call(y,h,void 0),k;(k=0<=M)&&Array.prototype.splice.call(y,M,1),k&&(vi(h),a.g[m].length==0&&(delete a.g[m],a.h--))}}function ca(a,h,m,y){for(var M=0;M<a.length;++M){var k=a[M];if(!k.da&&k.listener==h&&k.capture==!!m&&k.ha==y)return M}return-1}var wt="closure_lm_"+(1e6*Math.random()|0),qt={};function Ml(a,h,m,y,M){if(y&&y.once)return la(a,h,m,y,M);if(Array.isArray(h)){for(var k=0;k<h.length;k++)Ml(a,h[k],m,y,M);return null}return m=Ze(m),a&&a[xn]?a.K(h,m,f(y)?!!y.capture:!!y,M):xt(a,h,m,!1,y,M)}function xt(a,h,m,y,M,k){if(!h)throw Error("Invalid event type");var G=f(M)?!!M.capture:!!M,Ie=pn(a);if(Ie||(a[wt]=Ie=new wi(a)),m=Ie.add(h,m,y,G,k),m.proxy)return m;if(y=As(),m.proxy=y,y.src=a,y.listener=m,a.addEventListener)yi||(M=G),M===void 0&&(M=!1),a.addEventListener(h.toString(),y,M);else if(a.attachEvent)a.attachEvent(Gt(h.toString()),y);else if(a.addListener&&a.removeListener)a.addListener(y);else throw Error("addEventListener and attachEvent are unavailable.");return m}function As(){function a(m){return h.call(a.src,a.listener,m)}let h=Pn;return a}function la(a,h,m,y,M){if(Array.isArray(h)){for(var k=0;k<h.length;k++)la(a,h[k],m,y,M);return null}return m=Ze(m),a&&a[xn]?a.L(h,m,f(y)?!!y.capture:!!y,M):xt(a,h,m,!0,y,M)}function ua(a,h,m,y,M){if(Array.isArray(h))for(var k=0;k<h.length;k++)ua(a,h[k],m,y,M);else y=f(y)?!!y.capture:!!y,m=Ze(m),a&&a[xn]?(a=a.i,h=String(h).toString(),h in a.g&&(k=a.g[h],m=ca(k,m,y,M),-1<m&&(vi(k[m]),Array.prototype.splice.call(k,m,1),k.length==0&&(delete a.g[h],a.h--)))):a&&(a=pn(a))&&(h=a.g[h.toString()],a=-1,h&&(a=ca(h,m,y,M)),(m=-1<a?h[a]:null)&&ge(m))}function ge(a){if(typeof a!="number"&&a&&!a.da){var h=a.src;if(h&&h[xn])bi(h.i,a);else{var m=a.type,y=a.proxy;h.removeEventListener?h.removeEventListener(m,y,a.capture):h.detachEvent?h.detachEvent(Gt(m),y):h.addListener&&h.removeListener&&h.removeListener(y),(m=pn(h))?(bi(m,a),m.h==0&&(m.src=null,h[wt]=null)):vi(a)}}}function Gt(a){return a in qt?qt[a]:qt[a]="on"+a}function Pn(a,h){if(a.da)a=!0;else{h=new fn(h,this);var m=a.listener,y=a.ha||a.src;a.fa&&ge(a),a=m.call(y,h)}return a}function pn(a){return a=a[wt],a instanceof wi?a:null}var Ge="__closure_events_fn_"+(1e9*Math.random()>>>0);function Ze(a){return typeof a=="function"?a:(a[Ge]||(a[Ge]=function(h){return a.handleEvent(h)}),a[Ge])}function et(){At.call(this),this.i=new wi(this),this.M=this,this.F=null}L(et,At),et.prototype[xn]=!0,et.prototype.removeEventListener=function(a,h,m,y){ua(this,a,h,m,y)};function _t(a,h){var m,y=a.F;if(y)for(m=[];y;y=y.F)m.push(y);if(a=a.M,y=h.type||h,typeof h=="string")h=new gt(h,a);else if(h instanceof gt)h.target=h.target||a;else{var M=h;h=new gt(y,a),A(h,M)}if(M=!0,m)for(var k=m.length-1;0<=k;k--){var G=h.g=m[k];M=Mn(G,y,!0,h)&&M}if(G=h.g=a,M=Mn(G,y,!0,h)&&M,M=Mn(G,y,!1,h)&&M,m)for(k=0;k<m.length;k++)G=h.g=m[k],M=Mn(G,y,!1,h)&&M}et.prototype.N=function(){if(et.aa.N.call(this),this.i){var a=this.i,h;for(h in a.g){for(var m=a.g[h],y=0;y<m.length;y++)vi(m[y]);delete a.g[h],a.h--}}this.F=null},et.prototype.K=function(a,h,m,y){return this.i.add(String(a),h,!1,m,y)},et.prototype.L=function(a,h,m,y){return this.i.add(String(a),h,!0,m,y)};function Mn(a,h,m,y){if(h=a.i.g[String(h)],!h)return!0;h=h.concat();for(var M=!0,k=0;k<h.length;++k){var G=h[k];if(G&&!G.da&&G.capture==m){var Ie=G.listener,dt=G.ha||G.src;G.fa&&bi(a.i,G),M=Ie.call(dt,y)!==!1&&M}}return M&&!y.defaultPrevented}function bt(a,h,m){if(typeof a=="function")m&&(a=w(a,m));else if(a&&typeof a.handleEvent=="function")a=w(a.handleEvent,a);else throw Error("Invalid listener argument");return 2147483647<Number(h)?-1:c.setTimeout(a,h||0)}function Sl(a){a.g=bt(()=>{a.g=null,a.i&&(a.i=!1,Sl(a))},a.l);let h=a.h;a.h=null,a.m.apply(null,h)}class Ol extends At{constructor(h,m){super(),this.m=h,this.l=m,this.h=null,this.i=!1,this.g=null}j(h){this.h=arguments,this.g?this.i=!0:Sl(this)}N(){super.N(),this.g&&(c.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Ci(a){At.call(this),this.h=a,this.g={}}L(Ci,At);var xs=[];function Dl(a){ce(a.g,function(h,m){this.g.hasOwnProperty(m)&&ge(h)},a),a.g={}}Ci.prototype.N=function(){Ci.aa.N.call(this),Dl(this)},Ci.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var da=c.JSON.stringify,mf=c.JSON.parse,gf=class{stringify(a){return c.JSON.stringify(a,void 0)}parse(a){return c.JSON.parse(a,void 0)}};function mn(){}mn.prototype.h=null;function Rl(a){return a.h||(a.h=a.i())}function kl(){}var mr={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function ha(){gt.call(this,"d")}L(ha,gt);function fa(){gt.call(this,"c")}L(fa,gt);var gn={},Nl=null;function Ps(){return Nl=Nl||new et}gn.La="serverreachability";function Vl(a){gt.call(this,gn.La,a)}L(Vl,gt);function gr(a){let h=Ps();_t(h,new Vl(h))}gn.STAT_EVENT="statevent";function Fl(a,h){gt.call(this,gn.STAT_EVENT,a),this.stat=h}L(Fl,gt);function ut(a){let h=Ps();_t(h,new Fl(h,a))}gn.Ma="timingevent";function Ll(a,h){gt.call(this,gn.Ma,a),this.size=h}L(Ll,gt);function _r(a,h){if(typeof a!="function")throw Error("Fn must not be null and must be a function");return c.setTimeout(function(){a()},h)}function yr(){this.g=!0}yr.prototype.xa=function(){this.g=!1};function _f(a,h,m,y,M,k){a.info(function(){if(a.g)if(k)for(var G="",Ie=k.split("&"),dt=0;dt<Ie.length;dt++){var ye=Ie[dt].split("=");if(1<ye.length){var yt=ye[0];ye=ye[1];var ht=yt.split("_");G=2<=ht.length&&ht[1]=="type"?G+(yt+"="+ye+"&"):G+(yt+"=redacted&")}}else G=null;else G=k;return"XMLHTTP REQ ("+y+") [attempt "+M+"]: "+h+`
`+m+`
`+G})}function yf(a,h,m,y,M,k,G){a.info(function(){return"XMLHTTP RESP ("+y+") [ attempt "+M+"]: "+h+`
`+m+`
`+k+" "+G})}function be(a,h,m,y){a.info(function(){return"XMLHTTP TEXT ("+h+"): "+wf(a,m)+(y?" "+y:"")})}function vf(a,h){a.info(function(){return"TIMEOUT: "+h})}yr.prototype.info=function(){};function wf(a,h){if(!a.g)return h;if(!h)return null;try{var m=JSON.parse(h);if(m){for(a=0;a<m.length;a++)if(Array.isArray(m[a])){var y=m[a];if(!(2>y.length)){var M=y[1];if(Array.isArray(M)&&!(1>M.length)){var k=M[0];if(k!="noop"&&k!="stop"&&k!="close")for(var G=1;G<M.length;G++)M[G]=""}}}}return da(m)}catch{return h}}var Ms={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},jl={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},pa;function Ss(){}L(Ss,mn),Ss.prototype.g=function(){return new XMLHttpRequest},Ss.prototype.i=function(){return{}},pa=new Ss;function Zt(a,h,m,y){this.j=a,this.i=h,this.l=m,this.R=y||1,this.U=new Ci(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new Ei}function Ei(){this.i=null,this.g="",this.h=!1}var ma={},Ii={};function Ve(a,h,m){a.L=1,a.v=Ds(en(h)),a.m=m,a.P=!0,Bl(a,null)}function Bl(a,h){a.F=Date.now(),vr(a),a.A=en(a.v);var m=a.A,y=a.R;Array.isArray(y)||(y=[String(y)]),nu(m.i,"t",y),a.C=0,m=a.j.J,a.h=new Ei,a.g=Sa(a.j,m?h:null,!a.m),0<a.O&&(a.M=new Ol(w(a.Y,a,a.g),a.O)),h=a.U,m=a.g,y=a.ca;var M="readystatechange";Array.isArray(M)||(M&&(xs[0]=M.toString()),M=xs);for(var k=0;k<M.length;k++){var G=Ml(m,M[k],y||h.handleEvent,!1,h.h||h);if(!G)break;h.g[G.key]=G}h=a.H?b(a.H):{},a.m?(a.u||(a.u="POST"),h["Content-Type"]="application/x-www-form-urlencoded",a.g.ea(a.A,a.u,a.m,h)):(a.u="GET",a.g.ea(a.A,a.u,null,h)),gr(),_f(a.i,a.u,a.A,a.l,a.R,a.m)}Zt.prototype.ca=function(a){a=a.target;let h=this.M;h&&yn(a)==3?h.j():this.Y(a)},Zt.prototype.Y=function(a){try{if(a==this.g)e:{let ht=yn(this.g);var h=this.g.Ba();let kn=this.g.Z();if(!(3>ht)&&(ht!=3||this.g&&(this.h.h||this.g.oa()||lu(this.g)))){this.J||ht!=4||h==7||(h==8||0>=kn?gr(3):gr(2)),ga(this);var m=this.g.Z();this.X=m;t:if(Ul(this)){var y=lu(this.g);a="";var M=y.length,k=yn(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){Sn(this),wr(this);var G="";break t}this.h.i=new c.TextDecoder}for(h=0;h<M;h++)this.h.h=!0,a+=this.h.i.decode(y[h],{stream:!(k&&h==M-1)});y.length=0,this.h.g+=a,this.C=0,G=this.h.g}else G=this.g.oa();if(this.o=m==200,yf(this.i,this.u,this.A,this.l,this.R,ht,m),this.o){if(this.T&&!this.K){t:{if(this.g){var Ie,dt=this.g;if((Ie=dt.g?dt.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!X(Ie)){var ye=Ie;break t}}ye=null}if(m=ye)be(this.i,this.l,m,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,_a(this,m);else{this.o=!1,this.s=3,ut(12),Sn(this),wr(this);break e}}if(this.P){m=!0;let Ht;for(;!this.J&&this.C<G.length;)if(Ht=bf(this,G),Ht==Ii){ht==4&&(this.s=4,ut(14),m=!1),be(this.i,this.l,null,"[Incomplete Response]");break}else if(Ht==ma){this.s=4,ut(15),be(this.i,this.l,G,"[Invalid Chunk]"),m=!1;break}else be(this.i,this.l,Ht,null),_a(this,Ht);if(Ul(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),ht!=4||G.length!=0||this.h.h||(this.s=1,ut(16),m=!1),this.o=this.o&&m,!m)be(this.i,this.l,G,"[Invalid Chunked Response]"),Sn(this),wr(this);else if(0<G.length&&!this.W){this.W=!0;var yt=this.j;yt.g==this&&yt.ba&&!yt.M&&(yt.j.info("Great, no buffering proxy detected. Bytes received: "+G.length),Si(yt),yt.M=!0,ut(11))}}else be(this.i,this.l,G,null),_a(this,G);ht==4&&Sn(this),this.o&&!this.J&&(ht==4?Aa(this.j,this):(this.o=!1,vr(this)))}else Sf(this.g),m==400&&0<G.indexOf("Unknown SID")?(this.s=3,ut(12)):(this.s=0,ut(13)),Sn(this),wr(this)}}}catch{}finally{}};function Ul(a){return a.g?a.u=="GET"&&a.L!=2&&a.j.Ca:!1}function bf(a,h){var m=a.C,y=h.indexOf(`
`,m);return y==-1?Ii:(m=Number(h.substring(m,y)),isNaN(m)?ma:(y+=1,y+m>h.length?Ii:(h=h.slice(y,y+m),a.C=y+m,h)))}Zt.prototype.cancel=function(){this.J=!0,Sn(this)};function vr(a){a.S=Date.now()+a.I,zl(a,a.I)}function zl(a,h){if(a.B!=null)throw Error("WatchDog timer not null");a.B=_r(w(a.ba,a),h)}function ga(a){a.B&&(c.clearTimeout(a.B),a.B=null)}Zt.prototype.ba=function(){this.B=null;let a=Date.now();0<=a-this.S?(vf(this.i,this.A),this.L!=2&&(gr(),ut(17)),Sn(this),this.s=2,wr(this)):zl(this,this.S-a)};function wr(a){a.j.G==0||a.J||Aa(a.j,a)}function Sn(a){ga(a);var h=a.M;h&&typeof h.ma=="function"&&h.ma(),a.M=null,Dl(a.U),a.g&&(h=a.g,a.g=null,h.abort(),h.ma())}function _a(a,h){try{var m=a.j;if(m.G!=0&&(m.g==a||ya(m.h,a))){if(!a.K&&ya(m.h,a)&&m.G==3){try{var y=m.Da.g.parse(h)}catch{y=null}if(Array.isArray(y)&&y.length==3){var M=y;if(M[0]==0){e:if(!m.u){if(m.g)if(m.g.F+3e3<a.F)Pr(m),Vs(m);else break e;xr(m),ut(18)}}else m.za=M[1],0<m.za-m.T&&37500>M[2]&&m.F&&m.v==0&&!m.C&&(m.C=_r(w(m.Za,m),6e3));if(1>=Hl(m.h)&&m.ca){try{m.ca()}catch{}m.ca=void 0}}else Rn(m,11)}else if((a.K||m.g==a)&&Pr(m),!X(h))for(M=m.Da.g.parse(h),h=0;h<M.length;h++){let ye=M[h];if(m.T=ye[0],ye=ye[1],m.G==2)if(ye[0]=="c"){m.K=ye[1],m.ia=ye[2];let yt=ye[3];yt!=null&&(m.la=yt,m.j.info("VER="+m.la));let ht=ye[4];ht!=null&&(m.Aa=ht,m.j.info("SVER="+m.Aa));let kn=ye[5];kn!=null&&typeof kn=="number"&&0<kn&&(y=1.5*kn,m.L=y,m.j.info("backChannelRequestTimeoutMs_="+y)),y=m;let Ht=a.g;if(Ht){let Ls=Ht.g?Ht.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Ls){var k=y.h;k.g||Ls.indexOf("spdy")==-1&&Ls.indexOf("quic")==-1&&Ls.indexOf("h2")==-1||(k.j=k.l,k.g=new Set,k.h&&(va(k,k.h),k.h=null))}if(y.D){let Da=Ht.g?Ht.g.getResponseHeader("X-HTTP-Session-Id"):null;Da&&(y.ya=Da,Oe(y.I,y.D,Da))}}m.G=3,m.l&&m.l.ua(),m.ba&&(m.R=Date.now()-a.F,m.j.info("Handshake RTT: "+m.R+"ms")),y=m;var G=a;if(y.qa=Ma(y,y.J?y.ia:null,y.W),G.K){Kl(y.h,G);var Ie=G,dt=y.L;dt&&(Ie.I=dt),Ie.B&&(ga(Ie),vr(Ie)),y.g=G}else Ta(y);0<m.i.length&&Fs(m)}else ye[0]!="stop"&&ye[0]!="close"||Rn(m,7);else m.G==3&&(ye[0]=="stop"||ye[0]=="close"?ye[0]=="stop"?Rn(m,7):Ns(m):ye[0]!="noop"&&m.l&&m.l.ta(ye),m.v=0)}}gr(4)}catch{}}var $l=class{constructor(a,h){this.g=a,this.map=h}};function ql(a){this.l=a||10,c.PerformanceNavigationTiming?(a=c.performance.getEntriesByType("navigation"),a=0<a.length&&(a[0].nextHopProtocol=="hq"||a[0].nextHopProtocol=="h2")):a=!!(c.chrome&&c.chrome.loadTimes&&c.chrome.loadTimes()&&c.chrome.loadTimes().wasFetchedViaSpdy),this.j=a?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function Gl(a){return a.h?!0:a.g?a.g.size>=a.j:!1}function Hl(a){return a.h?1:a.g?a.g.size:0}function ya(a,h){return a.h?a.h==h:a.g?a.g.has(h):!1}function va(a,h){a.g?a.g.add(h):a.h=h}function Kl(a,h){a.h&&a.h==h?a.h=null:a.g&&a.g.has(h)&&a.g.delete(h)}ql.prototype.cancel=function(){if(this.i=Wl(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(let a of this.g.values())a.cancel();this.g.clear()}};function Wl(a){if(a.h!=null)return a.i.concat(a.h.D);if(a.g!=null&&a.g.size!==0){let h=a.i;for(let m of a.g.values())h=h.concat(m.D);return h}return O(a.i)}function Ql(a){if(a.V&&typeof a.V=="function")return a.V();if(typeof Map<"u"&&a instanceof Map||typeof Set<"u"&&a instanceof Set)return Array.from(a.values());if(typeof a=="string")return a.split("");if(l(a)){for(var h=[],m=a.length,y=0;y<m;y++)h.push(a[y]);return h}h=[],m=0;for(y in a)h[m++]=a[y];return h}function Cf(a){if(a.na&&typeof a.na=="function")return a.na();if(!a.V||typeof a.V!="function"){if(typeof Map<"u"&&a instanceof Map)return Array.from(a.keys());if(!(typeof Set<"u"&&a instanceof Set)){if(l(a)||typeof a=="string"){var h=[];a=a.length;for(var m=0;m<a;m++)h.push(m);return h}h=[],m=0;for(let y in a)h[m++]=y;return h}}}function wa(a,h){if(a.forEach&&typeof a.forEach=="function")a.forEach(h,void 0);else if(l(a)||typeof a=="string")Array.prototype.forEach.call(a,h,void 0);else for(var m=Cf(a),y=Ql(a),M=y.length,k=0;k<M;k++)h.call(void 0,y[k],m&&m[k],a)}var Yl=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Ef(a,h){if(a){a=a.split("&");for(var m=0;m<a.length;m++){var y=a[m].indexOf("="),M=null;if(0<=y){var k=a[m].substring(0,y);M=a[m].substring(y+1)}else k=a[m];h(k,M?decodeURIComponent(M.replace(/\+/g," ")):"")}}}function Vt(a){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,a instanceof Vt){this.h=a.h,Os(this,a.j),this.o=a.o,this.g=a.g,Ti(this,a.s),this.l=a.l;var h=a.i,m=new Er;m.i=h.i,h.g&&(m.g=new Map(h.g),m.h=h.h),ba(this,m),this.m=a.m}else a&&(h=String(a).match(Yl))?(this.h=!1,Os(this,h[1]||"",!0),this.o=br(h[2]||""),this.g=br(h[3]||"",!0),Ti(this,h[4]),this.l=br(h[5]||"",!0),ba(this,h[6]||"",!0),this.m=br(h[7]||"")):(this.h=!1,this.i=new Er(null,this.h))}Vt.prototype.toString=function(){var a=[],h=this.j;h&&a.push(Cr(h,Xl,!0),":");var m=this.g;return(m||h=="file")&&(a.push("//"),(h=this.o)&&a.push(Cr(h,Xl,!0),"@"),a.push(encodeURIComponent(String(m)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),m=this.s,m!=null&&a.push(":",String(m))),(m=this.l)&&(this.g&&m.charAt(0)!="/"&&a.push("/"),a.push(Cr(m,m.charAt(0)=="/"?Tf:Ai,!0))),(m=this.i.toString())&&a.push("?",m),(m=this.m)&&a.push("#",Cr(m,Zl)),a.join("")};function en(a){return new Vt(a)}function Os(a,h,m){a.j=m?br(h,!0):h,a.j&&(a.j=a.j.replace(/:$/,""))}function Ti(a,h){if(h){if(h=Number(h),isNaN(h)||0>h)throw Error("Bad port number "+h);a.s=h}else a.s=null}function ba(a,h,m){h instanceof Er?(a.i=h,Af(a.i,a.h)):(m||(h=Cr(h,Jl)),a.i=new Er(h,a.h))}function Oe(a,h,m){a.i.set(h,m)}function Ds(a){return Oe(a,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),a}function br(a,h){return a?h?decodeURI(a.replace(/%25/g,"%2525")):decodeURIComponent(a):""}function Cr(a,h,m){return typeof a=="string"?(a=encodeURI(a).replace(h,If),m&&(a=a.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),a):null}function If(a){return a=a.charCodeAt(0),"%"+(a>>4&15).toString(16)+(a&15).toString(16)}var Xl=/[#\/\?@]/g,Ai=/[#\?:]/g,Tf=/[#\?]/g,Jl=/[#\?@]/g,Zl=/#/g;function Er(a,h){this.h=this.g=null,this.i=a||null,this.j=!!h}function On(a){a.g||(a.g=new Map,a.h=0,a.i&&Ef(a.i,function(h,m){a.add(decodeURIComponent(h.replace(/\+/g," ")),m)}))}n=Er.prototype,n.add=function(a,h){On(this),this.i=null,a=xi(this,a);var m=this.g.get(a);return m||this.g.set(a,m=[]),m.push(h),this.h+=1,this};function eu(a,h){On(a),h=xi(a,h),a.g.has(h)&&(a.i=null,a.h-=a.g.get(h).length,a.g.delete(h))}function tu(a,h){return On(a),h=xi(a,h),a.g.has(h)}n.forEach=function(a,h){On(this),this.g.forEach(function(m,y){m.forEach(function(M){a.call(h,M,y,this)},this)},this)},n.na=function(){On(this);let a=Array.from(this.g.values()),h=Array.from(this.g.keys()),m=[];for(let y=0;y<h.length;y++){let M=a[y];for(let k=0;k<M.length;k++)m.push(h[y])}return m},n.V=function(a){On(this);let h=[];if(typeof a=="string")tu(this,a)&&(h=h.concat(this.g.get(xi(this,a))));else{a=Array.from(this.g.values());for(let m=0;m<a.length;m++)h=h.concat(a[m])}return h},n.set=function(a,h){return On(this),this.i=null,a=xi(this,a),tu(this,a)&&(this.h-=this.g.get(a).length),this.g.set(a,[h]),this.h+=1,this},n.get=function(a,h){return a?(a=this.V(a),0<a.length?String(a[0]):h):h};function nu(a,h,m){eu(a,h),0<m.length&&(a.i=null,a.g.set(xi(a,h),O(m)),a.h+=m.length)}n.toString=function(){if(this.i)return this.i;if(!this.g)return"";let a=[],h=Array.from(this.g.keys());for(var m=0;m<h.length;m++){var y=h[m];let k=encodeURIComponent(String(y)),G=this.V(y);for(y=0;y<G.length;y++){var M=k;G[y]!==""&&(M+="="+encodeURIComponent(String(G[y]))),a.push(M)}}return this.i=a.join("&")};function xi(a,h){return h=String(h),a.j&&(h=h.toLowerCase()),h}function Af(a,h){h&&!a.j&&(On(a),a.i=null,a.g.forEach(function(m,y){var M=y.toLowerCase();y!=M&&(eu(this,y),nu(this,M,m))},a)),a.j=h}function Pi(a,h){let m=new yr;if(c.Image){let y=new Image;y.onload=I(Dn,m,"TestLoadImage: loaded",!0,h,y),y.onerror=I(Dn,m,"TestLoadImage: error",!1,h,y),y.onabort=I(Dn,m,"TestLoadImage: abort",!1,h,y),y.ontimeout=I(Dn,m,"TestLoadImage: timeout",!1,h,y),c.setTimeout(function(){y.ontimeout&&y.ontimeout()},1e4),y.src=a}else h(!1)}function xf(a,h){let m=new yr,y=new AbortController,M=setTimeout(()=>{y.abort(),Dn(m,"TestPingServer: timeout",!1,h)},1e4);fetch(a,{signal:y.signal}).then(k=>{clearTimeout(M),k.ok?Dn(m,"TestPingServer: ok",!0,h):Dn(m,"TestPingServer: server error",!1,h)}).catch(()=>{clearTimeout(M),Dn(m,"TestPingServer: error",!1,h)})}function Dn(a,h,m,y,M){try{M&&(M.onload=null,M.onerror=null,M.onabort=null,M.ontimeout=null),y(m)}catch{}}function iu(){this.g=new gf}function Pf(a,h,m){let y=m||"";try{wa(a,function(M,k){let G=M;f(M)&&(G=da(M)),h.push(y+k+"="+encodeURIComponent(G))})}catch(M){throw h.push(y+"type="+encodeURIComponent("_badmap")),M}}function Ft(a){this.l=a.Ub||null,this.j=a.eb||!1}L(Ft,mn),Ft.prototype.g=function(){return new Rs(this.l,this.j)},Ft.prototype.i=function(a){return function(){return a}}({});function Rs(a,h){et.call(this),this.D=a,this.o=h,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}L(Rs,et),n=Rs.prototype,n.open=function(a,h){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=a,this.A=h,this.readyState=1,Ir(this)},n.send=function(a){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;let h={headers:this.u,method:this.B,credentials:this.m,cache:void 0};a&&(h.body=a),(this.D||c).fetch(new Request(this.A,h)).then(this.Sa.bind(this),this.ga.bind(this))},n.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,_n(this)),this.readyState=0},n.Sa=function(a){if(this.g&&(this.l=a,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=a.headers,this.readyState=2,Ir(this)),this.g&&(this.readyState=3,Ir(this),this.g)))if(this.responseType==="arraybuffer")a.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof c.ReadableStream<"u"&&"body"in a){if(this.j=a.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;Ca(this)}else a.text().then(this.Ra.bind(this),this.ga.bind(this))};function Ca(a){a.j.read().then(a.Pa.bind(a)).catch(a.ga.bind(a))}n.Pa=function(a){if(this.g){if(this.o&&a.value)this.response.push(a.value);else if(!this.o){var h=a.value?a.value:new Uint8Array(0);(h=this.v.decode(h,{stream:!a.done}))&&(this.response=this.responseText+=h)}a.done?_n(this):Ir(this),this.readyState==3&&Ca(this)}},n.Ra=function(a){this.g&&(this.response=this.responseText=a,_n(this))},n.Qa=function(a){this.g&&(this.response=a,_n(this))},n.ga=function(){this.g&&_n(this)};function _n(a){a.readyState=4,a.l=null,a.j=null,a.v=null,Ir(a)}n.setRequestHeader=function(a,h){this.u.append(a,h)},n.getResponseHeader=function(a){return this.h&&this.h.get(a.toLowerCase())||""},n.getAllResponseHeaders=function(){if(!this.h)return"";let a=[],h=this.h.entries();for(var m=h.next();!m.done;)m=m.value,a.push(m[0]+": "+m[1]),m=h.next();return a.join(`\r
`)};function Ir(a){a.onreadystatechange&&a.onreadystatechange.call(a)}Object.defineProperty(Rs.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(a){this.m=a?"include":"same-origin"}});function ru(a){let h="";return ce(a,function(m,y){h+=y,h+=":",h+=m,h+=`\r
`}),h}function Ea(a,h,m){e:{for(y in m){var y=!1;break e}y=!0}y||(m=ru(m),typeof a=="string"?m!=null&&encodeURIComponent(String(m)):Oe(a,h,m))}function Fe(a){et.call(this),this.headers=new Map,this.o=a||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}L(Fe,et);var Mi=/^https?$/i,Mf=["POST","PUT"];n=Fe.prototype,n.Ha=function(a){this.J=a},n.ea=function(a,h,m,y){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+a);h=h?h.toUpperCase():"GET",this.D=a,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():pa.g(),this.v=this.o?Rl(this.o):Rl(pa),this.g.onreadystatechange=w(this.Ea,this);try{this.B=!0,this.g.open(h,String(a),!0),this.B=!1}catch(k){su(this,k);return}if(a=m||"",m=new Map(this.headers),y)if(Object.getPrototypeOf(y)===Object.prototype)for(var M in y)m.set(M,y[M]);else if(typeof y.keys=="function"&&typeof y.get=="function")for(let k of y.keys())m.set(k,y.get(k));else throw Error("Unknown input type for opt_headers: "+String(y));y=Array.from(m.keys()).find(k=>k.toLowerCase()=="content-type"),M=c.FormData&&a instanceof c.FormData,!(0<=Array.prototype.indexOf.call(Mf,h,void 0))||y||M||m.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(let[k,G]of m)this.g.setRequestHeader(k,G);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{cu(this),this.u=!0,this.g.send(a),this.u=!1}catch(k){su(this,k)}};function su(a,h){a.h=!1,a.g&&(a.j=!0,a.g.abort(),a.j=!1),a.l=h,a.m=5,ou(a),ks(a)}function ou(a){a.A||(a.A=!0,_t(a,"complete"),_t(a,"error"))}n.abort=function(a){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=a||7,_t(this,"complete"),_t(this,"abort"),ks(this))},n.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),ks(this,!0)),Fe.aa.N.call(this)},n.Ea=function(){this.s||(this.B||this.u||this.j?au(this):this.bb())},n.bb=function(){au(this)};function au(a){if(a.h&&typeof o<"u"&&(!a.v[1]||yn(a)!=4||a.Z()!=2)){if(a.u&&yn(a)==4)bt(a.Ea,0,a);else if(_t(a,"readystatechange"),yn(a)==4){a.h=!1;try{let G=a.Z();e:switch(G){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var h=!0;break e;default:h=!1}var m;if(!(m=h)){var y;if(y=G===0){var M=String(a.D).match(Yl)[1]||null;!M&&c.self&&c.self.location&&(M=c.self.location.protocol.slice(0,-1)),y=!Mi.test(M?M.toLowerCase():"")}m=y}if(m)_t(a,"complete"),_t(a,"success");else{a.m=6;try{var k=2<yn(a)?a.g.statusText:""}catch{k=""}a.l=k+" ["+a.Z()+"]",ou(a)}}finally{ks(a)}}}}function ks(a,h){if(a.g){cu(a);let m=a.g,y=a.v[0]?()=>{}:null;a.g=null,a.v=null,h||_t(a,"ready");try{m.onreadystatechange=y}catch{}}}function cu(a){a.I&&(c.clearTimeout(a.I),a.I=null)}n.isActive=function(){return!!this.g};function yn(a){return a.g?a.g.readyState:0}n.Z=function(){try{return 2<yn(this)?this.g.status:-1}catch{return-1}},n.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},n.Oa=function(a){if(this.g){var h=this.g.responseText;return a&&h.indexOf(a)==0&&(h=h.substring(a.length)),mf(h)}};function lu(a){try{if(!a.g)return null;if("response"in a.g)return a.g.response;switch(a.H){case"":case"text":return a.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in a.g)return a.g.mozResponseArrayBuffer}return null}catch{return null}}function Sf(a){let h={};a=(a.g&&2<=yn(a)&&a.g.getAllResponseHeaders()||"").split(`\r
`);for(let y=0;y<a.length;y++){if(X(a[y]))continue;var m=x(a[y]);let M=m[0];if(m=m[1],typeof m!="string")continue;m=m.trim();let k=h[M]||[];h[M]=k,k.push(m)}T(h,function(y){return y.join(", ")})}n.Ba=function(){return this.m},n.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function Tr(a,h,m){return m&&m.internalChannelParams&&m.internalChannelParams[a]||h}function Ar(a){this.Aa=0,this.i=[],this.j=new yr,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=Tr("failFast",!1,a),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=Tr("baseRetryDelayMs",5e3,a),this.cb=Tr("retryDelaySeedMs",1e4,a),this.Wa=Tr("forwardChannelMaxRetries",2,a),this.wa=Tr("forwardChannelRequestTimeoutMs",2e4,a),this.pa=a&&a.xmlHttpFactory||void 0,this.Xa=a&&a.Tb||void 0,this.Ca=a&&a.useFetchStreams||!1,this.L=void 0,this.J=a&&a.supportsCrossDomainXhr||!1,this.K="",this.h=new ql(a&&a.concurrentRequestLimit),this.Da=new iu,this.P=a&&a.fastHandshake||!1,this.O=a&&a.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=a&&a.Rb||!1,a&&a.xa&&this.j.xa(),a&&a.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&a&&a.detectBufferingProxy||!1,this.ja=void 0,a&&a.longPollingTimeout&&0<a.longPollingTimeout&&(this.ja=a.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}n=Ar.prototype,n.la=8,n.G=1,n.connect=function(a,h,m,y){ut(0),this.W=a,this.H=h||{},m&&y!==void 0&&(this.H.OSID=m,this.H.OAID=y),this.F=this.X,this.I=Ma(this,null,this.W),Fs(this)};function Ns(a){if(uu(a),a.G==3){var h=a.U++,m=en(a.I);if(Oe(m,"SID",a.K),Oe(m,"RID",h),Oe(m,"TYPE","terminate"),Zn(a,m),h=new Zt(a,a.j,h),h.L=2,h.v=Ds(en(m)),m=!1,c.navigator&&c.navigator.sendBeacon)try{m=c.navigator.sendBeacon(h.v.toString(),"")}catch{}!m&&c.Image&&(new Image().src=h.v,m=!0),m||(h.g=Sa(h.j,null),h.g.ea(h.v)),h.F=Date.now(),vr(h)}Pa(a)}function Vs(a){a.g&&(Si(a),a.g.cancel(),a.g=null)}function uu(a){Vs(a),a.u&&(c.clearTimeout(a.u),a.u=null),Pr(a),a.h.cancel(),a.s&&(typeof a.s=="number"&&c.clearTimeout(a.s),a.s=null)}function Fs(a){if(!Gl(a.h)&&!a.s){a.s=!0;var h=a.Ga;mi||$t(),Jn||(mi(),Jn=!0),gi.add(h,a),a.B=0}}function du(a,h){return Hl(a.h)>=a.h.j-(a.s?1:0)?!1:a.s?(a.i=h.D.concat(a.i),!0):a.G==1||a.G==2||a.B>=(a.Va?0:a.Wa)?!1:(a.s=_r(w(a.Ga,a,h),xa(a,a.B)),a.B++,!0)}n.Ga=function(a){if(this.s)if(this.s=null,this.G==1){if(!a){this.U=Math.floor(1e5*Math.random()),a=this.U++;let M=new Zt(this,this.j,a),k=this.o;if(this.S&&(k?(k=b(k),A(k,this.S)):k=this.S),this.m!==null||this.O||(M.H=k,k=null),this.P)e:{for(var h=0,m=0;m<this.i.length;m++){t:{var y=this.i[m];if("__data__"in y.map&&(y=y.map.__data__,typeof y=="string")){y=y.length;break t}y=void 0}if(y===void 0)break;if(h+=y,4096<h){h=m;break e}if(h===4096||m===this.i.length-1){h=m+1;break e}}h=1e3}else h=1e3;h=Ia(this,M,h),m=en(this.I),Oe(m,"RID",a),Oe(m,"CVER",22),this.D&&Oe(m,"X-HTTP-Session-Id",this.D),Zn(this,m),k&&(this.O?h="headers="+encodeURIComponent(String(ru(k)))+"&"+h:this.m&&Ea(m,this.m,k)),va(this.h,M),this.Ua&&Oe(m,"TYPE","init"),this.P?(Oe(m,"$req",h),Oe(m,"SID","null"),M.T=!0,Ve(M,m,null)):Ve(M,m,h),this.G=2}}else this.G==3&&(a?hu(this,a):this.i.length==0||Gl(this.h)||hu(this))};function hu(a,h){var m;h?m=h.l:m=a.U++;let y=en(a.I);Oe(y,"SID",a.K),Oe(y,"RID",m),Oe(y,"AID",a.T),Zn(a,y),a.m&&a.o&&Ea(y,a.m,a.o),m=new Zt(a,a.j,m,a.B+1),a.m===null&&(m.H=a.o),h&&(a.i=h.D.concat(a.i)),h=Ia(a,m,1e3),m.I=Math.round(.5*a.wa)+Math.round(.5*a.wa*Math.random()),va(a.h,m),Ve(m,y,h)}function Zn(a,h){a.H&&ce(a.H,function(m,y){Oe(h,y,m)}),a.l&&wa({},function(m,y){Oe(h,y,m)})}function Ia(a,h,m){m=Math.min(a.i.length,m);var y=a.l?w(a.l.Na,a.l,a):null;e:{var M=a.i;let k=-1;for(;;){let G=["count="+m];k==-1?0<m?(k=M[0].g,G.push("ofs="+k)):k=0:G.push("ofs="+k);let Ie=!0;for(let dt=0;dt<m;dt++){let ye=M[dt].g,yt=M[dt].map;if(ye-=k,0>ye)k=Math.max(0,M[dt].g-100),Ie=!1;else try{Pf(yt,G,"req"+ye+"_")}catch{y&&y(yt)}}if(Ie){y=G.join("&");break e}}}return a=a.i.splice(0,m),h.D=a,y}function Ta(a){if(!a.g&&!a.u){a.Y=1;var h=a.Fa;mi||$t(),Jn||(mi(),Jn=!0),gi.add(h,a),a.v=0}}function xr(a){return a.g||a.u||3<=a.v?!1:(a.Y++,a.u=_r(w(a.Fa,a),xa(a,a.v)),a.v++,!0)}n.Fa=function(){if(this.u=null,fu(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var a=2*this.R;this.j.info("BP detection timer enabled: "+a),this.A=_r(w(this.ab,this),a)}},n.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,ut(10),Vs(this),fu(this))};function Si(a){a.A!=null&&(c.clearTimeout(a.A),a.A=null)}function fu(a){a.g=new Zt(a,a.j,"rpc",a.Y),a.m===null&&(a.g.H=a.o),a.g.O=0;var h=en(a.qa);Oe(h,"RID","rpc"),Oe(h,"SID",a.K),Oe(h,"AID",a.T),Oe(h,"CI",a.F?"0":"1"),!a.F&&a.ja&&Oe(h,"TO",a.ja),Oe(h,"TYPE","xmlhttp"),Zn(a,h),a.m&&a.o&&Ea(h,a.m,a.o),a.L&&(a.g.I=a.L);var m=a.g;a=a.ia,m.L=1,m.v=Ds(en(h)),m.m=null,m.P=!0,Bl(m,a)}n.Za=function(){this.C!=null&&(this.C=null,Vs(this),xr(this),ut(19))};function Pr(a){a.C!=null&&(c.clearTimeout(a.C),a.C=null)}function Aa(a,h){var m=null;if(a.g==h){Pr(a),Si(a),a.g=null;var y=2}else if(ya(a.h,h))m=h.D,Kl(a.h,h),y=1;else return;if(a.G!=0){if(h.o)if(y==1){m=h.m?h.m.length:0,h=Date.now()-h.F;var M=a.B;y=Ps(),_t(y,new Ll(y,m)),Fs(a)}else Ta(a);else if(M=h.s,M==3||M==0&&0<h.X||!(y==1&&du(a,h)||y==2&&xr(a)))switch(m&&0<m.length&&(h=a.h,h.i=h.i.concat(m)),M){case 1:Rn(a,5);break;case 4:Rn(a,10);break;case 3:Rn(a,6);break;default:Rn(a,2)}}}function xa(a,h){let m=a.Ta+Math.floor(Math.random()*a.cb);return a.isActive()||(m*=2),m*h}function Rn(a,h){if(a.j.info("Error code "+h),h==2){var m=w(a.fb,a),y=a.Xa;let M=!y;y=new Vt(y||"//www.google.com/images/cleardot.gif"),c.location&&c.location.protocol=="http"||Os(y,"https"),Ds(y),M?Pi(y.toString(),m):xf(y.toString(),m)}else ut(2);a.G=0,a.l&&a.l.sa(h),Pa(a),uu(a)}n.fb=function(a){a?(this.j.info("Successfully pinged google.com"),ut(2)):(this.j.info("Failed to ping google.com"),ut(1))};function Pa(a){if(a.G=0,a.ka=[],a.l){let h=Wl(a.h);(h.length!=0||a.i.length!=0)&&(S(a.ka,h),S(a.ka,a.i),a.h.i.length=0,O(a.i),a.i.length=0),a.l.ra()}}function Ma(a,h,m){var y=m instanceof Vt?en(m):new Vt(m);if(y.g!="")h&&(y.g=h+"."+y.g),Ti(y,y.s);else{var M=c.location;y=M.protocol,h=h?h+"."+M.hostname:M.hostname,M=+M.port;var k=new Vt(null);y&&Os(k,y),h&&(k.g=h),M&&Ti(k,M),m&&(k.l=m),y=k}return m=a.D,h=a.ya,m&&h&&Oe(y,m,h),Oe(y,"VER",a.la),Zn(a,y),y}function Sa(a,h,m){if(h&&!a.J)throw Error("Can't create secondary domain capable XhrIo object.");return h=a.Ca&&!a.pa?new Fe(new Ft({eb:m})):new Fe(a.pa),h.Ha(a.J),h}n.isActive=function(){return!!this.l&&this.l.isActive(this)};function Oa(){}n=Oa.prototype,n.ua=function(){},n.ta=function(){},n.sa=function(){},n.ra=function(){},n.isActive=function(){return!0},n.Na=function(){};function Mr(){}Mr.prototype.g=function(a,h){return new tt(a,h)};function tt(a,h){et.call(this),this.g=new Ar(h),this.l=a,this.h=h&&h.messageUrlParams||null,a=h&&h.messageHeaders||null,h&&h.clientProtocolHeaderRequired&&(a?a["X-Client-Protocol"]="webchannel":a={"X-Client-Protocol":"webchannel"}),this.g.o=a,a=h&&h.initMessageHeaders||null,h&&h.messageContentType&&(a?a["X-WebChannel-Content-Type"]=h.messageContentType:a={"X-WebChannel-Content-Type":h.messageContentType}),h&&h.va&&(a?a["X-WebChannel-Client-Profile"]=h.va:a={"X-WebChannel-Client-Profile":h.va}),this.g.S=a,(a=h&&h.Sb)&&!X(a)&&(this.g.m=a),this.v=h&&h.supportsCrossDomainXhr||!1,this.u=h&&h.sendRawJson||!1,(h=h&&h.httpSessionIdParam)&&!X(h)&&(this.g.D=h,a=this.h,a!==null&&h in a&&(a=this.h,h in a&&delete a[h])),this.j=new Oi(this)}L(tt,et),tt.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},tt.prototype.close=function(){Ns(this.g)},tt.prototype.o=function(a){var h=this.g;if(typeof a=="string"){var m={};m.__data__=a,a=m}else this.u&&(m={},m.__data__=da(a),a=m);h.i.push(new $l(h.Ya++,a)),h.G==3&&Fs(h)},tt.prototype.N=function(){this.g.l=null,delete this.j,Ns(this.g),delete this.g,tt.aa.N.call(this)};function pu(a){ha.call(this),a.__headers__&&(this.headers=a.__headers__,this.statusCode=a.__status__,delete a.__headers__,delete a.__status__);var h=a.__sm__;if(h){e:{for(let m in h){a=m;break e}a=void 0}(this.i=a)&&(a=this.i,h=h!==null&&a in h?h[a]:void 0),this.data=h}else this.data=a}L(pu,ha);function mu(){fa.call(this),this.status=1}L(mu,fa);function Oi(a){this.g=a}L(Oi,Oa),Oi.prototype.ua=function(){_t(this.g,"a")},Oi.prototype.ta=function(a){_t(this.g,new pu(a))},Oi.prototype.sa=function(a){_t(this.g,new mu)},Oi.prototype.ra=function(){_t(this.g,"b")},Mr.prototype.createWebChannel=Mr.prototype.g,tt.prototype.send=tt.prototype.o,tt.prototype.open=tt.prototype.m,tt.prototype.close=tt.prototype.close,Mm=ri.createWebChannelTransport=function(){return new Mr},Pm=ri.getStatEventTarget=function(){return Ps()},xm=ri.Event=gn,Vd=ri.Stat={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},Ms.NO_ERROR=0,Ms.TIMEOUT=8,Ms.HTTP_ERROR=6,jc=ri.ErrorCode=Ms,jl.COMPLETE="complete",Am=ri.EventType=jl,kl.EventType=mr,mr.OPEN="a",mr.CLOSE="b",mr.ERROR="c",mr.MESSAGE="d",et.prototype.listen=et.prototype.K,vo=ri.WebChannel=kl,lS=ri.FetchXmlHttpFactory=Ft,Fe.prototype.listenOnce=Fe.prototype.L,Fe.prototype.getLastError=Fe.prototype.Ka,Fe.prototype.getLastErrorCode=Fe.prototype.Ba,Fe.prototype.getStatus=Fe.prototype.Z,Fe.prototype.getResponseJson=Fe.prototype.Oa,Fe.prototype.getResponseText=Fe.prototype.oa,Fe.prototype.send=Fe.prototype.ea,Fe.prototype.setWithCredentials=Fe.prototype.Ha,Tm=ri.XhrIo=Fe}).apply(typeof Nd<"u"?Nd:typeof self<"u"?self:typeof window<"u"?window:{});var sb="@firebase/firestore";var ct=class{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}};ct.UNAUTHENTICATED=new ct(null),ct.GOOGLE_CREDENTIALS=new ct("google-credentials-uid"),ct.FIRST_PARTY=new ct("first-party-uid"),ct.MOCK_USER=new ct("mock-user");var Yo="10.14.0";var nr=new ju("@firebase/firestore");function Io(){return nr.logLevel}function cC(n){nr.setLogLevel(n)}function z(n,...e){if(nr.logLevel<=Ln.DEBUG){let t=e.map(k_);nr.debug(`Firestore (${Yo}): ${n}`,...t)}}function Qe(n,...e){if(nr.logLevel<=Ln.ERROR){let t=e.map(k_);nr.error(`Firestore (${Yo}): ${n}`,...t)}}function Cn(n,...e){if(nr.logLevel<=Ln.WARN){let t=e.map(k_);nr.warn(`Firestore (${Yo}): ${n}`,...t)}}function k_(n){if(typeof n=="string")return n;try{return function(t){return JSON.stringify(t)}(n)}catch{return n}}function J(n="Unexpected state"){let e=`FIRESTORE (${Yo}) INTERNAL ASSERTION FAILED: `+n;throw Qe(e),new Error(e)}function ee(n,e){n||J()}function lC(n,e){n||J()}function W(n,e){return n}var N={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"},B=class extends $v{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}};var pt=class{constructor(){this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}};var Hd=class{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}},Nm=class{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable(()=>t(ct.UNAUTHENTICATED))}shutdown(){}},Vm=class{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable(()=>t(this.token.user))}shutdown(){this.changeListener=null}},Fm=class{constructor(e){this.t=e,this.currentUser=ct.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){ee(this.o===void 0);let i=this.i,r=l=>this.i!==i?(i=this.i,t(l)):Promise.resolve(),s=new pt;this.o=()=>{this.i++,this.currentUser=this.u(),s.resolve(),s=new pt,e.enqueueRetryable(()=>r(this.currentUser))};let o=()=>{let l=s;e.enqueueRetryable(()=>V(this,null,function*(){yield l.promise,yield r(this.currentUser)}))},c=l=>{z("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=l,this.o&&(this.auth.addAuthTokenListener(this.o),o())};this.t.onInit(l=>c(l)),setTimeout(()=>{if(!this.auth){let l=this.t.getImmediate({optional:!0});l?c(l):(z("FirebaseAuthCredentialsProvider","Auth not yet detected"),s.resolve(),s=new pt)}},0),o()}getToken(){let e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then(i=>this.i!==e?(z("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):i?(ee(typeof i.accessToken=="string"),new Hd(i.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){let e=this.auth&&this.auth.getUid();return ee(e===null||typeof e=="string"),new ct(e)}},Lm=class{constructor(e,t,i){this.l=e,this.h=t,this.P=i,this.type="FirstParty",this.user=ct.FIRST_PARTY,this.I=new Map}T(){return this.P?this.P():null}get headers(){this.I.set("X-Goog-AuthUser",this.l);let e=this.T();return e&&this.I.set("Authorization",e),this.h&&this.I.set("X-Goog-Iam-Authorization-Token",this.h),this.I}},jm=class{constructor(e,t,i){this.l=e,this.h=t,this.P=i}getToken(){return Promise.resolve(new Lm(this.l,this.h,this.P))}start(e,t){e.enqueueRetryable(()=>t(ct.FIRST_PARTY))}shutdown(){}invalidateToken(){}},Bm=class{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}},Um=class{constructor(e){this.A=e,this.forceRefresh=!1,this.appCheck=null,this.R=null}start(e,t){ee(this.o===void 0);let i=s=>{s.error!=null&&z("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${s.error.message}`);let o=s.token!==this.R;return this.R=s.token,z("FirebaseAppCheckTokenProvider",`Received ${o?"new":"existing"} token.`),o?t(s.token):Promise.resolve()};this.o=s=>{e.enqueueRetryable(()=>i(s))};let r=s=>{z("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=s,this.o&&this.appCheck.addTokenListener(this.o)};this.A.onInit(s=>r(s)),setTimeout(()=>{if(!this.appCheck){let s=this.A.getImmediate({optional:!0});s?r(s):z("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){let e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(t=>t?(ee(typeof t.token=="string"),this.R=t.token,new Bm(t.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}};function uS(n){let e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(n);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(t);else for(let i=0;i<n;i++)t[i]=Math.floor(256*Math.random());return t}var Kd=class{static newId(){let e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=Math.floor(256/e.length)*e.length,i="";for(;i.length<20;){let r=uS(40);for(let s=0;s<r.length;++s)i.length<20&&r[s]<t&&(i+=e.charAt(r[s]%e.length))}return i}};function de(n,e){return n<e?-1:n>e?1:0}function Ro(n,e,t){return n.length===e.length&&n.every((i,r)=>t(i,e[r]))}function uC(n){return n+"\0"}var $e=class n{constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new B(N.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new B(N.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<-62135596800)throw new B(N.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new B(N.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return n.fromMillis(Date.now())}static fromDate(e){return n.fromMillis(e.getTime())}static fromMillis(e){let t=Math.floor(e/1e3),i=Math.floor(1e6*(e-1e3*t));return new n(t,i)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?de(this.nanoseconds,e.nanoseconds):de(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){let e=this.seconds- -62135596800;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}};var oe=class n{constructor(e){this.timestamp=e}static fromTimestamp(e){return new n(e)}static min(){return new n(new $e(0,0))}static max(){return new n(new $e(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}};var Wd=class n{constructor(e,t,i){t===void 0?t=0:t>e.length&&J(),i===void 0?i=e.length-t:i>e.length-t&&J(),this.segments=e,this.offset=t,this.len=i}get length(){return this.len}isEqual(e){return n.comparator(this,e)===0}child(e){let t=this.segments.slice(this.offset,this.limit());return e instanceof n?e.forEach(i=>{t.push(i)}):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,i=this.limit();t<i;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){let i=Math.min(e.length,t.length);for(let r=0;r<i;r++){let s=e.get(r),o=t.get(r);if(s<o)return-1;if(s>o)return 1}return e.length<t.length?-1:e.length>t.length?1:0}},we=class n extends Wd{construct(e,t,i){return new n(e,t,i)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){let t=[];for(let i of e){if(i.indexOf("//")>=0)throw new B(N.INVALID_ARGUMENT,`Invalid segment (${i}). Paths must not contain // in them.`);t.push(...i.split("/").filter(r=>r.length>0))}return new n(t)}static emptyPath(){return new n([])}},dS=/^[_a-zA-Z][_a-zA-Z0-9]*$/,Ye=class n extends Wd{construct(e,t,i){return new n(e,t,i)}static isValidIdentifier(e){return dS.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),n.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)==="__name__"}static keyField(){return new n(["__name__"])}static fromServerFormat(e){let t=[],i="",r=0,s=()=>{if(i.length===0)throw new B(N.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(i),i=""},o=!1;for(;r<e.length;){let c=e[r];if(c==="\\"){if(r+1===e.length)throw new B(N.INVALID_ARGUMENT,"Path has trailing escape character: "+e);let l=e[r+1];if(l!=="\\"&&l!=="."&&l!=="`")throw new B(N.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);i+=l,r+=2}else c==="`"?(o=!o,r++):c!=="."||o?(i+=c,r++):(s(),r++)}if(s(),o)throw new B(N.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new n(t)}static emptyPath(){return new n([])}};var Q=class n{constructor(e){this.path=e}static fromPath(e){return new n(we.fromString(e))}static fromName(e){return new n(we.fromString(e).popFirst(5))}static empty(){return new n(we.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&we.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,t){return we.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new n(new we(e.slice()))}};var ko=class{constructor(e,t,i,r){this.indexId=e,this.collectionGroup=t,this.fields=i,this.indexState=r}};function zm(n){return n.fields.find(e=>e.kind===2)}function Zr(n){return n.fields.filter(e=>e.kind!==2)}ko.UNKNOWN_ID=-1;var So=class{constructor(e,t){this.fieldPath=e,this.kind=t}};var Xc=class n{constructor(e,t){this.sequenceNumber=e,this.offset=t}static empty(){return new n(0,ln.min())}};function dC(n,e){let t=n.toTimestamp().seconds,i=n.toTimestamp().nanoseconds+1,r=oe.fromTimestamp(i===1e9?new $e(t+1,0):new $e(t,i));return new ln(r,Q.empty(),e)}function hC(n){return new ln(n.readTime,n.key,-1)}var ln=class n{constructor(e,t,i){this.readTime=e,this.documentKey=t,this.largestBatchId=i}static min(){return new n(oe.min(),Q.empty(),-1)}static max(){return new n(oe.max(),Q.empty(),-1)}};function N_(n,e){let t=n.readTime.compareTo(e.readTime);return t!==0?t:(t=Q.comparator(n.documentKey,e.documentKey),t!==0?t:de(n.largestBatchId,e.largestBatchId))}var fC="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.",Qd=class{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}};function hr(n){return V(this,null,function*(){if(n.code!==N.FAILED_PRECONDITION||n.message!==fC)throw n;z("LocalStore","Unexpectedly lost primary lease")})}var R=class n{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)},t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)})}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&J(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new n((i,r)=>{this.nextCallback=s=>{this.wrapSuccess(e,s).next(i,r)},this.catchCallback=s=>{this.wrapFailure(t,s).next(i,r)}})}toPromise(){return new Promise((e,t)=>{this.next(e,t)})}wrapUserFunction(e){try{let t=e();return t instanceof n?t:n.resolve(t)}catch(t){return n.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction(()=>e(t)):n.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction(()=>e(t)):n.reject(t)}static resolve(e){return new n((t,i)=>{t(e)})}static reject(e){return new n((t,i)=>{i(e)})}static waitFor(e){return new n((t,i)=>{let r=0,s=0,o=!1;e.forEach(c=>{++r,c.next(()=>{++s,o&&s===r&&t()},l=>i(l))}),o=!0,s===r&&t()})}static or(e){let t=n.resolve(!1);for(let i of e)t=t.next(r=>r?n.resolve(r):i());return t}static forEach(e,t){let i=[];return e.forEach((r,s)=>{i.push(t.call(this,r,s))}),this.waitFor(i)}static mapArray(e,t){return new n((i,r)=>{let s=e.length,o=new Array(s),c=0;for(let l=0;l<s;l++){let f=l;t(e[f]).next(g=>{o[f]=g,++c,c===s&&i(o)},g=>r(g))}})}static doWhile(e,t){return new n((i,r)=>{let s=()=>{e()===!0?t().next(()=>{s()},r):i()};s()})}};var Yd=class n{constructor(e,t){this.action=e,this.transaction=t,this.aborted=!1,this.V=new pt,this.transaction.oncomplete=()=>{this.V.resolve()},this.transaction.onabort=()=>{t.error?this.V.reject(new ss(e,t.error)):this.V.resolve()},this.transaction.onerror=i=>{let r=V_(i.target.error);this.V.reject(new ss(e,r))}}static open(e,t,i,r){try{return new n(t,e.transaction(r,i))}catch(s){throw new ss(t,s)}}get m(){return this.V.promise}abort(e){e&&this.V.reject(e),this.aborted||(z("SimpleDb","Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}g(){let e=this.transaction;this.aborted||typeof e.commit!="function"||e.commit()}store(e){let t=this.transaction.objectStore(e);return new qm(t)}},ir=class n{constructor(e,t,i){this.name=e,this.version=t,this.p=i,n.S(Qa())===12.2&&Qe("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}static delete(e){return z("SimpleDb","Removing database:",e),es(window.indexedDB.deleteDatabase(e)).toPromise()}static D(){if(!Lu())return!1;if(n.v())return!0;let e=Qa(),t=n.S(e),i=0<t&&t<10,r=pC(e),s=0<r&&r<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||i||s)}static v(){var e;return typeof process<"u"&&((e=process.__PRIVATE_env)===null||e===void 0?void 0:e.C)==="YES"}static F(e,t){return e.store(t)}static S(e){let t=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),i=t?t[1].split("_").slice(0,2).join("."):"-1";return Number(i)}M(e){return V(this,null,function*(){return this.db||(z("SimpleDb","Opening database:",this.name),this.db=yield new Promise((t,i)=>{let r=indexedDB.open(this.name,this.version);r.onsuccess=s=>{let o=s.target.result;t(o)},r.onblocked=()=>{i(new ss(e,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},r.onerror=s=>{let o=s.target.error;o.name==="VersionError"?i(new B(N.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh.")):o.name==="InvalidStateError"?i(new B(N.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+o)):i(new ss(e,o))},r.onupgradeneeded=s=>{z("SimpleDb",'Database "'+this.name+'" requires upgrade from version:',s.oldVersion);let o=s.target.result;this.p.O(o,r.transaction,s.oldVersion,this.version).next(()=>{z("SimpleDb","Database upgrade to version "+this.version+" complete")})}})),this.N&&(this.db.onversionchange=t=>this.N(t)),this.db})}L(e){this.N=e,this.db&&(this.db.onversionchange=t=>e(t))}runTransaction(e,t,i,r){return V(this,null,function*(){let s=t==="readonly",o=0;for(;;){++o;try{this.db=yield this.M(e);let c=Yd.open(this.db,e,s?"readonly":"readwrite",i),l=r(c).next(f=>(c.g(),f)).catch(f=>(c.abort(f),R.reject(f))).toPromise();return l.catch(()=>{}),yield c.m,l}catch(c){let l=c,f=l.name!=="FirebaseError"&&o<3;if(z("SimpleDb","Transaction failed with error:",l.message,"Retrying:",f),this.close(),!f)return Promise.reject(l)}}})}close(){this.db&&this.db.close(),this.db=void 0}};function pC(n){let e=n.match(/Android ([\d.]+)/i),t=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(t)}var $m=class{constructor(e){this.B=e,this.k=!1,this.q=null}get isDone(){return this.k}get K(){return this.q}set cursor(e){this.B=e}done(){this.k=!0}$(e){this.q=e}delete(){return es(this.B.delete())}},ss=class extends B{constructor(e,t){super(N.UNAVAILABLE,`IndexedDB transaction '${e}' failed: ${t}`),this.name="IndexedDbTransactionError"}};function fr(n){return n.name==="IndexedDbTransactionError"}var qm=class{constructor(e){this.store=e}put(e,t){let i;return t!==void 0?(z("SimpleDb","PUT",this.store.name,e,t),i=this.store.put(t,e)):(z("SimpleDb","PUT",this.store.name,"<auto-key>",e),i=this.store.put(e)),es(i)}add(e){return z("SimpleDb","ADD",this.store.name,e,e),es(this.store.add(e))}get(e){return es(this.store.get(e)).next(t=>(t===void 0&&(t=null),z("SimpleDb","GET",this.store.name,e,t),t))}delete(e){return z("SimpleDb","DELETE",this.store.name,e),es(this.store.delete(e))}count(){return z("SimpleDb","COUNT",this.store.name),es(this.store.count())}U(e,t){let i=this.options(e,t),r=i.index?this.store.index(i.index):this.store;if(typeof r.getAll=="function"){let s=r.getAll(i.range);return new R((o,c)=>{s.onerror=l=>{c(l.target.error)},s.onsuccess=l=>{o(l.target.result)}})}{let s=this.cursor(i),o=[];return this.W(s,(c,l)=>{o.push(l)}).next(()=>o)}}G(e,t){let i=this.store.getAll(e,t===null?void 0:t);return new R((r,s)=>{i.onerror=o=>{s(o.target.error)},i.onsuccess=o=>{r(o.target.result)}})}j(e,t){z("SimpleDb","DELETE ALL",this.store.name);let i=this.options(e,t);i.H=!1;let r=this.cursor(i);return this.W(r,(s,o,c)=>c.delete())}J(e,t){let i;t?i=e:(i={},t=e);let r=this.cursor(i);return this.W(r,t)}Y(e){let t=this.cursor({});return new R((i,r)=>{t.onerror=s=>{let o=V_(s.target.error);r(o)},t.onsuccess=s=>{let o=s.target.result;o?e(o.primaryKey,o.value).next(c=>{c?o.continue():i()}):i()}})}W(e,t){let i=[];return new R((r,s)=>{e.onerror=o=>{s(o.target.error)},e.onsuccess=o=>{let c=o.target.result;if(!c)return void r();let l=new $m(c),f=t(c.primaryKey,c.value,l);if(f instanceof R){let g=f.catch(p=>(l.done(),R.reject(p)));i.push(g)}l.isDone?r():l.K===null?c.continue():c.continue(l.K)}}).next(()=>R.waitFor(i))}options(e,t){let i;return e!==void 0&&(typeof e=="string"?i=e:t=e),{index:i,range:t}}cursor(e){let t="next";if(e.reverse&&(t="prev"),e.index){let i=this.store.index(e.index);return e.H?i.openKeyCursor(e.range,t):i.openCursor(e.range,t)}return this.store.openCursor(e.range,t)}};function es(n){return new R((e,t)=>{n.onsuccess=i=>{let r=i.target.result;e(r)},n.onerror=i=>{let r=V_(i.target.error);t(r)}})}var ob=!1;function V_(n){let e=ir.S(Qa());if(e>=12.2&&e<13){let t="An internal error was encountered in the Indexed Database server";if(n.message.indexOf(t)>=0){let i=new B("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${t}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return ob||(ob=!0,setTimeout(()=>{throw i},0)),i}}return n}var Gm=class{constructor(e,t){this.asyncQueue=e,this.Z=t,this.task=null}start(){this.X(15e3)}stop(){this.task&&(this.task.cancel(),this.task=null)}get started(){return this.task!==null}X(e){z("IndexBackfiller",`Scheduled in ${e}ms`),this.task=this.asyncQueue.enqueueAfterDelay("index_backfill",e,()=>V(this,null,function*(){this.task=null;try{z("IndexBackfiller",`Documents written: ${yield this.Z.ee()}`)}catch(t){fr(t)?z("IndexBackfiller","Ignoring IndexedDB error during index backfill: ",t):yield hr(t)}yield this.X(6e4)}))}},Hm=class{constructor(e,t){this.localStore=e,this.persistence=t}ee(e=50){return V(this,null,function*(){return this.persistence.runTransaction("Backfill Indexes","readwrite-primary",t=>this.te(t,e))})}te(e,t){let i=new Set,r=t,s=!0;return R.doWhile(()=>s===!0&&r>0,()=>this.localStore.indexManager.getNextCollectionGroupToUpdate(e).next(o=>{if(o!==null&&!i.has(o))return z("IndexBackfiller",`Processing collection: ${o}`),this.ne(e,o,r).next(c=>{r-=c,i.add(o)});s=!1})).next(()=>t-r)}ne(e,t,i){return this.localStore.indexManager.getMinOffsetFromCollectionGroup(e,t).next(r=>this.localStore.localDocuments.getNextDocuments(e,t,r,i).next(s=>{let o=s.changes;return this.localStore.indexManager.updateIndexEntries(e,o).next(()=>this.re(r,s)).next(c=>(z("IndexBackfiller",`Updating offset: ${c}`),this.localStore.indexManager.updateCollectionGroup(e,t,c))).next(()=>o.size)}))}re(e,t){let i=e;return t.changes.forEach((r,s)=>{let o=hC(s);N_(o,i)>0&&(i=o)}),new ln(i.readTime,i.documentKey,Math.max(t.batchId,e.largestBatchId))}};var Xt=(()=>{class n{constructor(t,i){this.previousValue=t,i&&(i.sequenceNumberHandler=r=>this.ie(r),this.se=r=>i.writeSequenceNumber(r))}ie(t){return this.previousValue=Math.max(t,this.previousValue),this.previousValue}next(){let t=++this.previousValue;return this.se&&this.se(t),t}}return n.oe=-1,n})();function yl(n){return n==null}function Jc(n){return n===0&&1/n==-1/0}function mC(n){return typeof n=="number"&&Number.isInteger(n)&&!Jc(n)&&n<=Number.MAX_SAFE_INTEGER&&n>=Number.MIN_SAFE_INTEGER}function Rt(n){let e="";for(let t=0;t<n.length;t++)e.length>0&&(e=ab(e)),e=hS(n.get(t),e);return ab(e)}function hS(n,e){let t=e,i=n.length;for(let r=0;r<i;r++){let s=n.charAt(r);switch(s){case"\0":t+="";break;case"":t+="";break;default:t+=s}}return t}function ab(n){return n+""}function zn(n){let e=n.length;if(ee(e>=2),e===2)return ee(n.charAt(0)===""&&n.charAt(1)===""),we.emptyPath();let t=e-2,i=[],r="";for(let s=0;s<e;){let o=n.indexOf("",s);switch((o<0||o>t)&&J(),n.charAt(o+1)){case"":let c=n.substring(s,o),l;r.length===0?l=c:(r+=c,l=r,r=""),i.push(l);break;case"":r+=n.substring(s,o),r+="\0";break;case"":r+=n.substring(s,o+1);break;default:J()}s=o+2}return new we(i)}var cb=["userId","batchId"];function Ud(n,e){return[n,Rt(e)]}function gC(n,e,t){return[n,Rt(e),t]}var fS={},pS=["prefixPath","collectionGroup","readTime","documentId"],mS=["prefixPath","collectionGroup","documentId"],gS=["collectionGroup","readTime","prefixPath","documentId"],_S=["canonicalId","targetId"],yS=["targetId","path"],vS=["path","targetId"],wS=["collectionId","parent"],bS=["indexId","uid"],CS=["uid","sequenceNumber"],ES=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],IS=["indexId","uid","orderedDocumentKey"],TS=["userId","collectionPath","documentId"],AS=["userId","collectionPath","largestBatchId"],xS=["userId","collectionGroup","largestBatchId"],_C=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries"],PS=[..._C,"documentOverlays"],yC=["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"],vC=yC,F_=[...vC,"indexConfiguration","indexState","indexEntries"],MS=F_,SS=[...F_,"globals"];var Zc=class extends Qd{constructor(e,t){super(),this._e=e,this.currentSequenceNumber=t}};function mt(n,e){let t=W(n);return ir.F(t._e,e)}function lb(n){let e=0;for(let t in n)Object.prototype.hasOwnProperty.call(n,t)&&e++;return e}function _s(n,e){for(let t in n)Object.prototype.hasOwnProperty.call(n,t)&&e(t,n[t])}function wC(n){for(let e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}var je=class n{constructor(e,t){this.comparator=e,this.root=t||qn.EMPTY}insert(e,t){return new n(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,qn.BLACK,null,null))}remove(e){return new n(this.comparator,this.root.remove(e,this.comparator).copy(null,null,qn.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){let i=this.comparator(e,t.key);if(i===0)return t.value;i<0?t=t.left:i>0&&(t=t.right)}return null}indexOf(e){let t=0,i=this.root;for(;!i.isEmpty();){let r=this.comparator(e,i.key);if(r===0)return t+i.left.size;r<0?i=i.left:(t+=i.left.size+1,i=i.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((t,i)=>(e(t,i),!1))}toString(){let e=[];return this.inorderTraversal((t,i)=>(e.push(`${t}:${i}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Mo(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Mo(this.root,e,this.comparator,!1)}getReverseIterator(){return new Mo(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Mo(this.root,e,this.comparator,!0)}},Mo=class{constructor(e,t,i,r){this.isReverse=r,this.nodeStack=[];let s=1;for(;!e.isEmpty();)if(s=t?i(e.key,t):1,t&&r&&(s*=-1),s<0)e=this.isReverse?e.left:e.right;else{if(s===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop(),t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;let e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}},qn=class n{constructor(e,t,i,r,s){this.key=e,this.value=t,this.color=i??n.RED,this.left=r??n.EMPTY,this.right=s??n.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,i,r,s){return new n(e??this.key,t??this.value,i??this.color,r??this.left,s??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,i){let r=this,s=i(e,r.key);return r=s<0?r.copy(null,null,null,r.left.insert(e,t,i),null):s===0?r.copy(null,t,null,null,null):r.copy(null,null,null,null,r.right.insert(e,t,i)),r.fixUp()}removeMin(){if(this.left.isEmpty())return n.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let i,r=this;if(t(e,r.key)<0)r.left.isEmpty()||r.left.isRed()||r.left.left.isRed()||(r=r.moveRedLeft()),r=r.copy(null,null,null,r.left.remove(e,t),null);else{if(r.left.isRed()&&(r=r.rotateRight()),r.right.isEmpty()||r.right.isRed()||r.right.left.isRed()||(r=r.moveRedRight()),t(e,r.key)===0){if(r.right.isEmpty())return n.EMPTY;i=r.right.min(),r=r.copy(i.key,i.value,null,null,r.right.removeMin())}r=r.copy(null,null,null,null,r.right.remove(e,t))}return r.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){let e=this.copy(null,null,n.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){let e=this.copy(null,null,n.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){let e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){let e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw J();let e=this.left.check();if(e!==this.right.check())throw J();return e+(this.isRed()?0:1)}};qn.EMPTY=null,qn.RED=!0,qn.BLACK=!1;qn.EMPTY=new class{constructor(){this.size=0}get key(){throw J()}get value(){throw J()}get color(){throw J()}get left(){throw J()}get right(){throw J()}copy(e,t,i,r,s){return this}insert(e,t,i){return new qn(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};var ke=class n{constructor(e){this.comparator=e,this.data=new je(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((t,i)=>(e(t),!1))}forEachInRange(e,t){let i=this.data.getIteratorFrom(e[0]);for(;i.hasNext();){let r=i.getNext();if(this.comparator(r.key,e[1])>=0)return;t(r.key)}}forEachWhile(e,t){let i;for(i=t!==void 0?this.data.getIteratorFrom(t):this.data.getIterator();i.hasNext();)if(!e(i.getNext().key))return}firstAfterOrEqual(e){let t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new Xd(this.data.getIterator())}getIteratorFrom(e){return new Xd(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach(i=>{t=t.add(i)}),t}isEqual(e){if(!(e instanceof n)||this.size!==e.size)return!1;let t=this.data.getIterator(),i=e.data.getIterator();for(;t.hasNext();){let r=t.getNext().key,s=i.getNext().key;if(this.comparator(r,s)!==0)return!1}return!0}toArray(){let e=[];return this.forEach(t=>{e.push(t)}),e}toString(){let e=[];return this.forEach(t=>e.push(t)),"SortedSet("+e.toString()+")"}copy(e){let t=new n(this.comparator);return t.data=e,t}},Xd=class{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}};function wo(n){return n.hasNext()?n.getNext():void 0}var Jt=class n{constructor(e){this.fields=e,e.sort(Ye.comparator)}static empty(){return new n([])}unionWith(e){let t=new ke(Ye.comparator);for(let i of this.fields)t=t.add(i);for(let i of e)t=t.add(i);return new n(t.toArray())}covers(e){for(let t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return Ro(this.fields,e.fields,(t,i)=>t.isEqual(i))}};var Jd=class extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}};function bC(){return typeof atob<"u"}var Je=class n{constructor(e){this.binaryString=e}static fromBase64String(e){let t=function(r){try{return atob(r)}catch(s){throw typeof DOMException<"u"&&s instanceof DOMException?new Jd("Invalid base64 string: "+s):s}}(e);return new n(t)}static fromUint8Array(e){let t=function(r){let s="";for(let o=0;o<r.length;++o)s+=String.fromCharCode(r[o]);return s}(e);return new n(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(t){return btoa(t)}(this.binaryString)}toUint8Array(){return function(t){let i=new Uint8Array(t.length);for(let r=0;r<t.length;r++)i[r]=t.charCodeAt(r);return i}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return de(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}};Je.EMPTY_BYTE_STRING=new Je("");var OS=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function ai(n){if(ee(!!n),typeof n=="string"){let e=0,t=OS.exec(n);if(ee(!!t),t[1]){let r=t[1];r=(r+"000000000").substr(0,9),e=Number(r)}let i=new Date(n);return{seconds:Math.floor(i.getTime()/1e3),nanos:e}}return{seconds:Be(n.seconds),nanos:Be(n.nanos)}}function Be(n){return typeof n=="number"?n:typeof n=="string"?Number(n):0}function rr(n){return typeof n=="string"?Je.fromBase64String(n):Je.fromUint8Array(n)}function $h(n){var e,t;return((t=(((e=n?.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||t===void 0?void 0:t.stringValue)==="server_timestamp"}function L_(n){let e=n.mapValue.fields.__previous_value__;return $h(e)?L_(e):e}function el(n){let e=ai(n.mapValue.fields.__local_write_time__.timestampValue);return new $e(e.seconds,e.nanos)}var Km=class{constructor(e,t,i,r,s,o,c,l,f){this.databaseId=e,this.appId=t,this.persistenceKey=i,this.host=r,this.ssl=s,this.forceLongPolling=o,this.autoDetectLongPolling=c,this.longPollingOptions=l,this.useFetchStreams=f}},sr=class n{constructor(e,t){this.projectId=e,this.database=t||"(default)"}static empty(){return new n("","")}get isDefaultDatabase(){return this.database==="(default)"}isEqual(e){return e instanceof n&&e.projectId===this.projectId&&e.database===this.database}};var er={mapValue:{fields:{__type__:{stringValue:"__max__"}}}},zd={nullValue:"NULL_VALUE"};function os(n){return"nullValue"in n?0:"booleanValue"in n?1:"integerValue"in n||"doubleValue"in n?2:"timestampValue"in n?3:"stringValue"in n?5:"bytesValue"in n?6:"referenceValue"in n?7:"geoPointValue"in n?8:"arrayValue"in n?9:"mapValue"in n?$h(n)?4:CC(n)?9007199254740991:qh(n)?10:11:J()}function Kn(n,e){if(n===e)return!0;let t=os(n);if(t!==os(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return n.booleanValue===e.booleanValue;case 4:return el(n).isEqual(el(e));case 3:return function(r,s){if(typeof r.timestampValue=="string"&&typeof s.timestampValue=="string"&&r.timestampValue.length===s.timestampValue.length)return r.timestampValue===s.timestampValue;let o=ai(r.timestampValue),c=ai(s.timestampValue);return o.seconds===c.seconds&&o.nanos===c.nanos}(n,e);case 5:return n.stringValue===e.stringValue;case 6:return function(r,s){return rr(r.bytesValue).isEqual(rr(s.bytesValue))}(n,e);case 7:return n.referenceValue===e.referenceValue;case 8:return function(r,s){return Be(r.geoPointValue.latitude)===Be(s.geoPointValue.latitude)&&Be(r.geoPointValue.longitude)===Be(s.geoPointValue.longitude)}(n,e);case 2:return function(r,s){if("integerValue"in r&&"integerValue"in s)return Be(r.integerValue)===Be(s.integerValue);if("doubleValue"in r&&"doubleValue"in s){let o=Be(r.doubleValue),c=Be(s.doubleValue);return o===c?Jc(o)===Jc(c):isNaN(o)&&isNaN(c)}return!1}(n,e);case 9:return Ro(n.arrayValue.values||[],e.arrayValue.values||[],Kn);case 10:case 11:return function(r,s){let o=r.mapValue.fields||{},c=s.mapValue.fields||{};if(lb(o)!==lb(c))return!1;for(let l in o)if(o.hasOwnProperty(l)&&(c[l]===void 0||!Kn(o[l],c[l])))return!1;return!0}(n,e);default:return J()}}function tl(n,e){return(n.values||[]).find(t=>Kn(t,e))!==void 0}function or(n,e){if(n===e)return 0;let t=os(n),i=os(e);if(t!==i)return de(t,i);switch(t){case 0:case 9007199254740991:return 0;case 1:return de(n.booleanValue,e.booleanValue);case 2:return function(s,o){let c=Be(s.integerValue||s.doubleValue),l=Be(o.integerValue||o.doubleValue);return c<l?-1:c>l?1:c===l?0:isNaN(c)?isNaN(l)?0:-1:1}(n,e);case 3:return ub(n.timestampValue,e.timestampValue);case 4:return ub(el(n),el(e));case 5:return de(n.stringValue,e.stringValue);case 6:return function(s,o){let c=rr(s),l=rr(o);return c.compareTo(l)}(n.bytesValue,e.bytesValue);case 7:return function(s,o){let c=s.split("/"),l=o.split("/");for(let f=0;f<c.length&&f<l.length;f++){let g=de(c[f],l[f]);if(g!==0)return g}return de(c.length,l.length)}(n.referenceValue,e.referenceValue);case 8:return function(s,o){let c=de(Be(s.latitude),Be(o.latitude));return c!==0?c:de(Be(s.longitude),Be(o.longitude))}(n.geoPointValue,e.geoPointValue);case 9:return db(n.arrayValue,e.arrayValue);case 10:return function(s,o){var c,l,f,g;let p=s.fields||{},w=o.fields||{},I=(c=p.value)===null||c===void 0?void 0:c.arrayValue,L=(l=w.value)===null||l===void 0?void 0:l.arrayValue,O=de(((f=I?.values)===null||f===void 0?void 0:f.length)||0,((g=L?.values)===null||g===void 0?void 0:g.length)||0);return O!==0?O:db(I,L)}(n.mapValue,e.mapValue);case 11:return function(s,o){if(s===er.mapValue&&o===er.mapValue)return 0;if(s===er.mapValue)return 1;if(o===er.mapValue)return-1;let c=s.fields||{},l=Object.keys(c),f=o.fields||{},g=Object.keys(f);l.sort(),g.sort();for(let p=0;p<l.length&&p<g.length;++p){let w=de(l[p],g[p]);if(w!==0)return w;let I=or(c[l[p]],f[g[p]]);if(I!==0)return I}return de(l.length,g.length)}(n.mapValue,e.mapValue);default:throw J()}}function ub(n,e){if(typeof n=="string"&&typeof e=="string"&&n.length===e.length)return de(n,e);let t=ai(n),i=ai(e),r=de(t.seconds,i.seconds);return r!==0?r:de(t.nanos,i.nanos)}function db(n,e){let t=n.values||[],i=e.values||[];for(let r=0;r<t.length&&r<i.length;++r){let s=or(t[r],i[r]);if(s)return s}return de(t.length,i.length)}function No(n){return Wm(n)}function Wm(n){return"nullValue"in n?"null":"booleanValue"in n?""+n.booleanValue:"integerValue"in n?""+n.integerValue:"doubleValue"in n?""+n.doubleValue:"timestampValue"in n?function(t){let i=ai(t);return`time(${i.seconds},${i.nanos})`}(n.timestampValue):"stringValue"in n?n.stringValue:"bytesValue"in n?function(t){return rr(t).toBase64()}(n.bytesValue):"referenceValue"in n?function(t){return Q.fromName(t).toString()}(n.referenceValue):"geoPointValue"in n?function(t){return`geo(${t.latitude},${t.longitude})`}(n.geoPointValue):"arrayValue"in n?function(t){let i="[",r=!0;for(let s of t.values||[])r?r=!1:i+=",",i+=Wm(s);return i+"]"}(n.arrayValue):"mapValue"in n?function(t){let i=Object.keys(t.fields||{}).sort(),r="{",s=!0;for(let o of i)s?s=!1:r+=",",r+=`${o}:${Wm(t.fields[o])}`;return r+"}"}(n.mapValue):J()}function as(n,e){return{referenceValue:`projects/${n.projectId}/databases/${n.database}/documents/${e.path.canonicalString()}`}}function Qm(n){return!!n&&"integerValue"in n}function nl(n){return!!n&&"arrayValue"in n}function hb(n){return!!n&&"nullValue"in n}function fb(n){return!!n&&"doubleValue"in n&&isNaN(Number(n.doubleValue))}function $d(n){return!!n&&"mapValue"in n}function qh(n){var e,t;return((t=(((e=n?.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||t===void 0?void 0:t.stringValue)==="__vector__"}function Hc(n){if(n.geoPointValue)return{geoPointValue:Object.assign({},n.geoPointValue)};if(n.timestampValue&&typeof n.timestampValue=="object")return{timestampValue:Object.assign({},n.timestampValue)};if(n.mapValue){let e={mapValue:{fields:{}}};return _s(n.mapValue.fields,(t,i)=>e.mapValue.fields[t]=Hc(i)),e}if(n.arrayValue){let e={arrayValue:{values:[]}};for(let t=0;t<(n.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=Hc(n.arrayValue.values[t]);return e}return Object.assign({},n)}function CC(n){return(((n.mapValue||{}).fields||{}).__type__||{}).stringValue==="__max__"}var EC={mapValue:{fields:{__type__:{stringValue:"__vector__"},value:{arrayValue:{}}}}};function DS(n){return"nullValue"in n?zd:"booleanValue"in n?{booleanValue:!1}:"integerValue"in n||"doubleValue"in n?{doubleValue:NaN}:"timestampValue"in n?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in n?{stringValue:""}:"bytesValue"in n?{bytesValue:""}:"referenceValue"in n?as(sr.empty(),Q.empty()):"geoPointValue"in n?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in n?{arrayValue:{}}:"mapValue"in n?qh(n)?EC:{mapValue:{}}:J()}function RS(n){return"nullValue"in n?{booleanValue:!1}:"booleanValue"in n?{doubleValue:NaN}:"integerValue"in n||"doubleValue"in n?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in n?{stringValue:""}:"stringValue"in n?{bytesValue:""}:"bytesValue"in n?as(sr.empty(),Q.empty()):"referenceValue"in n?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in n?{arrayValue:{}}:"arrayValue"in n?EC:"mapValue"in n?qh(n)?{mapValue:{}}:er:J()}function pb(n,e){let t=or(n.value,e.value);return t!==0?t:n.inclusive&&!e.inclusive?-1:!n.inclusive&&e.inclusive?1:0}function mb(n,e){let t=or(n.value,e.value);return t!==0?t:n.inclusive&&!e.inclusive?1:!n.inclusive&&e.inclusive?-1:0}var St=class n{constructor(e){this.value=e}static empty(){return new n({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let i=0;i<e.length-1;++i)if(t=(t.mapValue.fields||{})[e.get(i)],!$d(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=Hc(t)}setAll(e){let t=Ye.emptyPath(),i={},r=[];e.forEach((o,c)=>{if(!t.isImmediateParentOf(c)){let l=this.getFieldsMap(t);this.applyChanges(l,i,r),i={},r=[],t=c.popLast()}o?i[c.lastSegment()]=Hc(o):r.push(c.lastSegment())});let s=this.getFieldsMap(t);this.applyChanges(s,i,r)}delete(e){let t=this.field(e.popLast());$d(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return Kn(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let i=0;i<e.length;++i){let r=t.mapValue.fields[e.get(i)];$d(r)&&r.mapValue.fields||(r={mapValue:{fields:{}}},t.mapValue.fields[e.get(i)]=r),t=r}return t.mapValue.fields}applyChanges(e,t,i){_s(t,(r,s)=>e[r]=s);for(let r of i)delete e[r]}clone(){return new n(Hc(this.value))}};function IC(n){let e=[];return _s(n.fields,(t,i)=>{let r=new Ye([t]);if($d(i)){let s=IC(i.mapValue).fields;if(s.length===0)e.push(r);else for(let o of s)e.push(r.child(o))}else e.push(r)}),new Jt(e)}var lt=class n{constructor(e,t,i,r,s,o,c){this.key=e,this.documentType=t,this.version=i,this.readTime=r,this.createTime=s,this.data=o,this.documentState=c}static newInvalidDocument(e){return new n(e,0,oe.min(),oe.min(),oe.min(),St.empty(),0)}static newFoundDocument(e,t,i,r){return new n(e,1,t,oe.min(),i,r,0)}static newNoDocument(e,t){return new n(e,2,t,oe.min(),oe.min(),St.empty(),0)}static newUnknownDocument(e,t){return new n(e,3,t,oe.min(),oe.min(),St.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(oe.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=St.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=St.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=oe.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof n&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new n(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}};var Wn=class{constructor(e,t){this.position=e,this.inclusive=t}};function gb(n,e,t){let i=0;for(let r=0;r<n.position.length;r++){let s=e[r],o=n.position[r];if(s.field.isKeyField()?i=Q.comparator(Q.fromName(o.referenceValue),t.key):i=or(o,t.data.field(s.field)),s.dir==="desc"&&(i*=-1),i!==0)break}return i}function _b(n,e){if(n===null)return e===null;if(e===null||n.inclusive!==e.inclusive||n.position.length!==e.position.length)return!1;for(let t=0;t<n.position.length;t++)if(!Kn(n.position[t],e.position[t]))return!1;return!0}var cs=class{constructor(e,t="asc"){this.field=e,this.dir=t}};function kS(n,e){return n.dir===e.dir&&n.field.isEqual(e.field)}var Zd=class{},_e=class n extends Zd{constructor(e,t,i){super(),this.field=e,this.op=t,this.value=i}static create(e,t,i){return e.isKeyField()?t==="in"||t==="not-in"?this.createKeyFieldInFilter(e,t,i):new Jm(e,t,i):t==="array-contains"?new tg(e,i):t==="in"?new eh(e,i):t==="not-in"?new ng(e,i):t==="array-contains-any"?new ig(e,i):new n(e,t,i)}static createKeyFieldInFilter(e,t,i){return t==="in"?new Zm(e,i):new eg(e,i)}matches(e){let t=e.data.field(this.field);return this.op==="!="?t!==null&&this.matchesComparison(or(t,this.value)):t!==null&&os(this.value)===os(t)&&this.matchesComparison(or(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return J()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}},Me=class n extends Zd{constructor(e,t){super(),this.filters=e,this.op=t,this.ae=null}static create(e,t){return new n(e,t)}matches(e){return Vo(this)?this.filters.find(t=>!t.matches(e))===void 0:this.filters.find(t=>t.matches(e))!==void 0}getFlattenedFilters(){return this.ae!==null||(this.ae=this.filters.reduce((e,t)=>e.concat(t.getFlattenedFilters()),[])),this.ae}getFilters(){return Object.assign([],this.filters)}};function Vo(n){return n.op==="and"}function Ym(n){return n.op==="or"}function j_(n){return TC(n)&&Vo(n)}function TC(n){for(let e of n.filters)if(e instanceof Me)return!1;return!0}function Xm(n){if(n instanceof _e)return n.field.canonicalString()+n.op.toString()+No(n.value);if(j_(n))return n.filters.map(e=>Xm(e)).join(",");{let e=n.filters.map(t=>Xm(t)).join(",");return`${n.op}(${e})`}}function AC(n,e){return n instanceof _e?function(i,r){return r instanceof _e&&i.op===r.op&&i.field.isEqual(r.field)&&Kn(i.value,r.value)}(n,e):n instanceof Me?function(i,r){return r instanceof Me&&i.op===r.op&&i.filters.length===r.filters.length?i.filters.reduce((s,o,c)=>s&&AC(o,r.filters[c]),!0):!1}(n,e):void J()}function xC(n,e){let t=n.filters.concat(e);return Me.create(t,n.op)}function PC(n){return n instanceof _e?function(t){return`${t.field.canonicalString()} ${t.op} ${No(t.value)}`}(n):n instanceof Me?function(t){return t.op.toString()+" {"+t.getFilters().map(PC).join(" ,")+"}"}(n):"Filter"}var Jm=class extends _e{constructor(e,t,i){super(e,t,i),this.key=Q.fromName(i.referenceValue)}matches(e){let t=Q.comparator(e.key,this.key);return this.matchesComparison(t)}},Zm=class extends _e{constructor(e,t){super(e,"in",t),this.keys=MC("in",t)}matches(e){return this.keys.some(t=>t.isEqual(e.key))}},eg=class extends _e{constructor(e,t){super(e,"not-in",t),this.keys=MC("not-in",t)}matches(e){return!this.keys.some(t=>t.isEqual(e.key))}};function MC(n,e){var t;return(((t=e.arrayValue)===null||t===void 0?void 0:t.values)||[]).map(i=>Q.fromName(i.referenceValue))}var tg=class extends _e{constructor(e,t){super(e,"array-contains",t)}matches(e){let t=e.data.field(this.field);return nl(t)&&tl(t.arrayValue,this.value)}},eh=class extends _e{constructor(e,t){super(e,"in",t)}matches(e){let t=e.data.field(this.field);return t!==null&&tl(this.value.arrayValue,t)}},ng=class extends _e{constructor(e,t){super(e,"not-in",t)}matches(e){if(tl(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;let t=e.data.field(this.field);return t!==null&&!tl(this.value.arrayValue,t)}},ig=class extends _e{constructor(e,t){super(e,"array-contains-any",t)}matches(e){let t=e.data.field(this.field);return!(!nl(t)||!t.arrayValue.values)&&t.arrayValue.values.some(i=>tl(this.value.arrayValue,i))}};var rg=class{constructor(e,t=null,i=[],r=[],s=null,o=null,c=null){this.path=e,this.collectionGroup=t,this.orderBy=i,this.filters=r,this.limit=s,this.startAt=o,this.endAt=c,this.ue=null}};function sg(n,e=null,t=[],i=[],r=null,s=null,o=null){return new rg(n,e,t,i,r,s,o)}function ls(n){let e=W(n);if(e.ue===null){let t=e.path.canonicalString();e.collectionGroup!==null&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map(i=>Xm(i)).join(","),t+="|ob:",t+=e.orderBy.map(i=>function(s){return s.field.canonicalString()+s.dir}(i)).join(","),yl(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(i=>No(i)).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(i=>No(i)).join(",")),e.ue=t}return e.ue}function vl(n,e){if(n.limit!==e.limit||n.orderBy.length!==e.orderBy.length)return!1;for(let t=0;t<n.orderBy.length;t++)if(!kS(n.orderBy[t],e.orderBy[t]))return!1;if(n.filters.length!==e.filters.length)return!1;for(let t=0;t<n.filters.length;t++)if(!AC(n.filters[t],e.filters[t]))return!1;return n.collectionGroup===e.collectionGroup&&!!n.path.isEqual(e.path)&&!!_b(n.startAt,e.startAt)&&_b(n.endAt,e.endAt)}function th(n){return Q.isDocumentKey(n.path)&&n.collectionGroup===null&&n.filters.length===0}function nh(n,e){return n.filters.filter(t=>t instanceof _e&&t.field.isEqual(e))}function yb(n,e,t){let i=zd,r=!0;for(let s of nh(n,e)){let o=zd,c=!0;switch(s.op){case"<":case"<=":o=DS(s.value);break;case"==":case"in":case">=":o=s.value;break;case">":o=s.value,c=!1;break;case"!=":case"not-in":o=zd}pb({value:i,inclusive:r},{value:o,inclusive:c})<0&&(i=o,r=c)}if(t!==null){for(let s=0;s<n.orderBy.length;++s)if(n.orderBy[s].field.isEqual(e)){let o=t.position[s];pb({value:i,inclusive:r},{value:o,inclusive:t.inclusive})<0&&(i=o,r=t.inclusive);break}}return{value:i,inclusive:r}}function vb(n,e,t){let i=er,r=!0;for(let s of nh(n,e)){let o=er,c=!0;switch(s.op){case">=":case">":o=RS(s.value),c=!1;break;case"==":case"in":case"<=":o=s.value;break;case"<":o=s.value,c=!1;break;case"!=":case"not-in":o=er}mb({value:i,inclusive:r},{value:o,inclusive:c})>0&&(i=o,r=c)}if(t!==null){for(let s=0;s<n.orderBy.length;++s)if(n.orderBy[s].field.isEqual(e)){let o=t.position[s];mb({value:i,inclusive:r},{value:o,inclusive:t.inclusive})>0&&(i=o,r=t.inclusive);break}}return{value:i,inclusive:r}}var En=class{constructor(e,t=null,i=[],r=[],s=null,o="F",c=null,l=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=i,this.filters=r,this.limit=s,this.limitType=o,this.startAt=c,this.endAt=l,this.ce=null,this.le=null,this.he=null,this.startAt,this.endAt}};function SC(n,e,t,i,r,s,o,c){return new En(n,e,t,i,r,s,o,c)}function Xo(n){return new En(n)}function wb(n){return n.filters.length===0&&n.limit===null&&n.startAt==null&&n.endAt==null&&(n.explicitOrderBy.length===0||n.explicitOrderBy.length===1&&n.explicitOrderBy[0].field.isKeyField())}function B_(n){return n.collectionGroup!==null}function Oo(n){let e=W(n);if(e.ce===null){e.ce=[];let t=new Set;for(let s of e.explicitOrderBy)e.ce.push(s),t.add(s.field.canonicalString());let i=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(o){let c=new ke(Ye.comparator);return o.filters.forEach(l=>{l.getFlattenedFilters().forEach(f=>{f.isInequality()&&(c=c.add(f.field))})}),c})(e).forEach(s=>{t.has(s.canonicalString())||s.isKeyField()||e.ce.push(new cs(s,i))}),t.has(Ye.keyField().canonicalString())||e.ce.push(new cs(Ye.keyField(),i))}return e.ce}function kt(n){let e=W(n);return e.le||(e.le=NS(e,Oo(n))),e.le}function NS(n,e){if(n.limitType==="F")return sg(n.path,n.collectionGroup,e,n.filters,n.limit,n.startAt,n.endAt);{e=e.map(r=>{let s=r.dir==="desc"?"asc":"desc";return new cs(r.field,s)});let t=n.endAt?new Wn(n.endAt.position,n.endAt.inclusive):null,i=n.startAt?new Wn(n.startAt.position,n.startAt.inclusive):null;return sg(n.path,n.collectionGroup,e,n.filters,n.limit,t,i)}}function og(n,e){let t=n.filters.concat([e]);return new En(n.path,n.collectionGroup,n.explicitOrderBy.slice(),t,n.limit,n.limitType,n.startAt,n.endAt)}function ih(n,e,t){return new En(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),e,t,n.startAt,n.endAt)}function wl(n,e){return vl(kt(n),kt(e))&&n.limitType===e.limitType}function OC(n){return`${ls(kt(n))}|lt:${n.limitType}`}function To(n){return`Query(target=${function(t){let i=t.path.canonicalString();return t.collectionGroup!==null&&(i+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(i+=`, filters: [${t.filters.map(r=>PC(r)).join(", ")}]`),yl(t.limit)||(i+=", limit: "+t.limit),t.orderBy.length>0&&(i+=`, orderBy: [${t.orderBy.map(r=>function(o){return`${o.field.canonicalString()} (${o.dir})`}(r)).join(", ")}]`),t.startAt&&(i+=", startAt: ",i+=t.startAt.inclusive?"b:":"a:",i+=t.startAt.position.map(r=>No(r)).join(",")),t.endAt&&(i+=", endAt: ",i+=t.endAt.inclusive?"a:":"b:",i+=t.endAt.position.map(r=>No(r)).join(",")),`Target(${i})`}(kt(n))}; limitType=${n.limitType})`}function bl(n,e){return e.isFoundDocument()&&function(i,r){let s=r.key.path;return i.collectionGroup!==null?r.key.hasCollectionId(i.collectionGroup)&&i.path.isPrefixOf(s):Q.isDocumentKey(i.path)?i.path.isEqual(s):i.path.isImmediateParentOf(s)}(n,e)&&function(i,r){for(let s of Oo(i))if(!s.field.isKeyField()&&r.data.field(s.field)===null)return!1;return!0}(n,e)&&function(i,r){for(let s of i.filters)if(!s.matches(r))return!1;return!0}(n,e)&&function(i,r){return!(i.startAt&&!function(o,c,l){let f=gb(o,c,l);return o.inclusive?f<=0:f<0}(i.startAt,Oo(i),r)||i.endAt&&!function(o,c,l){let f=gb(o,c,l);return o.inclusive?f>=0:f>0}(i.endAt,Oo(i),r))}(n,e)}function DC(n){return n.collectionGroup||(n.path.length%2==1?n.path.lastSegment():n.path.get(n.path.length-2))}function RC(n){return(e,t)=>{let i=!1;for(let r of Oo(n)){let s=VS(r,e,t);if(s!==0)return s;i=i||r.field.isKeyField()}return 0}}function VS(n,e,t){let i=n.field.isKeyField()?Q.comparator(e.key,t.key):function(s,o,c){let l=o.data.field(s),f=c.data.field(s);return l!==null&&f!==null?or(l,f):J()}(n.field,e,t);switch(n.dir){case"asc":return i;case"desc":return-1*i;default:return J()}}var Qn=class{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){let t=this.mapKeyFn(e),i=this.inner[t];if(i!==void 0){for(let[r,s]of i)if(this.equalsFn(r,e))return s}}has(e){return this.get(e)!==void 0}set(e,t){let i=this.mapKeyFn(e),r=this.inner[i];if(r===void 0)return this.inner[i]=[[e,t]],void this.innerSize++;for(let s=0;s<r.length;s++)if(this.equalsFn(r[s][0],e))return void(r[s]=[e,t]);r.push([e,t]),this.innerSize++}delete(e){let t=this.mapKeyFn(e),i=this.inner[t];if(i===void 0)return!1;for(let r=0;r<i.length;r++)if(this.equalsFn(i[r][0],e))return i.length===1?delete this.inner[t]:i.splice(r,1),this.innerSize--,!0;return!1}forEach(e){_s(this.inner,(t,i)=>{for(let[r,s]of i)e(r,s)})}isEmpty(){return wC(this.inner)}size(){return this.innerSize}};var FS=new je(Q.comparator);function zt(){return FS}var kC=new je(Q.comparator);function qc(...n){let e=kC;for(let t of n)e=e.insert(t.key,t);return e}function NC(n){let e=kC;return n.forEach((t,i)=>e=e.insert(t,i.overlayedDocument)),e}function $n(){return Kc()}function VC(){return Kc()}function Kc(){return new Qn(n=>n.toString(),(n,e)=>n.isEqual(e))}var LS=new je(Q.comparator),jS=new ke(Q.comparator);function he(...n){let e=jS;for(let t of n)e=e.add(t);return e}var BS=new ke(de);function U_(){return BS}function z_(n,e){if(n.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Jc(e)?"-0":e}}function FC(n){return{integerValue:""+n}}function LC(n,e){return mC(e)?FC(e):z_(n,e)}var Fo=class{constructor(){this._=void 0}};function US(n,e,t){return n instanceof ar?function(r,s){let o={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:r.seconds,nanos:r.nanoseconds}}}};return s&&$h(s)&&(s=L_(s)),s&&(o.fields.__previous_value__=s),{mapValue:o}}(t,e):n instanceof ci?BC(n,e):n instanceof li?UC(n,e):function(r,s){let o=jC(r,s),c=bb(o)+bb(r.Pe);return Qm(o)&&Qm(r.Pe)?FC(c):z_(r.serializer,c)}(n,e)}function zS(n,e,t){return n instanceof ci?BC(n,e):n instanceof li?UC(n,e):t}function jC(n,e){return n instanceof cr?function(i){return Qm(i)||function(s){return!!s&&"doubleValue"in s}(i)}(e)?e:{integerValue:0}:null}var ar=class extends Fo{},ci=class extends Fo{constructor(e){super(),this.elements=e}};function BC(n,e){let t=zC(e);for(let i of n.elements)t.some(r=>Kn(r,i))||t.push(i);return{arrayValue:{values:t}}}var li=class extends Fo{constructor(e){super(),this.elements=e}};function UC(n,e){let t=zC(e);for(let i of n.elements)t=t.filter(r=>!Kn(r,i));return{arrayValue:{values:t}}}var cr=class extends Fo{constructor(e,t){super(),this.serializer=e,this.Pe=t}};function bb(n){return Be(n.integerValue||n.doubleValue)}function zC(n){return nl(n)&&n.arrayValue.values?n.arrayValue.values.slice():[]}var us=class{constructor(e,t){this.field=e,this.transform=t}};function $S(n,e){return n.field.isEqual(e.field)&&function(i,r){return i instanceof ci&&r instanceof ci||i instanceof li&&r instanceof li?Ro(i.elements,r.elements,Kn):i instanceof cr&&r instanceof cr?Kn(i.Pe,r.Pe):i instanceof ar&&r instanceof ar}(n.transform,e.transform)}var ag=class{constructor(e,t){this.version=e,this.transformResults=t}},Ke=class n{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new n}static exists(e){return new n(void 0,e)}static updateTime(e){return new n(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}};function qd(n,e){return n.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(n.updateTime):n.exists===void 0||n.exists===e.isFoundDocument()}var Lo=class{};function $C(n,e){if(!n.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return n.isNoDocument()?new ur(n.key,Ke.none()):new lr(n.key,n.data,Ke.none());{let t=n.data,i=St.empty(),r=new ke(Ye.comparator);for(let s of e.fields)if(!r.has(s)){let o=t.field(s);o===null&&s.length>1&&(s=s.popLast(),o=t.field(s)),o===null?i.delete(s):i.set(s,o),r=r.add(s)}return new In(n.key,i,new Jt(r.toArray()),Ke.none())}}function qS(n,e,t){n instanceof lr?function(r,s,o){let c=r.value.clone(),l=Eb(r.fieldTransforms,s,o.transformResults);c.setAll(l),s.convertToFoundDocument(o.version,c).setHasCommittedMutations()}(n,e,t):n instanceof In?function(r,s,o){if(!qd(r.precondition,s))return void s.convertToUnknownDocument(o.version);let c=Eb(r.fieldTransforms,s,o.transformResults),l=s.data;l.setAll(qC(r)),l.setAll(c),s.convertToFoundDocument(o.version,l).setHasCommittedMutations()}(n,e,t):function(r,s,o){s.convertToNoDocument(o.version).setHasCommittedMutations()}(0,e,t)}function Wc(n,e,t,i){return n instanceof lr?function(s,o,c,l){if(!qd(s.precondition,o))return c;let f=s.value.clone(),g=Ib(s.fieldTransforms,l,o);return f.setAll(g),o.convertToFoundDocument(o.version,f).setHasLocalMutations(),null}(n,e,t,i):n instanceof In?function(s,o,c,l){if(!qd(s.precondition,o))return c;let f=Ib(s.fieldTransforms,l,o),g=o.data;return g.setAll(qC(s)),g.setAll(f),o.convertToFoundDocument(o.version,g).setHasLocalMutations(),c===null?null:c.unionWith(s.fieldMask.fields).unionWith(s.fieldTransforms.map(p=>p.field))}(n,e,t,i):function(s,o,c){return qd(s.precondition,o)?(o.convertToNoDocument(o.version).setHasLocalMutations(),null):c}(n,e,t)}function GS(n,e){let t=null;for(let i of n.fieldTransforms){let r=e.data.field(i.field),s=jC(i.transform,r||null);s!=null&&(t===null&&(t=St.empty()),t.set(i.field,s))}return t||null}function Cb(n,e){return n.type===e.type&&!!n.key.isEqual(e.key)&&!!n.precondition.isEqual(e.precondition)&&!!function(i,r){return i===void 0&&r===void 0||!(!i||!r)&&Ro(i,r,(s,o)=>$S(s,o))}(n.fieldTransforms,e.fieldTransforms)&&(n.type===0?n.value.isEqual(e.value):n.type!==1||n.data.isEqual(e.data)&&n.fieldMask.isEqual(e.fieldMask))}var lr=class extends Lo{constructor(e,t,i,r=[]){super(),this.key=e,this.value=t,this.precondition=i,this.fieldTransforms=r,this.type=0}getFieldMask(){return null}},In=class extends Lo{constructor(e,t,i,r,s=[]){super(),this.key=e,this.data=t,this.fieldMask=i,this.precondition=r,this.fieldTransforms=s,this.type=1}getFieldMask(){return this.fieldMask}};function qC(n){let e=new Map;return n.fieldMask.fields.forEach(t=>{if(!t.isEmpty()){let i=n.data.field(t);e.set(t,i)}}),e}function Eb(n,e,t){let i=new Map;ee(n.length===t.length);for(let r=0;r<t.length;r++){let s=n[r],o=s.transform,c=e.data.field(s.field);i.set(s.field,zS(o,c,t[r]))}return i}function Ib(n,e,t){let i=new Map;for(let r of n){let s=r.transform,o=t.data.field(r.field);i.set(r.field,US(s,o,e))}return i}var ur=class extends Lo{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}},il=class extends Lo{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}};var rl=class{constructor(e,t,i,r){this.batchId=e,this.localWriteTime=t,this.baseMutations=i,this.mutations=r}applyToRemoteDocument(e,t){let i=t.mutationResults;for(let r=0;r<this.mutations.length;r++){let s=this.mutations[r];s.key.isEqual(e.key)&&qS(s,e,i[r])}}applyToLocalView(e,t){for(let i of this.baseMutations)i.key.isEqual(e.key)&&(t=Wc(i,e,t,this.localWriteTime));for(let i of this.mutations)i.key.isEqual(e.key)&&(t=Wc(i,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){let i=VC();return this.mutations.forEach(r=>{let s=e.get(r.key),o=s.overlayedDocument,c=this.applyToLocalView(o,s.mutatedFields);c=t.has(r.key)?null:c;let l=$C(o,c);l!==null&&i.set(r.key,l),o.isValidDocument()||o.convertToNoDocument(oe.min())}),i}keys(){return this.mutations.reduce((e,t)=>e.add(t.key),he())}isEqual(e){return this.batchId===e.batchId&&Ro(this.mutations,e.mutations,(t,i)=>Cb(t,i))&&Ro(this.baseMutations,e.baseMutations,(t,i)=>Cb(t,i))}},cg=class n{constructor(e,t,i,r){this.batch=e,this.commitVersion=t,this.mutationResults=i,this.docVersions=r}static from(e,t,i){ee(e.mutations.length===i.length);let r=function(){return LS}(),s=e.mutations;for(let o=0;o<s.length;o++)r=r.insert(s[o].key,i[o].version);return new n(e,t,i,r)}};var sl=class{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}};var lg=class{constructor(e,t){this.count=e,this.unchangedNames=t}};var ot,ve;function GC(n){switch(n){default:return J();case N.CANCELLED:case N.UNKNOWN:case N.DEADLINE_EXCEEDED:case N.RESOURCE_EXHAUSTED:case N.INTERNAL:case N.UNAVAILABLE:case N.UNAUTHENTICATED:return!1;case N.INVALID_ARGUMENT:case N.NOT_FOUND:case N.ALREADY_EXISTS:case N.PERMISSION_DENIED:case N.FAILED_PRECONDITION:case N.ABORTED:case N.OUT_OF_RANGE:case N.UNIMPLEMENTED:case N.DATA_LOSS:return!0}}function HC(n){if(n===void 0)return Qe("GRPC error has no .code"),N.UNKNOWN;switch(n){case ot.OK:return N.OK;case ot.CANCELLED:return N.CANCELLED;case ot.UNKNOWN:return N.UNKNOWN;case ot.DEADLINE_EXCEEDED:return N.DEADLINE_EXCEEDED;case ot.RESOURCE_EXHAUSTED:return N.RESOURCE_EXHAUSTED;case ot.INTERNAL:return N.INTERNAL;case ot.UNAVAILABLE:return N.UNAVAILABLE;case ot.UNAUTHENTICATED:return N.UNAUTHENTICATED;case ot.INVALID_ARGUMENT:return N.INVALID_ARGUMENT;case ot.NOT_FOUND:return N.NOT_FOUND;case ot.ALREADY_EXISTS:return N.ALREADY_EXISTS;case ot.PERMISSION_DENIED:return N.PERMISSION_DENIED;case ot.FAILED_PRECONDITION:return N.FAILED_PRECONDITION;case ot.ABORTED:return N.ABORTED;case ot.OUT_OF_RANGE:return N.OUT_OF_RANGE;case ot.UNIMPLEMENTED:return N.UNIMPLEMENTED;case ot.DATA_LOSS:return N.DATA_LOSS;default:return J()}}(ve=ot||(ot={}))[ve.OK=0]="OK",ve[ve.CANCELLED=1]="CANCELLED",ve[ve.UNKNOWN=2]="UNKNOWN",ve[ve.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",ve[ve.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",ve[ve.NOT_FOUND=5]="NOT_FOUND",ve[ve.ALREADY_EXISTS=6]="ALREADY_EXISTS",ve[ve.PERMISSION_DENIED=7]="PERMISSION_DENIED",ve[ve.UNAUTHENTICATED=16]="UNAUTHENTICATED",ve[ve.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",ve[ve.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",ve[ve.ABORTED=10]="ABORTED",ve[ve.OUT_OF_RANGE=11]="OUT_OF_RANGE",ve[ve.UNIMPLEMENTED=12]="UNIMPLEMENTED",ve[ve.INTERNAL=13]="INTERNAL",ve[ve.UNAVAILABLE=14]="UNAVAILABLE",ve[ve.DATA_LOSS=15]="DATA_LOSS";var Tb=null;function KC(){return new TextEncoder}var HS=new Qi([4294967295,4294967295],0);function Ab(n){let e=KC().encode(n),t=new Im;return t.update(e),new Uint8Array(t.digest())}function xb(n){let e=new DataView(n.buffer),t=e.getUint32(0,!0),i=e.getUint32(4,!0),r=e.getUint32(8,!0),s=e.getUint32(12,!0);return[new Qi([t,i],0),new Qi([r,s],0)]}var ug=class n{constructor(e,t,i){if(this.bitmap=e,this.padding=t,this.hashCount=i,t<0||t>=8)throw new rs(`Invalid padding: ${t}`);if(i<0)throw new rs(`Invalid hash count: ${i}`);if(e.length>0&&this.hashCount===0)throw new rs(`Invalid hash count: ${i}`);if(e.length===0&&t!==0)throw new rs(`Invalid padding when bitmap length is 0: ${t}`);this.Ie=8*e.length-t,this.Te=Qi.fromNumber(this.Ie)}Ee(e,t,i){let r=e.add(t.multiply(Qi.fromNumber(i)));return r.compare(HS)===1&&(r=new Qi([r.getBits(0),r.getBits(1)],0)),r.modulo(this.Te).toNumber()}de(e){return(this.bitmap[Math.floor(e/8)]&1<<e%8)!=0}mightContain(e){if(this.Ie===0)return!1;let t=Ab(e),[i,r]=xb(t);for(let s=0;s<this.hashCount;s++){let o=this.Ee(i,r,s);if(!this.de(o))return!1}return!0}static create(e,t,i){let r=e%8==0?0:8-e%8,s=new Uint8Array(Math.ceil(e/8)),o=new n(s,r,t);return i.forEach(c=>o.insert(c)),o}insert(e){if(this.Ie===0)return;let t=Ab(e),[i,r]=xb(t);for(let s=0;s<this.hashCount;s++){let o=this.Ee(i,r,s);this.Ae(o)}}Ae(e){let t=Math.floor(e/8),i=e%8;this.bitmap[t]|=1<<i}},rs=class extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}};var ol=class n{constructor(e,t,i,r,s){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=i,this.documentUpdates=r,this.resolvedLimboDocuments=s}static createSynthesizedRemoteEventForCurrentChange(e,t,i){let r=new Map;return r.set(e,al.createSynthesizedTargetChangeForCurrentChange(e,t,i)),new n(oe.min(),r,new je(de),zt(),he())}},al=class n{constructor(e,t,i,r,s){this.resumeToken=e,this.current=t,this.addedDocuments=i,this.modifiedDocuments=r,this.removedDocuments=s}static createSynthesizedTargetChangeForCurrentChange(e,t,i){return new n(i,t,he(),he(),he())}};var Do=class{constructor(e,t,i,r){this.Re=e,this.removedTargetIds=t,this.key=i,this.Ve=r}},rh=class{constructor(e,t){this.targetId=e,this.me=t}},sh=class{constructor(e,t,i=Je.EMPTY_BYTE_STRING,r=null){this.state=e,this.targetIds=t,this.resumeToken=i,this.cause=r}},oh=class{constructor(){this.fe=0,this.ge=Mb(),this.pe=Je.EMPTY_BYTE_STRING,this.ye=!1,this.we=!0}get current(){return this.ye}get resumeToken(){return this.pe}get Se(){return this.fe!==0}get be(){return this.we}De(e){e.approximateByteSize()>0&&(this.we=!0,this.pe=e)}ve(){let e=he(),t=he(),i=he();return this.ge.forEach((r,s)=>{switch(s){case 0:e=e.add(r);break;case 2:t=t.add(r);break;case 1:i=i.add(r);break;default:J()}}),new al(this.pe,this.ye,e,t,i)}Ce(){this.we=!1,this.ge=Mb()}Fe(e,t){this.we=!0,this.ge=this.ge.insert(e,t)}Me(e){this.we=!0,this.ge=this.ge.remove(e)}xe(){this.fe+=1}Oe(){this.fe-=1,ee(this.fe>=0)}Ne(){this.we=!0,this.ye=!0}},dg=class{constructor(e){this.Le=e,this.Be=new Map,this.ke=zt(),this.qe=Pb(),this.Qe=new je(de)}Ke(e){for(let t of e.Re)e.Ve&&e.Ve.isFoundDocument()?this.$e(t,e.Ve):this.Ue(t,e.key,e.Ve);for(let t of e.removedTargetIds)this.Ue(t,e.key,e.Ve)}We(e){this.forEachTarget(e,t=>{let i=this.Ge(t);switch(e.state){case 0:this.ze(t)&&i.De(e.resumeToken);break;case 1:i.Oe(),i.Se||i.Ce(),i.De(e.resumeToken);break;case 2:i.Oe(),i.Se||this.removeTarget(t);break;case 3:this.ze(t)&&(i.Ne(),i.De(e.resumeToken));break;case 4:this.ze(t)&&(this.je(t),i.De(e.resumeToken));break;default:J()}})}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.Be.forEach((i,r)=>{this.ze(r)&&t(r)})}He(e){let t=e.targetId,i=e.me.count,r=this.Je(t);if(r){let s=r.target;if(th(s))if(i===0){let o=new Q(s.path);this.Ue(t,o,lt.newNoDocument(o,oe.min()))}else ee(i===1);else{let o=this.Ye(t);if(o!==i){let c=this.Ze(e),l=c?this.Xe(c,e,o):1;if(l!==0){this.je(t);let f=l===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Qe=this.Qe.insert(t,f)}Tb?.et(function(g,p,w,I,L){var O,S,H,X,U,ne;let re={localCacheCount:g,existenceFilterCount:p.count,databaseId:w.database,projectId:w.projectId},ce=p.unchangedNames;return ce&&(re.bloomFilter={applied:L===0,hashCount:(O=ce?.hashCount)!==null&&O!==void 0?O:0,bitmapLength:(X=(H=(S=ce?.bits)===null||S===void 0?void 0:S.bitmap)===null||H===void 0?void 0:H.length)!==null&&X!==void 0?X:0,padding:(ne=(U=ce?.bits)===null||U===void 0?void 0:U.padding)!==null&&ne!==void 0?ne:0,mightContain:T=>{var b;return(b=I?.mightContain(T))!==null&&b!==void 0&&b}}),re}(o,e.me,this.Le.tt(),c,l))}}}}Ze(e){let t=e.me.unchangedNames;if(!t||!t.bits)return null;let{bits:{bitmap:i="",padding:r=0},hashCount:s=0}=t,o,c;try{o=rr(i).toUint8Array()}catch(l){if(l instanceof Jd)return Cn("Decoding the base64 bloom filter in existence filter failed ("+l.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw l}try{c=new ug(o,r,s)}catch(l){return Cn(l instanceof rs?"BloomFilter error: ":"Applying bloom filter failed: ",l),null}return c.Ie===0?null:c}Xe(e,t,i){return t.me.count===i-this.nt(e,t.targetId)?0:2}nt(e,t){let i=this.Le.getRemoteKeysForTarget(t),r=0;return i.forEach(s=>{let o=this.Le.tt(),c=`projects/${o.projectId}/databases/${o.database}/documents/${s.path.canonicalString()}`;e.mightContain(c)||(this.Ue(t,s,null),r++)}),r}rt(e){let t=new Map;this.Be.forEach((s,o)=>{let c=this.Je(o);if(c){if(s.current&&th(c.target)){let l=new Q(c.target.path);this.ke.get(l)!==null||this.it(o,l)||this.Ue(o,l,lt.newNoDocument(l,e))}s.be&&(t.set(o,s.ve()),s.Ce())}});let i=he();this.qe.forEach((s,o)=>{let c=!0;o.forEachWhile(l=>{let f=this.Je(l);return!f||f.purpose==="TargetPurposeLimboResolution"||(c=!1,!1)}),c&&(i=i.add(s))}),this.ke.forEach((s,o)=>o.setReadTime(e));let r=new ol(e,t,this.Qe,this.ke,i);return this.ke=zt(),this.qe=Pb(),this.Qe=new je(de),r}$e(e,t){if(!this.ze(e))return;let i=this.it(e,t.key)?2:0;this.Ge(e).Fe(t.key,i),this.ke=this.ke.insert(t.key,t),this.qe=this.qe.insert(t.key,this.st(t.key).add(e))}Ue(e,t,i){if(!this.ze(e))return;let r=this.Ge(e);this.it(e,t)?r.Fe(t,1):r.Me(t),this.qe=this.qe.insert(t,this.st(t).delete(e)),i&&(this.ke=this.ke.insert(t,i))}removeTarget(e){this.Be.delete(e)}Ye(e){let t=this.Ge(e).ve();return this.Le.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}xe(e){this.Ge(e).xe()}Ge(e){let t=this.Be.get(e);return t||(t=new oh,this.Be.set(e,t)),t}st(e){let t=this.qe.get(e);return t||(t=new ke(de),this.qe=this.qe.insert(e,t)),t}ze(e){let t=this.Je(e)!==null;return t||z("WatchChangeAggregator","Detected inactive target",e),t}Je(e){let t=this.Be.get(e);return t&&t.Se?null:this.Le.ot(e)}je(e){this.Be.set(e,new oh),this.Le.getRemoteKeysForTarget(e).forEach(t=>{this.Ue(e,t,null)})}it(e,t){return this.Le.getRemoteKeysForTarget(e).has(t)}};function Pb(){return new je(Q.comparator)}function Mb(){return new je(Q.comparator)}var KS={asc:"ASCENDING",desc:"DESCENDING"},WS={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},QS={and:"AND",or:"OR"},hg=class{constructor(e,t){this.databaseId=e,this.useProto3Json=t}};function fg(n,e){return n.useProto3Json||yl(e)?e:{value:e}}function jo(n,e){return n.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function WC(n,e){return n.useProto3Json?e.toBase64():e.toUint8Array()}function YS(n,e){return jo(n,e.toTimestamp())}function Xe(n){return ee(!!n),oe.fromTimestamp(function(t){let i=ai(t);return new $e(i.seconds,i.nanos)}(n))}function $_(n,e){return pg(n,e).canonicalString()}function pg(n,e){let t=function(r){return new we(["projects",r.projectId,"databases",r.database])}(n).child("documents");return e===void 0?t:t.child(e)}function QC(n){let e=we.fromString(n);return ee(sE(e)),e}function cl(n,e){return $_(n.databaseId,e.path)}function Gn(n,e){let t=QC(e);if(t.get(1)!==n.databaseId.projectId)throw new B(N.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+n.databaseId.projectId);if(t.get(3)!==n.databaseId.database)throw new B(N.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+n.databaseId.database);return new Q(JC(t))}function YC(n,e){return $_(n.databaseId,e)}function XC(n){let e=QC(n);return e.length===4?we.emptyPath():JC(e)}function mg(n){return new we(["projects",n.databaseId.projectId,"databases",n.databaseId.database]).canonicalString()}function JC(n){return ee(n.length>4&&n.get(4)==="documents"),n.popFirst(5)}function Sb(n,e,t){return{name:cl(n,e),fields:t.value.mapValue.fields}}function ZC(n,e,t){let i=Gn(n,e.name),r=Xe(e.updateTime),s=e.createTime?Xe(e.createTime):oe.min(),o=new St({mapValue:{fields:e.fields}}),c=lt.newFoundDocument(i,r,s,o);return t&&c.setHasCommittedMutations(),t?c.setHasCommittedMutations():c}function XS(n,e){return"found"in e?function(i,r){ee(!!r.found),r.found.name,r.found.updateTime;let s=Gn(i,r.found.name),o=Xe(r.found.updateTime),c=r.found.createTime?Xe(r.found.createTime):oe.min(),l=new St({mapValue:{fields:r.found.fields}});return lt.newFoundDocument(s,o,c,l)}(n,e):"missing"in e?function(i,r){ee(!!r.missing),ee(!!r.readTime);let s=Gn(i,r.missing),o=Xe(r.readTime);return lt.newNoDocument(s,o)}(n,e):J()}function JS(n,e){let t;if("targetChange"in e){e.targetChange;let i=function(f){return f==="NO_CHANGE"?0:f==="ADD"?1:f==="REMOVE"?2:f==="CURRENT"?3:f==="RESET"?4:J()}(e.targetChange.targetChangeType||"NO_CHANGE"),r=e.targetChange.targetIds||[],s=function(f,g){return f.useProto3Json?(ee(g===void 0||typeof g=="string"),Je.fromBase64String(g||"")):(ee(g===void 0||g instanceof Buffer||g instanceof Uint8Array),Je.fromUint8Array(g||new Uint8Array))}(n,e.targetChange.resumeToken),o=e.targetChange.cause,c=o&&function(f){let g=f.code===void 0?N.UNKNOWN:HC(f.code);return new B(g,f.message||"")}(o);t=new sh(i,r,s,c||null)}else if("documentChange"in e){e.documentChange;let i=e.documentChange;i.document,i.document.name,i.document.updateTime;let r=Gn(n,i.document.name),s=Xe(i.document.updateTime),o=i.document.createTime?Xe(i.document.createTime):oe.min(),c=new St({mapValue:{fields:i.document.fields}}),l=lt.newFoundDocument(r,s,o,c),f=i.targetIds||[],g=i.removedTargetIds||[];t=new Do(f,g,l.key,l)}else if("documentDelete"in e){e.documentDelete;let i=e.documentDelete;i.document;let r=Gn(n,i.document),s=i.readTime?Xe(i.readTime):oe.min(),o=lt.newNoDocument(r,s),c=i.removedTargetIds||[];t=new Do([],c,o.key,o)}else if("documentRemove"in e){e.documentRemove;let i=e.documentRemove;i.document;let r=Gn(n,i.document),s=i.removedTargetIds||[];t=new Do([],s,r,null)}else{if(!("filter"in e))return J();{e.filter;let i=e.filter;i.targetId;let{count:r=0,unchangedNames:s}=i,o=new lg(r,s),c=i.targetId;t=new rh(c,o)}}return t}function ll(n,e){let t;if(e instanceof lr)t={update:Sb(n,e.key,e.value)};else if(e instanceof ur)t={delete:cl(n,e.key)};else if(e instanceof In)t={update:Sb(n,e.key,e.data),updateMask:r1(e.fieldMask)};else{if(!(e instanceof il))return J();t={verify:cl(n,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map(i=>function(s,o){let c=o.transform;if(c instanceof ar)return{fieldPath:o.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(c instanceof ci)return{fieldPath:o.field.canonicalString(),appendMissingElements:{values:c.elements}};if(c instanceof li)return{fieldPath:o.field.canonicalString(),removeAllFromArray:{values:c.elements}};if(c instanceof cr)return{fieldPath:o.field.canonicalString(),increment:c.Pe};throw J()}(0,i))),e.precondition.isNone||(t.currentDocument=function(r,s){return s.updateTime!==void 0?{updateTime:YS(r,s.updateTime)}:s.exists!==void 0?{exists:s.exists}:J()}(n,e.precondition)),t}function gg(n,e){let t=e.currentDocument?function(s){return s.updateTime!==void 0?Ke.updateTime(Xe(s.updateTime)):s.exists!==void 0?Ke.exists(s.exists):Ke.none()}(e.currentDocument):Ke.none(),i=e.updateTransforms?e.updateTransforms.map(r=>function(o,c){let l=null;if("setToServerValue"in c)ee(c.setToServerValue==="REQUEST_TIME"),l=new ar;else if("appendMissingElements"in c){let g=c.appendMissingElements.values||[];l=new ci(g)}else if("removeAllFromArray"in c){let g=c.removeAllFromArray.values||[];l=new li(g)}else"increment"in c?l=new cr(o,c.increment):J();let f=Ye.fromServerFormat(c.fieldPath);return new us(f,l)}(n,r)):[];if(e.update){e.update.name;let r=Gn(n,e.update.name),s=new St({mapValue:{fields:e.update.fields}});if(e.updateMask){let o=function(l){let f=l.fieldPaths||[];return new Jt(f.map(g=>Ye.fromServerFormat(g)))}(e.updateMask);return new In(r,s,o,t,i)}return new lr(r,s,t,i)}if(e.delete){let r=Gn(n,e.delete);return new ur(r,t)}if(e.verify){let r=Gn(n,e.verify);return new il(r,t)}return J()}function ZS(n,e){return n&&n.length>0?(ee(e!==void 0),n.map(t=>function(r,s){let o=r.updateTime?Xe(r.updateTime):Xe(s);return o.isEqual(oe.min())&&(o=Xe(s)),new ag(o,r.transformResults||[])}(t,e))):[]}function eE(n,e){return{documents:[YC(n,e.path)]}}function tE(n,e){let t={structuredQuery:{}},i=e.path,r;e.collectionGroup!==null?(r=i,t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(r=i.popLast(),t.structuredQuery.from=[{collectionId:i.lastSegment()}]),t.parent=YC(n,r);let s=function(f){if(f.length!==0)return rE(Me.create(f,"and"))}(e.filters);s&&(t.structuredQuery.where=s);let o=function(f){if(f.length!==0)return f.map(g=>function(w){return{field:Ao(w.field),direction:t1(w.dir)}}(g))}(e.orderBy);o&&(t.structuredQuery.orderBy=o);let c=fg(n,e.limit);return c!==null&&(t.structuredQuery.limit=c),e.startAt&&(t.structuredQuery.startAt=function(f){return{before:f.inclusive,values:f.position}}(e.startAt)),e.endAt&&(t.structuredQuery.endAt=function(f){return{before:!f.inclusive,values:f.position}}(e.endAt)),{_t:t,parent:r}}function nE(n){let e=XC(n.parent),t=n.structuredQuery,i=t.from?t.from.length:0,r=null;if(i>0){ee(i===1);let g=t.from[0];g.allDescendants?r=g.collectionId:e=e.child(g.collectionId)}let s=[];t.where&&(s=function(p){let w=iE(p);return w instanceof Me&&j_(w)?w.getFilters():[w]}(t.where));let o=[];t.orderBy&&(o=function(p){return p.map(w=>function(L){return new cs(xo(L.field),function(S){switch(S){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(L.direction))}(w))}(t.orderBy));let c=null;t.limit&&(c=function(p){let w;return w=typeof p=="object"?p.value:p,yl(w)?null:w}(t.limit));let l=null;t.startAt&&(l=function(p){let w=!!p.before,I=p.values||[];return new Wn(I,w)}(t.startAt));let f=null;return t.endAt&&(f=function(p){let w=!p.before,I=p.values||[];return new Wn(I,w)}(t.endAt)),SC(e,r,o,s,c,"F",l,f)}function e1(n,e){let t=function(r){switch(r){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return J()}}(e.purpose);return t==null?null:{"goog-listen-tags":t}}function iE(n){return n.unaryFilter!==void 0?function(t){switch(t.unaryFilter.op){case"IS_NAN":let i=xo(t.unaryFilter.field);return _e.create(i,"==",{doubleValue:NaN});case"IS_NULL":let r=xo(t.unaryFilter.field);return _e.create(r,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":let s=xo(t.unaryFilter.field);return _e.create(s,"!=",{doubleValue:NaN});case"IS_NOT_NULL":let o=xo(t.unaryFilter.field);return _e.create(o,"!=",{nullValue:"NULL_VALUE"});default:return J()}}(n):n.fieldFilter!==void 0?function(t){return _e.create(xo(t.fieldFilter.field),function(r){switch(r){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return J()}}(t.fieldFilter.op),t.fieldFilter.value)}(n):n.compositeFilter!==void 0?function(t){return Me.create(t.compositeFilter.filters.map(i=>iE(i)),function(r){switch(r){case"AND":return"and";case"OR":return"or";default:return J()}}(t.compositeFilter.op))}(n):J()}function t1(n){return KS[n]}function n1(n){return WS[n]}function i1(n){return QS[n]}function Ao(n){return{fieldPath:n.canonicalString()}}function xo(n){return Ye.fromServerFormat(n.fieldPath)}function rE(n){return n instanceof _e?function(t){if(t.op==="=="){if(fb(t.value))return{unaryFilter:{field:Ao(t.field),op:"IS_NAN"}};if(hb(t.value))return{unaryFilter:{field:Ao(t.field),op:"IS_NULL"}}}else if(t.op==="!="){if(fb(t.value))return{unaryFilter:{field:Ao(t.field),op:"IS_NOT_NAN"}};if(hb(t.value))return{unaryFilter:{field:Ao(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Ao(t.field),op:n1(t.op),value:t.value}}}(n):n instanceof Me?function(t){let i=t.getFilters().map(r=>rE(r));return i.length===1?i[0]:{compositeFilter:{op:i1(t.op),filters:i}}}(n):J()}function r1(n){let e=[];return n.fields.forEach(t=>e.push(t.canonicalString())),{fieldPaths:e}}function sE(n){return n.length>=4&&n.get(0)==="projects"&&n.get(2)==="databases"}var Bo=class n{constructor(e,t,i,r,s=oe.min(),o=oe.min(),c=Je.EMPTY_BYTE_STRING,l=null){this.target=e,this.targetId=t,this.purpose=i,this.sequenceNumber=r,this.snapshotVersion=s,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=c,this.expectedCount=l}withSequenceNumber(e){return new n(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new n(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new n(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new n(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}};var ah=class{constructor(e){this.ct=e}};function s1(n,e){let t;if(e.document)t=ZC(n.ct,e.document,!!e.hasCommittedMutations);else if(e.noDocument){let i=Q.fromSegments(e.noDocument.path),r=hs(e.noDocument.readTime);t=lt.newNoDocument(i,r),e.hasCommittedMutations&&t.setHasCommittedMutations()}else{if(!e.unknownDocument)return J();{let i=Q.fromSegments(e.unknownDocument.path),r=hs(e.unknownDocument.version);t=lt.newUnknownDocument(i,r)}}return e.readTime&&t.setReadTime(function(r){let s=new $e(r[0],r[1]);return oe.fromTimestamp(s)}(e.readTime)),t}function Ob(n,e){let t=e.key,i={prefixPath:t.getCollectionPath().popLast().toArray(),collectionGroup:t.collectionGroup,documentId:t.path.lastSegment(),readTime:ch(e.readTime),hasCommittedMutations:e.hasCommittedMutations};if(e.isFoundDocument())i.document=function(s,o){return{name:cl(s,o.key),fields:o.data.value.mapValue.fields,updateTime:jo(s,o.version.toTimestamp()),createTime:jo(s,o.createTime.toTimestamp())}}(n.ct,e);else if(e.isNoDocument())i.noDocument={path:t.path.toArray(),readTime:ds(e.version)};else{if(!e.isUnknownDocument())return J();i.unknownDocument={path:t.path.toArray(),version:ds(e.version)}}return i}function ch(n){let e=n.toTimestamp();return[e.seconds,e.nanoseconds]}function ds(n){let e=n.toTimestamp();return{seconds:e.seconds,nanoseconds:e.nanoseconds}}function hs(n){let e=new $e(n.seconds,n.nanoseconds);return oe.fromTimestamp(e)}function ts(n,e){let t=(e.baseMutations||[]).map(s=>gg(n.ct,s));for(let s=0;s<e.mutations.length-1;++s){let o=e.mutations[s];if(s+1<e.mutations.length&&e.mutations[s+1].transform!==void 0){let c=e.mutations[s+1];o.updateTransforms=c.transform.fieldTransforms,e.mutations.splice(s+1,1),++s}}let i=e.mutations.map(s=>gg(n.ct,s)),r=$e.fromMillis(e.localWriteTimeMs);return new rl(e.batchId,r,t,i)}function Gc(n){let e=hs(n.readTime),t=n.lastLimboFreeSnapshotVersion!==void 0?hs(n.lastLimboFreeSnapshotVersion):oe.min(),i;return i=function(s){return s.documents!==void 0}(n.query)?function(s){return ee(s.documents.length===1),kt(Xo(XC(s.documents[0])))}(n.query):function(s){return kt(nE(s))}(n.query),new Bo(i,n.targetId,"TargetPurposeListen",n.lastListenSequenceNumber,e,t,Je.fromBase64String(n.resumeToken))}function oE(n,e){let t=ds(e.snapshotVersion),i=ds(e.lastLimboFreeSnapshotVersion),r;r=th(e.target)?eE(n.ct,e.target):tE(n.ct,e.target)._t;let s=e.resumeToken.toBase64();return{targetId:e.targetId,canonicalId:ls(e.target),readTime:t,resumeToken:s,lastListenSequenceNumber:e.sequenceNumber,lastLimboFreeSnapshotVersion:i,query:r}}function q_(n){let e=nE({parent:n.parent,structuredQuery:n.structuredQuery});return n.limitType==="LAST"?ih(e,e.limit,"L"):e}function Sm(n,e){return new sl(e.largestBatchId,gg(n.ct,e.overlayMutation))}function Db(n,e){let t=e.path.lastSegment();return[n,Rt(e.path.popLast()),t]}function Rb(n,e,t,i){return{indexId:n,uid:e,sequenceNumber:t,readTime:ds(i.readTime),documentKey:Rt(i.documentKey.path),largestBatchId:i.largestBatchId}}var _g=class{getBundleMetadata(e,t){return kb(e).get(t).next(i=>{if(i)return function(s){return{id:s.bundleId,createTime:hs(s.createTime),version:s.version}}(i)})}saveBundleMetadata(e,t){return kb(e).put(function(r){return{bundleId:r.id,createTime:ds(Xe(r.createTime)),version:r.version}}(t))}getNamedQuery(e,t){return Nb(e).get(t).next(i=>{if(i)return function(s){return{name:s.name,query:q_(s.bundledQuery),readTime:hs(s.readTime)}}(i)})}saveNamedQuery(e,t){return Nb(e).put(function(r){return{name:r.name,readTime:ds(Xe(r.readTime)),bundledQuery:r.bundledQuery}}(t))}};function kb(n){return mt(n,"bundles")}function Nb(n){return mt(n,"namedQueries")}var lh=class n{constructor(e,t){this.serializer=e,this.userId=t}static lt(e,t){let i=t.uid||"";return new n(e,i)}getOverlay(e,t){return Bc(e).get(Db(this.userId,t)).next(i=>i?Sm(this.serializer,i):null)}getOverlays(e,t){let i=$n();return R.forEach(t,r=>this.getOverlay(e,r).next(s=>{s!==null&&i.set(r,s)})).next(()=>i)}saveOverlays(e,t,i){let r=[];return i.forEach((s,o)=>{let c=new sl(t,o);r.push(this.ht(e,c))}),R.waitFor(r)}removeOverlaysForBatchId(e,t,i){let r=new Set;t.forEach(o=>r.add(Rt(o.getCollectionPath())));let s=[];return r.forEach(o=>{let c=IDBKeyRange.bound([this.userId,o,i],[this.userId,o,i+1],!1,!0);s.push(Bc(e).j("collectionPathOverlayIndex",c))}),R.waitFor(s)}getOverlaysForCollection(e,t,i){let r=$n(),s=Rt(t),o=IDBKeyRange.bound([this.userId,s,i],[this.userId,s,Number.POSITIVE_INFINITY],!0);return Bc(e).U("collectionPathOverlayIndex",o).next(c=>{for(let l of c){let f=Sm(this.serializer,l);r.set(f.getKey(),f)}return r})}getOverlaysForCollectionGroup(e,t,i,r){let s=$n(),o,c=IDBKeyRange.bound([this.userId,t,i],[this.userId,t,Number.POSITIVE_INFINITY],!0);return Bc(e).J({index:"collectionGroupOverlayIndex",range:c},(l,f,g)=>{let p=Sm(this.serializer,f);s.size()<r||p.largestBatchId===o?(s.set(p.getKey(),p),o=p.largestBatchId):g.done()}).next(()=>s)}ht(e,t){return Bc(e).put(function(r,s,o){let[c,l,f]=Db(s,o.mutation.key);return{userId:s,collectionPath:l,documentId:f,collectionGroup:o.mutation.key.getCollectionGroup(),largestBatchId:o.largestBatchId,overlayMutation:ll(r.ct,o.mutation)}}(this.serializer,this.userId,t))}};function Bc(n){return mt(n,"documentOverlays")}var yg=class{Pt(e){return mt(e,"globals")}getSessionToken(e){return this.Pt(e).get("sessionToken").next(t=>{let i=t?.value;return i?Je.fromUint8Array(i):Je.EMPTY_BYTE_STRING})}setSessionToken(e,t){return this.Pt(e).put({name:"sessionToken",value:t.toUint8Array()})}};var si=class{constructor(){}It(e,t){this.Tt(e,t),t.Et()}Tt(e,t){if("nullValue"in e)this.dt(t,5);else if("booleanValue"in e)this.dt(t,10),t.At(e.booleanValue?1:0);else if("integerValue"in e)this.dt(t,15),t.At(Be(e.integerValue));else if("doubleValue"in e){let i=Be(e.doubleValue);isNaN(i)?this.dt(t,13):(this.dt(t,15),Jc(i)?t.At(0):t.At(i))}else if("timestampValue"in e){let i=e.timestampValue;this.dt(t,20),typeof i=="string"&&(i=ai(i)),t.Rt(`${i.seconds||""}`),t.At(i.nanos||0)}else if("stringValue"in e)this.Vt(e.stringValue,t),this.ft(t);else if("bytesValue"in e)this.dt(t,30),t.gt(rr(e.bytesValue)),this.ft(t);else if("referenceValue"in e)this.yt(e.referenceValue,t);else if("geoPointValue"in e){let i=e.geoPointValue;this.dt(t,45),t.At(i.latitude||0),t.At(i.longitude||0)}else"mapValue"in e?CC(e)?this.dt(t,Number.MAX_SAFE_INTEGER):qh(e)?this.wt(e.mapValue,t):(this.St(e.mapValue,t),this.ft(t)):"arrayValue"in e?(this.bt(e.arrayValue,t),this.ft(t)):J()}Vt(e,t){this.dt(t,25),this.Dt(e,t)}Dt(e,t){t.Rt(e)}St(e,t){let i=e.fields||{};this.dt(t,55);for(let r of Object.keys(i))this.Vt(r,t),this.Tt(i[r],t)}wt(e,t){var i,r;let s=e.fields||{};this.dt(t,53);let o="value",c=((r=(i=s[o].arrayValue)===null||i===void 0?void 0:i.values)===null||r===void 0?void 0:r.length)||0;this.dt(t,15),t.At(Be(c)),this.Vt(o,t),this.Tt(s[o],t)}bt(e,t){let i=e.values||[];this.dt(t,50);for(let r of i)this.Tt(r,t)}yt(e,t){this.dt(t,37),Q.fromName(e).path.forEach(i=>{this.dt(t,60),this.Dt(i,t)})}dt(e,t){e.At(t)}ft(e){e.At(2)}};si.vt=new si;function o1(n){if(n===0)return 8;let e=0;return!(n>>4)&&(e+=4,n<<=4),!(n>>6)&&(e+=2,n<<=2),!(n>>7)&&(e+=1),e}function Vb(n){let e=64-function(i){let r=0;for(let s=0;s<8;++s){let o=o1(255&i[s]);if(r+=o,o!==8)break}return r}(n);return Math.ceil(e/8)}var vg=class{constructor(){this.buffer=new Uint8Array(1024),this.position=0}Ct(e){let t=e[Symbol.iterator](),i=t.next();for(;!i.done;)this.Ft(i.value),i=t.next();this.Mt()}xt(e){let t=e[Symbol.iterator](),i=t.next();for(;!i.done;)this.Ot(i.value),i=t.next();this.Nt()}Lt(e){for(let t of e){let i=t.charCodeAt(0);if(i<128)this.Ft(i);else if(i<2048)this.Ft(960|i>>>6),this.Ft(128|63&i);else if(t<"\uD800"||"\uDBFF"<t)this.Ft(480|i>>>12),this.Ft(128|63&i>>>6),this.Ft(128|63&i);else{let r=t.codePointAt(0);this.Ft(240|r>>>18),this.Ft(128|63&r>>>12),this.Ft(128|63&r>>>6),this.Ft(128|63&r)}}this.Mt()}Bt(e){for(let t of e){let i=t.charCodeAt(0);if(i<128)this.Ot(i);else if(i<2048)this.Ot(960|i>>>6),this.Ot(128|63&i);else if(t<"\uD800"||"\uDBFF"<t)this.Ot(480|i>>>12),this.Ot(128|63&i>>>6),this.Ot(128|63&i);else{let r=t.codePointAt(0);this.Ot(240|r>>>18),this.Ot(128|63&r>>>12),this.Ot(128|63&r>>>6),this.Ot(128|63&r)}}this.Nt()}kt(e){let t=this.qt(e),i=Vb(t);this.Qt(1+i),this.buffer[this.position++]=255&i;for(let r=t.length-i;r<t.length;++r)this.buffer[this.position++]=255&t[r]}Kt(e){let t=this.qt(e),i=Vb(t);this.Qt(1+i),this.buffer[this.position++]=~(255&i);for(let r=t.length-i;r<t.length;++r)this.buffer[this.position++]=~(255&t[r])}$t(){this.Ut(255),this.Ut(255)}Wt(){this.Gt(255),this.Gt(255)}reset(){this.position=0}seed(e){this.Qt(e.length),this.buffer.set(e,this.position),this.position+=e.length}zt(){return this.buffer.slice(0,this.position)}qt(e){let t=function(s){let o=new DataView(new ArrayBuffer(8));return o.setFloat64(0,s,!1),new Uint8Array(o.buffer)}(e),i=(128&t[0])!=0;t[0]^=i?255:128;for(let r=1;r<t.length;++r)t[r]^=i?255:0;return t}Ft(e){let t=255&e;t===0?(this.Ut(0),this.Ut(255)):t===255?(this.Ut(255),this.Ut(0)):this.Ut(t)}Ot(e){let t=255&e;t===0?(this.Gt(0),this.Gt(255)):t===255?(this.Gt(255),this.Gt(0)):this.Gt(e)}Mt(){this.Ut(0),this.Ut(1)}Nt(){this.Gt(0),this.Gt(1)}Ut(e){this.Qt(1),this.buffer[this.position++]=e}Gt(e){this.Qt(1),this.buffer[this.position++]=~e}Qt(e){let t=e+this.position;if(t<=this.buffer.length)return;let i=2*this.buffer.length;i<t&&(i=t);let r=new Uint8Array(i);r.set(this.buffer),this.buffer=r}},wg=class{constructor(e){this.jt=e}gt(e){this.jt.Ct(e)}Rt(e){this.jt.Lt(e)}At(e){this.jt.kt(e)}Et(){this.jt.$t()}},bg=class{constructor(e){this.jt=e}gt(e){this.jt.xt(e)}Rt(e){this.jt.Bt(e)}At(e){this.jt.Kt(e)}Et(){this.jt.Wt()}},ns=class{constructor(){this.jt=new vg,this.Ht=new wg(this.jt),this.Jt=new bg(this.jt)}seed(e){this.jt.seed(e)}Yt(e){return e===0?this.Ht:this.Jt}zt(){return this.jt.zt()}reset(){this.jt.reset()}};var is=class n{constructor(e,t,i,r){this.indexId=e,this.documentKey=t,this.arrayValue=i,this.directionalValue=r}Zt(){let e=this.directionalValue.length,t=e===0||this.directionalValue[e-1]===255?e+1:e,i=new Uint8Array(t);return i.set(this.directionalValue,0),t!==e?i.set([0],this.directionalValue.length):++i[i.length-1],new n(this.indexId,this.documentKey,this.arrayValue,i)}};function Yi(n,e){let t=n.indexId-e.indexId;return t!==0?t:(t=Fb(n.arrayValue,e.arrayValue),t!==0?t:(t=Fb(n.directionalValue,e.directionalValue),t!==0?t:Q.comparator(n.documentKey,e.documentKey)))}function Fb(n,e){for(let t=0;t<n.length&&t<e.length;++t){let i=n[t]-e[t];if(i!==0)return i}return n.length-e.length}var uh=class{constructor(e){this.Xt=new ke((t,i)=>Ye.comparator(t.field,i.field)),this.collectionId=e.collectionGroup!=null?e.collectionGroup:e.path.lastSegment(),this.en=e.orderBy,this.tn=[];for(let t of e.filters){let i=t;i.isInequality()?this.Xt=this.Xt.add(i):this.tn.push(i)}}get nn(){return this.Xt.size>1}rn(e){if(ee(e.collectionGroup===this.collectionId),this.nn)return!1;let t=zm(e);if(t!==void 0&&!this.sn(t))return!1;let i=Zr(e),r=new Set,s=0,o=0;for(;s<i.length&&this.sn(i[s]);++s)r=r.add(i[s].fieldPath.canonicalString());if(s===i.length)return!0;if(this.Xt.size>0){let c=this.Xt.getIterator().getNext();if(!r.has(c.field.canonicalString())){let l=i[s];if(!this.on(c,l)||!this._n(this.en[o++],l))return!1}++s}for(;s<i.length;++s){let c=i[s];if(o>=this.en.length||!this._n(this.en[o++],c))return!1}return!0}an(){if(this.nn)return null;let e=new ke(Ye.comparator),t=[];for(let i of this.tn)if(!i.field.isKeyField())if(i.op==="array-contains"||i.op==="array-contains-any")t.push(new So(i.field,2));else{if(e.has(i.field))continue;e=e.add(i.field),t.push(new So(i.field,0))}for(let i of this.en)i.field.isKeyField()||e.has(i.field)||(e=e.add(i.field),t.push(new So(i.field,i.dir==="asc"?0:1)));return new ko(ko.UNKNOWN_ID,this.collectionId,t,Xc.empty())}sn(e){for(let t of this.tn)if(this.on(t,e))return!0;return!1}on(e,t){if(e===void 0||!e.field.isEqual(t.fieldPath))return!1;let i=e.op==="array-contains"||e.op==="array-contains-any";return t.kind===2===i}_n(e,t){return!!e.field.isEqual(t.fieldPath)&&(t.kind===0&&e.dir==="asc"||t.kind===1&&e.dir==="desc")}};function aE(n){var e,t;if(ee(n instanceof _e||n instanceof Me),n instanceof _e){if(n instanceof eh){let r=((t=(e=n.value.arrayValue)===null||e===void 0?void 0:e.values)===null||t===void 0?void 0:t.map(s=>_e.create(n.field,"==",s)))||[];return Me.create(r,"or")}return n}let i=n.filters.map(r=>aE(r));return Me.create(i,n.op)}function a1(n){if(n.getFilters().length===0)return[];let e=Ig(aE(n));return ee(cE(e)),Cg(e)||Eg(e)?[e]:e.getFilters()}function Cg(n){return n instanceof _e}function Eg(n){return n instanceof Me&&j_(n)}function cE(n){return Cg(n)||Eg(n)||function(t){if(t instanceof Me&&Ym(t)){for(let i of t.getFilters())if(!Cg(i)&&!Eg(i))return!1;return!0}return!1}(n)}function Ig(n){if(ee(n instanceof _e||n instanceof Me),n instanceof _e)return n;if(n.filters.length===1)return Ig(n.filters[0]);let e=n.filters.map(i=>Ig(i)),t=Me.create(e,n.op);return t=dh(t),cE(t)?t:(ee(t instanceof Me),ee(Vo(t)),ee(t.filters.length>1),t.filters.reduce((i,r)=>G_(i,r)))}function G_(n,e){let t;return ee(n instanceof _e||n instanceof Me),ee(e instanceof _e||e instanceof Me),t=n instanceof _e?e instanceof _e?function(r,s){return Me.create([r,s],"and")}(n,e):Lb(n,e):e instanceof _e?Lb(e,n):function(r,s){if(ee(r.filters.length>0&&s.filters.length>0),Vo(r)&&Vo(s))return xC(r,s.getFilters());let o=Ym(r)?r:s,c=Ym(r)?s:r,l=o.filters.map(f=>G_(f,c));return Me.create(l,"or")}(n,e),dh(t)}function Lb(n,e){if(Vo(e))return xC(e,n.getFilters());{let t=e.filters.map(i=>G_(n,i));return Me.create(t,"or")}}function dh(n){if(ee(n instanceof _e||n instanceof Me),n instanceof _e)return n;let e=n.getFilters();if(e.length===1)return dh(e[0]);if(TC(n))return n;let t=e.map(r=>dh(r)),i=[];return t.forEach(r=>{r instanceof _e?i.push(r):r instanceof Me&&(r.op===n.op?i.push(...r.filters):i.push(r))}),i.length===1?i[0]:Me.create(i,n.op)}var Tg=class{constructor(){this.un=new ul}addToCollectionParentIndex(e,t){return this.un.add(t),R.resolve()}getCollectionParents(e,t){return R.resolve(this.un.getEntries(t))}addFieldIndex(e,t){return R.resolve()}deleteFieldIndex(e,t){return R.resolve()}deleteAllFieldIndexes(e){return R.resolve()}createTargetIndexes(e,t){return R.resolve()}getDocumentsMatchingTarget(e,t){return R.resolve(null)}getIndexType(e,t){return R.resolve(0)}getFieldIndexes(e,t){return R.resolve([])}getNextCollectionGroupToUpdate(e){return R.resolve(null)}getMinOffset(e,t){return R.resolve(ln.min())}getMinOffsetFromCollectionGroup(e,t){return R.resolve(ln.min())}updateCollectionGroup(e,t,i){return R.resolve()}updateIndexEntries(e,t){return R.resolve()}},ul=class{constructor(){this.index={}}add(e){let t=e.lastSegment(),i=e.popLast(),r=this.index[t]||new ke(we.comparator),s=!r.has(i);return this.index[t]=r.add(i),s}has(e){let t=e.lastSegment(),i=e.popLast(),r=this.index[t];return r&&r.has(i)}getEntries(e){return(this.index[e]||new ke(we.comparator)).toArray()}};var Fd=new Uint8Array(0),Ag=class{constructor(e,t){this.databaseId=t,this.cn=new ul,this.ln=new Qn(i=>ls(i),(i,r)=>vl(i,r)),this.uid=e.uid||""}addToCollectionParentIndex(e,t){if(!this.cn.has(t)){let i=t.lastSegment(),r=t.popLast();e.addOnCommittedListener(()=>{this.cn.add(t)});let s={collectionId:i,parent:Rt(r)};return jb(e).put(s)}return R.resolve()}getCollectionParents(e,t){let i=[],r=IDBKeyRange.bound([t,""],[uC(t),""],!1,!0);return jb(e).U(r).next(s=>{for(let o of s){if(o.collectionId!==t)break;i.push(zn(o.parent))}return i})}addFieldIndex(e,t){let i=Uc(e),r=function(c){return{indexId:c.indexId,collectionGroup:c.collectionGroup,fields:c.fields.map(l=>[l.fieldPath.canonicalString(),l.kind])}}(t);delete r.indexId;let s=i.add(r);if(t.indexState){let o=Co(e);return s.next(c=>{o.put(Rb(c,this.uid,t.indexState.sequenceNumber,t.indexState.offset))})}return s.next()}deleteFieldIndex(e,t){let i=Uc(e),r=Co(e),s=bo(e);return i.delete(t.indexId).next(()=>r.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0))).next(()=>s.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0)))}deleteAllFieldIndexes(e){let t=Uc(e),i=bo(e),r=Co(e);return t.j().next(()=>i.j()).next(()=>r.j())}createTargetIndexes(e,t){return R.forEach(this.hn(t),i=>this.getIndexType(e,i).next(r=>{if(r===0||r===1){let s=new uh(i).an();if(s!=null)return this.addFieldIndex(e,s)}}))}getDocumentsMatchingTarget(e,t){let i=bo(e),r=!0,s=new Map;return R.forEach(this.hn(t),o=>this.Pn(e,o).next(c=>{r&&(r=!!c),s.set(o,c)})).next(()=>{if(r){let o=he(),c=[];return R.forEach(s,(l,f)=>{z("IndexedDbIndexManager",`Using index ${function(U){return`id=${U.indexId}|cg=${U.collectionGroup}|f=${U.fields.map(ne=>`${ne.fieldPath}:${ne.kind}`).join(",")}`}(l)} to execute ${ls(t)}`);let g=function(U,ne){let re=zm(ne);if(re===void 0)return null;for(let ce of nh(U,re.fieldPath))switch(ce.op){case"array-contains-any":return ce.value.arrayValue.values||[];case"array-contains":return[ce.value]}return null}(f,l),p=function(U,ne){let re=new Map;for(let ce of Zr(ne))for(let T of nh(U,ce.fieldPath))switch(T.op){case"==":case"in":re.set(ce.fieldPath.canonicalString(),T.value);break;case"not-in":case"!=":return re.set(ce.fieldPath.canonicalString(),T.value),Array.from(re.values())}return null}(f,l),w=function(U,ne){let re=[],ce=!0;for(let T of Zr(ne)){let b=T.kind===0?yb(U,T.fieldPath,U.startAt):vb(U,T.fieldPath,U.startAt);re.push(b.value),ce&&(ce=b.inclusive)}return new Wn(re,ce)}(f,l),I=function(U,ne){let re=[],ce=!0;for(let T of Zr(ne)){let b=T.kind===0?vb(U,T.fieldPath,U.endAt):yb(U,T.fieldPath,U.endAt);re.push(b.value),ce&&(ce=b.inclusive)}return new Wn(re,ce)}(f,l),L=this.In(l,f,w),O=this.In(l,f,I),S=this.Tn(l,f,p),H=this.En(l.indexId,g,L,w.inclusive,O,I.inclusive,S);return R.forEach(H,X=>i.G(X,t.limit).next(U=>{U.forEach(ne=>{let re=Q.fromSegments(ne.documentKey);o.has(re)||(o=o.add(re),c.push(re))})}))}).next(()=>c)}return R.resolve(null)})}hn(e){let t=this.ln.get(e);return t||(e.filters.length===0?t=[e]:t=a1(Me.create(e.filters,"and")).map(i=>sg(e.path,e.collectionGroup,e.orderBy,i.getFilters(),e.limit,e.startAt,e.endAt)),this.ln.set(e,t),t)}En(e,t,i,r,s,o,c){let l=(t!=null?t.length:1)*Math.max(i.length,s.length),f=l/(t!=null?t.length:1),g=[];for(let p=0;p<l;++p){let w=t?this.dn(t[p/f]):Fd,I=this.An(e,w,i[p%f],r),L=this.Rn(e,w,s[p%f],o),O=c.map(S=>this.An(e,w,S,!0));g.push(...this.createRange(I,L,O))}return g}An(e,t,i,r){let s=new is(e,Q.empty(),t,i);return r?s:s.Zt()}Rn(e,t,i,r){let s=new is(e,Q.empty(),t,i);return r?s.Zt():s}Pn(e,t){let i=new uh(t),r=t.collectionGroup!=null?t.collectionGroup:t.path.lastSegment();return this.getFieldIndexes(e,r).next(s=>{let o=null;for(let c of s)i.rn(c)&&(!o||c.fields.length>o.fields.length)&&(o=c);return o})}getIndexType(e,t){let i=2,r=this.hn(t);return R.forEach(r,s=>this.Pn(e,s).next(o=>{o?i!==0&&o.fields.length<function(l){let f=new ke(Ye.comparator),g=!1;for(let p of l.filters)for(let w of p.getFlattenedFilters())w.field.isKeyField()||(w.op==="array-contains"||w.op==="array-contains-any"?g=!0:f=f.add(w.field));for(let p of l.orderBy)p.field.isKeyField()||(f=f.add(p.field));return f.size+(g?1:0)}(s)&&(i=1):i=0})).next(()=>function(o){return o.limit!==null}(t)&&r.length>1&&i===2?1:i)}Vn(e,t){let i=new ns;for(let r of Zr(e)){let s=t.data.field(r.fieldPath);if(s==null)return null;let o=i.Yt(r.kind);si.vt.It(s,o)}return i.zt()}dn(e){let t=new ns;return si.vt.It(e,t.Yt(0)),t.zt()}mn(e,t){let i=new ns;return si.vt.It(as(this.databaseId,t),i.Yt(function(s){let o=Zr(s);return o.length===0?0:o[o.length-1].kind}(e))),i.zt()}Tn(e,t,i){if(i===null)return[];let r=[];r.push(new ns);let s=0;for(let o of Zr(e)){let c=i[s++];for(let l of r)if(this.fn(t,o.fieldPath)&&nl(c))r=this.gn(r,o,c);else{let f=l.Yt(o.kind);si.vt.It(c,f)}}return this.pn(r)}In(e,t,i){return this.Tn(e,t,i.position)}pn(e){let t=[];for(let i=0;i<e.length;++i)t[i]=e[i].zt();return t}gn(e,t,i){let r=[...e],s=[];for(let o of i.arrayValue.values||[])for(let c of r){let l=new ns;l.seed(c.zt()),si.vt.It(o,l.Yt(t.kind)),s.push(l)}return s}fn(e,t){return!!e.filters.find(i=>i instanceof _e&&i.field.isEqual(t)&&(i.op==="in"||i.op==="not-in"))}getFieldIndexes(e,t){let i=Uc(e),r=Co(e);return(t?i.U("collectionGroupIndex",IDBKeyRange.bound(t,t)):i.U()).next(s=>{let o=[];return R.forEach(s,c=>r.get([c.indexId,this.uid]).next(l=>{o.push(function(g,p){let w=p?new Xc(p.sequenceNumber,new ln(hs(p.readTime),new Q(zn(p.documentKey)),p.largestBatchId)):Xc.empty(),I=g.fields.map(([L,O])=>new So(Ye.fromServerFormat(L),O));return new ko(g.indexId,g.collectionGroup,I,w)}(c,l))})).next(()=>o)})}getNextCollectionGroupToUpdate(e){return this.getFieldIndexes(e).next(t=>t.length===0?null:(t.sort((i,r)=>{let s=i.indexState.sequenceNumber-r.indexState.sequenceNumber;return s!==0?s:de(i.collectionGroup,r.collectionGroup)}),t[0].collectionGroup))}updateCollectionGroup(e,t,i){let r=Uc(e),s=Co(e);return this.yn(e).next(o=>r.U("collectionGroupIndex",IDBKeyRange.bound(t,t)).next(c=>R.forEach(c,l=>s.put(Rb(l.indexId,this.uid,o,i)))))}updateIndexEntries(e,t){let i=new Map;return R.forEach(t,(r,s)=>{let o=i.get(r.collectionGroup);return(o?R.resolve(o):this.getFieldIndexes(e,r.collectionGroup)).next(c=>(i.set(r.collectionGroup,c),R.forEach(c,l=>this.wn(e,r,l).next(f=>{let g=this.Sn(s,l);return f.isEqual(g)?R.resolve():this.bn(e,s,l,f,g)}))))})}Dn(e,t,i,r){return bo(e).put({indexId:r.indexId,uid:this.uid,arrayValue:r.arrayValue,directionalValue:r.directionalValue,orderedDocumentKey:this.mn(i,t.key),documentKey:t.key.path.toArray()})}vn(e,t,i,r){return bo(e).delete([r.indexId,this.uid,r.arrayValue,r.directionalValue,this.mn(i,t.key),t.key.path.toArray()])}wn(e,t,i){let r=bo(e),s=new ke(Yi);return r.J({index:"documentKeyIndex",range:IDBKeyRange.only([i.indexId,this.uid,this.mn(i,t)])},(o,c)=>{s=s.add(new is(i.indexId,t,c.arrayValue,c.directionalValue))}).next(()=>s)}Sn(e,t){let i=new ke(Yi),r=this.Vn(t,e);if(r==null)return i;let s=zm(t);if(s!=null){let o=e.data.field(s.fieldPath);if(nl(o))for(let c of o.arrayValue.values||[])i=i.add(new is(t.indexId,e.key,this.dn(c),r))}else i=i.add(new is(t.indexId,e.key,Fd,r));return i}bn(e,t,i,r,s){z("IndexedDbIndexManager","Updating index entries for document '%s'",t.key);let o=[];return function(l,f,g,p,w){let I=l.getIterator(),L=f.getIterator(),O=wo(I),S=wo(L);for(;O||S;){let H=!1,X=!1;if(O&&S){let U=g(O,S);U<0?X=!0:U>0&&(H=!0)}else O!=null?X=!0:H=!0;H?(p(S),S=wo(L)):X?(w(O),O=wo(I)):(O=wo(I),S=wo(L))}}(r,s,Yi,c=>{o.push(this.Dn(e,t,i,c))},c=>{o.push(this.vn(e,t,i,c))}),R.waitFor(o)}yn(e){let t=1;return Co(e).J({index:"sequenceNumberIndex",reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},(i,r,s)=>{s.done(),t=r.sequenceNumber+1}).next(()=>t)}createRange(e,t,i){i=i.sort((o,c)=>Yi(o,c)).filter((o,c,l)=>!c||Yi(o,l[c-1])!==0);let r=[];r.push(e);for(let o of i){let c=Yi(o,e),l=Yi(o,t);if(c===0)r[0]=e.Zt();else if(c>0&&l<0)r.push(o),r.push(o.Zt());else if(l>0)break}r.push(t);let s=[];for(let o=0;o<r.length;o+=2){if(this.Cn(r[o],r[o+1]))return[];let c=[r[o].indexId,this.uid,r[o].arrayValue,r[o].directionalValue,Fd,[]],l=[r[o+1].indexId,this.uid,r[o+1].arrayValue,r[o+1].directionalValue,Fd,[]];s.push(IDBKeyRange.bound(c,l))}return s}Cn(e,t){return Yi(e,t)>0}getMinOffsetFromCollectionGroup(e,t){return this.getFieldIndexes(e,t).next(Bb)}getMinOffset(e,t){return R.mapArray(this.hn(t),i=>this.Pn(e,i).next(r=>r||J())).next(Bb)}};function jb(n){return mt(n,"collectionParents")}function bo(n){return mt(n,"indexEntries")}function Uc(n){return mt(n,"indexConfiguration")}function Co(n){return mt(n,"indexState")}function Bb(n){ee(n.length!==0);let e=n[0].indexState.offset,t=e.largestBatchId;for(let i=1;i<n.length;i++){let r=n[i].indexState.offset;N_(r,e)<0&&(e=r),t<r.largestBatchId&&(t=r.largestBatchId)}return new ln(e.readTime,e.documentKey,t)}var Ub={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},cn=class n{constructor(e,t,i){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=i}static withCacheSize(e){return new n(e,n.DEFAULT_COLLECTION_PERCENTILE,n.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}};function lE(n,e,t){let i=n.store("mutations"),r=n.store("documentMutations"),s=[],o=IDBKeyRange.only(t.batchId),c=0,l=i.J({range:o},(g,p,w)=>(c++,w.delete()));s.push(l.next(()=>{ee(c===1)}));let f=[];for(let g of t.mutations){let p=gC(e,g.key.path,t.batchId);s.push(r.delete(p)),f.push(g.key)}return R.waitFor(s).next(()=>f)}function hh(n){if(!n)return 0;let e;if(n.document)e=n.document;else if(n.unknownDocument)e=n.unknownDocument;else{if(!n.noDocument)throw J();e=n.noDocument}return JSON.stringify(e).length}cn.DEFAULT_COLLECTION_PERCENTILE=10,cn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,cn.DEFAULT=new cn(41943040,cn.DEFAULT_COLLECTION_PERCENTILE,cn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),cn.DISABLED=new cn(-1,0,0);var fh=class n{constructor(e,t,i,r){this.userId=e,this.serializer=t,this.indexManager=i,this.referenceDelegate=r,this.Fn={}}static lt(e,t,i,r){ee(e.uid!=="");let s=e.isAuthenticated()?e.uid:"";return new n(s,t,i,r)}checkEmpty(e){let t=!0,i=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return Xi(e).J({index:"userMutationsIndex",range:i},(r,s,o)=>{t=!1,o.done()}).next(()=>t)}addMutationBatch(e,t,i,r){let s=Po(e),o=Xi(e);return o.add({}).next(c=>{ee(typeof c=="number");let l=new rl(c,t,i,r),f=function(I,L,O){let S=O.baseMutations.map(X=>ll(I.ct,X)),H=O.mutations.map(X=>ll(I.ct,X));return{userId:L,batchId:O.batchId,localWriteTimeMs:O.localWriteTime.toMillis(),baseMutations:S,mutations:H}}(this.serializer,this.userId,l),g=[],p=new ke((w,I)=>de(w.canonicalString(),I.canonicalString()));for(let w of r){let I=gC(this.userId,w.key.path,c);p=p.add(w.key.path.popLast()),g.push(o.put(f)),g.push(s.put(I,fS))}return p.forEach(w=>{g.push(this.indexManager.addToCollectionParentIndex(e,w))}),e.addOnCommittedListener(()=>{this.Fn[c]=l.keys()}),R.waitFor(g).next(()=>l)})}lookupMutationBatch(e,t){return Xi(e).get(t).next(i=>i?(ee(i.userId===this.userId),ts(this.serializer,i)):null)}Mn(e,t){return this.Fn[t]?R.resolve(this.Fn[t]):this.lookupMutationBatch(e,t).next(i=>{if(i){let r=i.keys();return this.Fn[t]=r,r}return null})}getNextMutationBatchAfterBatchId(e,t){let i=t+1,r=IDBKeyRange.lowerBound([this.userId,i]),s=null;return Xi(e).J({index:"userMutationsIndex",range:r},(o,c,l)=>{c.userId===this.userId&&(ee(c.batchId>=i),s=ts(this.serializer,c)),l.done()}).next(()=>s)}getHighestUnacknowledgedBatchId(e){let t=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]),i=-1;return Xi(e).J({index:"userMutationsIndex",range:t,reverse:!0},(r,s,o)=>{i=s.batchId,o.done()}).next(()=>i)}getAllMutationBatches(e){let t=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return Xi(e).U("userMutationsIndex",t).next(i=>i.map(r=>ts(this.serializer,r)))}getAllMutationBatchesAffectingDocumentKey(e,t){let i=Ud(this.userId,t.path),r=IDBKeyRange.lowerBound(i),s=[];return Po(e).J({range:r},(o,c,l)=>{let[f,g,p]=o,w=zn(g);if(f===this.userId&&t.path.isEqual(w))return Xi(e).get(p).next(I=>{if(!I)throw J();ee(I.userId===this.userId),s.push(ts(this.serializer,I))});l.done()}).next(()=>s)}getAllMutationBatchesAffectingDocumentKeys(e,t){let i=new ke(de),r=[];return t.forEach(s=>{let o=Ud(this.userId,s.path),c=IDBKeyRange.lowerBound(o),l=Po(e).J({range:c},(f,g,p)=>{let[w,I,L]=f,O=zn(I);w===this.userId&&s.path.isEqual(O)?i=i.add(L):p.done()});r.push(l)}),R.waitFor(r).next(()=>this.xn(e,i))}getAllMutationBatchesAffectingQuery(e,t){let i=t.path,r=i.length+1,s=Ud(this.userId,i),o=IDBKeyRange.lowerBound(s),c=new ke(de);return Po(e).J({range:o},(l,f,g)=>{let[p,w,I]=l,L=zn(w);p===this.userId&&i.isPrefixOf(L)?L.length===r&&(c=c.add(I)):g.done()}).next(()=>this.xn(e,c))}xn(e,t){let i=[],r=[];return t.forEach(s=>{r.push(Xi(e).get(s).next(o=>{if(o===null)throw J();ee(o.userId===this.userId),i.push(ts(this.serializer,o))}))}),R.waitFor(r).next(()=>i)}removeMutationBatch(e,t){return lE(e._e,this.userId,t).next(i=>(e.addOnCommittedListener(()=>{this.On(t.batchId)}),R.forEach(i,r=>this.referenceDelegate.markPotentiallyOrphaned(e,r))))}On(e){delete this.Fn[e]}performConsistencyCheck(e){return this.checkEmpty(e).next(t=>{if(!t)return R.resolve();let i=IDBKeyRange.lowerBound(function(o){return[o]}(this.userId)),r=[];return Po(e).J({range:i},(s,o,c)=>{if(s[0]===this.userId){let l=zn(s[1]);r.push(l)}else c.done()}).next(()=>{ee(r.length===0)})})}containsKey(e,t){return uE(e,this.userId,t)}Nn(e){return dE(e).get(this.userId).next(t=>t||{userId:this.userId,lastAcknowledgedBatchId:-1,lastStreamToken:""})}};function uE(n,e,t){let i=Ud(e,t.path),r=i[1],s=IDBKeyRange.lowerBound(i),o=!1;return Po(n).J({range:s,H:!0},(c,l,f)=>{let[g,p,w]=c;g===e&&p===r&&(o=!0),f.done()}).next(()=>o)}function Xi(n){return mt(n,"mutations")}function Po(n){return mt(n,"documentMutations")}function dE(n){return mt(n,"mutationQueues")}var Uo=class n{constructor(e){this.Ln=e}next(){return this.Ln+=2,this.Ln}static Bn(){return new n(0)}static kn(){return new n(-1)}};var xg=class{constructor(e,t){this.referenceDelegate=e,this.serializer=t}allocateTargetId(e){return this.qn(e).next(t=>{let i=new Uo(t.highestTargetId);return t.highestTargetId=i.next(),this.Qn(e,t).next(()=>t.highestTargetId)})}getLastRemoteSnapshotVersion(e){return this.qn(e).next(t=>oe.fromTimestamp(new $e(t.lastRemoteSnapshotVersion.seconds,t.lastRemoteSnapshotVersion.nanoseconds)))}getHighestSequenceNumber(e){return this.qn(e).next(t=>t.highestListenSequenceNumber)}setTargetsMetadata(e,t,i){return this.qn(e).next(r=>(r.highestListenSequenceNumber=t,i&&(r.lastRemoteSnapshotVersion=i.toTimestamp()),t>r.highestListenSequenceNumber&&(r.highestListenSequenceNumber=t),this.Qn(e,r)))}addTargetData(e,t){return this.Kn(e,t).next(()=>this.qn(e).next(i=>(i.targetCount+=1,this.$n(t,i),this.Qn(e,i))))}updateTargetData(e,t){return this.Kn(e,t)}removeTargetData(e,t){return this.removeMatchingKeysForTargetId(e,t.targetId).next(()=>Eo(e).delete(t.targetId)).next(()=>this.qn(e)).next(i=>(ee(i.targetCount>0),i.targetCount-=1,this.Qn(e,i)))}removeTargets(e,t,i){let r=0,s=[];return Eo(e).J((o,c)=>{let l=Gc(c);l.sequenceNumber<=t&&i.get(l.targetId)===null&&(r++,s.push(this.removeTargetData(e,l)))}).next(()=>R.waitFor(s)).next(()=>r)}forEachTarget(e,t){return Eo(e).J((i,r)=>{let s=Gc(r);t(s)})}qn(e){return zb(e).get("targetGlobalKey").next(t=>(ee(t!==null),t))}Qn(e,t){return zb(e).put("targetGlobalKey",t)}Kn(e,t){return Eo(e).put(oE(this.serializer,t))}$n(e,t){let i=!1;return e.targetId>t.highestTargetId&&(t.highestTargetId=e.targetId,i=!0),e.sequenceNumber>t.highestListenSequenceNumber&&(t.highestListenSequenceNumber=e.sequenceNumber,i=!0),i}getTargetCount(e){return this.qn(e).next(t=>t.targetCount)}getTargetData(e,t){let i=ls(t),r=IDBKeyRange.bound([i,Number.NEGATIVE_INFINITY],[i,Number.POSITIVE_INFINITY]),s=null;return Eo(e).J({range:r,index:"queryTargetsIndex"},(o,c,l)=>{let f=Gc(c);vl(t,f.target)&&(s=f,l.done())}).next(()=>s)}addMatchingKeys(e,t,i){let r=[],s=Ji(e);return t.forEach(o=>{let c=Rt(o.path);r.push(s.put({targetId:i,path:c})),r.push(this.referenceDelegate.addReference(e,i,o))}),R.waitFor(r)}removeMatchingKeys(e,t,i){let r=Ji(e);return R.forEach(t,s=>{let o=Rt(s.path);return R.waitFor([r.delete([i,o]),this.referenceDelegate.removeReference(e,i,s)])})}removeMatchingKeysForTargetId(e,t){let i=Ji(e),r=IDBKeyRange.bound([t],[t+1],!1,!0);return i.delete(r)}getMatchingKeysForTargetId(e,t){let i=IDBKeyRange.bound([t],[t+1],!1,!0),r=Ji(e),s=he();return r.J({range:i,H:!0},(o,c,l)=>{let f=zn(o[1]),g=new Q(f);s=s.add(g)}).next(()=>s)}containsKey(e,t){let i=Rt(t.path),r=IDBKeyRange.bound([i],[uC(i)],!1,!0),s=0;return Ji(e).J({index:"documentTargetsIndex",H:!0,range:r},([o,c],l,f)=>{o!==0&&(s++,f.done())}).next(()=>s>0)}ot(e,t){return Eo(e).get(t).next(i=>i?Gc(i):null)}};function Eo(n){return mt(n,"targets")}function zb(n){return mt(n,"targetGlobal")}function Ji(n){return mt(n,"targetDocuments")}function $b([n,e],[t,i]){let r=de(n,t);return r===0?de(e,i):r}var Pg=class{constructor(e){this.Un=e,this.buffer=new ke($b),this.Wn=0}Gn(){return++this.Wn}zn(e){let t=[e,this.Gn()];if(this.buffer.size<this.Un)this.buffer=this.buffer.add(t);else{let i=this.buffer.last();$b(t,i)<0&&(this.buffer=this.buffer.delete(i).add(t))}}get maxValue(){return this.buffer.last()[0]}},Mg=class{constructor(e,t,i){this.garbageCollector=e,this.asyncQueue=t,this.localStore=i,this.jn=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Hn(6e4)}stop(){this.jn&&(this.jn.cancel(),this.jn=null)}get started(){return this.jn!==null}Hn(e){z("LruGarbageCollector",`Garbage collection scheduled in ${e}ms`),this.jn=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,()=>V(this,null,function*(){this.jn=null;try{yield this.localStore.collectGarbage(this.garbageCollector)}catch(t){fr(t)?z("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",t):yield hr(t)}yield this.Hn(3e5)}))}},Sg=class{constructor(e,t){this.Jn=e,this.params=t}calculateTargetCount(e,t){return this.Jn.Yn(e).next(i=>Math.floor(t/100*i))}nthSequenceNumber(e,t){if(t===0)return R.resolve(Xt.oe);let i=new Pg(t);return this.Jn.forEachTarget(e,r=>i.zn(r.sequenceNumber)).next(()=>this.Jn.Zn(e,r=>i.zn(r))).next(()=>i.maxValue)}removeTargets(e,t,i){return this.Jn.removeTargets(e,t,i)}removeOrphanedDocuments(e,t){return this.Jn.removeOrphanedDocuments(e,t)}collect(e,t){return this.params.cacheSizeCollectionThreshold===-1?(z("LruGarbageCollector","Garbage collection skipped; disabled"),R.resolve(Ub)):this.getCacheSize(e).next(i=>i<this.params.cacheSizeCollectionThreshold?(z("LruGarbageCollector",`Garbage collection skipped; Cache size ${i} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),Ub):this.Xn(e,t))}getCacheSize(e){return this.Jn.getCacheSize(e)}Xn(e,t){let i,r,s,o,c,l,f,g=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(p=>(p>this.params.maximumSequenceNumbersToCollect?(z("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${p}`),r=this.params.maximumSequenceNumbersToCollect):r=p,o=Date.now(),this.nthSequenceNumber(e,r))).next(p=>(i=p,c=Date.now(),this.removeTargets(e,i,t))).next(p=>(s=p,l=Date.now(),this.removeOrphanedDocuments(e,i))).next(p=>(f=Date.now(),Io()<=Ln.DEBUG&&z("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${o-g}ms
	Determined least recently used ${r} in `+(c-o)+`ms
	Removed ${s} targets in `+(l-c)+`ms
	Removed ${p} documents in `+(f-l)+`ms
Total Duration: ${f-g}ms`),R.resolve({didRun:!0,sequenceNumbersCollected:r,targetsRemoved:s,documentsRemoved:p})))}};function c1(n,e){return new Sg(n,e)}var Og=class{constructor(e,t){this.db=e,this.garbageCollector=c1(this,t)}Yn(e){let t=this.er(e);return this.db.getTargetCache().getTargetCount(e).next(i=>t.next(r=>i+r))}er(e){let t=0;return this.Zn(e,i=>{t++}).next(()=>t)}forEachTarget(e,t){return this.db.getTargetCache().forEachTarget(e,t)}Zn(e,t){return this.tr(e,(i,r)=>t(r))}addReference(e,t,i){return Ld(e,i)}removeReference(e,t,i){return Ld(e,i)}removeTargets(e,t,i){return this.db.getTargetCache().removeTargets(e,t,i)}markPotentiallyOrphaned(e,t){return Ld(e,t)}nr(e,t){return function(r,s){let o=!1;return dE(r).Y(c=>uE(r,c,s).next(l=>(l&&(o=!0),R.resolve(!l)))).next(()=>o)}(e,t)}removeOrphanedDocuments(e,t){let i=this.db.getRemoteDocumentCache().newChangeBuffer(),r=[],s=0;return this.tr(e,(o,c)=>{if(c<=t){let l=this.nr(e,o).next(f=>{if(!f)return s++,i.getEntry(e,o).next(()=>(i.removeEntry(o,oe.min()),Ji(e).delete(function(p){return[0,Rt(p.path)]}(o))))});r.push(l)}}).next(()=>R.waitFor(r)).next(()=>i.apply(e)).next(()=>s)}removeTarget(e,t){let i=t.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,i)}updateLimboDocument(e,t){return Ld(e,t)}tr(e,t){let i=Ji(e),r,s=Xt.oe;return i.J({index:"documentTargetsIndex"},([o,c],{path:l,sequenceNumber:f})=>{o===0?(s!==Xt.oe&&t(new Q(zn(r)),s),s=f,r=l):s=Xt.oe}).next(()=>{s!==Xt.oe&&t(new Q(zn(r)),s)})}getCacheSize(e){return this.db.getRemoteDocumentCache().getSize(e)}};function Ld(n,e){return Ji(n).put(function(i,r){return{targetId:0,path:Rt(i.path),sequenceNumber:r}}(e,n.currentSequenceNumber))}var ph=class{constructor(){this.changes=new Qn(e=>e.toString(),(e,t)=>e.isEqual(t)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,lt.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();let i=this.changes.get(t);return i!==void 0?R.resolve(i):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}};var Dg=class{constructor(e){this.serializer=e}setIndexManager(e){this.indexManager=e}addEntry(e,t,i){return Jr(e).put(i)}removeEntry(e,t,i){return Jr(e).delete(function(s,o){let c=s.path.toArray();return[c.slice(0,c.length-2),c[c.length-2],ch(o),c[c.length-1]]}(t,i))}updateMetadata(e,t){return this.getMetadata(e).next(i=>(i.byteSize+=t,this.rr(e,i)))}getEntry(e,t){let i=lt.newInvalidDocument(t);return Jr(e).J({index:"documentKeyIndex",range:IDBKeyRange.only(zc(t))},(r,s)=>{i=this.ir(t,s)}).next(()=>i)}sr(e,t){let i={size:0,document:lt.newInvalidDocument(t)};return Jr(e).J({index:"documentKeyIndex",range:IDBKeyRange.only(zc(t))},(r,s)=>{i={document:this.ir(t,s),size:hh(s)}}).next(()=>i)}getEntries(e,t){let i=zt();return this._r(e,t,(r,s)=>{let o=this.ir(r,s);i=i.insert(r,o)}).next(()=>i)}ar(e,t){let i=zt(),r=new je(Q.comparator);return this._r(e,t,(s,o)=>{let c=this.ir(s,o);i=i.insert(s,c),r=r.insert(s,hh(o))}).next(()=>({documents:i,ur:r}))}_r(e,t,i){if(t.isEmpty())return R.resolve();let r=new ke(Hb);t.forEach(l=>r=r.add(l));let s=IDBKeyRange.bound(zc(r.first()),zc(r.last())),o=r.getIterator(),c=o.getNext();return Jr(e).J({index:"documentKeyIndex",range:s},(l,f,g)=>{let p=Q.fromSegments([...f.prefixPath,f.collectionGroup,f.documentId]);for(;c&&Hb(c,p)<0;)i(c,null),c=o.getNext();c&&c.isEqual(p)&&(i(c,f),c=o.hasNext()?o.getNext():null),c?g.$(zc(c)):g.done()}).next(()=>{for(;c;)i(c,null),c=o.hasNext()?o.getNext():null})}getDocumentsMatchingQuery(e,t,i,r,s){let o=t.path,c=[o.popLast().toArray(),o.lastSegment(),ch(i.readTime),i.documentKey.path.isEmpty()?"":i.documentKey.path.lastSegment()],l=[o.popLast().toArray(),o.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return Jr(e).U(IDBKeyRange.bound(c,l,!0)).next(f=>{s?.incrementDocumentReadCount(f.length);let g=zt();for(let p of f){let w=this.ir(Q.fromSegments(p.prefixPath.concat(p.collectionGroup,p.documentId)),p);w.isFoundDocument()&&(bl(t,w)||r.has(w.key))&&(g=g.insert(w.key,w))}return g})}getAllFromCollectionGroup(e,t,i,r){let s=zt(),o=Gb(t,i),c=Gb(t,ln.max());return Jr(e).J({index:"collectionGroupIndex",range:IDBKeyRange.bound(o,c,!0)},(l,f,g)=>{let p=this.ir(Q.fromSegments(f.prefixPath.concat(f.collectionGroup,f.documentId)),f);s=s.insert(p.key,p),s.size===r&&g.done()}).next(()=>s)}newChangeBuffer(e){return new Rg(this,!!e&&e.trackRemovals)}getSize(e){return this.getMetadata(e).next(t=>t.byteSize)}getMetadata(e){return qb(e).get("remoteDocumentGlobalKey").next(t=>(ee(!!t),t))}rr(e,t){return qb(e).put("remoteDocumentGlobalKey",t)}ir(e,t){if(t){let i=s1(this.serializer,t);if(!(i.isNoDocument()&&i.version.isEqual(oe.min())))return i}return lt.newInvalidDocument(e)}};function hE(n){return new Dg(n)}var Rg=class extends ph{constructor(e,t){super(),this.cr=e,this.trackRemovals=t,this.lr=new Qn(i=>i.toString(),(i,r)=>i.isEqual(r))}applyChanges(e){let t=[],i=0,r=new ke((s,o)=>de(s.canonicalString(),o.canonicalString()));return this.changes.forEach((s,o)=>{let c=this.lr.get(s);if(t.push(this.cr.removeEntry(e,s,c.readTime)),o.isValidDocument()){let l=Ob(this.cr.serializer,o);r=r.add(s.path.popLast());let f=hh(l);i+=f-c.size,t.push(this.cr.addEntry(e,s,l))}else if(i-=c.size,this.trackRemovals){let l=Ob(this.cr.serializer,o.convertToNoDocument(oe.min()));t.push(this.cr.addEntry(e,s,l))}}),r.forEach(s=>{t.push(this.cr.indexManager.addToCollectionParentIndex(e,s))}),t.push(this.cr.updateMetadata(e,i)),R.waitFor(t)}getFromCache(e,t){return this.cr.sr(e,t).next(i=>(this.lr.set(t,{size:i.size,readTime:i.document.readTime}),i.document))}getAllFromCache(e,t){return this.cr.ar(e,t).next(({documents:i,ur:r})=>(r.forEach((s,o)=>{this.lr.set(s,{size:o,readTime:i.get(s).readTime})}),i))}};function qb(n){return mt(n,"remoteDocumentGlobal")}function Jr(n){return mt(n,"remoteDocumentsV14")}function zc(n){let e=n.path.toArray();return[e.slice(0,e.length-2),e[e.length-2],e[e.length-1]]}function Gb(n,e){let t=e.documentKey.path.toArray();return[n,ch(e.readTime),t.slice(0,t.length-2),t.length>0?t[t.length-1]:""]}function Hb(n,e){let t=n.path.toArray(),i=e.path.toArray(),r=0;for(let s=0;s<t.length-2&&s<i.length-2;++s)if(r=de(t[s],i[s]),r)return r;return r=de(t.length,i.length),r||(r=de(t[t.length-2],i[i.length-2]),r||de(t[t.length-1],i[i.length-1]))}var kg=class{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}};var mh=class{constructor(e,t,i,r){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=i,this.indexManager=r}getDocument(e,t){let i=null;return this.documentOverlayCache.getOverlay(e,t).next(r=>(i=r,this.remoteDocumentCache.getEntry(e,t))).next(r=>(i!==null&&Wc(i.mutation,r,Jt.empty(),$e.now()),r))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next(i=>this.getLocalViewOfDocuments(e,i,he()).next(()=>i))}getLocalViewOfDocuments(e,t,i=he()){let r=$n();return this.populateOverlays(e,r,t).next(()=>this.computeViews(e,t,r,i).next(s=>{let o=qc();return s.forEach((c,l)=>{o=o.insert(c,l.overlayedDocument)}),o}))}getOverlayedDocuments(e,t){let i=$n();return this.populateOverlays(e,i,t).next(()=>this.computeViews(e,t,i,he()))}populateOverlays(e,t,i){let r=[];return i.forEach(s=>{t.has(s)||r.push(s)}),this.documentOverlayCache.getOverlays(e,r).next(s=>{s.forEach((o,c)=>{t.set(o,c)})})}computeViews(e,t,i,r){let s=zt(),o=Kc(),c=function(){return Kc()}();return t.forEach((l,f)=>{let g=i.get(f.key);r.has(f.key)&&(g===void 0||g.mutation instanceof In)?s=s.insert(f.key,f):g!==void 0?(o.set(f.key,g.mutation.getFieldMask()),Wc(g.mutation,f,g.mutation.getFieldMask(),$e.now())):o.set(f.key,Jt.empty())}),this.recalculateAndSaveOverlays(e,s).next(l=>(l.forEach((f,g)=>o.set(f,g)),t.forEach((f,g)=>{var p;return c.set(f,new kg(g,(p=o.get(f))!==null&&p!==void 0?p:null))}),c))}recalculateAndSaveOverlays(e,t){let i=Kc(),r=new je((o,c)=>o-c),s=he();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next(o=>{for(let c of o)c.keys().forEach(l=>{let f=t.get(l);if(f===null)return;let g=i.get(l)||Jt.empty();g=c.applyToLocalView(f,g),i.set(l,g);let p=(r.get(c.batchId)||he()).add(l);r=r.insert(c.batchId,p)})}).next(()=>{let o=[],c=r.getReverseIterator();for(;c.hasNext();){let l=c.getNext(),f=l.key,g=l.value,p=VC();g.forEach(w=>{if(!s.has(w)){let I=$C(t.get(w),i.get(w));I!==null&&p.set(w,I),s=s.add(w)}}),o.push(this.documentOverlayCache.saveOverlays(e,f,p))}return R.waitFor(o)}).next(()=>i)}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next(i=>this.recalculateAndSaveOverlays(e,i))}getDocumentsMatchingQuery(e,t,i,r){return function(o){return Q.isDocumentKey(o.path)&&o.collectionGroup===null&&o.filters.length===0}(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):B_(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,i,r):this.getDocumentsMatchingCollectionQuery(e,t,i,r)}getNextDocuments(e,t,i,r){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,i,r).next(s=>{let o=r-s.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,i.largestBatchId,r-s.size):R.resolve($n()),c=-1,l=s;return o.next(f=>R.forEach(f,(g,p)=>(c<p.largestBatchId&&(c=p.largestBatchId),s.get(g)?R.resolve():this.remoteDocumentCache.getEntry(e,g).next(w=>{l=l.insert(g,w)}))).next(()=>this.populateOverlays(e,f,s)).next(()=>this.computeViews(e,l,f,he())).next(g=>({batchId:c,changes:NC(g)})))})}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new Q(t)).next(i=>{let r=qc();return i.isFoundDocument()&&(r=r.insert(i.key,i)),r})}getDocumentsMatchingCollectionGroupQuery(e,t,i,r){let s=t.collectionGroup,o=qc();return this.indexManager.getCollectionParents(e,s).next(c=>R.forEach(c,l=>{let f=function(p,w){return new En(w,null,p.explicitOrderBy.slice(),p.filters.slice(),p.limit,p.limitType,p.startAt,p.endAt)}(t,l.child(s));return this.getDocumentsMatchingCollectionQuery(e,f,i,r).next(g=>{g.forEach((p,w)=>{o=o.insert(p,w)})})}).next(()=>o))}getDocumentsMatchingCollectionQuery(e,t,i,r){let s;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,i.largestBatchId).next(o=>(s=o,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,i,s,r))).next(o=>{s.forEach((l,f)=>{let g=f.getKey();o.get(g)===null&&(o=o.insert(g,lt.newInvalidDocument(g)))});let c=qc();return o.forEach((l,f)=>{let g=s.get(l);g!==void 0&&Wc(g.mutation,f,Jt.empty(),$e.now()),bl(t,f)&&(c=c.insert(l,f))}),c})}};var Ng=class{constructor(e){this.serializer=e,this.hr=new Map,this.Pr=new Map}getBundleMetadata(e,t){return R.resolve(this.hr.get(t))}saveBundleMetadata(e,t){return this.hr.set(t.id,function(r){return{id:r.id,version:r.version,createTime:Xe(r.createTime)}}(t)),R.resolve()}getNamedQuery(e,t){return R.resolve(this.Pr.get(t))}saveNamedQuery(e,t){return this.Pr.set(t.name,function(r){return{name:r.name,query:q_(r.bundledQuery),readTime:Xe(r.readTime)}}(t)),R.resolve()}};var Vg=class{constructor(){this.overlays=new je(Q.comparator),this.Ir=new Map}getOverlay(e,t){return R.resolve(this.overlays.get(t))}getOverlays(e,t){let i=$n();return R.forEach(t,r=>this.getOverlay(e,r).next(s=>{s!==null&&i.set(r,s)})).next(()=>i)}saveOverlays(e,t,i){return i.forEach((r,s)=>{this.ht(e,t,s)}),R.resolve()}removeOverlaysForBatchId(e,t,i){let r=this.Ir.get(i);return r!==void 0&&(r.forEach(s=>this.overlays=this.overlays.remove(s)),this.Ir.delete(i)),R.resolve()}getOverlaysForCollection(e,t,i){let r=$n(),s=t.length+1,o=new Q(t.child("")),c=this.overlays.getIteratorFrom(o);for(;c.hasNext();){let l=c.getNext().value,f=l.getKey();if(!t.isPrefixOf(f.path))break;f.path.length===s&&l.largestBatchId>i&&r.set(l.getKey(),l)}return R.resolve(r)}getOverlaysForCollectionGroup(e,t,i,r){let s=new je((f,g)=>f-g),o=this.overlays.getIterator();for(;o.hasNext();){let f=o.getNext().value;if(f.getKey().getCollectionGroup()===t&&f.largestBatchId>i){let g=s.get(f.largestBatchId);g===null&&(g=$n(),s=s.insert(f.largestBatchId,g)),g.set(f.getKey(),f)}}let c=$n(),l=s.getIterator();for(;l.hasNext()&&(l.getNext().value.forEach((f,g)=>c.set(f,g)),!(c.size()>=r)););return R.resolve(c)}ht(e,t,i){let r=this.overlays.get(i.key);if(r!==null){let o=this.Ir.get(r.largestBatchId).delete(i.key);this.Ir.set(r.largestBatchId,o)}this.overlays=this.overlays.insert(i.key,new sl(t,i));let s=this.Ir.get(t);s===void 0&&(s=he(),this.Ir.set(t,s)),this.Ir.set(t,s.add(i.key))}};var Fg=class{constructor(){this.sessionToken=Je.EMPTY_BYTE_STRING}getSessionToken(e){return R.resolve(this.sessionToken)}setSessionToken(e,t){return this.sessionToken=t,R.resolve()}};var dl=class{constructor(){this.Tr=new ke(at.Er),this.dr=new ke(at.Ar)}isEmpty(){return this.Tr.isEmpty()}addReference(e,t){let i=new at(e,t);this.Tr=this.Tr.add(i),this.dr=this.dr.add(i)}Rr(e,t){e.forEach(i=>this.addReference(i,t))}removeReference(e,t){this.Vr(new at(e,t))}mr(e,t){e.forEach(i=>this.removeReference(i,t))}gr(e){let t=new Q(new we([])),i=new at(t,e),r=new at(t,e+1),s=[];return this.dr.forEachInRange([i,r],o=>{this.Vr(o),s.push(o.key)}),s}pr(){this.Tr.forEach(e=>this.Vr(e))}Vr(e){this.Tr=this.Tr.delete(e),this.dr=this.dr.delete(e)}yr(e){let t=new Q(new we([])),i=new at(t,e),r=new at(t,e+1),s=he();return this.dr.forEachInRange([i,r],o=>{s=s.add(o.key)}),s}containsKey(e){let t=new at(e,0),i=this.Tr.firstAfterOrEqual(t);return i!==null&&e.isEqual(i.key)}},at=class{constructor(e,t){this.key=e,this.wr=t}static Er(e,t){return Q.comparator(e.key,t.key)||de(e.wr,t.wr)}static Ar(e,t){return de(e.wr,t.wr)||Q.comparator(e.key,t.key)}};var Lg=class{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.Sr=1,this.br=new ke(at.Er)}checkEmpty(e){return R.resolve(this.mutationQueue.length===0)}addMutationBatch(e,t,i,r){let s=this.Sr;this.Sr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];let o=new rl(s,t,i,r);this.mutationQueue.push(o);for(let c of r)this.br=this.br.add(new at(c.key,s)),this.indexManager.addToCollectionParentIndex(e,c.key.path.popLast());return R.resolve(o)}lookupMutationBatch(e,t){return R.resolve(this.Dr(t))}getNextMutationBatchAfterBatchId(e,t){let i=t+1,r=this.vr(i),s=r<0?0:r;return R.resolve(this.mutationQueue.length>s?this.mutationQueue[s]:null)}getHighestUnacknowledgedBatchId(){return R.resolve(this.mutationQueue.length===0?-1:this.Sr-1)}getAllMutationBatches(e){return R.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){let i=new at(t,0),r=new at(t,Number.POSITIVE_INFINITY),s=[];return this.br.forEachInRange([i,r],o=>{let c=this.Dr(o.wr);s.push(c)}),R.resolve(s)}getAllMutationBatchesAffectingDocumentKeys(e,t){let i=new ke(de);return t.forEach(r=>{let s=new at(r,0),o=new at(r,Number.POSITIVE_INFINITY);this.br.forEachInRange([s,o],c=>{i=i.add(c.wr)})}),R.resolve(this.Cr(i))}getAllMutationBatchesAffectingQuery(e,t){let i=t.path,r=i.length+1,s=i;Q.isDocumentKey(s)||(s=s.child(""));let o=new at(new Q(s),0),c=new ke(de);return this.br.forEachWhile(l=>{let f=l.key.path;return!!i.isPrefixOf(f)&&(f.length===r&&(c=c.add(l.wr)),!0)},o),R.resolve(this.Cr(c))}Cr(e){let t=[];return e.forEach(i=>{let r=this.Dr(i);r!==null&&t.push(r)}),t}removeMutationBatch(e,t){ee(this.Fr(t.batchId,"removed")===0),this.mutationQueue.shift();let i=this.br;return R.forEach(t.mutations,r=>{let s=new at(r.key,t.batchId);return i=i.delete(s),this.referenceDelegate.markPotentiallyOrphaned(e,r.key)}).next(()=>{this.br=i})}On(e){}containsKey(e,t){let i=new at(t,0),r=this.br.firstAfterOrEqual(i);return R.resolve(t.isEqual(r&&r.key))}performConsistencyCheck(e){return this.mutationQueue.length,R.resolve()}Fr(e,t){return this.vr(e)}vr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Dr(e){let t=this.vr(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}};var jg=class{constructor(e){this.Mr=e,this.docs=function(){return new je(Q.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){let i=t.key,r=this.docs.get(i),s=r?r.size:0,o=this.Mr(t);return this.docs=this.docs.insert(i,{document:t.mutableCopy(),size:o}),this.size+=o-s,this.indexManager.addToCollectionParentIndex(e,i.path.popLast())}removeEntry(e){let t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){let i=this.docs.get(t);return R.resolve(i?i.document.mutableCopy():lt.newInvalidDocument(t))}getEntries(e,t){let i=zt();return t.forEach(r=>{let s=this.docs.get(r);i=i.insert(r,s?s.document.mutableCopy():lt.newInvalidDocument(r))}),R.resolve(i)}getDocumentsMatchingQuery(e,t,i,r){let s=zt(),o=t.path,c=new Q(o.child("")),l=this.docs.getIteratorFrom(c);for(;l.hasNext();){let{key:f,value:{document:g}}=l.getNext();if(!o.isPrefixOf(f.path))break;f.path.length>o.length+1||N_(hC(g),i)<=0||(r.has(g.key)||bl(t,g))&&(s=s.insert(g.key,g.mutableCopy()))}return R.resolve(s)}getAllFromCollectionGroup(e,t,i,r){J()}Or(e,t){return R.forEach(this.docs,i=>t(i))}newChangeBuffer(e){return new Bg(this)}getSize(e){return R.resolve(this.size)}},Bg=class extends ph{constructor(e){super(),this.cr=e}applyChanges(e){let t=[];return this.changes.forEach((i,r)=>{r.isValidDocument()?t.push(this.cr.addEntry(e,r)):this.cr.removeEntry(i)}),R.waitFor(t)}getFromCache(e,t){return this.cr.getEntry(e,t)}getAllFromCache(e,t){return this.cr.getEntries(e,t)}};var Ug=class{constructor(e){this.persistence=e,this.Nr=new Qn(t=>ls(t),vl),this.lastRemoteSnapshotVersion=oe.min(),this.highestTargetId=0,this.Lr=0,this.Br=new dl,this.targetCount=0,this.kr=Uo.Bn()}forEachTarget(e,t){return this.Nr.forEach((i,r)=>t(r)),R.resolve()}getLastRemoteSnapshotVersion(e){return R.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return R.resolve(this.Lr)}allocateTargetId(e){return this.highestTargetId=this.kr.next(),R.resolve(this.highestTargetId)}setTargetsMetadata(e,t,i){return i&&(this.lastRemoteSnapshotVersion=i),t>this.Lr&&(this.Lr=t),R.resolve()}Kn(e){this.Nr.set(e.target,e);let t=e.targetId;t>this.highestTargetId&&(this.kr=new Uo(t),this.highestTargetId=t),e.sequenceNumber>this.Lr&&(this.Lr=e.sequenceNumber)}addTargetData(e,t){return this.Kn(t),this.targetCount+=1,R.resolve()}updateTargetData(e,t){return this.Kn(t),R.resolve()}removeTargetData(e,t){return this.Nr.delete(t.target),this.Br.gr(t.targetId),this.targetCount-=1,R.resolve()}removeTargets(e,t,i){let r=0,s=[];return this.Nr.forEach((o,c)=>{c.sequenceNumber<=t&&i.get(c.targetId)===null&&(this.Nr.delete(o),s.push(this.removeMatchingKeysForTargetId(e,c.targetId)),r++)}),R.waitFor(s).next(()=>r)}getTargetCount(e){return R.resolve(this.targetCount)}getTargetData(e,t){let i=this.Nr.get(t)||null;return R.resolve(i)}addMatchingKeys(e,t,i){return this.Br.Rr(t,i),R.resolve()}removeMatchingKeys(e,t,i){this.Br.mr(t,i);let r=this.persistence.referenceDelegate,s=[];return r&&t.forEach(o=>{s.push(r.markPotentiallyOrphaned(e,o))}),R.waitFor(s)}removeMatchingKeysForTargetId(e,t){return this.Br.gr(t),R.resolve()}getMatchingKeysForTargetId(e,t){let i=this.Br.yr(t);return R.resolve(i)}containsKey(e,t){return R.resolve(this.Br.containsKey(t))}};var gh=class{constructor(e,t){this.qr={},this.overlays={},this.Qr=new Xt(0),this.Kr=!1,this.Kr=!0,this.$r=new Fg,this.referenceDelegate=e(this),this.Ur=new Ug(this),this.indexManager=new Tg,this.remoteDocumentCache=function(r){return new jg(r)}(i=>this.referenceDelegate.Wr(i)),this.serializer=new ah(t),this.Gr=new Ng(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.Kr=!1,Promise.resolve()}get started(){return this.Kr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new Vg,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let i=this.qr[e.toKey()];return i||(i=new Lg(t,this.referenceDelegate),this.qr[e.toKey()]=i),i}getGlobalsCache(){return this.$r}getTargetCache(){return this.Ur}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Gr}runTransaction(e,t,i){z("MemoryPersistence","Starting transaction:",e);let r=new zg(this.Qr.next());return this.referenceDelegate.zr(),i(r).next(s=>this.referenceDelegate.jr(r).next(()=>s)).toPromise().then(s=>(r.raiseOnCommittedEvent(),s))}Hr(e,t){return R.or(Object.values(this.qr).map(i=>()=>i.containsKey(e,t)))}},zg=class extends Qd{constructor(e){super(),this.currentSequenceNumber=e}},_h=class n{constructor(e){this.persistence=e,this.Jr=new dl,this.Yr=null}static Zr(e){return new n(e)}get Xr(){if(this.Yr)return this.Yr;throw J()}addReference(e,t,i){return this.Jr.addReference(i,t),this.Xr.delete(i.toString()),R.resolve()}removeReference(e,t,i){return this.Jr.removeReference(i,t),this.Xr.add(i.toString()),R.resolve()}markPotentiallyOrphaned(e,t){return this.Xr.add(t.toString()),R.resolve()}removeTarget(e,t){this.Jr.gr(t.targetId).forEach(r=>this.Xr.add(r.toString()));let i=this.persistence.getTargetCache();return i.getMatchingKeysForTargetId(e,t.targetId).next(r=>{r.forEach(s=>this.Xr.add(s.toString()))}).next(()=>i.removeTargetData(e,t))}zr(){this.Yr=new Set}jr(e){let t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return R.forEach(this.Xr,i=>{let r=Q.fromPath(i);return this.ei(e,r).next(s=>{s||t.removeEntry(r,oe.min())})}).next(()=>(this.Yr=null,t.apply(e)))}updateLimboDocument(e,t){return this.ei(e,t).next(i=>{i?this.Xr.delete(t.toString()):this.Xr.add(t.toString())})}Wr(e){return 0}ei(e,t){return R.or([()=>R.resolve(this.Jr.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Hr(e,t)])}};var $g=class{constructor(e){this.serializer=e}O(e,t,i,r){let s=new Yd("createOrUpgrade",t);i<1&&r>=1&&(function(l){l.createObjectStore("owner")}(e),function(l){l.createObjectStore("mutationQueues",{keyPath:"userId"}),l.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",cb,{unique:!0}),l.createObjectStore("documentMutations")}(e),Kb(e),function(l){l.createObjectStore("remoteDocuments")}(e));let o=R.resolve();return i<3&&r>=3&&(i!==0&&(function(l){l.deleteObjectStore("targetDocuments"),l.deleteObjectStore("targets"),l.deleteObjectStore("targetGlobal")}(e),Kb(e)),o=o.next(()=>function(l){let f=l.store("targetGlobal"),g={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:oe.min().toTimestamp(),targetCount:0};return f.put("targetGlobalKey",g)}(s))),i<4&&r>=4&&(i!==0&&(o=o.next(()=>function(l,f){return f.store("mutations").U().next(g=>{l.deleteObjectStore("mutations"),l.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",cb,{unique:!0});let p=f.store("mutations"),w=g.map(I=>p.put(I));return R.waitFor(w)})}(e,s))),o=o.next(()=>{(function(l){l.createObjectStore("clientMetadata",{keyPath:"clientId"})})(e)})),i<5&&r>=5&&(o=o.next(()=>this.ni(s))),i<6&&r>=6&&(o=o.next(()=>(function(l){l.createObjectStore("remoteDocumentGlobal")}(e),this.ri(s)))),i<7&&r>=7&&(o=o.next(()=>this.ii(s))),i<8&&r>=8&&(o=o.next(()=>this.si(e,s))),i<9&&r>=9&&(o=o.next(()=>{(function(l){l.objectStoreNames.contains("remoteDocumentChanges")&&l.deleteObjectStore("remoteDocumentChanges")})(e)})),i<10&&r>=10&&(o=o.next(()=>this.oi(s))),i<11&&r>=11&&(o=o.next(()=>{(function(l){l.createObjectStore("bundles",{keyPath:"bundleId"})})(e),function(l){l.createObjectStore("namedQueries",{keyPath:"name"})}(e)})),i<12&&r>=12&&(o=o.next(()=>{(function(l){let f=l.createObjectStore("documentOverlays",{keyPath:TS});f.createIndex("collectionPathOverlayIndex",AS,{unique:!1}),f.createIndex("collectionGroupOverlayIndex",xS,{unique:!1})})(e)})),i<13&&r>=13&&(o=o.next(()=>function(l){let f=l.createObjectStore("remoteDocumentsV14",{keyPath:pS});f.createIndex("documentKeyIndex",mS),f.createIndex("collectionGroupIndex",gS)}(e)).next(()=>this._i(e,s)).next(()=>e.deleteObjectStore("remoteDocuments"))),i<14&&r>=14&&(o=o.next(()=>this.ai(e,s))),i<15&&r>=15&&(o=o.next(()=>function(l){l.createObjectStore("indexConfiguration",{keyPath:"indexId",autoIncrement:!0}).createIndex("collectionGroupIndex","collectionGroup",{unique:!1}),l.createObjectStore("indexState",{keyPath:bS}).createIndex("sequenceNumberIndex",CS,{unique:!1}),l.createObjectStore("indexEntries",{keyPath:ES}).createIndex("documentKeyIndex",IS,{unique:!1})}(e))),i<16&&r>=16&&(o=o.next(()=>{t.objectStore("indexState").clear()}).next(()=>{t.objectStore("indexEntries").clear()})),i<17&&r>=17&&(o=o.next(()=>{(function(l){l.createObjectStore("globals",{keyPath:"name"})})(e)})),o}ri(e){let t=0;return e.store("remoteDocuments").J((i,r)=>{t+=hh(r)}).next(()=>{let i={byteSize:t};return e.store("remoteDocumentGlobal").put("remoteDocumentGlobalKey",i)})}ni(e){let t=e.store("mutationQueues"),i=e.store("mutations");return t.U().next(r=>R.forEach(r,s=>{let o=IDBKeyRange.bound([s.userId,-1],[s.userId,s.lastAcknowledgedBatchId]);return i.U("userMutationsIndex",o).next(c=>R.forEach(c,l=>{ee(l.userId===s.userId);let f=ts(this.serializer,l);return lE(e,s.userId,f).next(()=>{})}))}))}ii(e){let t=e.store("targetDocuments"),i=e.store("remoteDocuments");return e.store("targetGlobal").get("targetGlobalKey").next(r=>{let s=[];return i.J((o,c)=>{let l=new we(o),f=function(p){return[0,Rt(p)]}(l);s.push(t.get(f).next(g=>g?R.resolve():(p=>t.put({targetId:0,path:Rt(p),sequenceNumber:r.highestListenSequenceNumber}))(l)))}).next(()=>R.waitFor(s))})}si(e,t){e.createObjectStore("collectionParents",{keyPath:wS});let i=t.store("collectionParents"),r=new ul,s=o=>{if(r.add(o)){let c=o.lastSegment(),l=o.popLast();return i.put({collectionId:c,parent:Rt(l)})}};return t.store("remoteDocuments").J({H:!0},(o,c)=>{let l=new we(o);return s(l.popLast())}).next(()=>t.store("documentMutations").J({H:!0},([o,c,l],f)=>{let g=zn(c);return s(g.popLast())}))}oi(e){let t=e.store("targets");return t.J((i,r)=>{let s=Gc(r),o=oE(this.serializer,s);return t.put(o)})}_i(e,t){let i=t.store("remoteDocuments"),r=[];return i.J((s,o)=>{let c=t.store("remoteDocumentsV14"),l=function(p){return p.document?new Q(we.fromString(p.document.name).popFirst(5)):p.noDocument?Q.fromSegments(p.noDocument.path):p.unknownDocument?Q.fromSegments(p.unknownDocument.path):J()}(o).path.toArray(),f={prefixPath:l.slice(0,l.length-2),collectionGroup:l[l.length-2],documentId:l[l.length-1],readTime:o.readTime||[0,0],unknownDocument:o.unknownDocument,noDocument:o.noDocument,document:o.document,hasCommittedMutations:!!o.hasCommittedMutations};r.push(c.put(f))}).next(()=>R.waitFor(r))}ai(e,t){let i=t.store("mutations"),r=hE(this.serializer),s=new gh(_h.Zr,this.serializer.ct);return i.U().next(o=>{let c=new Map;return o.forEach(l=>{var f;let g=(f=c.get(l.userId))!==null&&f!==void 0?f:he();ts(this.serializer,l).keys().forEach(p=>g=g.add(p)),c.set(l.userId,g)}),R.forEach(c,(l,f)=>{let g=new ct(f),p=lh.lt(this.serializer,g),w=s.getIndexManager(g),I=fh.lt(g,this.serializer,w,s.referenceDelegate);return new mh(r,I,p,w).recalculateAndSaveOverlaysForDocumentKeys(new Zc(t,Xt.oe),l).next()})})}};function Kb(n){n.createObjectStore("targetDocuments",{keyPath:yS}).createIndex("documentTargetsIndex",vS,{unique:!0}),n.createObjectStore("targets",{keyPath:"targetId"}).createIndex("queryTargetsIndex",_S,{unique:!0}),n.createObjectStore("targetGlobal")}var Om="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.",qg=class n{constructor(e,t,i,r,s,o,c,l,f,g,p=17){if(this.allowTabSynchronization=e,this.persistenceKey=t,this.clientId=i,this.ui=s,this.window=o,this.document=c,this.ci=f,this.li=g,this.hi=p,this.Qr=null,this.Kr=!1,this.isPrimary=!1,this.networkEnabled=!0,this.Pi=null,this.inForeground=!1,this.Ii=null,this.Ti=null,this.Ei=Number.NEGATIVE_INFINITY,this.di=w=>Promise.resolve(),!n.D())throw new B(N.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new Og(this,r),this.Ai=t+"main",this.serializer=new ah(l),this.Ri=new ir(this.Ai,this.hi,new $g(this.serializer)),this.$r=new yg,this.Ur=new xg(this.referenceDelegate,this.serializer),this.remoteDocumentCache=hE(this.serializer),this.Gr=new _g,this.window&&this.window.localStorage?this.Vi=this.window.localStorage:(this.Vi=null,g===!1&&Qe("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.mi().then(()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new B(N.FAILED_PRECONDITION,Om);return this.fi(),this.gi(),this.pi(),this.runTransaction("getHighestListenSequenceNumber","readonly",e=>this.Ur.getHighestSequenceNumber(e))}).then(e=>{this.Qr=new Xt(e,this.ci)}).then(()=>{this.Kr=!0}).catch(e=>(this.Ri&&this.Ri.close(),Promise.reject(e)))}yi(e){return this.di=t=>V(this,null,function*(){if(this.started)return e(t)}),e(this.isPrimary)}setDatabaseDeletedListener(e){this.Ri.L(t=>V(this,null,function*(){t.newVersion===null&&(yield e())}))}setNetworkEnabled(e){this.networkEnabled!==e&&(this.networkEnabled=e,this.ui.enqueueAndForget(()=>V(this,null,function*(){this.started&&(yield this.mi())})))}mi(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",e=>jd(e).put({clientId:this.clientId,updateTimeMs:Date.now(),networkEnabled:this.networkEnabled,inForeground:this.inForeground}).next(()=>{if(this.isPrimary)return this.wi(e).next(t=>{t||(this.isPrimary=!1,this.ui.enqueueRetryable(()=>this.di(!1)))})}).next(()=>this.Si(e)).next(t=>this.isPrimary&&!t?this.bi(e).next(()=>!1):!!t&&this.Di(e).next(()=>!0))).catch(e=>{if(fr(e))return z("IndexedDbPersistence","Failed to extend owner lease: ",e),this.isPrimary;if(!this.allowTabSynchronization)throw e;return z("IndexedDbPersistence","Releasing owner lease after error during lease refresh",e),!1}).then(e=>{this.isPrimary!==e&&this.ui.enqueueRetryable(()=>this.di(e)),this.isPrimary=e})}wi(e){return $c(e).get("owner").next(t=>R.resolve(this.vi(t)))}Ci(e){return jd(e).delete(this.clientId)}Fi(){return V(this,null,function*(){if(this.isPrimary&&!this.Mi(this.Ei,18e5)){this.Ei=Date.now();let e=yield this.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",t=>{let i=mt(t,"clientMetadata");return i.U().next(r=>{let s=this.xi(r,18e5),o=r.filter(c=>s.indexOf(c)===-1);return R.forEach(o,c=>i.delete(c.clientId)).next(()=>o)})}).catch(()=>[]);if(this.Vi)for(let t of e)this.Vi.removeItem(this.Oi(t.clientId))}})}pi(){this.Ti=this.ui.enqueueAfterDelay("client_metadata_refresh",4e3,()=>this.mi().then(()=>this.Fi()).then(()=>this.pi()))}vi(e){return!!e&&e.ownerId===this.clientId}Si(e){return this.li?R.resolve(!0):$c(e).get("owner").next(t=>{if(t!==null&&this.Mi(t.leaseTimestampMs,5e3)&&!this.Ni(t.ownerId)){if(this.vi(t)&&this.networkEnabled)return!0;if(!this.vi(t)){if(!t.allowTabSynchronization)throw new B(N.FAILED_PRECONDITION,Om);return!1}}return!(!this.networkEnabled||!this.inForeground)||jd(e).U().next(i=>this.xi(i,5e3).find(r=>{if(this.clientId!==r.clientId){let s=!this.networkEnabled&&r.networkEnabled,o=!this.inForeground&&r.inForeground,c=this.networkEnabled===r.networkEnabled;if(s||o&&c)return!0}return!1})===void 0)}).next(t=>(this.isPrimary!==t&&z("IndexedDbPersistence",`Client ${t?"is":"is not"} eligible for a primary lease.`),t))}shutdown(){return V(this,null,function*(){this.Kr=!1,this.Li(),this.Ti&&(this.Ti.cancel(),this.Ti=null),this.Bi(),this.ki(),yield this.Ri.runTransaction("shutdown","readwrite",["owner","clientMetadata"],e=>{let t=new Zc(e,Xt.oe);return this.bi(t).next(()=>this.Ci(t))}),this.Ri.close(),this.qi()})}xi(e,t){return e.filter(i=>this.Mi(i.updateTimeMs,t)&&!this.Ni(i.clientId))}Qi(){return this.runTransaction("getActiveClients","readonly",e=>jd(e).U().next(t=>this.xi(t,18e5).map(i=>i.clientId)))}get started(){return this.Kr}getGlobalsCache(){return this.$r}getMutationQueue(e,t){return fh.lt(e,this.serializer,t,this.referenceDelegate)}getTargetCache(){return this.Ur}getRemoteDocumentCache(){return this.remoteDocumentCache}getIndexManager(e){return new Ag(e,this.serializer.ct.databaseId)}getDocumentOverlayCache(e){return lh.lt(this.serializer,e)}getBundleCache(){return this.Gr}runTransaction(e,t,i){z("IndexedDbPersistence","Starting transaction:",e);let r=t==="readonly"?"readonly":"readwrite",s=function(l){return l===17?SS:l===16?MS:l===15?F_:l===14?vC:l===13?yC:l===12?PS:l===11?_C:void J()}(this.hi),o;return this.Ri.runTransaction(e,r,s,c=>(o=new Zc(c,this.Qr?this.Qr.next():Xt.oe),t==="readwrite-primary"?this.wi(o).next(l=>!!l||this.Si(o)).next(l=>{if(!l)throw Qe(`Failed to obtain primary lease for action '${e}'.`),this.isPrimary=!1,this.ui.enqueueRetryable(()=>this.di(!1)),new B(N.FAILED_PRECONDITION,fC);return i(o)}).next(l=>this.Di(o).next(()=>l)):this.Ki(o).next(()=>i(o)))).then(c=>(o.raiseOnCommittedEvent(),c))}Ki(e){return $c(e).get("owner").next(t=>{if(t!==null&&this.Mi(t.leaseTimestampMs,5e3)&&!this.Ni(t.ownerId)&&!this.vi(t)&&!(this.li||this.allowTabSynchronization&&t.allowTabSynchronization))throw new B(N.FAILED_PRECONDITION,Om)})}Di(e){let t={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return $c(e).put("owner",t)}static D(){return ir.D()}bi(e){let t=$c(e);return t.get("owner").next(i=>this.vi(i)?(z("IndexedDbPersistence","Releasing primary lease."),t.delete("owner")):R.resolve())}Mi(e,t){let i=Date.now();return!(e<i-t)&&(!(e>i)||(Qe(`Detected an update time that is in the future: ${e} > ${i}`),!1))}fi(){this.document!==null&&typeof this.document.addEventListener=="function"&&(this.Ii=()=>{this.ui.enqueueAndForget(()=>(this.inForeground=this.document.visibilityState==="visible",this.mi()))},this.document.addEventListener("visibilitychange",this.Ii),this.inForeground=this.document.visibilityState==="visible")}Bi(){this.Ii&&(this.document.removeEventListener("visibilitychange",this.Ii),this.Ii=null)}gi(){var e;typeof((e=this.window)===null||e===void 0?void 0:e.addEventListener)=="function"&&(this.Pi=()=>{this.Li();let t=/(?:Version|Mobile)\/1[456]/;ep()&&(navigator.appVersion.match(t)||navigator.userAgent.match(t))&&this.ui.enterRestrictedMode(!0),this.ui.enqueueAndForget(()=>this.shutdown())},this.window.addEventListener("pagehide",this.Pi))}ki(){this.Pi&&(this.window.removeEventListener("pagehide",this.Pi),this.Pi=null)}Ni(e){var t;try{let i=((t=this.Vi)===null||t===void 0?void 0:t.getItem(this.Oi(e)))!==null;return z("IndexedDbPersistence",`Client '${e}' ${i?"is":"is not"} zombied in LocalStorage`),i}catch(i){return Qe("IndexedDbPersistence","Failed to get zombied client id.",i),!1}}Li(){if(this.Vi)try{this.Vi.setItem(this.Oi(this.clientId),String(Date.now()))}catch(e){Qe("Failed to set zombie client id.",e)}}qi(){if(this.Vi)try{this.Vi.removeItem(this.Oi(this.clientId))}catch{}}Oi(e){return`firestore_zombie_${this.persistenceKey}_${e}`}};function $c(n){return mt(n,"owner")}function jd(n){return mt(n,"clientMetadata")}function H_(n,e){let t=n.projectId;return n.isDefaultDatabase||(t+="."+n.database),"firestore/"+e+"/"+t+"/"}var Gg=class n{constructor(e,t,i,r){this.targetId=e,this.fromCache=t,this.$i=i,this.Ui=r}static Wi(e,t){let i=he(),r=he();for(let s of t.docChanges)switch(s.type){case 0:i=i.add(s.doc.key);break;case 1:r=r.add(s.doc.key)}return new n(e,t.fromCache,i,r)}};var Hg=class{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}};var yh=class{constructor(){this.Gi=!1,this.zi=!1,this.ji=100,this.Hi=function(){return ep()?8:pC(Qa())>0?6:4}()}initialize(e,t){this.Ji=e,this.indexManager=t,this.Gi=!0}getDocumentsMatchingQuery(e,t,i,r){let s={result:null};return this.Yi(e,t).next(o=>{s.result=o}).next(()=>{if(!s.result)return this.Zi(e,t,r,i).next(o=>{s.result=o})}).next(()=>{if(s.result)return;let o=new Hg;return this.Xi(e,t,o).next(c=>{if(s.result=c,this.zi)return this.es(e,t,o,c.size)})}).next(()=>s.result)}es(e,t,i,r){return i.documentReadCount<this.ji?(Io()<=Ln.DEBUG&&z("QueryEngine","SDK will not create cache indexes for query:",To(t),"since it only creates cache indexes for collection contains","more than or equal to",this.ji,"documents"),R.resolve()):(Io()<=Ln.DEBUG&&z("QueryEngine","Query:",To(t),"scans",i.documentReadCount,"local documents and returns",r,"documents as results."),i.documentReadCount>this.Hi*r?(Io()<=Ln.DEBUG&&z("QueryEngine","The SDK decides to create cache indexes for query:",To(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,kt(t))):R.resolve())}Yi(e,t){if(wb(t))return R.resolve(null);let i=kt(t);return this.indexManager.getIndexType(e,i).next(r=>r===0?null:(t.limit!==null&&r===1&&(t=ih(t,null,"F"),i=kt(t)),this.indexManager.getDocumentsMatchingTarget(e,i).next(s=>{let o=he(...s);return this.Ji.getDocuments(e,o).next(c=>this.indexManager.getMinOffset(e,i).next(l=>{let f=this.ts(t,c);return this.ns(t,f,o,l.readTime)?this.Yi(e,ih(t,null,"F")):this.rs(e,f,t,l)}))})))}Zi(e,t,i,r){return wb(t)||r.isEqual(oe.min())?R.resolve(null):this.Ji.getDocuments(e,i).next(s=>{let o=this.ts(t,s);return this.ns(t,o,i,r)?R.resolve(null):(Io()<=Ln.DEBUG&&z("QueryEngine","Re-using previous result from %s to execute query: %s",r.toString(),To(t)),this.rs(e,o,t,dC(r,-1)).next(c=>c))})}ts(e,t){let i=new ke(RC(e));return t.forEach((r,s)=>{bl(e,s)&&(i=i.add(s))}),i}ns(e,t,i,r){if(e.limit===null)return!1;if(i.size!==t.size)return!0;let s=e.limitType==="F"?t.last():t.first();return!!s&&(s.hasPendingWrites||s.version.compareTo(r)>0)}Xi(e,t,i){return Io()<=Ln.DEBUG&&z("QueryEngine","Using full collection scan to execute query:",To(t)),this.Ji.getDocumentsMatchingQuery(e,t,ln.min(),i)}rs(e,t,i,r){return this.Ji.getDocumentsMatchingQuery(e,i,r).next(s=>(t.forEach(o=>{s=s.insert(o.key,o)}),s))}};var Kg=class{constructor(e,t,i,r){this.persistence=e,this.ss=t,this.serializer=r,this.os=new je(de),this._s=new Qn(s=>ls(s),vl),this.us=new Map,this.cs=e.getRemoteDocumentCache(),this.Ur=e.getTargetCache(),this.Gr=e.getBundleCache(),this.ls(i)}ls(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new mh(this.cs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.cs.setIndexManager(this.indexManager),this.ss.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",t=>e.collect(t,this.os))}};function fE(n,e,t,i){return new Kg(n,e,t,i)}function pE(n,e){return V(this,null,function*(){let t=W(n);return yield t.persistence.runTransaction("Handle user change","readonly",i=>{let r;return t.mutationQueue.getAllMutationBatches(i).next(s=>(r=s,t.ls(e),t.mutationQueue.getAllMutationBatches(i))).next(s=>{let o=[],c=[],l=he();for(let f of r){o.push(f.batchId);for(let g of f.mutations)l=l.add(g.key)}for(let f of s){c.push(f.batchId);for(let g of f.mutations)l=l.add(g.key)}return t.localDocuments.getDocuments(i,l).next(f=>({hs:f,removedBatchIds:o,addedBatchIds:c}))})})})}function l1(n,e){let t=W(n);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",i=>{let r=e.batch.keys(),s=t.cs.newChangeBuffer({trackRemovals:!0});return function(c,l,f,g){let p=f.batch,w=p.keys(),I=R.resolve();return w.forEach(L=>{I=I.next(()=>g.getEntry(l,L)).next(O=>{let S=f.docVersions.get(L);ee(S!==null),O.version.compareTo(S)<0&&(p.applyToRemoteDocument(O,f),O.isValidDocument()&&(O.setReadTime(f.commitVersion),g.addEntry(O)))})}),I.next(()=>c.mutationQueue.removeMutationBatch(l,p))}(t,i,e,s).next(()=>s.apply(i)).next(()=>t.mutationQueue.performConsistencyCheck(i)).next(()=>t.documentOverlayCache.removeOverlaysForBatchId(i,r,e.batch.batchId)).next(()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(i,function(c){let l=he();for(let f=0;f<c.mutationResults.length;++f)c.mutationResults[f].transformResults.length>0&&(l=l.add(c.batch.mutations[f].key));return l}(e))).next(()=>t.localDocuments.getDocuments(i,r))})}function mE(n){let e=W(n);return e.persistence.runTransaction("Get last remote snapshot version","readonly",t=>e.Ur.getLastRemoteSnapshotVersion(t))}function u1(n,e){let t=W(n),i=e.snapshotVersion,r=t.os;return t.persistence.runTransaction("Apply remote event","readwrite-primary",s=>{let o=t.cs.newChangeBuffer({trackRemovals:!0});r=t.os;let c=[];e.targetChanges.forEach((g,p)=>{let w=r.get(p);if(!w)return;c.push(t.Ur.removeMatchingKeys(s,g.removedDocuments,p).next(()=>t.Ur.addMatchingKeys(s,g.addedDocuments,p)));let I=w.withSequenceNumber(s.currentSequenceNumber);e.targetMismatches.get(p)!==null?I=I.withResumeToken(Je.EMPTY_BYTE_STRING,oe.min()).withLastLimboFreeSnapshotVersion(oe.min()):g.resumeToken.approximateByteSize()>0&&(I=I.withResumeToken(g.resumeToken,i)),r=r.insert(p,I),function(O,S,H){return O.resumeToken.approximateByteSize()===0||S.snapshotVersion.toMicroseconds()-O.snapshotVersion.toMicroseconds()>=3e8?!0:H.addedDocuments.size+H.modifiedDocuments.size+H.removedDocuments.size>0}(w,I,g)&&c.push(t.Ur.updateTargetData(s,I))});let l=zt(),f=he();if(e.documentUpdates.forEach(g=>{e.resolvedLimboDocuments.has(g)&&c.push(t.persistence.referenceDelegate.updateLimboDocument(s,g))}),c.push(gE(s,o,e.documentUpdates).next(g=>{l=g.Ps,f=g.Is})),!i.isEqual(oe.min())){let g=t.Ur.getLastRemoteSnapshotVersion(s).next(p=>t.Ur.setTargetsMetadata(s,s.currentSequenceNumber,i));c.push(g)}return R.waitFor(c).next(()=>o.apply(s)).next(()=>t.localDocuments.getLocalViewOfDocuments(s,l,f)).next(()=>l)}).then(s=>(t.os=r,s))}function gE(n,e,t){let i=he(),r=he();return t.forEach(s=>i=i.add(s)),e.getEntries(n,i).next(s=>{let o=zt();return t.forEach((c,l)=>{let f=s.get(c);l.isFoundDocument()!==f.isFoundDocument()&&(r=r.add(c)),l.isNoDocument()&&l.version.isEqual(oe.min())?(e.removeEntry(c,l.readTime),o=o.insert(c,l)):!f.isValidDocument()||l.version.compareTo(f.version)>0||l.version.compareTo(f.version)===0&&f.hasPendingWrites?(e.addEntry(l),o=o.insert(c,l)):z("LocalStore","Ignoring outdated watch update for ",c,". Current version:",f.version," Watch version:",l.version)}),{Ps:o,Is:r}})}function d1(n,e){let t=W(n);return t.persistence.runTransaction("Get next mutation batch","readonly",i=>(e===void 0&&(e=-1),t.mutationQueue.getNextMutationBatchAfterBatchId(i,e)))}function zo(n,e){let t=W(n);return t.persistence.runTransaction("Allocate target","readwrite",i=>{let r;return t.Ur.getTargetData(i,e).next(s=>s?(r=s,R.resolve(r)):t.Ur.allocateTargetId(i).next(o=>(r=new Bo(e,o,"TargetPurposeListen",i.currentSequenceNumber),t.Ur.addTargetData(i,r).next(()=>r))))}).then(i=>{let r=t.os.get(i.targetId);return(r===null||i.snapshotVersion.compareTo(r.snapshotVersion)>0)&&(t.os=t.os.insert(i.targetId,i),t._s.set(e,i.targetId)),i})}function $o(n,e,t){return V(this,null,function*(){let i=W(n),r=i.os.get(e),s=t?"readwrite":"readwrite-primary";try{t||(yield i.persistence.runTransaction("Release target",s,o=>i.persistence.referenceDelegate.removeTarget(o,r)))}catch(o){if(!fr(o))throw o;z("LocalStore",`Failed to update sequence numbers for target ${e}: ${o}`)}i.os=i.os.remove(e),i._s.delete(r.target)})}function vh(n,e,t){let i=W(n),r=oe.min(),s=he();return i.persistence.runTransaction("Execute query","readwrite",o=>function(l,f,g){let p=W(l),w=p._s.get(g);return w!==void 0?R.resolve(p.os.get(w)):p.Ur.getTargetData(f,g)}(i,o,kt(e)).next(c=>{if(c)return r=c.lastLimboFreeSnapshotVersion,i.Ur.getMatchingKeysForTargetId(o,c.targetId).next(l=>{s=l})}).next(()=>i.ss.getDocumentsMatchingQuery(o,e,t?r:oe.min(),t?s:he())).next(c=>(vE(i,DC(e),c),{documents:c,Ts:s})))}function _E(n,e){let t=W(n),i=W(t.Ur),r=t.os.get(e);return r?Promise.resolve(r.target):t.persistence.runTransaction("Get target data","readonly",s=>i.ot(s,e).next(o=>o?o.target:null))}function yE(n,e){let t=W(n),i=t.us.get(e)||oe.min();return t.persistence.runTransaction("Get new document changes","readonly",r=>t.cs.getAllFromCollectionGroup(r,e,dC(i,-1),Number.MAX_SAFE_INTEGER)).then(r=>(vE(t,e,r),r))}function vE(n,e,t){let i=n.us.get(e)||oe.min();t.forEach((r,s)=>{s.readTime.compareTo(i)>0&&(i=s.readTime)}),n.us.set(e,i)}function h1(n,e,t,i){return V(this,null,function*(){let r=W(n),s=he(),o=zt();for(let f of t){let g=e.Es(f.metadata.name);f.document&&(s=s.add(g));let p=e.ds(f);p.setReadTime(e.As(f.metadata.readTime)),o=o.insert(g,p)}let c=r.cs.newChangeBuffer({trackRemovals:!0}),l=yield zo(r,function(g){return kt(Xo(we.fromString(`__bundle__/docs/${g}`)))}(i));return r.persistence.runTransaction("Apply bundle documents","readwrite",f=>gE(f,c,o).next(g=>(c.apply(f),g)).next(g=>r.Ur.removeMatchingKeysForTargetId(f,l.targetId).next(()=>r.Ur.addMatchingKeys(f,s,l.targetId)).next(()=>r.localDocuments.getLocalViewOfDocuments(f,g.Ps,g.Is)).next(()=>g.Ps)))})}function f1(i,r){return V(this,arguments,function*(n,e,t=he()){let s=yield zo(n,kt(q_(e.bundledQuery))),o=W(n);return o.persistence.runTransaction("Save named query","readwrite",c=>{let l=Xe(e.readTime);if(s.snapshotVersion.compareTo(l)>=0)return o.Gr.saveNamedQuery(c,e);let f=s.withResumeToken(Je.EMPTY_BYTE_STRING,l);return o.os=o.os.insert(f.targetId,f),o.Ur.updateTargetData(c,f).next(()=>o.Ur.removeMatchingKeysForTargetId(c,s.targetId)).next(()=>o.Ur.addMatchingKeys(c,t,s.targetId)).next(()=>o.Gr.saveNamedQuery(c,e))})})}function Wb(n,e){return`firestore_clients_${n}_${e}`}function Qb(n,e,t){let i=`firestore_mutations_${n}_${t}`;return e.isAuthenticated()&&(i+=`_${e.uid}`),i}function Dm(n,e){return`firestore_targets_${n}_${e}`}var wh=class n{constructor(e,t,i,r){this.user=e,this.batchId=t,this.state=i,this.error=r}static Rs(e,t,i){let r=JSON.parse(i),s,o=typeof r=="object"&&["pending","acknowledged","rejected"].indexOf(r.state)!==-1&&(r.error===void 0||typeof r.error=="object");return o&&r.error&&(o=typeof r.error.message=="string"&&typeof r.error.code=="string",o&&(s=new B(r.error.code,r.error.message))),o?new n(e,t,r.state,s):(Qe("SharedClientState",`Failed to parse mutation state for ID '${t}': ${i}`),null)}Vs(){let e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}},Qc=class n{constructor(e,t,i){this.targetId=e,this.state=t,this.error=i}static Rs(e,t){let i=JSON.parse(t),r,s=typeof i=="object"&&["not-current","current","rejected"].indexOf(i.state)!==-1&&(i.error===void 0||typeof i.error=="object");return s&&i.error&&(s=typeof i.error.message=="string"&&typeof i.error.code=="string",s&&(r=new B(i.error.code,i.error.message))),s?new n(e,i.state,r):(Qe("SharedClientState",`Failed to parse target state for ID '${e}': ${t}`),null)}Vs(){let e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}},bh=class n{constructor(e,t){this.clientId=e,this.activeTargetIds=t}static Rs(e,t){let i=JSON.parse(t),r=typeof i=="object"&&i.activeTargetIds instanceof Array,s=U_();for(let o=0;r&&o<i.activeTargetIds.length;++o)r=mC(i.activeTargetIds[o]),s=s.add(i.activeTargetIds[o]);return r?new n(e,s):(Qe("SharedClientState",`Failed to parse client data for instance '${e}': ${t}`),null)}},Wg=class n{constructor(e,t){this.clientId=e,this.onlineState=t}static Rs(e){let t=JSON.parse(e);return typeof t=="object"&&["Unknown","Online","Offline"].indexOf(t.onlineState)!==-1&&typeof t.clientId=="string"?new n(t.clientId,t.onlineState):(Qe("SharedClientState",`Failed to parse online state: ${e}`),null)}},hl=class{constructor(){this.activeTargetIds=U_()}fs(e){this.activeTargetIds=this.activeTargetIds.add(e)}gs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Vs(){let e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}},Yc=class{constructor(e,t,i,r,s){this.window=e,this.ui=t,this.persistenceKey=i,this.ps=r,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.ys=this.ws.bind(this),this.Ss=new je(de),this.started=!1,this.bs=[];let o=i.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=s,this.Ds=Wb(this.persistenceKey,this.ps),this.vs=function(l){return`firestore_sequence_number_${l}`}(this.persistenceKey),this.Ss=this.Ss.insert(this.ps,new hl),this.Cs=new RegExp(`^firestore_clients_${o}_([^_]*)$`),this.Fs=new RegExp(`^firestore_mutations_${o}_(\\d+)(?:_(.*))?$`),this.Ms=new RegExp(`^firestore_targets_${o}_(\\d+)$`),this.xs=function(l){return`firestore_online_state_${l}`}(this.persistenceKey),this.Os=function(l){return`firestore_bundle_loaded_v2_${l}`}(this.persistenceKey),this.window.addEventListener("storage",this.ys)}static D(e){return!(!e||!e.localStorage)}start(){return V(this,null,function*(){let e=yield this.syncEngine.Qi();for(let i of e){if(i===this.ps)continue;let r=this.getItem(Wb(this.persistenceKey,i));if(r){let s=bh.Rs(i,r);s&&(this.Ss=this.Ss.insert(s.clientId,s))}}this.Ns();let t=this.storage.getItem(this.xs);if(t){let i=this.Ls(t);i&&this.Bs(i)}for(let i of this.bs)this.ws(i);this.bs=[],this.window.addEventListener("pagehide",()=>this.shutdown()),this.started=!0})}writeSequenceNumber(e){this.setItem(this.vs,JSON.stringify(e))}getAllActiveQueryTargets(){return this.ks(this.Ss)}isActiveQueryTarget(e){let t=!1;return this.Ss.forEach((i,r)=>{r.activeTargetIds.has(e)&&(t=!0)}),t}addPendingMutation(e){this.qs(e,"pending")}updateMutationState(e,t,i){this.qs(e,t,i),this.Qs(e)}addLocalQueryTarget(e,t=!0){let i="not-current";if(this.isActiveQueryTarget(e)){let r=this.storage.getItem(Dm(this.persistenceKey,e));if(r){let s=Qc.Rs(e,r);s&&(i=s.state)}}return t&&this.Ks.fs(e),this.Ns(),i}removeLocalQueryTarget(e){this.Ks.gs(e),this.Ns()}isLocalQueryTarget(e){return this.Ks.activeTargetIds.has(e)}clearQueryState(e){this.removeItem(Dm(this.persistenceKey,e))}updateQueryState(e,t,i){this.$s(e,t,i)}handleUserChange(e,t,i){t.forEach(r=>{this.Qs(r)}),this.currentUser=e,i.forEach(r=>{this.addPendingMutation(r)})}setOnlineState(e){this.Us(e)}notifyBundleLoaded(e){this.Ws(e)}shutdown(){this.started&&(this.window.removeEventListener("storage",this.ys),this.removeItem(this.Ds),this.started=!1)}getItem(e){let t=this.storage.getItem(e);return z("SharedClientState","READ",e,t),t}setItem(e,t){z("SharedClientState","SET",e,t),this.storage.setItem(e,t)}removeItem(e){z("SharedClientState","REMOVE",e),this.storage.removeItem(e)}ws(e){let t=e;if(t.storageArea===this.storage){if(z("SharedClientState","EVENT",t.key,t.newValue),t.key===this.Ds)return void Qe("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.ui.enqueueRetryable(()=>V(this,null,function*(){if(this.started){if(t.key!==null){if(this.Cs.test(t.key)){if(t.newValue==null){let i=this.Gs(t.key);return this.zs(i,null)}{let i=this.js(t.key,t.newValue);if(i)return this.zs(i.clientId,i)}}else if(this.Fs.test(t.key)){if(t.newValue!==null){let i=this.Hs(t.key,t.newValue);if(i)return this.Js(i)}}else if(this.Ms.test(t.key)){if(t.newValue!==null){let i=this.Ys(t.key,t.newValue);if(i)return this.Zs(i)}}else if(t.key===this.xs){if(t.newValue!==null){let i=this.Ls(t.newValue);if(i)return this.Bs(i)}}else if(t.key===this.vs){let i=function(s){let o=Xt.oe;if(s!=null)try{let c=JSON.parse(s);ee(typeof c=="number"),o=c}catch(c){Qe("SharedClientState","Failed to read sequence number from WebStorage",c)}return o}(t.newValue);i!==Xt.oe&&this.sequenceNumberHandler(i)}else if(t.key===this.Os){let i=this.Xs(t.newValue);yield Promise.all(i.map(r=>this.syncEngine.eo(r)))}}}else this.bs.push(t)}))}}get Ks(){return this.Ss.get(this.ps)}Ns(){this.setItem(this.Ds,this.Ks.Vs())}qs(e,t,i){let r=new wh(this.currentUser,e,t,i),s=Qb(this.persistenceKey,this.currentUser,e);this.setItem(s,r.Vs())}Qs(e){let t=Qb(this.persistenceKey,this.currentUser,e);this.removeItem(t)}Us(e){let t={clientId:this.ps,onlineState:e};this.storage.setItem(this.xs,JSON.stringify(t))}$s(e,t,i){let r=Dm(this.persistenceKey,e),s=new Qc(e,t,i);this.setItem(r,s.Vs())}Ws(e){let t=JSON.stringify(Array.from(e));this.setItem(this.Os,t)}Gs(e){let t=this.Cs.exec(e);return t?t[1]:null}js(e,t){let i=this.Gs(e);return bh.Rs(i,t)}Hs(e,t){let i=this.Fs.exec(e),r=Number(i[1]),s=i[2]!==void 0?i[2]:null;return wh.Rs(new ct(s),r,t)}Ys(e,t){let i=this.Ms.exec(e),r=Number(i[1]);return Qc.Rs(r,t)}Ls(e){return Wg.Rs(e)}Xs(e){return JSON.parse(e)}Js(e){return V(this,null,function*(){if(e.user.uid===this.currentUser.uid)return this.syncEngine.no(e.batchId,e.state,e.error);z("SharedClientState",`Ignoring mutation for non-active user ${e.user.uid}`)})}Zs(e){return this.syncEngine.ro(e.targetId,e.state,e.error)}zs(e,t){let i=t?this.Ss.insert(e,t):this.Ss.remove(e),r=this.ks(this.Ss),s=this.ks(i),o=[],c=[];return s.forEach(l=>{r.has(l)||o.push(l)}),r.forEach(l=>{s.has(l)||c.push(l)}),this.syncEngine.io(o,c).then(()=>{this.Ss=i})}Bs(e){this.Ss.get(e.clientId)&&this.onlineStateHandler(e.onlineState)}ks(e){let t=U_();return e.forEach((i,r)=>{t=t.unionWith(r.activeTargetIds)}),t}},Ch=class{constructor(){this.so=new hl,this.oo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,i){}addLocalQueryTarget(e,t=!0){return t&&this.so.fs(e),this.oo[e]||"not-current"}updateQueryState(e,t,i){this.oo[e]=t}removeLocalQueryTarget(e){this.so.gs(e)}isLocalQueryTarget(e){return this.so.activeTargetIds.has(e)}clearQueryState(e){delete this.oo[e]}getAllActiveQueryTargets(){return this.so.activeTargetIds}isActiveQueryTarget(e){return this.so.activeTargetIds.has(e)}start(){return this.so=new hl,Promise.resolve()}handleUserChange(e,t,i){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}};var Qg=class{_o(e){}shutdown(){}};var Eh=class{constructor(){this.ao=()=>this.uo(),this.co=()=>this.lo(),this.ho=[],this.Po()}_o(e){this.ho.push(e)}shutdown(){window.removeEventListener("online",this.ao),window.removeEventListener("offline",this.co)}Po(){window.addEventListener("online",this.ao),window.addEventListener("offline",this.co)}uo(){z("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(let e of this.ho)e(0)}lo(){z("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(let e of this.ho)e(1)}static D(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}};var Bd=null;function Rm(){return Bd===null?Bd=function(){return 268435456+Math.round(2147483648*Math.random())}():Bd++,"0x"+Bd.toString(16)}var p1={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};var Yg=class{constructor(e){this.Io=e.Io,this.To=e.To}Eo(e){this.Ao=e}Ro(e){this.Vo=e}mo(e){this.fo=e}onMessage(e){this.po=e}close(){this.To()}send(e){this.Io(e)}yo(){this.Ao()}wo(){this.Vo()}So(e){this.fo(e)}bo(e){this.po(e)}};var Mt="WebChannelConnection",Xg=class extends class{constructor(t){this.databaseInfo=t,this.databaseId=t.databaseId;let i=t.ssl?"https":"http",r=encodeURIComponent(this.databaseId.projectId),s=encodeURIComponent(this.databaseId.database);this.Do=i+"://"+t.host,this.vo=`projects/${r}/databases/${s}`,this.Co=this.databaseId.database==="(default)"?`project_id=${r}`:`project_id=${r}&database_id=${s}`}get Fo(){return!1}Mo(t,i,r,s,o){let c=Rm(),l=this.xo(t,i.toUriEncodedString());z("RestConnection",`Sending RPC '${t}' ${c}:`,l,r);let f={"google-cloud-resource-prefix":this.vo,"x-goog-request-params":this.Co};return this.Oo(f,s,o),this.No(t,l,f,r).then(g=>(z("RestConnection",`Received RPC '${t}' ${c}: `,g),g),g=>{throw Cn("RestConnection",`RPC '${t}' ${c} failed with error: `,g,"url: ",l,"request:",r),g})}Lo(t,i,r,s,o,c){return this.Mo(t,i,r,s,o)}Oo(t,i,r){t["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+Yo}(),t["Content-Type"]="text/plain",this.databaseInfo.appId&&(t["X-Firebase-GMPID"]=this.databaseInfo.appId),i&&i.headers.forEach((s,o)=>t[o]=s),r&&r.headers.forEach((s,o)=>t[o]=s)}xo(t,i){let r=p1[t];return`${this.Do}/v1/${i}:${r}`}terminate(){}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}No(e,t,i,r){let s=Rm();return new Promise((o,c)=>{let l=new Tm;l.setWithCredentials(!0),l.listenOnce(Am.COMPLETE,()=>{try{switch(l.getLastErrorCode()){case jc.NO_ERROR:let g=l.getResponseJson();z(Mt,`XHR for RPC '${e}' ${s} received:`,JSON.stringify(g)),o(g);break;case jc.TIMEOUT:z(Mt,`RPC '${e}' ${s} timed out`),c(new B(N.DEADLINE_EXCEEDED,"Request time out"));break;case jc.HTTP_ERROR:let p=l.getStatus();if(z(Mt,`RPC '${e}' ${s} failed with status:`,p,"response text:",l.getResponseText()),p>0){let w=l.getResponseJson();Array.isArray(w)&&(w=w[0]);let I=w?.error;if(I&&I.status&&I.message){let L=function(S){let H=S.toLowerCase().replace(/_/g,"-");return Object.values(N).indexOf(H)>=0?H:N.UNKNOWN}(I.status);c(new B(L,I.message))}else c(new B(N.UNKNOWN,"Server responded with status "+l.getStatus()))}else c(new B(N.UNAVAILABLE,"Connection failed."));break;default:J()}}finally{z(Mt,`RPC '${e}' ${s} completed.`)}});let f=JSON.stringify(r);z(Mt,`RPC '${e}' ${s} sending request:`,r),l.send(t,"POST",f,i,15)})}Bo(e,t,i){let r=Rm(),s=[this.Do,"/","google.firestore.v1.Firestore","/",e,"/channel"],o=Mm(),c=Pm(),l={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},f=this.longPollingOptions.timeoutSeconds;f!==void 0&&(l.longPollingTimeout=Math.round(1e3*f)),this.useFetchStreams&&(l.useFetchStreams=!0),this.Oo(l.initMessageHeaders,t,i),l.encodeInitMessageHeaders=!0;let g=s.join("");z(Mt,`Creating RPC '${e}' stream ${r}: ${g}`,l);let p=o.createWebChannel(g,l),w=!1,I=!1,L=new Yg({Io:S=>{I?z(Mt,`Not sending because RPC '${e}' stream ${r} is closed:`,S):(w||(z(Mt,`Opening RPC '${e}' stream ${r} transport.`),p.open(),w=!0),z(Mt,`RPC '${e}' stream ${r} sending:`,S),p.send(S))},To:()=>p.close()}),O=(S,H,X)=>{S.listen(H,U=>{try{X(U)}catch(ne){setTimeout(()=>{throw ne},0)}})};return O(p,vo.EventType.OPEN,()=>{I||(z(Mt,`RPC '${e}' stream ${r} transport opened.`),L.yo())}),O(p,vo.EventType.CLOSE,()=>{I||(I=!0,z(Mt,`RPC '${e}' stream ${r} transport closed`),L.So())}),O(p,vo.EventType.ERROR,S=>{I||(I=!0,Cn(Mt,`RPC '${e}' stream ${r} transport errored:`,S),L.So(new B(N.UNAVAILABLE,"The operation could not be completed")))}),O(p,vo.EventType.MESSAGE,S=>{var H;if(!I){let X=S.data[0];ee(!!X);let U=X,ne=U.error||((H=U[0])===null||H===void 0?void 0:H.error);if(ne){z(Mt,`RPC '${e}' stream ${r} received error:`,ne);let re=ne.status,ce=function(C){let A=ot[C];if(A!==void 0)return HC(A)}(re),T=ne.message;ce===void 0&&(ce=N.INTERNAL,T="Unknown error status: "+re+" with message "+ne.message),I=!0,L.So(new B(ce,T)),p.close()}else z(Mt,`RPC '${e}' stream ${r} received:`,X),L.bo(X)}}),O(c,xm.STAT_EVENT,S=>{S.stat===Vd.PROXY?z(Mt,`RPC '${e}' stream ${r} detected buffering proxy`):S.stat===Vd.NOPROXY&&z(Mt,`RPC '${e}' stream ${r} detected no buffering proxy`)}),setTimeout(()=>{L.wo()},0),L}};function wE(){return typeof window<"u"?window:null}function Gd(){return typeof document<"u"?document:null}function Cl(n){return new hg(n,!0)}var fl=class{constructor(e,t,i=1e3,r=1.5,s=6e4){this.ui=e,this.timerId=t,this.ko=i,this.qo=r,this.Qo=s,this.Ko=0,this.$o=null,this.Uo=Date.now(),this.reset()}reset(){this.Ko=0}Wo(){this.Ko=this.Qo}Go(e){this.cancel();let t=Math.floor(this.Ko+this.zo()),i=Math.max(0,Date.now()-this.Uo),r=Math.max(0,t-i);r>0&&z("ExponentialBackoff",`Backing off for ${r} ms (base delay: ${this.Ko} ms, delay with jitter: ${t} ms, last attempt: ${i} ms ago)`),this.$o=this.ui.enqueueAfterDelay(this.timerId,r,()=>(this.Uo=Date.now(),e())),this.Ko*=this.qo,this.Ko<this.ko&&(this.Ko=this.ko),this.Ko>this.Qo&&(this.Ko=this.Qo)}jo(){this.$o!==null&&(this.$o.skipDelay(),this.$o=null)}cancel(){this.$o!==null&&(this.$o.cancel(),this.$o=null)}zo(){return(Math.random()-.5)*this.Ko}};var Ih=class{constructor(e,t,i,r,s,o,c,l){this.ui=e,this.Ho=i,this.Jo=r,this.connection=s,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=c,this.listener=l,this.state=0,this.Yo=0,this.Zo=null,this.Xo=null,this.stream=null,this.e_=0,this.t_=new fl(e,t)}n_(){return this.state===1||this.state===5||this.r_()}r_(){return this.state===2||this.state===3}start(){this.e_=0,this.state!==4?this.auth():this.i_()}stop(){return V(this,null,function*(){this.n_()&&(yield this.close(0))})}s_(){this.state=0,this.t_.reset()}o_(){this.r_()&&this.Zo===null&&(this.Zo=this.ui.enqueueAfterDelay(this.Ho,6e4,()=>this.__()))}a_(e){this.u_(),this.stream.send(e)}__(){return V(this,null,function*(){if(this.r_())return this.close(0)})}u_(){this.Zo&&(this.Zo.cancel(),this.Zo=null)}c_(){this.Xo&&(this.Xo.cancel(),this.Xo=null)}close(e,t){return V(this,null,function*(){this.u_(),this.c_(),this.t_.cancel(),this.Yo++,e!==4?this.t_.reset():t&&t.code===N.RESOURCE_EXHAUSTED?(Qe(t.toString()),Qe("Using maximum backoff delay to prevent overloading the backend."),this.t_.Wo()):t&&t.code===N.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.l_(),this.stream.close(),this.stream=null),this.state=e,yield this.listener.mo(t)})}l_(){}auth(){this.state=1;let e=this.h_(this.Yo),t=this.Yo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([i,r])=>{this.Yo===t&&this.P_(i,r)},i=>{e(()=>{let r=new B(N.UNKNOWN,"Fetching auth token failed: "+i.message);return this.I_(r)})})}P_(e,t){let i=this.h_(this.Yo);this.stream=this.T_(e,t),this.stream.Eo(()=>{i(()=>this.listener.Eo())}),this.stream.Ro(()=>{i(()=>(this.state=2,this.Xo=this.ui.enqueueAfterDelay(this.Jo,1e4,()=>(this.r_()&&(this.state=3),Promise.resolve())),this.listener.Ro()))}),this.stream.mo(r=>{i(()=>this.I_(r))}),this.stream.onMessage(r=>{i(()=>++this.e_==1?this.E_(r):this.onNext(r))})}i_(){this.state=5,this.t_.Go(()=>V(this,null,function*(){this.state=0,this.start()}))}I_(e){return z("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}h_(e){return t=>{this.ui.enqueueAndForget(()=>this.Yo===e?t():(z("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}},Jg=class extends Ih{constructor(e,t,i,r,s,o){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,i,r,o),this.serializer=s}T_(e,t){return this.connection.Bo("Listen",e,t)}E_(e){return this.onNext(e)}onNext(e){this.t_.reset();let t=JS(this.serializer,e),i=function(s){if(!("targetChange"in s))return oe.min();let o=s.targetChange;return o.targetIds&&o.targetIds.length?oe.min():o.readTime?Xe(o.readTime):oe.min()}(e);return this.listener.d_(t,i)}A_(e){let t={};t.database=mg(this.serializer),t.addTarget=function(s,o){let c,l=o.target;if(c=th(l)?{documents:eE(s,l)}:{query:tE(s,l)._t},c.targetId=o.targetId,o.resumeToken.approximateByteSize()>0){c.resumeToken=WC(s,o.resumeToken);let f=fg(s,o.expectedCount);f!==null&&(c.expectedCount=f)}else if(o.snapshotVersion.compareTo(oe.min())>0){c.readTime=jo(s,o.snapshotVersion.toTimestamp());let f=fg(s,o.expectedCount);f!==null&&(c.expectedCount=f)}return c}(this.serializer,e);let i=e1(this.serializer,e);i&&(t.labels=i),this.a_(t)}R_(e){let t={};t.database=mg(this.serializer),t.removeTarget=e,this.a_(t)}},Zg=class extends Ih{constructor(e,t,i,r,s,o){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,i,r,o),this.serializer=s}get V_(){return this.e_>0}start(){this.lastStreamToken=void 0,super.start()}l_(){this.V_&&this.m_([])}T_(e,t){return this.connection.Bo("Write",e,t)}E_(e){return ee(!!e.streamToken),this.lastStreamToken=e.streamToken,ee(!e.writeResults||e.writeResults.length===0),this.listener.f_()}onNext(e){ee(!!e.streamToken),this.lastStreamToken=e.streamToken,this.t_.reset();let t=ZS(e.writeResults,e.commitTime),i=Xe(e.commitTime);return this.listener.g_(i,t)}p_(){let e={};e.database=mg(this.serializer),this.a_(e)}m_(e){let t={streamToken:this.lastStreamToken,writes:e.map(i=>ll(this.serializer,i))};this.a_(t)}};var e_=class extends class{}{constructor(e,t,i,r){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=i,this.serializer=r,this.y_=!1}w_(){if(this.y_)throw new B(N.FAILED_PRECONDITION,"The client has already been terminated.")}Mo(e,t,i,r){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([s,o])=>this.connection.Mo(e,pg(t,i),r,s,o)).catch(s=>{throw s.name==="FirebaseError"?(s.code===N.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),s):new B(N.UNKNOWN,s.toString())})}Lo(e,t,i,r,s){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,c])=>this.connection.Lo(e,pg(t,i),r,o,c,s)).catch(o=>{throw o.name==="FirebaseError"?(o.code===N.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new B(N.UNKNOWN,o.toString())})}terminate(){this.y_=!0,this.connection.terminate()}},t_=class{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.S_=0,this.b_=null,this.D_=!0}v_(){this.S_===0&&(this.C_("Unknown"),this.b_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.b_=null,this.F_("Backend didn't respond within 10 seconds."),this.C_("Offline"),Promise.resolve())))}M_(e){this.state==="Online"?this.C_("Unknown"):(this.S_++,this.S_>=1&&(this.x_(),this.F_(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.C_("Offline")))}set(e){this.x_(),this.S_=0,e==="Online"&&(this.D_=!1),this.C_(e)}C_(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}F_(e){let t=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.D_?(Qe(t),this.D_=!1):z("OnlineStateTracker",t)}x_(){this.b_!==null&&(this.b_.cancel(),this.b_=null)}};var n_=class{constructor(e,t,i,r,s){this.localStore=e,this.datastore=t,this.asyncQueue=i,this.remoteSyncer={},this.O_=[],this.N_=new Map,this.L_=new Set,this.B_=[],this.k_=s,this.k_._o(o=>{i.enqueueAndForget(()=>V(this,null,function*(){pr(this)&&(z("RemoteStore","Restarting streams for network reachability change."),yield function(l){return V(this,null,function*(){let f=W(l);f.L_.add(4),yield Jo(f),f.q_.set("Unknown"),f.L_.delete(4),yield El(f)})}(this))}))}),this.q_=new t_(i,r)}};function El(n){return V(this,null,function*(){if(pr(n))for(let e of n.B_)yield e(!0)})}function Jo(n){return V(this,null,function*(){for(let e of n.B_)yield e(!1)})}function Gh(n,e){let t=W(n);t.N_.has(e.targetId)||(t.N_.set(e.targetId,e),Q_(t)?W_(t):ea(t).r_()&&K_(t,e))}function qo(n,e){let t=W(n),i=ea(t);t.N_.delete(e),i.r_()&&bE(t,e),t.N_.size===0&&(i.r_()?i.o_():pr(t)&&t.q_.set("Unknown"))}function K_(n,e){if(n.Q_.xe(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(oe.min())>0){let t=n.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(t)}ea(n).A_(e)}function bE(n,e){n.Q_.xe(e),ea(n).R_(e)}function W_(n){n.Q_=new dg({getRemoteKeysForTarget:e=>n.remoteSyncer.getRemoteKeysForTarget(e),ot:e=>n.N_.get(e)||null,tt:()=>n.datastore.serializer.databaseId}),ea(n).start(),n.q_.v_()}function Q_(n){return pr(n)&&!ea(n).n_()&&n.N_.size>0}function pr(n){return W(n).L_.size===0}function CE(n){n.Q_=void 0}function m1(n){return V(this,null,function*(){n.q_.set("Online")})}function g1(n){return V(this,null,function*(){n.N_.forEach((e,t)=>{K_(n,e)})})}function _1(n,e){return V(this,null,function*(){CE(n),Q_(n)?(n.q_.M_(e),W_(n)):n.q_.set("Unknown")})}function y1(n,e,t){return V(this,null,function*(){if(n.q_.set("Online"),e instanceof sh&&e.state===2&&e.cause)try{yield function(r,s){return V(this,null,function*(){let o=s.cause;for(let c of s.targetIds)r.N_.has(c)&&(yield r.remoteSyncer.rejectListen(c,o),r.N_.delete(c),r.Q_.removeTarget(c))})}(n,e)}catch(i){z("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),i),yield Th(n,i)}else if(e instanceof Do?n.Q_.Ke(e):e instanceof rh?n.Q_.He(e):n.Q_.We(e),!t.isEqual(oe.min()))try{let i=yield mE(n.localStore);t.compareTo(i)>=0&&(yield function(s,o){let c=s.Q_.rt(o);return c.targetChanges.forEach((l,f)=>{if(l.resumeToken.approximateByteSize()>0){let g=s.N_.get(f);g&&s.N_.set(f,g.withResumeToken(l.resumeToken,o))}}),c.targetMismatches.forEach((l,f)=>{let g=s.N_.get(l);if(!g)return;s.N_.set(l,g.withResumeToken(Je.EMPTY_BYTE_STRING,g.snapshotVersion)),bE(s,l);let p=new Bo(g.target,l,f,g.sequenceNumber);K_(s,p)}),s.remoteSyncer.applyRemoteEvent(c)}(n,t))}catch(i){z("RemoteStore","Failed to raise snapshot:",i),yield Th(n,i)}})}function Th(n,e,t){return V(this,null,function*(){if(!fr(e))throw e;n.L_.add(1),yield Jo(n),n.q_.set("Offline"),t||(t=()=>mE(n.localStore)),n.asyncQueue.enqueueRetryable(()=>V(this,null,function*(){z("RemoteStore","Retrying IndexedDB access"),yield t(),n.L_.delete(1),yield El(n)}))})}function EE(n,e){return e().catch(t=>Th(n,t,e))}function Zo(n){return V(this,null,function*(){let e=W(n),t=dr(e),i=e.O_.length>0?e.O_[e.O_.length-1].batchId:-1;for(;v1(e);)try{let r=yield d1(e.localStore,i);if(r===null){e.O_.length===0&&t.o_();break}i=r.batchId,w1(e,r)}catch(r){yield Th(e,r)}IE(e)&&TE(e)})}function v1(n){return pr(n)&&n.O_.length<10}function w1(n,e){n.O_.push(e);let t=dr(n);t.r_()&&t.V_&&t.m_(e.mutations)}function IE(n){return pr(n)&&!dr(n).n_()&&n.O_.length>0}function TE(n){dr(n).start()}function b1(n){return V(this,null,function*(){dr(n).p_()})}function C1(n){return V(this,null,function*(){let e=dr(n);for(let t of n.O_)e.m_(t.mutations)})}function E1(n,e,t){return V(this,null,function*(){let i=n.O_.shift(),r=cg.from(i,e,t);yield EE(n,()=>n.remoteSyncer.applySuccessfulWrite(r)),yield Zo(n)})}function I1(n,e){return V(this,null,function*(){e&&dr(n).V_&&(yield function(i,r){return V(this,null,function*(){if(function(o){return GC(o)&&o!==N.ABORTED}(r.code)){let s=i.O_.shift();dr(i).s_(),yield EE(i,()=>i.remoteSyncer.rejectFailedWrite(s.batchId,r)),yield Zo(i)}})}(n,e)),IE(n)&&TE(n)})}function Yb(n,e){return V(this,null,function*(){let t=W(n);t.asyncQueue.verifyOperationInProgress(),z("RemoteStore","RemoteStore received new credentials");let i=pr(t);t.L_.add(3),yield Jo(t),i&&t.q_.set("Unknown"),yield t.remoteSyncer.handleCredentialChange(e),t.L_.delete(3),yield El(t)})}function i_(n,e){return V(this,null,function*(){let t=W(n);e?(t.L_.delete(2),yield El(t)):e||(t.L_.add(2),yield Jo(t),t.q_.set("Unknown"))})}function ea(n){return n.K_||(n.K_=function(t,i,r){let s=W(t);return s.w_(),new Jg(i,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,r)}(n.datastore,n.asyncQueue,{Eo:m1.bind(null,n),Ro:g1.bind(null,n),mo:_1.bind(null,n),d_:y1.bind(null,n)}),n.B_.push(e=>V(this,null,function*(){e?(n.K_.s_(),Q_(n)?W_(n):n.q_.set("Unknown")):(yield n.K_.stop(),CE(n))}))),n.K_}function dr(n){return n.U_||(n.U_=function(t,i,r){let s=W(t);return s.w_(),new Zg(i,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,r)}(n.datastore,n.asyncQueue,{Eo:()=>Promise.resolve(),Ro:b1.bind(null,n),mo:I1.bind(null,n),f_:C1.bind(null,n),g_:E1.bind(null,n)}),n.B_.push(e=>V(this,null,function*(){e?(n.U_.s_(),yield Zo(n)):(yield n.U_.stop(),n.O_.length>0&&(z("RemoteStore",`Stopping write stream with ${n.O_.length} pending writes`),n.O_=[]))}))),n.U_}var r_=class n{constructor(e,t,i,r,s){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=i,this.op=r,this.removalCallback=s,this.deferred=new pt,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(o=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,t,i,r,s){let o=Date.now()+i,c=new n(e,t,o,r,s);return c.start(i),c}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new B(N.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}};function ta(n,e){if(Qe("AsyncQueue",`${e}: ${n}`),fr(n))return new B(N.UNAVAILABLE,`${e}: ${n}`);throw n}var Ah=class n{constructor(e){this.comparator=e?(t,i)=>e(t,i)||Q.comparator(t.key,i.key):(t,i)=>Q.comparator(t.key,i.key),this.keyedMap=qc(),this.sortedSet=new je(this.comparator)}static emptySet(e){return new n(e.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){let t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((t,i)=>(e(t),!1))}add(e){let t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){let t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof n)||this.size!==e.size)return!1;let t=this.sortedSet.getIterator(),i=e.sortedSet.getIterator();for(;t.hasNext();){let r=t.getNext().key,s=i.getNext().key;if(!r.isEqual(s))return!1}return!0}toString(){let e=[];return this.forEach(t=>{e.push(t.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,t){let i=new n;return i.comparator=this.comparator,i.keyedMap=e,i.sortedSet=t,i}};var xh=class{constructor(){this.W_=new je(Q.comparator)}track(e){let t=e.doc.key,i=this.W_.get(t);i?e.type!==0&&i.type===3?this.W_=this.W_.insert(t,e):e.type===3&&i.type!==1?this.W_=this.W_.insert(t,{type:i.type,doc:e.doc}):e.type===2&&i.type===2?this.W_=this.W_.insert(t,{type:2,doc:e.doc}):e.type===2&&i.type===0?this.W_=this.W_.insert(t,{type:0,doc:e.doc}):e.type===1&&i.type===0?this.W_=this.W_.remove(t):e.type===1&&i.type===2?this.W_=this.W_.insert(t,{type:1,doc:i.doc}):e.type===0&&i.type===1?this.W_=this.W_.insert(t,{type:2,doc:e.doc}):J():this.W_=this.W_.insert(t,e)}G_(){let e=[];return this.W_.inorderTraversal((t,i)=>{e.push(i)}),e}},Go=class n{constructor(e,t,i,r,s,o,c,l,f){this.query=e,this.docs=t,this.oldDocs=i,this.docChanges=r,this.mutatedKeys=s,this.fromCache=o,this.syncStateChanged=c,this.excludesMetadataChanges=l,this.hasCachedResults=f}static fromInitialDocuments(e,t,i,r,s){let o=[];return t.forEach(c=>{o.push({type:0,doc:c})}),new n(e,t,Ah.emptySet(t),o,i,r,!0,!1,s)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&wl(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;let t=this.docChanges,i=e.docChanges;if(t.length!==i.length)return!1;for(let r=0;r<t.length;r++)if(t[r].type!==i[r].type||!t[r].doc.isEqual(i[r].doc))return!1;return!0}};var s_=class{constructor(){this.z_=void 0,this.j_=[]}H_(){return this.j_.some(e=>e.J_())}},o_=class{constructor(){this.queries=Xb(),this.onlineState="Unknown",this.Y_=new Set}terminate(){(function(t,i){let r=W(t),s=r.queries;r.queries=Xb(),s.forEach((o,c)=>{for(let l of c.j_)l.onError(i)})})(this,new B(N.ABORTED,"Firestore shutting down"))}};function Xb(){return new Qn(n=>OC(n),wl)}function Y_(n,e){return V(this,null,function*(){let t=W(n),i=3,r=e.query,s=t.queries.get(r);s?!s.H_()&&e.J_()&&(i=2):(s=new s_,i=e.J_()?0:1);try{switch(i){case 0:s.z_=yield t.onListen(r,!0);break;case 1:s.z_=yield t.onListen(r,!1);break;case 2:yield t.onFirstRemoteStoreListen(r)}}catch(o){let c=ta(o,`Initialization of query '${To(e.query)}' failed`);return void e.onError(c)}t.queries.set(r,s),s.j_.push(e),e.Z_(t.onlineState),s.z_&&e.X_(s.z_)&&J_(t)})}function X_(n,e){return V(this,null,function*(){let t=W(n),i=e.query,r=3,s=t.queries.get(i);if(s){let o=s.j_.indexOf(e);o>=0&&(s.j_.splice(o,1),s.j_.length===0?r=e.J_()?0:1:!s.H_()&&e.J_()&&(r=2))}switch(r){case 0:return t.queries.delete(i),t.onUnlisten(i,!0);case 1:return t.queries.delete(i),t.onUnlisten(i,!1);case 2:return t.onLastRemoteStoreUnlisten(i);default:return}})}function T1(n,e){let t=W(n),i=!1;for(let r of e){let s=r.query,o=t.queries.get(s);if(o){for(let c of o.j_)c.X_(r)&&(i=!0);o.z_=r}}i&&J_(t)}function A1(n,e,t){let i=W(n),r=i.queries.get(e);if(r)for(let s of r.j_)s.onError(t);i.queries.delete(e)}function J_(n){n.Y_.forEach(e=>{e.next()})}var a_,Jb;(Jb=a_||(a_={})).ea="default",Jb.Cache="cache";var pl=class{constructor(e,t,i){this.query=e,this.ta=t,this.na=!1,this.ra=null,this.onlineState="Unknown",this.options=i||{}}X_(e){if(!this.options.includeMetadataChanges){let i=[];for(let r of e.docChanges)r.type!==3&&i.push(r);e=new Go(e.query,e.docs,e.oldDocs,i,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.na?this.ia(e)&&(this.ta.next(e),t=!0):this.sa(e,this.onlineState)&&(this.oa(e),t=!0),this.ra=e,t}onError(e){this.ta.error(e)}Z_(e){this.onlineState=e;let t=!1;return this.ra&&!this.na&&this.sa(this.ra,e)&&(this.oa(this.ra),t=!0),t}sa(e,t){if(!e.fromCache||!this.J_())return!0;let i=t!=="Offline";return(!this.options._a||!i)&&(!e.docs.isEmpty()||e.hasCachedResults||t==="Offline")}ia(e){if(e.docChanges.length>0)return!0;let t=this.ra&&this.ra.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&this.options.includeMetadataChanges===!0}oa(e){e=Go.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.na=!0,this.ta.next(e)}J_(){return this.options.source!==a_.Cache}};var c_=class{constructor(e,t){this.aa=e,this.byteLength=t}ua(){return"metadata"in this.aa}};var Ph=class{constructor(e){this.serializer=e}Es(e){return Gn(this.serializer,e)}ds(e){return e.metadata.exists?ZC(this.serializer,e.document,!1):lt.newNoDocument(this.Es(e.metadata.name),this.As(e.metadata.readTime))}As(e){return Xe(e)}},l_=class{constructor(e,t,i){this.ca=e,this.localStore=t,this.serializer=i,this.queries=[],this.documents=[],this.collectionGroups=new Set,this.progress=AE(e)}la(e){this.progress.bytesLoaded+=e.byteLength;let t=this.progress.documentsLoaded;if(e.aa.namedQuery)this.queries.push(e.aa.namedQuery);else if(e.aa.documentMetadata){this.documents.push({metadata:e.aa.documentMetadata}),e.aa.documentMetadata.exists||++t;let i=we.fromString(e.aa.documentMetadata.name);this.collectionGroups.add(i.get(i.length-2))}else e.aa.document&&(this.documents[this.documents.length-1].document=e.aa.document,++t);return t!==this.progress.documentsLoaded?(this.progress.documentsLoaded=t,Object.assign({},this.progress)):null}ha(e){let t=new Map,i=new Ph(this.serializer);for(let r of e)if(r.metadata.queries){let s=i.Es(r.metadata.name);for(let o of r.metadata.queries){let c=(t.get(o)||he()).add(s);t.set(o,c)}}return t}complete(){return V(this,null,function*(){let e=yield h1(this.localStore,new Ph(this.serializer),this.documents,this.ca.id),t=this.ha(this.documents);for(let i of this.queries)yield f1(this.localStore,i,t.get(i.name));return this.progress.taskState="Success",{progress:this.progress,Pa:this.collectionGroups,Ia:e}})}};function AE(n){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:n.totalDocuments,totalBytes:n.totalBytes}}var Mh=class{constructor(e){this.key=e}},Sh=class{constructor(e){this.key=e}},Oh=class{constructor(e,t){this.query=e,this.Ta=t,this.Ea=null,this.hasCachedResults=!1,this.current=!1,this.da=he(),this.mutatedKeys=he(),this.Aa=RC(e),this.Ra=new Ah(this.Aa)}get Va(){return this.Ta}ma(e,t){let i=t?t.fa:new xh,r=t?t.Ra:this.Ra,s=t?t.mutatedKeys:this.mutatedKeys,o=r,c=!1,l=this.query.limitType==="F"&&r.size===this.query.limit?r.last():null,f=this.query.limitType==="L"&&r.size===this.query.limit?r.first():null;if(e.inorderTraversal((g,p)=>{let w=r.get(g),I=bl(this.query,p)?p:null,L=!!w&&this.mutatedKeys.has(w.key),O=!!I&&(I.hasLocalMutations||this.mutatedKeys.has(I.key)&&I.hasCommittedMutations),S=!1;w&&I?w.data.isEqual(I.data)?L!==O&&(i.track({type:3,doc:I}),S=!0):this.ga(w,I)||(i.track({type:2,doc:I}),S=!0,(l&&this.Aa(I,l)>0||f&&this.Aa(I,f)<0)&&(c=!0)):!w&&I?(i.track({type:0,doc:I}),S=!0):w&&!I&&(i.track({type:1,doc:w}),S=!0,(l||f)&&(c=!0)),S&&(I?(o=o.add(I),s=O?s.add(g):s.delete(g)):(o=o.delete(g),s=s.delete(g)))}),this.query.limit!==null)for(;o.size>this.query.limit;){let g=this.query.limitType==="F"?o.last():o.first();o=o.delete(g.key),s=s.delete(g.key),i.track({type:1,doc:g})}return{Ra:o,fa:i,ns:c,mutatedKeys:s}}ga(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,i,r){let s=this.Ra;this.Ra=e.Ra,this.mutatedKeys=e.mutatedKeys;let o=e.fa.G_();o.sort((g,p)=>function(I,L){let O=S=>{switch(S){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return J()}};return O(I)-O(L)}(g.type,p.type)||this.Aa(g.doc,p.doc)),this.pa(i),r=r!=null&&r;let c=t&&!r?this.ya():[],l=this.da.size===0&&this.current&&!r?1:0,f=l!==this.Ea;return this.Ea=l,o.length!==0||f?{snapshot:new Go(this.query,e.Ra,s,o,e.mutatedKeys,l===0,f,!1,!!i&&i.resumeToken.approximateByteSize()>0),wa:c}:{wa:c}}Z_(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({Ra:this.Ra,fa:new xh,mutatedKeys:this.mutatedKeys,ns:!1},!1)):{wa:[]}}Sa(e){return!this.Ta.has(e)&&!!this.Ra.has(e)&&!this.Ra.get(e).hasLocalMutations}pa(e){e&&(e.addedDocuments.forEach(t=>this.Ta=this.Ta.add(t)),e.modifiedDocuments.forEach(t=>{}),e.removedDocuments.forEach(t=>this.Ta=this.Ta.delete(t)),this.current=e.current)}ya(){if(!this.current)return[];let e=this.da;this.da=he(),this.Ra.forEach(i=>{this.Sa(i.key)&&(this.da=this.da.add(i.key))});let t=[];return e.forEach(i=>{this.da.has(i)||t.push(new Sh(i))}),this.da.forEach(i=>{e.has(i)||t.push(new Mh(i))}),t}ba(e){this.Ta=e.Ts,this.da=he();let t=this.ma(e.documents);return this.applyChanges(t,!0)}Da(){return Go.fromInitialDocuments(this.query,this.Ra,this.mutatedKeys,this.Ea===0,this.hasCachedResults)}},u_=class{constructor(e,t,i){this.query=e,this.targetId=t,this.view=i}},d_=class{constructor(e){this.key=e,this.va=!1}},h_=class{constructor(e,t,i,r,s,o){this.localStore=e,this.remoteStore=t,this.eventManager=i,this.sharedClientState=r,this.currentUser=s,this.maxConcurrentLimboResolutions=o,this.Ca={},this.Fa=new Qn(c=>OC(c),wl),this.Ma=new Map,this.xa=new Set,this.Oa=new je(Q.comparator),this.Na=new Map,this.La=new dl,this.Ba={},this.ka=new Map,this.qa=Uo.kn(),this.onlineState="Unknown",this.Qa=void 0}get isPrimaryClient(){return this.Qa===!0}};function x1(n,e,t=!0){return V(this,null,function*(){let i=Hh(n),r,s=i.Fa.get(e);return s?(i.sharedClientState.addLocalQueryTarget(s.targetId),r=s.view.Da()):r=yield xE(i,e,t,!0),r})}function P1(n,e){return V(this,null,function*(){let t=Hh(n);yield xE(t,e,!0,!1)})}function xE(n,e,t,i){return V(this,null,function*(){let r=yield zo(n.localStore,kt(e)),s=r.targetId,o=n.sharedClientState.addLocalQueryTarget(s,t),c;return i&&(c=yield Z_(n,e,s,o==="current",r.resumeToken)),n.isPrimaryClient&&t&&Gh(n.remoteStore,r),c})}function Z_(n,e,t,i,r){return V(this,null,function*(){n.Ka=(p,w,I)=>function(O,S,H,X){return V(this,null,function*(){let U=S.view.ma(H);U.ns&&(U=yield vh(O.localStore,S.query,!1).then(({documents:T})=>S.view.ma(T,U)));let ne=X&&X.targetChanges.get(S.targetId),re=X&&X.targetMismatches.get(S.targetId)!=null,ce=S.view.applyChanges(U,O.isPrimaryClient,ne,re);return f_(O,S.targetId,ce.wa),ce.snapshot})}(n,p,w,I);let s=yield vh(n.localStore,e,!0),o=new Oh(e,s.Ts),c=o.ma(s.documents),l=al.createSynthesizedTargetChangeForCurrentChange(t,i&&n.onlineState!=="Offline",r),f=o.applyChanges(c,n.isPrimaryClient,l);f_(n,t,f.wa);let g=new u_(e,t,o);return n.Fa.set(e,g),n.Ma.has(t)?n.Ma.get(t).push(e):n.Ma.set(t,[e]),f.snapshot})}function M1(n,e,t){return V(this,null,function*(){let i=W(n),r=i.Fa.get(e),s=i.Ma.get(r.targetId);if(s.length>1)return i.Ma.set(r.targetId,s.filter(o=>!wl(o,e))),void i.Fa.delete(e);i.isPrimaryClient?(i.sharedClientState.removeLocalQueryTarget(r.targetId),i.sharedClientState.isActiveQueryTarget(r.targetId)||(yield $o(i.localStore,r.targetId,!1).then(()=>{i.sharedClientState.clearQueryState(r.targetId),t&&qo(i.remoteStore,r.targetId),Ho(i,r.targetId)}).catch(hr))):(Ho(i,r.targetId),yield $o(i.localStore,r.targetId,!0))})}function S1(n,e){return V(this,null,function*(){let t=W(n),i=t.Fa.get(e),r=t.Ma.get(i.targetId);t.isPrimaryClient&&r.length===1&&(t.sharedClientState.removeLocalQueryTarget(i.targetId),qo(t.remoteStore,i.targetId))})}function O1(n,e,t){return V(this,null,function*(){let i=iy(n);try{let r=yield function(o,c){let l=W(o),f=$e.now(),g=c.reduce((I,L)=>I.add(L.key),he()),p,w;return l.persistence.runTransaction("Locally write mutations","readwrite",I=>{let L=zt(),O=he();return l.cs.getEntries(I,g).next(S=>{L=S,L.forEach((H,X)=>{X.isValidDocument()||(O=O.add(H))})}).next(()=>l.localDocuments.getOverlayedDocuments(I,L)).next(S=>{p=S;let H=[];for(let X of c){let U=GS(X,p.get(X.key).overlayedDocument);U!=null&&H.push(new In(X.key,U,IC(U.value.mapValue),Ke.exists(!0)))}return l.mutationQueue.addMutationBatch(I,f,H,c)}).next(S=>{w=S;let H=S.applyToLocalDocumentSet(p,O);return l.documentOverlayCache.saveOverlays(I,S.batchId,H)})}).then(()=>({batchId:w.batchId,changes:NC(p)}))}(i.localStore,e);i.sharedClientState.addPendingMutation(r.batchId),function(o,c,l){let f=o.Ba[o.currentUser.toKey()];f||(f=new je(de)),f=f.insert(c,l),o.Ba[o.currentUser.toKey()]=f}(i,r.batchId,t),yield hi(i,r.changes),yield Zo(i.remoteStore)}catch(r){let s=ta(r,"Failed to persist write");t.reject(s)}})}function PE(n,e){return V(this,null,function*(){let t=W(n);try{let i=yield u1(t.localStore,e);e.targetChanges.forEach((r,s)=>{let o=t.Na.get(s);o&&(ee(r.addedDocuments.size+r.modifiedDocuments.size+r.removedDocuments.size<=1),r.addedDocuments.size>0?o.va=!0:r.modifiedDocuments.size>0?ee(o.va):r.removedDocuments.size>0&&(ee(o.va),o.va=!1))}),yield hi(t,i,e)}catch(i){yield hr(i)}})}function Zb(n,e,t){let i=W(n);if(i.isPrimaryClient&&t===0||!i.isPrimaryClient&&t===1){let r=[];i.Fa.forEach((s,o)=>{let c=o.view.Z_(e);c.snapshot&&r.push(c.snapshot)}),function(o,c){let l=W(o);l.onlineState=c;let f=!1;l.queries.forEach((g,p)=>{for(let w of p.j_)w.Z_(c)&&(f=!0)}),f&&J_(l)}(i.eventManager,e),r.length&&i.Ca.d_(r),i.onlineState=e,i.isPrimaryClient&&i.sharedClientState.setOnlineState(e)}}function D1(n,e,t){return V(this,null,function*(){let i=W(n);i.sharedClientState.updateQueryState(e,"rejected",t);let r=i.Na.get(e),s=r&&r.key;if(s){let o=new je(Q.comparator);o=o.insert(s,lt.newNoDocument(s,oe.min()));let c=he().add(s),l=new ol(oe.min(),new Map,new je(de),o,c);yield PE(i,l),i.Oa=i.Oa.remove(s),i.Na.delete(e),ny(i)}else yield $o(i.localStore,e,!1).then(()=>Ho(i,e,t)).catch(hr)})}function R1(n,e){return V(this,null,function*(){let t=W(n),i=e.batch.batchId;try{let r=yield l1(t.localStore,e);ty(t,i,null),ey(t,i),t.sharedClientState.updateMutationState(i,"acknowledged"),yield hi(t,r)}catch(r){yield hr(r)}})}function k1(n,e,t){return V(this,null,function*(){let i=W(n);try{let r=yield function(o,c){let l=W(o);return l.persistence.runTransaction("Reject batch","readwrite-primary",f=>{let g;return l.mutationQueue.lookupMutationBatch(f,c).next(p=>(ee(p!==null),g=p.keys(),l.mutationQueue.removeMutationBatch(f,p))).next(()=>l.mutationQueue.performConsistencyCheck(f)).next(()=>l.documentOverlayCache.removeOverlaysForBatchId(f,g,c)).next(()=>l.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(f,g)).next(()=>l.localDocuments.getDocuments(f,g))})}(i.localStore,e);ty(i,e,t),ey(i,e),i.sharedClientState.updateMutationState(e,"rejected",t),yield hi(i,r)}catch(r){yield hr(r)}})}function N1(n,e){return V(this,null,function*(){let t=W(n);pr(t.remoteStore)||z("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled.");try{let i=yield function(o){let c=W(o);return c.persistence.runTransaction("Get highest unacknowledged batch id","readonly",l=>c.mutationQueue.getHighestUnacknowledgedBatchId(l))}(t.localStore);if(i===-1)return void e.resolve();let r=t.ka.get(i)||[];r.push(e),t.ka.set(i,r)}catch(i){let r=ta(i,"Initialization of waitForPendingWrites() operation failed");e.reject(r)}})}function ey(n,e){(n.ka.get(e)||[]).forEach(t=>{t.resolve()}),n.ka.delete(e)}function ty(n,e,t){let i=W(n),r=i.Ba[i.currentUser.toKey()];if(r){let s=r.get(e);s&&(t?s.reject(t):s.resolve(),r=r.remove(e)),i.Ba[i.currentUser.toKey()]=r}}function Ho(n,e,t=null){n.sharedClientState.removeLocalQueryTarget(e);for(let i of n.Ma.get(e))n.Fa.delete(i),t&&n.Ca.$a(i,t);n.Ma.delete(e),n.isPrimaryClient&&n.La.gr(e).forEach(i=>{n.La.containsKey(i)||ME(n,i)})}function ME(n,e){n.xa.delete(e.path.canonicalString());let t=n.Oa.get(e);t!==null&&(qo(n.remoteStore,t),n.Oa=n.Oa.remove(e),n.Na.delete(t),ny(n))}function f_(n,e,t){for(let i of t)i instanceof Mh?(n.La.addReference(i.key,e),V1(n,i)):i instanceof Sh?(z("SyncEngine","Document no longer in limbo: "+i.key),n.La.removeReference(i.key,e),n.La.containsKey(i.key)||ME(n,i.key)):J()}function V1(n,e){let t=e.key,i=t.path.canonicalString();n.Oa.get(t)||n.xa.has(i)||(z("SyncEngine","New document in limbo: "+t),n.xa.add(i),ny(n))}function ny(n){for(;n.xa.size>0&&n.Oa.size<n.maxConcurrentLimboResolutions;){let e=n.xa.values().next().value;n.xa.delete(e);let t=new Q(we.fromString(e)),i=n.qa.next();n.Na.set(i,new d_(t)),n.Oa=n.Oa.insert(t,i),Gh(n.remoteStore,new Bo(kt(Xo(t.path)),i,"TargetPurposeLimboResolution",Xt.oe))}}function hi(n,e,t){return V(this,null,function*(){let i=W(n),r=[],s=[],o=[];i.Fa.isEmpty()||(i.Fa.forEach((c,l)=>{o.push(i.Ka(l,e,t).then(f=>{var g;if((f||t)&&i.isPrimaryClient){let p=f?!f.fromCache:(g=t?.targetChanges.get(l.targetId))===null||g===void 0?void 0:g.current;i.sharedClientState.updateQueryState(l.targetId,p?"current":"not-current")}if(f){r.push(f);let p=Gg.Wi(l.targetId,f);s.push(p)}}))}),yield Promise.all(o),i.Ca.d_(r),yield function(l,f){return V(this,null,function*(){let g=W(l);try{yield g.persistence.runTransaction("notifyLocalViewChanges","readwrite",p=>R.forEach(f,w=>R.forEach(w.$i,I=>g.persistence.referenceDelegate.addReference(p,w.targetId,I)).next(()=>R.forEach(w.Ui,I=>g.persistence.referenceDelegate.removeReference(p,w.targetId,I)))))}catch(p){if(!fr(p))throw p;z("LocalStore","Failed to update sequence numbers: "+p)}for(let p of f){let w=p.targetId;if(!p.fromCache){let I=g.os.get(w),L=I.snapshotVersion,O=I.withLastLimboFreeSnapshotVersion(L);g.os=g.os.insert(w,O)}}})}(i.localStore,s))})}function F1(n,e){return V(this,null,function*(){let t=W(n);if(!t.currentUser.isEqual(e)){z("SyncEngine","User change. New user:",e.toKey());let i=yield pE(t.localStore,e);t.currentUser=e,function(s,o){s.ka.forEach(c=>{c.forEach(l=>{l.reject(new B(N.CANCELLED,o))})}),s.ka.clear()}(t,"'waitForPendingWrites' promise is rejected due to a user change."),t.sharedClientState.handleUserChange(e,i.removedBatchIds,i.addedBatchIds),yield hi(t,i.hs)}})}function L1(n,e){let t=W(n),i=t.Na.get(e);if(i&&i.va)return he().add(i.key);{let r=he(),s=t.Ma.get(e);if(!s)return r;for(let o of s){let c=t.Fa.get(o);r=r.unionWith(c.view.Va)}return r}}function j1(n,e){return V(this,null,function*(){let t=W(n),i=yield vh(t.localStore,e.query,!0),r=e.view.ba(i);return t.isPrimaryClient&&f_(t,e.targetId,r.wa),r})}function B1(n,e){return V(this,null,function*(){let t=W(n);return yE(t.localStore,e).then(i=>hi(t,i))})}function U1(n,e,t,i){return V(this,null,function*(){let r=W(n),s=yield function(c,l){let f=W(c),g=W(f.mutationQueue);return f.persistence.runTransaction("Lookup mutation documents","readonly",p=>g.Mn(p,l).next(w=>w?f.localDocuments.getDocuments(p,w):R.resolve(null)))}(r.localStore,e);s!==null?(t==="pending"?yield Zo(r.remoteStore):t==="acknowledged"||t==="rejected"?(ty(r,e,i||null),ey(r,e),function(c,l){W(W(c).mutationQueue).On(l)}(r.localStore,e)):J(),yield hi(r,s)):z("SyncEngine","Cannot apply mutation batch with id: "+e)})}function z1(n,e){return V(this,null,function*(){let t=W(n);if(Hh(t),iy(t),e===!0&&t.Qa!==!0){let i=t.sharedClientState.getAllActiveQueryTargets(),r=yield eC(t,i.toArray());t.Qa=!0,yield i_(t.remoteStore,!0);for(let s of r)Gh(t.remoteStore,s)}else if(e===!1&&t.Qa!==!1){let i=[],r=Promise.resolve();t.Ma.forEach((s,o)=>{t.sharedClientState.isLocalQueryTarget(o)?i.push(o):r=r.then(()=>(Ho(t,o),$o(t.localStore,o,!0))),qo(t.remoteStore,o)}),yield r,yield eC(t,i),function(o){let c=W(o);c.Na.forEach((l,f)=>{qo(c.remoteStore,f)}),c.La.pr(),c.Na=new Map,c.Oa=new je(Q.comparator)}(t),t.Qa=!1,yield i_(t.remoteStore,!1)}})}function eC(n,e,t){return V(this,null,function*(){let i=W(n),r=[],s=[];for(let o of e){let c,l=i.Ma.get(o);if(l&&l.length!==0){c=yield zo(i.localStore,kt(l[0]));for(let f of l){let g=i.Fa.get(f),p=yield j1(i,g);p.snapshot&&s.push(p.snapshot)}}else{let f=yield _E(i.localStore,o);c=yield zo(i.localStore,f),yield Z_(i,SE(f),o,!1,c.resumeToken)}r.push(c)}return i.Ca.d_(s),r})}function SE(n){return SC(n.path,n.collectionGroup,n.orderBy,n.filters,n.limit,"F",n.startAt,n.endAt)}function $1(n){return function(t){return W(W(t).persistence).Qi()}(W(n).localStore)}function q1(n,e,t,i){return V(this,null,function*(){let r=W(n);if(r.Qa)return void z("SyncEngine","Ignoring unexpected query state notification.");let s=r.Ma.get(e);if(s&&s.length>0)switch(t){case"current":case"not-current":{let o=yield yE(r.localStore,DC(s[0])),c=ol.createSynthesizedRemoteEventForCurrentChange(e,t==="current",Je.EMPTY_BYTE_STRING);yield hi(r,o,c);break}case"rejected":yield $o(r.localStore,e,!0),Ho(r,e,i);break;default:J()}})}function G1(n,e,t){return V(this,null,function*(){let i=Hh(n);if(i.Qa){for(let r of e){if(i.Ma.has(r)&&i.sharedClientState.isActiveQueryTarget(r)){z("SyncEngine","Adding an already active target "+r);continue}let s=yield _E(i.localStore,r),o=yield zo(i.localStore,s);yield Z_(i,SE(s),o.targetId,!1,o.resumeToken),Gh(i.remoteStore,o)}for(let r of t)i.Ma.has(r)&&(yield $o(i.localStore,r,!1).then(()=>{qo(i.remoteStore,r),Ho(i,r)}).catch(hr))}})}function Hh(n){let e=W(n);return e.remoteStore.remoteSyncer.applyRemoteEvent=PE.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=L1.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=D1.bind(null,e),e.Ca.d_=T1.bind(null,e.eventManager),e.Ca.$a=A1.bind(null,e.eventManager),e}function iy(n){let e=W(n);return e.remoteStore.remoteSyncer.applySuccessfulWrite=R1.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=k1.bind(null,e),e}function H1(n,e,t){let i=W(n);(function(s,o,c){return V(this,null,function*(){try{let l=yield o.getMetadata();if(yield function(I,L){let O=W(I),S=Xe(L.createTime);return O.persistence.runTransaction("hasNewerBundle","readonly",H=>O.Gr.getBundleMetadata(H,L.id)).then(H=>!!H&&H.createTime.compareTo(S)>=0)}(s.localStore,l))return yield o.close(),c._completeWith(function(I){return{taskState:"Success",documentsLoaded:I.totalDocuments,bytesLoaded:I.totalBytes,totalDocuments:I.totalDocuments,totalBytes:I.totalBytes}}(l)),Promise.resolve(new Set);c._updateProgress(AE(l));let f=new l_(l,s.localStore,o.serializer),g=yield o.Ua();for(;g;){let w=yield f.la(g);w&&c._updateProgress(w),g=yield o.Ua()}let p=yield f.complete();return yield hi(s,p.Ia,void 0),yield function(I,L){let O=W(I);return O.persistence.runTransaction("Save bundle","readwrite",S=>O.Gr.saveBundleMetadata(S,L))}(s.localStore,l),c._completeWith(p.progress),Promise.resolve(p.Pa)}catch(l){return Cn("SyncEngine",`Loading bundle failed with ${l}`),c._failWith(l),Promise.resolve(new Set)}})})(i,e,t).then(r=>{i.sharedClientState.notifyBundleLoaded(r)})}var p_=(()=>{class n{constructor(){this.kind="memory",this.synchronizeTabs=!1}initialize(t){return V(this,null,function*(){this.serializer=Cl(t.databaseInfo.databaseId),this.sharedClientState=this.Wa(t),this.persistence=this.Ga(t),yield this.persistence.start(),this.localStore=this.za(t),this.gcScheduler=this.ja(t,this.localStore),this.indexBackfillerScheduler=this.Ha(t,this.localStore)})}ja(t,i){return null}Ha(t,i){return null}za(t){return fE(this.persistence,new yh,t.initialUser,this.serializer)}Ga(t){return new gh(_h.Zr,this.serializer)}Wa(t){return new Ch}terminate(){return V(this,null,function*(){var t,i;(t=this.gcScheduler)===null||t===void 0||t.stop(),(i=this.indexBackfillerScheduler)===null||i===void 0||i.stop(),this.sharedClientState.shutdown(),yield this.persistence.shutdown()})}}return n.provider={build:()=>new n},n})();var Dh=class n extends p_{constructor(e,t,i){super(),this.Ja=e,this.cacheSizeBytes=t,this.forceOwnership=i,this.kind="persistent",this.synchronizeTabs=!1}initialize(e){return V(this,null,function*(){yield Rf(n.prototype,this,"initialize").call(this,e),yield this.Ja.initialize(this,e),yield iy(this.Ja.syncEngine),yield Zo(this.Ja.remoteStore),yield this.persistence.yi(()=>(this.gcScheduler&&!this.gcScheduler.started&&this.gcScheduler.start(),this.indexBackfillerScheduler&&!this.indexBackfillerScheduler.started&&this.indexBackfillerScheduler.start(),Promise.resolve()))})}za(e){return fE(this.persistence,new yh,e.initialUser,this.serializer)}ja(e,t){let i=this.persistence.referenceDelegate.garbageCollector;return new Mg(i,e.asyncQueue,t)}Ha(e,t){let i=new Hm(t,this.persistence);return new Gm(e.asyncQueue,i)}Ga(e){let t=H_(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),i=this.cacheSizeBytes!==void 0?cn.withCacheSize(this.cacheSizeBytes):cn.DEFAULT;return new qg(this.synchronizeTabs,t,e.clientId,i,e.asyncQueue,wE(),Gd(),this.serializer,this.sharedClientState,!!this.forceOwnership)}Wa(e){return new Ch}},m_=class n extends Dh{constructor(e,t){super(e,t,!1),this.Ja=e,this.cacheSizeBytes=t,this.synchronizeTabs=!0}initialize(e){return V(this,null,function*(){yield Rf(n.prototype,this,"initialize").call(this,e);let t=this.Ja.syncEngine;this.sharedClientState instanceof Yc&&(this.sharedClientState.syncEngine={no:U1.bind(null,t),ro:q1.bind(null,t),io:G1.bind(null,t),Qi:$1.bind(null,t),eo:B1.bind(null,t)},yield this.sharedClientState.start()),yield this.persistence.yi(i=>V(this,null,function*(){yield z1(this.Ja.syncEngine,i),this.gcScheduler&&(i&&!this.gcScheduler.started?this.gcScheduler.start():i||this.gcScheduler.stop()),this.indexBackfillerScheduler&&(i&&!this.indexBackfillerScheduler.started?this.indexBackfillerScheduler.start():i||this.indexBackfillerScheduler.stop())}))})}Wa(e){let t=wE();if(!Yc.D(t))throw new B(N.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");let i=H_(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey);return new Yc(t,e.asyncQueue,i,e.clientId,e.initialUser)}},ry=(()=>{class n{initialize(t,i){return V(this,null,function*(){this.localStore||(this.localStore=t.localStore,this.sharedClientState=t.sharedClientState,this.datastore=this.createDatastore(i),this.remoteStore=this.createRemoteStore(i),this.eventManager=this.createEventManager(i),this.syncEngine=this.createSyncEngine(i,!t.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>Zb(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=F1.bind(null,this.syncEngine),yield i_(this.remoteStore,this.syncEngine.isPrimaryClient))})}createEventManager(t){return function(){return new o_}()}createDatastore(t){let i=Cl(t.databaseInfo.databaseId),r=function(o){return new Xg(o)}(t.databaseInfo);return function(o,c,l,f){return new e_(o,c,l,f)}(t.authCredentials,t.appCheckCredentials,r,i)}createRemoteStore(t){return function(r,s,o,c,l){return new n_(r,s,o,c,l)}(this.localStore,this.datastore,t.asyncQueue,i=>Zb(this.syncEngine,i,0),function(){return Eh.D()?new Eh:new Qg}())}createSyncEngine(t,i){return function(s,o,c,l,f,g,p){let w=new h_(s,o,c,l,f,g);return p&&(w.Qa=!0),w}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,t.initialUser,t.maxConcurrentLimboResolutions,i)}terminate(){return V(this,null,function*(){var t,i;yield function(s){return V(this,null,function*(){let o=W(s);z("RemoteStore","RemoteStore shutting down."),o.L_.add(5),yield Jo(o),o.k_.shutdown(),o.q_.set("Unknown")})}(this.remoteStore),(t=this.datastore)===null||t===void 0||t.terminate(),(i=this.eventManager)===null||i===void 0||i.terminate()})}}return n.provider={build:()=>new n},n})();function tC(n,e=10240){let t=0;return{read(){return V(this,null,function*(){if(t<n.byteLength){let r={value:n.slice(t,t+e),done:!1};return t+=e,r}return{done:!0}})},cancel(){return V(this,null,function*(){})},releaseLock(){},closed:Promise.resolve()}}var Ko=class{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ya(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ya(this.observer.error,e):Qe("Uncaught Error in snapshot listener:",e.toString()))}Za(){this.muted=!0}Ya(e,t){setTimeout(()=>{this.muted||e(t)},0)}};var g_=class{constructor(e,t){this.Xa=e,this.serializer=t,this.metadata=new pt,this.buffer=new Uint8Array,this.eu=function(){return new TextDecoder("utf-8")}(),this.tu().then(i=>{i&&i.ua()?this.metadata.resolve(i.aa.metadata):this.metadata.reject(new Error(`The first element of the bundle is not a metadata, it is
             ${JSON.stringify(i?.aa)}`))},i=>this.metadata.reject(i))}close(){return this.Xa.cancel()}getMetadata(){return V(this,null,function*(){return this.metadata.promise})}Ua(){return V(this,null,function*(){return yield this.getMetadata(),this.tu()})}tu(){return V(this,null,function*(){let e=yield this.nu();if(e===null)return null;let t=this.eu.decode(e),i=Number(t);isNaN(i)&&this.ru(`length string (${t}) is not valid number`);let r=yield this.iu(i);return new c_(JSON.parse(r),e.length+i)})}su(){return this.buffer.findIndex(e=>e===123)}nu(){return V(this,null,function*(){for(;this.su()<0&&!(yield this.ou()););if(this.buffer.length===0)return null;let e=this.su();e<0&&this.ru("Reached the end of bundle when a length string is expected.");let t=this.buffer.slice(0,e);return this.buffer=this.buffer.slice(e),t})}iu(e){return V(this,null,function*(){for(;this.buffer.length<e;)(yield this.ou())&&this.ru("Reached the end of bundle when more is expected.");let t=this.eu.decode(this.buffer.slice(0,e));return this.buffer=this.buffer.slice(e),t})}ru(e){throw this.Xa.cancel(),new Error(`Invalid bundle format: ${e}`)}ou(){return V(this,null,function*(){let e=yield this.Xa.read();if(!e.done){let t=new Uint8Array(this.buffer.length+e.value.length);t.set(this.buffer),t.set(e.value,this.buffer.length),this.buffer=t}return e.done})}};var __=class{constructor(e){this.datastore=e,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastTransactionError=null,this.writtenDocs=new Set}lookup(e){return V(this,null,function*(){if(this.ensureCommitNotCalled(),this.mutations.length>0)throw this.lastTransactionError=new B(N.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes."),this.lastTransactionError;let t=yield function(r,s){return V(this,null,function*(){let o=W(r),c={documents:s.map(p=>cl(o.serializer,p))},l=yield o.Lo("BatchGetDocuments",o.serializer.databaseId,we.emptyPath(),c,s.length),f=new Map;l.forEach(p=>{let w=XS(o.serializer,p);f.set(w.key.toString(),w)});let g=[];return s.forEach(p=>{let w=f.get(p.toString());ee(!!w),g.push(w)}),g})}(this.datastore,e);return t.forEach(i=>this.recordVersion(i)),t})}set(e,t){this.write(t.toMutation(e,this.precondition(e))),this.writtenDocs.add(e.toString())}update(e,t){try{this.write(t.toMutation(e,this.preconditionForUpdate(e)))}catch(i){this.lastTransactionError=i}this.writtenDocs.add(e.toString())}delete(e){this.write(new ur(e,this.precondition(e))),this.writtenDocs.add(e.toString())}commit(){return V(this,null,function*(){if(this.ensureCommitNotCalled(),this.lastTransactionError)throw this.lastTransactionError;let e=this.readVersions;this.mutations.forEach(t=>{e.delete(t.key.toString())}),e.forEach((t,i)=>{let r=Q.fromPath(i);this.mutations.push(new il(r,this.precondition(r)))}),yield function(i,r){return V(this,null,function*(){let s=W(i),o={writes:r.map(c=>ll(s.serializer,c))};yield s.Mo("Commit",s.serializer.databaseId,we.emptyPath(),o)})}(this.datastore,this.mutations),this.committed=!0})}recordVersion(e){let t;if(e.isFoundDocument())t=e.version;else{if(!e.isNoDocument())throw J();t=oe.min()}let i=this.readVersions.get(e.key.toString());if(i){if(!t.isEqual(i))throw new B(N.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(e.key.toString(),t)}precondition(e){let t=this.readVersions.get(e.toString());return!this.writtenDocs.has(e.toString())&&t?t.isEqual(oe.min())?Ke.exists(!1):Ke.updateTime(t):Ke.none()}preconditionForUpdate(e){let t=this.readVersions.get(e.toString());if(!this.writtenDocs.has(e.toString())&&t){if(t.isEqual(oe.min()))throw new B(N.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return Ke.updateTime(t)}return Ke.exists(!0)}write(e){this.ensureCommitNotCalled(),this.mutations.push(e)}ensureCommitNotCalled(){}};var y_=class{constructor(e,t,i,r,s){this.asyncQueue=e,this.datastore=t,this.options=i,this.updateFunction=r,this.deferred=s,this._u=i.maxAttempts,this.t_=new fl(this.asyncQueue,"transaction_retry")}au(){this._u-=1,this.uu()}uu(){this.t_.Go(()=>V(this,null,function*(){let e=new __(this.datastore),t=this.cu(e);t&&t.then(i=>{this.asyncQueue.enqueueAndForget(()=>e.commit().then(()=>{this.deferred.resolve(i)}).catch(r=>{this.lu(r)}))}).catch(i=>{this.lu(i)})}))}cu(e){try{let t=this.updateFunction(e);return!yl(t)&&t.catch&&t.then?t:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(t){return this.deferred.reject(t),null}}lu(e){this._u>0&&this.hu(e)?(this._u-=1,this.asyncQueue.enqueueAndForget(()=>(this.uu(),Promise.resolve()))):this.deferred.reject(e)}hu(e){if(e.name==="FirebaseError"){let t=e.code;return t==="aborted"||t==="failed-precondition"||t==="already-exists"||!GC(t)}return!1}};var v_=class{constructor(e,t,i,r,s){this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=i,this.databaseInfo=r,this.user=ct.UNAUTHENTICATED,this.clientId=Kd.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=s,this.authCredentials.start(i,o=>V(this,null,function*(){z("FirestoreClient","Received user=",o.uid),yield this.authCredentialListener(o),this.user=o})),this.appCheckCredentials.start(i,o=>(z("FirestoreClient","Received new app check token=",o),this.appCheckCredentialListener(o,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();let e=new pt;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(()=>V(this,null,function*(){try{this._onlineComponents&&(yield this._onlineComponents.terminate()),this._offlineComponents&&(yield this._offlineComponents.terminate()),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(t){let i=ta(t,"Failed to shutdown persistence");e.reject(i)}})),e.promise}};function km(n,e){return V(this,null,function*(){n.asyncQueue.verifyOperationInProgress(),z("FirestoreClient","Initializing OfflineComponentProvider");let t=n.configuration;yield e.initialize(t);let i=t.initialUser;n.setCredentialChangeListener(r=>V(this,null,function*(){i.isEqual(r)||(yield pE(e.localStore,r),i=r)})),e.persistence.setDatabaseDeletedListener(()=>n.terminate()),n._offlineComponents=e})}function nC(n,e){return V(this,null,function*(){n.asyncQueue.verifyOperationInProgress();let t=yield sy(n);z("FirestoreClient","Initializing OnlineComponentProvider"),yield e.initialize(t,n.configuration),n.setCredentialChangeListener(i=>Yb(e.remoteStore,i)),n.setAppCheckTokenChangeListener((i,r)=>Yb(e.remoteStore,r)),n._onlineComponents=e})}function sy(n){return V(this,null,function*(){if(!n._offlineComponents)if(n._uninitializedComponentsProvider){z("FirestoreClient","Using user provided OfflineComponentProvider");try{yield km(n,n._uninitializedComponentsProvider._offline)}catch(e){let t=e;if(!function(r){return r.name==="FirebaseError"?r.code===N.FAILED_PRECONDITION||r.code===N.UNIMPLEMENTED:!(typeof DOMException<"u"&&r instanceof DOMException)||r.code===22||r.code===20||r.code===11}(t))throw t;Cn("Error using user provided cache. Falling back to memory cache: "+t),yield km(n,new p_)}}else z("FirestoreClient","Using default OfflineComponentProvider"),yield km(n,new p_);return n._offlineComponents})}function Kh(n){return V(this,null,function*(){return n._onlineComponents||(n._uninitializedComponentsProvider?(z("FirestoreClient","Using user provided OnlineComponentProvider"),yield nC(n,n._uninitializedComponentsProvider._online)):(z("FirestoreClient","Using default OnlineComponentProvider"),yield nC(n,new ry))),n._onlineComponents})}function OE(n){return sy(n).then(e=>e.persistence)}function oy(n){return sy(n).then(e=>e.localStore)}function DE(n){return Kh(n).then(e=>e.remoteStore)}function ay(n){return Kh(n).then(e=>e.syncEngine)}function K1(n){return Kh(n).then(e=>e.datastore)}function Wo(n){return V(this,null,function*(){let e=yield Kh(n),t=e.eventManager;return t.onListen=x1.bind(null,e.syncEngine),t.onUnlisten=M1.bind(null,e.syncEngine),t.onFirstRemoteStoreListen=P1.bind(null,e.syncEngine),t.onLastRemoteStoreUnlisten=S1.bind(null,e.syncEngine),t})}function W1(n){return n.asyncQueue.enqueue(()=>V(this,null,function*(){let e=yield OE(n),t=yield DE(n);return e.setNetworkEnabled(!0),function(r){let s=W(r);return s.L_.delete(0),El(s)}(t)}))}function Q1(n){return n.asyncQueue.enqueue(()=>V(this,null,function*(){let e=yield OE(n),t=yield DE(n);return e.setNetworkEnabled(!1),function(r){return V(this,null,function*(){let s=W(r);s.L_.add(0),yield Jo(s),s.q_.set("Offline")})}(t)}))}function Y1(n,e){let t=new pt;return n.asyncQueue.enqueueAndForget(()=>V(this,null,function*(){return function(r,s,o){return V(this,null,function*(){try{let c=yield function(f,g){let p=W(f);return p.persistence.runTransaction("read document","readonly",w=>p.localDocuments.getDocument(w,g))}(r,s);c.isFoundDocument()?o.resolve(c):c.isNoDocument()?o.resolve(null):o.reject(new B(N.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)"))}catch(c){let l=ta(c,`Failed to get document '${s} from cache`);o.reject(l)}})}(yield oy(n),e,t)})),t.promise}function RE(n,e,t={}){let i=new pt;return n.asyncQueue.enqueueAndForget(()=>V(this,null,function*(){return function(s,o,c,l,f){let g=new Ko({next:w=>{g.Za(),o.enqueueAndForget(()=>X_(s,p));let I=w.docs.has(c);!I&&w.fromCache?f.reject(new B(N.UNAVAILABLE,"Failed to get document because the client is offline.")):I&&w.fromCache&&l&&l.source==="server"?f.reject(new B(N.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):f.resolve(w)},error:w=>f.reject(w)}),p=new pl(Xo(c.path),g,{includeMetadataChanges:!0,_a:!0});return Y_(s,p)}(yield Wo(n),n.asyncQueue,e,t,i)})),i.promise}function X1(n,e){let t=new pt;return n.asyncQueue.enqueueAndForget(()=>V(this,null,function*(){return function(r,s,o){return V(this,null,function*(){try{let c=yield vh(r,s,!0),l=new Oh(s,c.Ts),f=l.ma(c.documents),g=l.applyChanges(f,!1);o.resolve(g.snapshot)}catch(c){let l=ta(c,`Failed to execute query '${s} against cache`);o.reject(l)}})}(yield oy(n),e,t)})),t.promise}function kE(n,e,t={}){let i=new pt;return n.asyncQueue.enqueueAndForget(()=>V(this,null,function*(){return function(s,o,c,l,f){let g=new Ko({next:w=>{g.Za(),o.enqueueAndForget(()=>X_(s,p)),w.fromCache&&l.source==="server"?f.reject(new B(N.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):f.resolve(w)},error:w=>f.reject(w)}),p=new pl(c,g,{includeMetadataChanges:!0,_a:!0});return Y_(s,p)}(yield Wo(n),n.asyncQueue,e,t,i)})),i.promise}function J1(n,e){let t=new Ko(e);return n.asyncQueue.enqueueAndForget(()=>V(this,null,function*(){return function(r,s){W(r).Y_.add(s),s.next()}(yield Wo(n),t)})),()=>{t.Za(),n.asyncQueue.enqueueAndForget(()=>V(this,null,function*(){return function(r,s){W(r).Y_.delete(s)}(yield Wo(n),t)}))}}function Z1(n,e,t,i){let r=function(o,c){let l;return l=typeof o=="string"?KC().encode(o):o,function(g,p){return new g_(g,p)}(function(g,p){if(g instanceof Uint8Array)return tC(g,p);if(g instanceof ArrayBuffer)return tC(new Uint8Array(g),p);if(g instanceof ReadableStream)return g.getReader();throw new Error("Source of `toByteStreamReader` has to be a ArrayBuffer or ReadableStream")}(l),c)}(t,Cl(e));n.asyncQueue.enqueueAndForget(()=>V(this,null,function*(){H1(yield ay(n),r,i)}))}function eO(n,e){return n.asyncQueue.enqueue(()=>V(this,null,function*(){return function(i,r){let s=W(i);return s.persistence.runTransaction("Get named query","readonly",o=>s.Gr.getNamedQuery(o,r))}(yield oy(n),e)}))}function NE(n){let e={};return n.timeoutSeconds!==void 0&&(e.timeoutSeconds=n.timeoutSeconds),e}var iC=new Map;function cy(n,e,t){if(!t)throw new B(N.INVALID_ARGUMENT,`Function ${n}() cannot be called with an empty ${e}.`)}function ly(n,e,t,i){if(e===!0&&i===!0)throw new B(N.INVALID_ARGUMENT,`${n} and ${t} cannot be used together.`)}function rC(n){if(!Q.isDocumentKey(n))throw new B(N.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${n} has ${n.length}.`)}function sC(n){if(Q.isDocumentKey(n))throw new B(N.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${n} has ${n.length}.`)}function Wh(n){if(n===void 0)return"undefined";if(n===null)return"null";if(typeof n=="string")return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if(typeof n=="number"||typeof n=="boolean")return""+n;if(typeof n=="object"){if(n instanceof Array)return"an array";{let e=function(i){return i.constructor?i.constructor.name:null}(n);return e?`a custom ${e} object`:"an object"}}return typeof n=="function"?"a function":J()}function Ce(n,e){if("_delegate"in n&&(n=n._delegate),!(n instanceof e)){if(e.name===n.constructor.name)throw new B(N.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{let t=Wh(n);throw new B(N.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return n}function VE(n,e){if(e<=0)throw new B(N.INVALID_ARGUMENT,`Function ${n}() requires a positive number, but it was: ${e}.`)}var Rh=class{constructor(e){var t,i;if(e.host===void 0){if(e.ssl!==void 0)throw new B(N.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=(t=e.ssl)===null||t===void 0||t;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=41943040;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<1048576)throw new B(N.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}ly("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=NE((i=e.experimentalLongPollingOptions)!==null&&i!==void 0?i:{}),function(s){if(s.timeoutSeconds!==void 0){if(isNaN(s.timeoutSeconds))throw new B(N.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (must not be NaN)`);if(s.timeoutSeconds<5)throw new B(N.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (minimum allowed value is 5)`);if(s.timeoutSeconds>30)throw new B(N.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(i,r){return i.timeoutSeconds===r.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}},fs=class{constructor(e,t,i,r){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=i,this._app=r,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new Rh({}),this._settingsFrozen=!1,this._terminateTask="notTerminated"}get app(){if(!this._app)throw new B(N.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new B(N.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new Rh(e),e.credentials!==void 0&&(this._authCredentials=function(i){if(!i)return new Nm;switch(i.type){case"firstParty":return new jm(i.sessionIndex||"0",i.iamToken||null,i.authTokenFactory||null);case"provider":return i.client;default:throw new B(N.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}_restart(){return V(this,null,function*(){this._terminateTask==="notTerminated"?yield this._terminate():this._terminateTask="notTerminated"})}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(t){let i=iC.get(t);i&&(z("ComponentProvider","Removing Datastore"),iC.delete(t),i.terminate())}(this),Promise.resolve()}};function FE(n,e,t,i={}){var r;let s=(n=Ce(n,fs))._getSettings(),o=`${e}:${t}`;if(s.host!=="firestore.googleapis.com"&&s.host!==o&&Cn("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),n._setSettings(Object.assign(Object.assign({},s),{host:o,ssl:!1})),i.mockUserToken){let c,l;if(typeof i.mockUserToken=="string")c=i.mockUserToken,l=ct.MOCK_USER;else{c=zv(i.mockUserToken,(r=n._app)===null||r===void 0?void 0:r.options.projectId);let f=i.mockUserToken.sub||i.mockUserToken.user_id;if(!f)throw new B(N.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");l=new ct(f)}n._authCredentials=new Vm(new Hd(c,l))}}var It=class n{constructor(e,t,i){this.converter=t,this._query=i,this.type="query",this.firestore=e}withConverter(e){return new n(this.firestore,e,this._query)}},Ne=class n{constructor(e,t,i){this.converter=t,this._key=i,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Hn(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new n(this.firestore,e,this._key)}},Hn=class n extends It{constructor(e,t,i){super(e,t,Xo(i)),this._path=i,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){let e=this._path.popLast();return e.isEmpty()?null:new Ne(this.firestore,null,new Q(e))}withConverter(e){return new n(this.firestore,e,this._path)}};function uy(n,e,...t){if(n=ze(n),cy("collection","path",e),n instanceof fs){let i=we.fromString(e,...t);return sC(i),new Hn(n,null,i)}{if(!(n instanceof Ne||n instanceof Hn))throw new B(N.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");let i=n._path.child(we.fromString(e,...t));return sC(i),new Hn(n.firestore,null,i)}}function LE(n,e){if(n=Ce(n,fs),cy("collectionGroup","collection id",e),e.indexOf("/")>=0)throw new B(N.INVALID_ARGUMENT,`Invalid collection ID '${e}' passed to function collectionGroup(). Collection IDs must not contain '/'.`);return new It(n,null,function(i){return new En(we.emptyPath(),i)}(e))}function Il(n,e,...t){if(n=ze(n),arguments.length===1&&(e=Kd.newId()),cy("doc","path",e),n instanceof fs){let i=we.fromString(e,...t);return rC(i),new Ne(n,null,new Q(i))}{if(!(n instanceof Ne||n instanceof Hn))throw new B(N.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");let i=n._path.child(we.fromString(e,...t));return rC(i),new Ne(n.firestore,n instanceof Hn?n.converter:null,new Q(i))}}function dy(n,e){return n=ze(n),e=ze(e),(n instanceof Ne||n instanceof Hn)&&(e instanceof Ne||e instanceof Hn)&&n.firestore===e.firestore&&n.path===e.path&&n.converter===e.converter}function hy(n,e){return n=ze(n),e=ze(e),n instanceof It&&e instanceof It&&n.firestore===e.firestore&&wl(n._query,e._query)&&n.converter===e.converter}var kh=class{constructor(e=Promise.resolve()){this.Pu=[],this.Iu=!1,this.Tu=[],this.Eu=null,this.du=!1,this.Au=!1,this.Ru=[],this.t_=new fl(this,"async_queue_retry"),this.Vu=()=>{let i=Gd();i&&z("AsyncQueue","Visibility state changed to "+i.visibilityState),this.t_.jo()},this.mu=e;let t=Gd();t&&typeof t.addEventListener=="function"&&t.addEventListener("visibilitychange",this.Vu)}get isShuttingDown(){return this.Iu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.fu(),this.gu(e)}enterRestrictedMode(e){if(!this.Iu){this.Iu=!0,this.Au=e||!1;let t=Gd();t&&typeof t.removeEventListener=="function"&&t.removeEventListener("visibilitychange",this.Vu)}}enqueue(e){if(this.fu(),this.Iu)return new Promise(()=>{});let t=new pt;return this.gu(()=>this.Iu&&this.Au?Promise.resolve():(e().then(t.resolve,t.reject),t.promise)).then(()=>t.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Pu.push(e),this.pu()))}pu(){return V(this,null,function*(){if(this.Pu.length!==0){try{yield this.Pu[0](),this.Pu.shift(),this.t_.reset()}catch(e){if(!fr(e))throw e;z("AsyncQueue","Operation failed with retryable error: "+e)}this.Pu.length>0&&this.t_.Go(()=>this.pu())}})}gu(e){let t=this.mu.then(()=>(this.du=!0,e().catch(i=>{this.Eu=i,this.du=!1;let r=function(o){let c=o.message||"";return o.stack&&(c=o.stack.includes(o.message)?o.stack:o.message+`
`+o.stack),c}(i);throw Qe("INTERNAL UNHANDLED ERROR: ",r),i}).then(i=>(this.du=!1,i))));return this.mu=t,t}enqueueAfterDelay(e,t,i){this.fu(),this.Ru.indexOf(e)>-1&&(t=0);let r=r_.createAndSchedule(this,e,t,i,s=>this.yu(s));return this.Tu.push(r),r}fu(){this.Eu&&J()}verifyOperationInProgress(){}wu(){return V(this,null,function*(){let e;do e=this.mu,yield e;while(e!==this.mu)})}Su(e){for(let t of this.Tu)if(t.timerId===e)return!0;return!1}bu(e){return this.wu().then(()=>{this.Tu.sort((t,i)=>t.targetTimeMs-i.targetTimeMs);for(let t of this.Tu)if(t.skipDelay(),e!=="all"&&t.timerId===e)break;return this.wu()})}Du(e){this.Ru.push(e)}yu(e){let t=this.Tu.indexOf(e);this.Tu.splice(t,1)}};function w_(n){return function(t,i){if(typeof t!="object"||t===null)return!1;let r=t;for(let s of i)if(s in r&&typeof r[s]=="function")return!0;return!1}(n,["next","error","complete"])}var b_=class{constructor(){this._progressObserver={},this._taskCompletionResolver=new pt,this._lastProgress={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}onProgress(e,t,i){this._progressObserver={next:e,error:t,complete:i}}catch(e){return this._taskCompletionResolver.promise.catch(e)}then(e,t){return this._taskCompletionResolver.promise.then(e,t)}_completeWith(e){this._updateProgress(e),this._progressObserver.complete&&this._progressObserver.complete(),this._taskCompletionResolver.resolve(e)}_failWith(e){this._lastProgress.taskState="Error",this._progressObserver.next&&this._progressObserver.next(this._lastProgress),this._progressObserver.error&&this._progressObserver.error(e),this._taskCompletionResolver.reject(e)}_updateProgress(e){this._lastProgress=e,this._progressObserver.next&&this._progressObserver.next(e)}};var jE=-1,qe=class extends fs{constructor(e,t,i,r){super(e,t,i,r),this.type="firestore",this._queue=new kh,this._persistenceKey=r?.name||"[DEFAULT]"}_terminate(){return V(this,null,function*(){if(this._firestoreClient){let e=this._firestoreClient.terminate();this._queue=new kh(e),this._firestoreClient=void 0,yield e}})}};function Tt(n){if(n._terminated)throw new B(N.FAILED_PRECONDITION,"The client has already been terminated.");return n._firestoreClient||BE(n),n._firestoreClient}function BE(n){var e,t,i;let r=n._freezeSettings(),s=function(c,l,f,g){return new Km(c,l,f,g.host,g.ssl,g.experimentalForceLongPolling,g.experimentalAutoDetectLongPolling,NE(g.experimentalLongPollingOptions),g.useFetchStreams)}(n._databaseId,((e=n._app)===null||e===void 0?void 0:e.options.appId)||"",n._persistenceKey,r);n._componentsProvider||!((t=r.localCache)===null||t===void 0)&&t._offlineComponentProvider&&(!((i=r.localCache)===null||i===void 0)&&i._onlineComponentProvider)&&(n._componentsProvider={_offline:r.localCache._offlineComponentProvider,_online:r.localCache._onlineComponentProvider}),n._firestoreClient=new v_(n._authCredentials,n._appCheckCredentials,n._queue,s,n._componentsProvider&&function(c){let l=c?._online.build();return{_offline:c?._offline.build(l),_online:l}}(n._componentsProvider))}function UE(n,e){Cn("enableIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");let t=n._freezeSettings();return $E(n,ry.provider,{build:i=>new Dh(i,t.cacheSizeBytes,e?.forceOwnership)}),Promise.resolve()}function zE(n){return V(this,null,function*(){Cn("enableMultiTabIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");let e=n._freezeSettings();$E(n,ry.provider,{build:t=>new m_(t,e.cacheSizeBytes)})})}function $E(n,e,t){if((n=Ce(n,qe))._firestoreClient||n._terminated)throw new B(N.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.");if(n._componentsProvider||n._getSettings().localCache)throw new B(N.FAILED_PRECONDITION,"SDK cache is already specified.");n._componentsProvider={_online:e,_offline:t},BE(n)}function qE(n){if(n._initialized&&!n._terminated)throw new B(N.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");let e=new pt;return n._queue.enqueueAndForgetEvenWhileRestricted(()=>V(this,null,function*(){try{yield function(i){return V(this,null,function*(){if(!ir.D())return Promise.resolve();let r=i+"main";yield ir.delete(r)})}(H_(n._databaseId,n._persistenceKey)),e.resolve()}catch(t){e.reject(t)}})),e.promise}function GE(n){return function(t){let i=new pt;return t.asyncQueue.enqueueAndForget(()=>V(this,null,function*(){return N1(yield ay(t),i)})),i.promise}(Tt(n=Ce(n,qe)))}function HE(n){return W1(Tt(n=Ce(n,qe)))}function KE(n){return Q1(Tt(n=Ce(n,qe)))}function WE(n,e){let t=Tt(n=Ce(n,qe)),i=new b_;return Z1(t,n._databaseId,e,i),i}function QE(n,e){return eO(Tt(n=Ce(n,qe)),e).then(t=>t?new It(n,null,t.query):null)}var Yn=class n{constructor(e){this._byteString=e}static fromBase64String(e){try{return new n(Je.fromBase64String(e))}catch(t){throw new B(N.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new n(Je.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}};var Tn=class{constructor(...e){for(let t=0;t<e.length;++t)if(e[t].length===0)throw new B(N.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Ye(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}};var ui=class{constructor(e){this._methodName=e}};var ps=class{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new B(N.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new B(N.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return de(this._lat,e._lat)||de(this._long,e._long)}};var ml=class{constructor(e){this._values=(e||[]).map(t=>t)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(i,r){if(i.length!==r.length)return!1;for(let s=0;s<i.length;++s)if(i[s]!==r[s])return!1;return!0}(this._values,e._values)}};var tO=/^__.*__$/,C_=class{constructor(e,t,i){this.data=e,this.fieldMask=t,this.fieldTransforms=i}toMutation(e,t){return this.fieldMask!==null?new In(e,this.data,this.fieldMask,t,this.fieldTransforms):new lr(e,this.data,t,this.fieldTransforms)}},Nh=class{constructor(e,t,i){this.data=e,this.fieldMask=t,this.fieldTransforms=i}toMutation(e,t){return new In(e,this.data,this.fieldMask,t,this.fieldTransforms)}};function YE(n){switch(n){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw J()}}var Vh=class n{constructor(e,t,i,r,s,o){this.settings=e,this.databaseId=t,this.serializer=i,this.ignoreUndefinedProperties=r,s===void 0&&this.vu(),this.fieldTransforms=s||[],this.fieldMask=o||[]}get path(){return this.settings.path}get Cu(){return this.settings.Cu}Fu(e){return new n(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Mu(e){var t;let i=(t=this.path)===null||t===void 0?void 0:t.child(e),r=this.Fu({path:i,xu:!1});return r.Ou(e),r}Nu(e){var t;let i=(t=this.path)===null||t===void 0?void 0:t.child(e),r=this.Fu({path:i,xu:!1});return r.vu(),r}Lu(e){return this.Fu({path:void 0,xu:!0})}Bu(e){return Fh(e,this.settings.methodName,this.settings.ku||!1,this.path,this.settings.qu)}contains(e){return this.fieldMask.find(t=>e.isPrefixOf(t))!==void 0||this.fieldTransforms.find(t=>e.isPrefixOf(t.field))!==void 0}vu(){if(this.path)for(let e=0;e<this.path.length;e++)this.Ou(this.path.get(e))}Ou(e){if(e.length===0)throw this.Bu("Document fields must not be empty");if(YE(this.Cu)&&tO.test(e))throw this.Bu('Document fields cannot begin and end with "__"')}},E_=class{constructor(e,t,i){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=i||Cl(e)}Qu(e,t,i,r=!1){return new Vh({Cu:e,methodName:t,qu:i,path:Ye.emptyPath(),xu:!1,ku:r},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}};function ys(n){let e=n._freezeSettings(),t=Cl(n._databaseId);return new E_(n._databaseId,!!e.ignoreUndefinedProperties,t)}function Qh(n,e,t,i,r,s={}){let o=n.Qu(s.merge||s.mergeFields?2:0,e,t,r);my("Data must be an object, but it was:",o,i);let c=ZE(i,o),l,f;if(s.merge)l=new Jt(o.fieldMask),f=o.fieldTransforms;else if(s.mergeFields){let g=[];for(let p of s.mergeFields){let w=P_(e,p,t);if(!o.contains(w))throw new B(N.INVALID_ARGUMENT,`Field '${w}' is specified in your field mask but missing from your input data.`);tI(g,w)||g.push(w)}l=new Jt(g),f=o.fieldTransforms.filter(p=>l.covers(p.field))}else l=null,f=o.fieldTransforms;return new C_(new St(c),l,f)}var gl=class n extends ui{_toFieldTransform(e){if(e.Cu!==2)throw e.Cu===1?e.Bu(`${this._methodName}() can only appear at the top level of your update data`):e.Bu(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof n}};function XE(n,e,t){return new Vh({Cu:3,qu:e.settings.qu,methodName:n._methodName,xu:t},e.databaseId,e.serializer,e.ignoreUndefinedProperties)}var I_=class n extends ui{_toFieldTransform(e){return new us(e.path,new ar)}isEqual(e){return e instanceof n}},T_=class n extends ui{constructor(e,t){super(e),this.Ku=t}_toFieldTransform(e){let t=XE(this,e,!0),i=this.Ku.map(s=>vs(s,t)),r=new ci(i);return new us(e.path,r)}isEqual(e){return e instanceof n&&tp(this.Ku,e.Ku)}},A_=class n extends ui{constructor(e,t){super(e),this.Ku=t}_toFieldTransform(e){let t=XE(this,e,!0),i=this.Ku.map(s=>vs(s,t)),r=new li(i);return new us(e.path,r)}isEqual(e){return e instanceof n&&tp(this.Ku,e.Ku)}},x_=class n extends ui{constructor(e,t){super(e),this.$u=t}_toFieldTransform(e){let t=new cr(e.serializer,LC(e.serializer,this.$u));return new us(e.path,t)}isEqual(e){return e instanceof n&&this.$u===e.$u}};function fy(n,e,t,i){let r=n.Qu(1,e,t);my("Data must be an object, but it was:",r,i);let s=[],o=St.empty();_s(i,(l,f)=>{let g=gy(e,l,t);f=ze(f);let p=r.Nu(g);if(f instanceof gl)s.push(g);else{let w=vs(f,p);w!=null&&(s.push(g),o.set(g,w))}});let c=new Jt(s);return new Nh(o,c,r.fieldTransforms)}function py(n,e,t,i,r,s){let o=n.Qu(1,e,t),c=[P_(e,i,t)],l=[r];if(s.length%2!=0)throw new B(N.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let w=0;w<s.length;w+=2)c.push(P_(e,s[w])),l.push(s[w+1]);let f=[],g=St.empty();for(let w=c.length-1;w>=0;--w)if(!tI(f,c[w])){let I=c[w],L=l[w];L=ze(L);let O=o.Nu(I);if(L instanceof gl)f.push(I);else{let S=vs(L,O);S!=null&&(f.push(I),g.set(I,S))}}let p=new Jt(f);return new Nh(g,p,o.fieldTransforms)}function JE(n,e,t,i=!1){return vs(t,n.Qu(i?4:3,e))}function vs(n,e){if(eI(n=ze(n)))return my("Unsupported field value:",e,n),ZE(n,e);if(n instanceof ui)return function(i,r){if(!YE(r.Cu))throw r.Bu(`${i._methodName}() can only be used with update() and set()`);if(!r.path)throw r.Bu(`${i._methodName}() is not currently supported inside arrays`);let s=i._toFieldTransform(r);s&&r.fieldTransforms.push(s)}(n,e),null;if(n===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),n instanceof Array){if(e.settings.xu&&e.Cu!==4)throw e.Bu("Nested arrays are not supported");return function(i,r){let s=[],o=0;for(let c of i){let l=vs(c,r.Lu(o));l==null&&(l={nullValue:"NULL_VALUE"}),s.push(l),o++}return{arrayValue:{values:s}}}(n,e)}return function(i,r){if((i=ze(i))===null)return{nullValue:"NULL_VALUE"};if(typeof i=="number")return LC(r.serializer,i);if(typeof i=="boolean")return{booleanValue:i};if(typeof i=="string")return{stringValue:i};if(i instanceof Date){let s=$e.fromDate(i);return{timestampValue:jo(r.serializer,s)}}if(i instanceof $e){let s=new $e(i.seconds,1e3*Math.floor(i.nanoseconds/1e3));return{timestampValue:jo(r.serializer,s)}}if(i instanceof ps)return{geoPointValue:{latitude:i.latitude,longitude:i.longitude}};if(i instanceof Yn)return{bytesValue:WC(r.serializer,i._byteString)};if(i instanceof Ne){let s=r.databaseId,o=i.firestore._databaseId;if(!o.isEqual(s))throw r.Bu(`Document reference is for database ${o.projectId}/${o.database} but should be for database ${s.projectId}/${s.database}`);return{referenceValue:$_(i.firestore._databaseId||r.databaseId,i._key.path)}}if(i instanceof ml)return function(o,c){return{mapValue:{fields:{__type__:{stringValue:"__vector__"},value:{arrayValue:{values:o.toArray().map(l=>{if(typeof l!="number")throw c.Bu("VectorValues must only contain numeric values.");return z_(c.serializer,l)})}}}}}}(i,r);throw r.Bu(`Unsupported field value: ${Wh(i)}`)}(n,e)}function ZE(n,e){let t={};return wC(n)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):_s(n,(i,r)=>{let s=vs(r,e.Mu(i));s!=null&&(t[i]=s)}),{mapValue:{fields:t}}}function eI(n){return!(typeof n!="object"||n===null||n instanceof Array||n instanceof Date||n instanceof $e||n instanceof ps||n instanceof Yn||n instanceof Ne||n instanceof ui||n instanceof ml)}function my(n,e,t){if(!eI(t)||!function(r){return typeof r=="object"&&r!==null&&(Object.getPrototypeOf(r)===Object.prototype||Object.getPrototypeOf(r)===null)}(t)){let i=Wh(t);throw i==="an object"?e.Bu(n+" a custom object"):e.Bu(n+" "+i)}}function P_(n,e,t){if((e=ze(e))instanceof Tn)return e._internalPath;if(typeof e=="string")return gy(n,e);throw Fh("Field path arguments must be of type string or ",n,!1,void 0,t)}var nO=new RegExp("[~\\*/\\[\\]]");function gy(n,e,t){if(e.search(nO)>=0)throw Fh(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,n,!1,void 0,t);try{return new Tn(...e.split("."))._internalPath}catch{throw Fh(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,n,!1,void 0,t)}}function Fh(n,e,t,i,r){let s=i&&!i.isEmpty(),o=r!==void 0,c=`Function ${e}() called with invalid data`;t&&(c+=" (via `toFirestore()`)"),c+=". ";let l="";return(s||o)&&(l+=" (found",s&&(l+=` in field ${i}`),o&&(l+=` in document ${r}`),l+=")"),new B(N.INVALID_ARGUMENT,c+n+l)}function tI(n,e){return n.some(t=>t.isEqual(e))}var ms=class{constructor(e,t,i,r,s){this._firestore=e,this._userDataWriter=t,this._key=i,this._document=r,this._converter=s}get id(){return this._key.path.lastSegment()}get ref(){return new Ne(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){let e=new M_(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){let t=this._document.data.field(Yh("DocumentSnapshot.get",e));if(t!==null)return this._userDataWriter.convertValue(t)}}},M_=class extends ms{data(){return super.data()}};function Yh(n,e){return typeof e=="string"?gy(n,e):e instanceof Tn?e._internalPath:e._delegate._internalPath}function nI(n){if(n.limitType==="L"&&n.explicitOrderBy.length===0)throw new B(N.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}var _l=class{},gs=class extends _l{};function fi(n,e,...t){let i=[];e instanceof _l&&i.push(e),i=i.concat(t),function(s){let o=s.filter(l=>l instanceof S_).length,c=s.filter(l=>l instanceof Lh).length;if(o>1||o>0&&c>0)throw new B(N.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(i);for(let r of i)n=r._apply(n);return n}var Lh=class n extends gs{constructor(e,t,i){super(),this._field=e,this._op=t,this._value=i,this.type="where"}static _create(e,t,i){return new n(e,t,i)}_apply(e){let t=this._parse(e);return hI(e._query,t),new It(e.firestore,e.converter,og(e._query,t))}_parse(e){let t=ys(e.firestore);return function(s,o,c,l,f,g,p){let w;if(f.isKeyField()){if(g==="array-contains"||g==="array-contains-any")throw new B(N.INVALID_ARGUMENT,`Invalid Query. You can't perform '${g}' queries on documentId().`);if(g==="in"||g==="not-in"){aC(p,g);let I=[];for(let L of p)I.push(oC(l,s,L));w={arrayValue:{values:I}}}else w=oC(l,s,p)}else g!=="in"&&g!=="not-in"&&g!=="array-contains-any"||aC(p,g),w=JE(c,o,p,g==="in"||g==="not-in");return _e.create(f,g,w)}(e._query,"where",t,e.firestore._databaseId,this._field,this._op,this._value)}};function iI(n,e,t){let i=e,r=Yh("where",n);return Lh._create(r,i,t)}var S_=class n extends _l{constructor(e,t){super(),this.type=e,this._queryConstraints=t}static _create(e,t){return new n(e,t)}_parse(e){let t=this._queryConstraints.map(i=>i._parse(e)).filter(i=>i.getFilters().length>0);return t.length===1?t[0]:Me.create(t,this._getOperator())}_apply(e){let t=this._parse(e);return t.getFilters().length===0?e:(function(r,s){let o=r,c=s.getFlattenedFilters();for(let l of c)hI(o,l),o=og(o,l)}(e._query,t),new It(e.firestore,e.converter,og(e._query,t)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}};var O_=class n extends gs{constructor(e,t){super(),this._field=e,this._direction=t,this.type="orderBy"}static _create(e,t){return new n(e,t)}_apply(e){let t=function(r,s,o){if(r.startAt!==null)throw new B(N.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(r.endAt!==null)throw new B(N.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new cs(s,o)}(e._query,this._field,this._direction);return new It(e.firestore,e.converter,function(r,s){let o=r.explicitOrderBy.concat([s]);return new En(r.path,r.collectionGroup,o,r.filters.slice(),r.limit,r.limitType,r.startAt,r.endAt)}(e._query,t))}};function rI(n,e="asc"){let t=e,i=Yh("orderBy",n);return O_._create(i,t)}var jh=class n extends gs{constructor(e,t,i){super(),this.type=e,this._limit=t,this._limitType=i}static _create(e,t,i){return new n(e,t,i)}_apply(e){return new It(e.firestore,e.converter,ih(e._query,this._limit,this._limitType))}};function sI(n){return VE("limit",n),jh._create("limit",n,"F")}function oI(n){return VE("limitToLast",n),jh._create("limitToLast",n,"L")}var Bh=class n extends gs{constructor(e,t,i){super(),this.type=e,this._docOrFields=t,this._inclusive=i}static _create(e,t,i){return new n(e,t,i)}_apply(e){let t=dI(e,this.type,this._docOrFields,this._inclusive);return new It(e.firestore,e.converter,function(r,s){return new En(r.path,r.collectionGroup,r.explicitOrderBy.slice(),r.filters.slice(),r.limit,r.limitType,s,r.endAt)}(e._query,t))}};function aI(...n){return Bh._create("startAt",n,!0)}function cI(...n){return Bh._create("startAfter",n,!1)}var Uh=class n extends gs{constructor(e,t,i){super(),this.type=e,this._docOrFields=t,this._inclusive=i}static _create(e,t,i){return new n(e,t,i)}_apply(e){let t=dI(e,this.type,this._docOrFields,this._inclusive);return new It(e.firestore,e.converter,function(r,s){return new En(r.path,r.collectionGroup,r.explicitOrderBy.slice(),r.filters.slice(),r.limit,r.limitType,r.startAt,s)}(e._query,t))}};function lI(...n){return Uh._create("endBefore",n,!1)}function uI(...n){return Uh._create("endAt",n,!0)}function dI(n,e,t,i){if(t[0]=ze(t[0]),t[0]instanceof ms)return function(s,o,c,l,f){if(!l)throw new B(N.NOT_FOUND,`Can't use a DocumentSnapshot that doesn't exist for ${c}().`);let g=[];for(let p of Oo(s))if(p.field.isKeyField())g.push(as(o,l.key));else{let w=l.data.field(p.field);if($h(w))throw new B(N.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+p.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(w===null){let I=p.field.canonicalString();throw new B(N.INVALID_ARGUMENT,`Invalid query. You are trying to start or end a query using a document for which the field '${I}' (used as the orderBy) does not exist.`)}g.push(w)}return new Wn(g,f)}(n._query,n.firestore._databaseId,e,t[0]._document,i);{let r=ys(n.firestore);return function(o,c,l,f,g,p){let w=o.explicitOrderBy;if(g.length>w.length)throw new B(N.INVALID_ARGUMENT,`Too many arguments provided to ${f}(). The number of arguments must be less than or equal to the number of orderBy() clauses`);let I=[];for(let L=0;L<g.length;L++){let O=g[L];if(w[L].field.isKeyField()){if(typeof O!="string")throw new B(N.INVALID_ARGUMENT,`Invalid query. Expected a string for document ID in ${f}(), but got a ${typeof O}`);if(!B_(o)&&O.indexOf("/")!==-1)throw new B(N.INVALID_ARGUMENT,`Invalid query. When querying a collection and ordering by documentId(), the value passed to ${f}() must be a plain document ID, but '${O}' contains a slash.`);let S=o.path.child(we.fromString(O));if(!Q.isDocumentKey(S))throw new B(N.INVALID_ARGUMENT,`Invalid query. When querying a collection group and ordering by documentId(), the value passed to ${f}() must result in a valid document path, but '${S}' is not because it contains an odd number of segments.`);let H=new Q(S);I.push(as(c,H))}else{let S=JE(l,f,O);I.push(S)}}return new Wn(I,p)}(n._query,n.firestore._databaseId,r,e,t,i)}}function oC(n,e,t){if(typeof(t=ze(t))=="string"){if(t==="")throw new B(N.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!B_(e)&&t.indexOf("/")!==-1)throw new B(N.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${t}' contains a '/' character.`);let i=e.path.child(we.fromString(t));if(!Q.isDocumentKey(i))throw new B(N.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${i}' is not because it has an odd number of segments (${i.length}).`);return as(n,new Q(i))}if(t instanceof Ne)return as(n,t._key);throw new B(N.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${Wh(t)}.`)}function aC(n,e){if(!Array.isArray(n)||n.length===0)throw new B(N.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function hI(n,e){let t=function(r,s){for(let o of r)for(let c of o.getFlattenedFilters())if(s.indexOf(c.op)>=0)return c.op;return null}(n.filters,function(r){switch(r){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(t!==null)throw t===e.op?new B(N.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new B(N.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${t.toString()}' filters.`)}var Qo=class{convertValue(e,t="none"){switch(os(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Be(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(rr(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 11:return this.convertObject(e.mapValue,t);case 10:return this.convertVectorValue(e.mapValue);default:throw J()}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e,t="none"){let i={};return _s(e,(r,s)=>{i[r]=this.convertValue(s,t)}),i}convertVectorValue(e){var t,i,r;let s=(r=(i=(t=e.fields)===null||t===void 0?void 0:t.value.arrayValue)===null||i===void 0?void 0:i.values)===null||r===void 0?void 0:r.map(o=>Be(o.doubleValue));return new ml(s)}convertGeoPoint(e){return new ps(Be(e.latitude),Be(e.longitude))}convertArray(e,t){return(e.values||[]).map(i=>this.convertValue(i,t))}convertServerTimestamp(e,t){switch(t){case"previous":let i=L_(e);return i==null?null:this.convertValue(i,t);case"estimate":return this.convertTimestamp(el(e));default:return null}}convertTimestamp(e){let t=ai(e);return new $e(t.seconds,t.nanos)}convertDocumentKey(e,t){let i=we.fromString(e);ee(sE(i));let r=new sr(i.get(1),i.get(3)),s=new Q(i.popFirst(5));return r.isEqual(t)||Qe(`Document ${s} contains a document reference within a different database (${r.projectId}/${r.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),s}};function Xh(n,e,t){let i;return i=n?t&&(t.merge||t.mergeFields)?n.toFirestore(e,t):n.toFirestore(e):e,i}var D_=class extends Qo{constructor(e){super(),this.firestore=e}convertBytes(e){return new Yn(e)}convertReference(e){let t=this.convertDocumentKey(e,this.firestore._databaseId);return new Ne(this.firestore,null,t)}};var oi=class{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}},un=class extends ms{constructor(e,t,i,r,s,o){super(e,t,i,r,o),this._firestore=e,this._firestoreImpl=e,this.metadata=s}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){let t=new tr(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){let i=this._document.data.field(Yh("DocumentSnapshot.get",e));if(i!==null)return this._userDataWriter.convertValue(i,t.serverTimestamps)}}},tr=class extends un{data(e={}){return super.data(e)}},An=class{constructor(e,t,i,r){this._firestore=e,this._userDataWriter=t,this._snapshot=r,this.metadata=new oi(r.hasPendingWrites,r.fromCache),this.query=i}get docs(){let e=[];return this.forEach(t=>e.push(t)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,t){this._snapshot.docs.forEach(i=>{e.call(t,new tr(this._firestore,this._userDataWriter,i.key,i,new oi(this._snapshot.mutatedKeys.has(i.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){let t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new B(N.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=function(r,s){if(r._snapshot.oldDocs.isEmpty()){let o=0;return r._snapshot.docChanges.map(c=>{let l=new tr(r._firestore,r._userDataWriter,c.doc.key,c.doc,new oi(r._snapshot.mutatedKeys.has(c.doc.key),r._snapshot.fromCache),r.query.converter);return c.doc,{type:"added",doc:l,oldIndex:-1,newIndex:o++}})}{let o=r._snapshot.oldDocs;return r._snapshot.docChanges.filter(c=>s||c.type!==3).map(c=>{let l=new tr(r._firestore,r._userDataWriter,c.doc.key,c.doc,new oi(r._snapshot.mutatedKeys.has(c.doc.key),r._snapshot.fromCache),r.query.converter),f=-1,g=-1;return c.type!==0&&(f=o.indexOf(c.doc.key),o=o.delete(c.doc.key)),c.type!==1&&(o=o.add(c.doc),g=o.indexOf(c.doc.key)),{type:iO(c.type),doc:l,oldIndex:f,newIndex:g}})}}(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}};function iO(n){switch(n){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return J()}}function _y(n,e){return n instanceof un&&e instanceof un?n._firestore===e._firestore&&n._key.isEqual(e._key)&&(n._document===null?e._document===null:n._document.isEqual(e._document))&&n._converter===e._converter:n instanceof An&&e instanceof An&&n._firestore===e._firestore&&hy(n.query,e.query)&&n.metadata.isEqual(e.metadata)&&n._snapshot.isEqual(e._snapshot)}function fI(n){n=Ce(n,Ne);let e=Ce(n.firestore,qe);return RE(Tt(e),n._key).then(t=>by(e,n,t))}var di=class extends Qo{constructor(e){super(),this.firestore=e}convertBytes(e){return new Yn(e)}convertReference(e){let t=this.convertDocumentKey(e,this.firestore._databaseId);return new Ne(this.firestore,null,t)}};function pI(n){n=Ce(n,Ne);let e=Ce(n.firestore,qe),t=Tt(e),i=new di(e);return Y1(t,n._key).then(r=>new un(e,i,n._key,r,new oi(r!==null&&r.hasLocalMutations,!0),n.converter))}function mI(n){n=Ce(n,Ne);let e=Ce(n.firestore,qe);return RE(Tt(e),n._key,{source:"server"}).then(t=>by(e,n,t))}function gI(n){n=Ce(n,It);let e=Ce(n.firestore,qe),t=Tt(e),i=new di(e);return nI(n._query),kE(t,n._query).then(r=>new An(e,i,n,r))}function _I(n){n=Ce(n,It);let e=Ce(n.firestore,qe),t=Tt(e),i=new di(e);return X1(t,n._query).then(r=>new An(e,i,n,r))}function yI(n){n=Ce(n,It);let e=Ce(n.firestore,qe),t=Tt(e),i=new di(e);return kE(t,n._query,{source:"server"}).then(r=>new An(e,i,n,r))}function yy(n,e,t){n=Ce(n,Ne);let i=Ce(n.firestore,qe),r=Xh(n.converter,e,t);return na(i,[Qh(ys(i),"setDoc",n._key,r,n.converter!==null,t).toMutation(n._key,Ke.none())])}function vy(n,e,t,...i){n=Ce(n,Ne);let r=Ce(n.firestore,qe),s=ys(r),o;return o=typeof(e=ze(e))=="string"||e instanceof Tn?py(s,"updateDoc",n._key,e,t,i):fy(s,"updateDoc",n._key,e),na(r,[o.toMutation(n._key,Ke.exists(!0))])}function vI(n){return na(Ce(n.firestore,qe),[new ur(n._key,Ke.none())])}function wI(n,e){let t=Ce(n.firestore,qe),i=Il(n),r=Xh(n.converter,e);return na(t,[Qh(ys(n.firestore),"addDoc",i._key,r,n.converter!==null,{}).toMutation(i._key,Ke.exists(!1))]).then(()=>i)}function wy(n,...e){var t,i,r;n=ze(n);let s={includeMetadataChanges:!1,source:"default"},o=0;typeof e[o]!="object"||w_(e[o])||(s=e[o],o++);let c={includeMetadataChanges:s.includeMetadataChanges,source:s.source};if(w_(e[o])){let p=e[o];e[o]=(t=p.next)===null||t===void 0?void 0:t.bind(p),e[o+1]=(i=p.error)===null||i===void 0?void 0:i.bind(p),e[o+2]=(r=p.complete)===null||r===void 0?void 0:r.bind(p)}let l,f,g;if(n instanceof Ne)f=Ce(n.firestore,qe),g=Xo(n._key.path),l={next:p=>{e[o]&&e[o](by(f,n,p))},error:e[o+1],complete:e[o+2]};else{let p=Ce(n,It);f=Ce(p.firestore,qe),g=p._query;let w=new di(f);l={next:I=>{e[o]&&e[o](new An(f,w,p,I))},error:e[o+1],complete:e[o+2]},nI(n._query)}return function(w,I,L,O){let S=new Ko(O),H=new pl(I,S,L);return w.asyncQueue.enqueueAndForget(()=>V(this,null,function*(){return Y_(yield Wo(w),H)})),()=>{S.Za(),w.asyncQueue.enqueueAndForget(()=>V(this,null,function*(){return X_(yield Wo(w),H)}))}}(Tt(f),g,c,l)}function bI(n,e){return J1(Tt(n=Ce(n,qe)),w_(e)?e:{next:e})}function na(n,e){return function(i,r){let s=new pt;return i.asyncQueue.enqueueAndForget(()=>V(this,null,function*(){return O1(yield ay(i),r,s)})),s.promise}(Tt(n),e)}function by(n,e,t){let i=t.docs.get(e._key),r=new di(n);return new un(n,r,e._key,i,new oi(t.hasPendingWrites,t.fromCache),e.converter)}var rO={maxAttempts:5};var zh=class{constructor(e,t){this._firestore=e,this._commitHandler=t,this._mutations=[],this._committed=!1,this._dataReader=ys(e)}set(e,t,i){this._verifyNotCommitted();let r=Zi(e,this._firestore),s=Xh(r.converter,t,i),o=Qh(this._dataReader,"WriteBatch.set",r._key,s,r.converter!==null,i);return this._mutations.push(o.toMutation(r._key,Ke.none())),this}update(e,t,i,...r){this._verifyNotCommitted();let s=Zi(e,this._firestore),o;return o=typeof(t=ze(t))=="string"||t instanceof Tn?py(this._dataReader,"WriteBatch.update",s._key,t,i,r):fy(this._dataReader,"WriteBatch.update",s._key,t),this._mutations.push(o.toMutation(s._key,Ke.exists(!0))),this}delete(e){this._verifyNotCommitted();let t=Zi(e,this._firestore);return this._mutations=this._mutations.concat(new ur(t._key,Ke.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new B(N.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}};function Zi(n,e){if((n=ze(n)).firestore!==e)throw new B(N.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return n}var R_=class extends class{constructor(t,i){this._firestore=t,this._transaction=i,this._dataReader=ys(t)}get(t){let i=Zi(t,this._firestore),r=new D_(this._firestore);return this._transaction.lookup([i._key]).then(s=>{if(!s||s.length!==1)return J();let o=s[0];if(o.isFoundDocument())return new ms(this._firestore,r,o.key,o,i.converter);if(o.isNoDocument())return new ms(this._firestore,r,i._key,null,i.converter);throw J()})}set(t,i,r){let s=Zi(t,this._firestore),o=Xh(s.converter,i,r),c=Qh(this._dataReader,"Transaction.set",s._key,o,s.converter!==null,r);return this._transaction.set(s._key,c),this}update(t,i,r,...s){let o=Zi(t,this._firestore),c;return c=typeof(i=ze(i))=="string"||i instanceof Tn?py(this._dataReader,"Transaction.update",o._key,i,r,s):fy(this._dataReader,"Transaction.update",o._key,i),this._transaction.update(o._key,c),this}delete(t){let i=Zi(t,this._firestore);return this._transaction.delete(i._key),this}}{constructor(e,t){super(e,t),this._firestore=e}get(e){let t=Zi(e,this._firestore),i=new di(this._firestore);return super.get(e).then(r=>new un(this._firestore,i,t._key,r._document,new oi(!1,!1),t.converter))}};function CI(n,e,t){n=Ce(n,qe);let i=Object.assign(Object.assign({},rO),t);return function(s){if(s.maxAttempts<1)throw new B(N.INVALID_ARGUMENT,"Max attempts must be at least 1")}(i),function(s,o,c){let l=new pt;return s.asyncQueue.enqueueAndForget(()=>V(this,null,function*(){let f=yield K1(s);new y_(s.asyncQueue,f,c,o,l).au()})),l.promise}(Tt(n),r=>e(new R_(n,r)),i)}function EI(){return new gl("deleteField")}function II(){return new I_("serverTimestamp")}function TI(...n){return new T_("arrayUnion",n)}function AI(...n){return new A_("arrayRemove",n)}function xI(n){return new x_("increment",n)}(function(e,t=!0){(function(r){Yo=r})(Gv),Ya(new $r("firestore",(i,{instanceIdentifier:r,options:s})=>{let o=i.getProvider("app").getImmediate(),c=new qe(new Fm(i.getProvider("auth-internal")),new Um(i.getProvider("app-check-internal")),function(f,g){if(!Object.prototype.hasOwnProperty.apply(f.options,["projectId"]))throw new B(N.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new sr(f.options.projectId,g)}(o,r),o);return s=Object.assign({useFetchStreams:t},s),c._setSettings(s),c},"PUBLIC").setMultipleInstances(!0)),Li(sb,"4.7.3",e),Li(sb,"4.7.3","esm2017")})();var sO="@firebase/firestore-compat",oO="0.3.38";function xy(n,e){if(e===void 0)return{merge:!1};if(e.mergeFields!==void 0&&e.merge!==void 0)throw new B("invalid-argument",`Invalid options passed to function ${n}(): You cannot specify both "merge" and "mergeFields".`);return e}function PI(){if(typeof Uint8Array>"u")throw new B("unimplemented","Uint8Arrays are not available in this environment.")}function MI(){if(!bC())throw new B("unimplemented","Blobs are unavailable in Firestore in this environment.")}var Jh=class n{constructor(e){this._delegate=e}static fromBase64String(e){return MI(),new n(Yn.fromBase64String(e))}static fromUint8Array(e){return PI(),new n(Yn.fromUint8Array(e))}toBase64(){return MI(),this._delegate.toBase64()}toUint8Array(){return PI(),this._delegate.toUint8Array()}isEqual(e){return this._delegate.isEqual(e._delegate)}toString(){return"Blob(base64: "+this.toBase64()+")"}};function Cy(n){return aO(n,["next","error","complete"])}function aO(n,e){if(typeof n!="object"||n===null)return!1;let t=n;for(let i of e)if(i in t&&typeof t[i]=="function")return!0;return!1}var Ey=class{enableIndexedDbPersistence(e,t){return UE(e._delegate,{forceOwnership:t})}enableMultiTabIndexedDbPersistence(e){return zE(e._delegate)}clearIndexedDbPersistence(e){return qE(e._delegate)}},Zh=class{constructor(e,t,i){this._delegate=t,this._persistenceProvider=i,this.INTERNAL={delete:()=>this.terminate()},e instanceof sr||(this._appCompat=e)}get _databaseId(){return this._delegate._databaseId}settings(e){let t=this._delegate._getSettings();!e.merge&&t.host!==e.host&&Cn("You are overriding the original host. If you did not intend to override your settings, use {merge: true}."),e.merge&&(e=Object.assign(Object.assign({},t),e),delete e.merge),this._delegate._setSettings(e)}useEmulator(e,t,i={}){FE(this._delegate,e,t,i)}enableNetwork(){return HE(this._delegate)}disableNetwork(){return KE(this._delegate)}enablePersistence(e){let t=!1,i=!1;return e&&(t=!!e.synchronizeTabs,i=!!e.experimentalForceOwningTab,ly("synchronizeTabs",t,"experimentalForceOwningTab",i)),t?this._persistenceProvider.enableMultiTabIndexedDbPersistence(this):this._persistenceProvider.enableIndexedDbPersistence(this,i)}clearPersistence(){return this._persistenceProvider.clearIndexedDbPersistence(this)}terminate(){return this._appCompat&&(this._appCompat._removeServiceInstance("firestore-compat"),this._appCompat._removeServiceInstance("firestore")),this._delegate._delete()}waitForPendingWrites(){return GE(this._delegate)}onSnapshotsInSync(e){return bI(this._delegate,e)}get app(){if(!this._appCompat)throw new B("failed-precondition","Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._appCompat}collection(e){try{return new sa(this,uy(this._delegate,e))}catch(t){throw Nt(t,"collection()","Firestore.collection()")}}doc(e){try{return new Xn(this,Il(this._delegate,e))}catch(t){throw Nt(t,"doc()","Firestore.doc()")}}collectionGroup(e){try{return new Es(this,LE(this._delegate,e))}catch(t){throw Nt(t,"collectionGroup()","Firestore.collectionGroup()")}}runTransaction(e){return CI(this._delegate,t=>e(new ef(this,t)))}batch(){return Tt(this._delegate),new tf(new zh(this._delegate,e=>na(this._delegate,e)))}loadBundle(e){return WE(this._delegate,e)}namedQuery(e){return QE(this._delegate,e).then(t=>t?new Es(this,t):null)}},ia=class extends Qo{constructor(e){super(),this.firestore=e}convertBytes(e){return new Jh(new Yn(e))}convertReference(e){let t=this.convertDocumentKey(e,this.firestore._databaseId);return Xn.forKey(t,this.firestore,null)}};function cO(n){cC(n)}var ef=class{constructor(e,t){this._firestore=e,this._delegate=t,this._userDataWriter=new ia(e)}get(e){let t=ws(e);return this._delegate.get(t).then(i=>new bs(this._firestore,new un(this._firestore._delegate,this._userDataWriter,i._key,i._document,i.metadata,t.converter)))}set(e,t,i){let r=ws(e);return i?(xy("Transaction.set",i),this._delegate.set(r,t,i)):this._delegate.set(r,t),this}update(e,t,i,...r){let s=ws(e);return arguments.length===2?this._delegate.update(s,t):this._delegate.update(s,t,i,...r),this}delete(e){let t=ws(e);return this._delegate.delete(t),this}},tf=class{constructor(e){this._delegate=e}set(e,t,i){let r=ws(e);return i?(xy("WriteBatch.set",i),this._delegate.set(r,t,i)):this._delegate.set(r,t),this}update(e,t,i,...r){let s=ws(e);return arguments.length===2?this._delegate.update(s,t):this._delegate.update(s,t,i,...r),this}delete(e){let t=ws(e);return this._delegate.delete(t),this}commit(){return this._delegate.commit()}},ra=class n{constructor(e,t,i){this._firestore=e,this._userDataWriter=t,this._delegate=i}fromFirestore(e,t){let i=new tr(this._firestore._delegate,this._userDataWriter,e._key,e._document,e.metadata,null);return this._delegate.fromFirestore(new Cs(this._firestore,i),t??{})}toFirestore(e,t){return t?this._delegate.toFirestore(e,t):this._delegate.toFirestore(e)}static getInstance(e,t){let i=n.INSTANCES,r=i.get(e);r||(r=new WeakMap,i.set(e,r));let s=r.get(t);return s||(s=new n(e,new ia(e),t),r.set(t,s)),s}};ra.INSTANCES=new WeakMap;var Xn=class n{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new ia(e)}static forPath(e,t,i){if(e.length%2!==0)throw new B("invalid-argument",`Invalid document reference. Document references must have an even number of segments, but ${e.canonicalString()} has ${e.length}`);return new n(t,new Ne(t._delegate,i,new Q(e)))}static forKey(e,t,i){return new n(t,new Ne(t._delegate,i,e))}get id(){return this._delegate.id}get parent(){return new sa(this.firestore,this._delegate.parent)}get path(){return this._delegate.path}collection(e){try{return new sa(this.firestore,uy(this._delegate,e))}catch(t){throw Nt(t,"collection()","DocumentReference.collection()")}}isEqual(e){return e=ze(e),e instanceof Ne?dy(this._delegate,e):!1}set(e,t){t=xy("DocumentReference.set",t);try{return t?yy(this._delegate,e,t):yy(this._delegate,e)}catch(i){throw Nt(i,"setDoc()","DocumentReference.set()")}}update(e,t,...i){try{return arguments.length===1?vy(this._delegate,e):vy(this._delegate,e,t,...i)}catch(r){throw Nt(r,"updateDoc()","DocumentReference.update()")}}delete(){return vI(this._delegate)}onSnapshot(...e){let t=SI(e),i=OI(e,r=>new bs(this.firestore,new un(this.firestore._delegate,this._userDataWriter,r._key,r._document,r.metadata,this._delegate.converter)));return wy(this._delegate,t,i)}get(e){let t;return e?.source==="cache"?t=pI(this._delegate):e?.source==="server"?t=mI(this._delegate):t=fI(this._delegate),t.then(i=>new bs(this.firestore,new un(this.firestore._delegate,this._userDataWriter,i._key,i._document,i.metadata,this._delegate.converter)))}withConverter(e){return new n(this.firestore,e?this._delegate.withConverter(ra.getInstance(this.firestore,e)):this._delegate.withConverter(null))}};function Nt(n,e,t){return n.message=n.message.replace(e,t),n}function SI(n){for(let e of n)if(typeof e=="object"&&!Cy(e))return e;return{}}function OI(n,e){var t,i;let r;return Cy(n[0])?r=n[0]:Cy(n[1])?r=n[1]:typeof n[0]=="function"?r={next:n[0],error:n[1],complete:n[2]}:r={next:n[1],error:n[2],complete:n[3]},{next:s=>{r.next&&r.next(e(s))},error:(t=r.error)===null||t===void 0?void 0:t.bind(r),complete:(i=r.complete)===null||i===void 0?void 0:i.bind(r)}}var bs=class{constructor(e,t){this._firestore=e,this._delegate=t}get ref(){return new Xn(this._firestore,this._delegate.ref)}get id(){return this._delegate.id}get metadata(){return this._delegate.metadata}get exists(){return this._delegate.exists()}data(e){return this._delegate.data(e)}get(e,t){return this._delegate.get(e,t)}isEqual(e){return _y(this._delegate,e._delegate)}},Cs=class extends bs{data(e){let t=this._delegate.data(e);return this._delegate._converter||lC(t!==void 0,"Document in a QueryDocumentSnapshot should exist"),t}},Es=class n{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new ia(e)}where(e,t,i){try{return new n(this.firestore,fi(this._delegate,iI(e,t,i)))}catch(r){throw Nt(r,/(orderBy|where)\(\)/,"Query.$1()")}}orderBy(e,t){try{return new n(this.firestore,fi(this._delegate,rI(e,t)))}catch(i){throw Nt(i,/(orderBy|where)\(\)/,"Query.$1()")}}limit(e){try{return new n(this.firestore,fi(this._delegate,sI(e)))}catch(t){throw Nt(t,"limit()","Query.limit()")}}limitToLast(e){try{return new n(this.firestore,fi(this._delegate,oI(e)))}catch(t){throw Nt(t,"limitToLast()","Query.limitToLast()")}}startAt(...e){try{return new n(this.firestore,fi(this._delegate,aI(...e)))}catch(t){throw Nt(t,"startAt()","Query.startAt()")}}startAfter(...e){try{return new n(this.firestore,fi(this._delegate,cI(...e)))}catch(t){throw Nt(t,"startAfter()","Query.startAfter()")}}endBefore(...e){try{return new n(this.firestore,fi(this._delegate,lI(...e)))}catch(t){throw Nt(t,"endBefore()","Query.endBefore()")}}endAt(...e){try{return new n(this.firestore,fi(this._delegate,uI(...e)))}catch(t){throw Nt(t,"endAt()","Query.endAt()")}}isEqual(e){return hy(this._delegate,e._delegate)}get(e){let t;return e?.source==="cache"?t=_I(this._delegate):e?.source==="server"?t=yI(this._delegate):t=gI(this._delegate),t.then(i=>new Tl(this.firestore,new An(this.firestore._delegate,this._userDataWriter,this._delegate,i._snapshot)))}onSnapshot(...e){let t=SI(e),i=OI(e,r=>new Tl(this.firestore,new An(this.firestore._delegate,this._userDataWriter,this._delegate,r._snapshot)));return wy(this._delegate,t,i)}withConverter(e){return new n(this.firestore,e?this._delegate.withConverter(ra.getInstance(this.firestore,e)):this._delegate.withConverter(null))}},Iy=class{constructor(e,t){this._firestore=e,this._delegate=t}get type(){return this._delegate.type}get doc(){return new Cs(this._firestore,this._delegate.doc)}get oldIndex(){return this._delegate.oldIndex}get newIndex(){return this._delegate.newIndex}},Tl=class{constructor(e,t){this._firestore=e,this._delegate=t}get query(){return new Es(this._firestore,this._delegate.query)}get metadata(){return this._delegate.metadata}get size(){return this._delegate.size}get empty(){return this._delegate.empty}get docs(){return this._delegate.docs.map(e=>new Cs(this._firestore,e))}docChanges(e){return this._delegate.docChanges(e).map(t=>new Iy(this._firestore,t))}forEach(e,t){this._delegate.forEach(i=>{e.call(t,new Cs(this._firestore,i))})}isEqual(e){return _y(this._delegate,e._delegate)}},sa=class n extends Es{constructor(e,t){super(e,t),this.firestore=e,this._delegate=t}get id(){return this._delegate.id}get path(){return this._delegate.path}get parent(){let e=this._delegate.parent;return e?new Xn(this.firestore,e):null}doc(e){try{return e===void 0?new Xn(this.firestore,Il(this._delegate)):new Xn(this.firestore,Il(this._delegate,e))}catch(t){throw Nt(t,"doc()","CollectionReference.doc()")}}add(e){return wI(this._delegate,e).then(t=>new Xn(this.firestore,t))}isEqual(e){return dy(this._delegate,e._delegate)}withConverter(e){return new n(this.firestore,e?this._delegate.withConverter(ra.getInstance(this.firestore,e)):this._delegate.withConverter(null))}};function ws(n){return Ce(n,Ne)}var Ty=class n{constructor(...e){this._delegate=new Tn(...e)}static documentId(){return new n(Ye.keyField().canonicalString())}isEqual(e){return e=ze(e),e instanceof Tn?this._delegate._internalPath.isEqual(e._internalPath):!1}};var Ay=class n{constructor(e){this._delegate=e}static serverTimestamp(){let e=II();return e._methodName="FieldValue.serverTimestamp",new n(e)}static delete(){let e=EI();return e._methodName="FieldValue.delete",new n(e)}static arrayUnion(...e){let t=TI(...e);return t._methodName="FieldValue.arrayUnion",new n(t)}static arrayRemove(...e){let t=AI(...e);return t._methodName="FieldValue.arrayRemove",new n(t)}static increment(e){let t=xI(e);return t._methodName="FieldValue.increment",new n(t)}isEqual(e){return this._delegate.isEqual(e._delegate)}};var lO={Firestore:Zh,GeoPoint:ps,Timestamp:$e,Blob:Jh,Transaction:ef,WriteBatch:tf,DocumentReference:Xn,DocumentSnapshot:bs,Query:Es,QueryDocumentSnapshot:Cs,QuerySnapshot:Tl,CollectionReference:sa,FieldPath:Ty,FieldValue:Ay,setLogLevel:cO,CACHE_SIZE_UNLIMITED:jE};function uO(n,e){n.INTERNAL.registerComponent(new $r("firestore-compat",t=>{let i=t.getProvider("app-compat").getImmediate(),r=t.getProvider("firestore").getImmediate();return e(i,r)},"PUBLIC").setServiceProps(Object.assign({},lO)))}function dO(n){uO(n,(e,t)=>new Zh(e,t,new Ey)),n.registerVersion(sO,oO)}dO(Wt);function hO(n,e=wu){return new vn(t=>{let i;return e!=null?e.schedule(()=>{i=n.onSnapshot({includeMetadataChanges:!0},t)}):i=n.onSnapshot({includeMetadataChanges:!0},t),()=>{i?.()}})}function DI(n,e){return hO(n,e)}function fO(n,e){return DI(n,e).pipe(ki(void 0),Cu(),ae(t=>{let[i,r]=t;return r.exists?i?.exists?{payload:r,type:"modified"}:{payload:r,type:"added"}:{payload:r,type:"removed"}}))}function Sy(n,e){return DI(n,e).pipe(ae(t=>({payload:t,type:"query"})))}var nf=class{ref;afs;constructor(e,t){this.ref=e,this.afs=t}set(e,t){return this.ref.set(e,t)}update(e){return this.ref.update(e)}delete(){return this.ref.delete()}collection(e,t){let i=this.ref.collection(e),{ref:r,query:s}=NI(i,t);return new sf(r,s,this.afs)}snapshotChanges(){return fO(this.ref,this.afs.schedulers.outsideAngular).pipe(Ut)}valueChanges(e={}){return this.snapshotChanges().pipe(ae(({payload:t})=>e.idField?Ee(K({},t.data()),{[e.idField]:t.id}):t.data()))}get(e){return Le(this.ref.get(e)).pipe(Ut)}};function rf(n,e){return Sy(n,e).pipe(ki(void 0),Cu(),ae(t=>{let[i,r]=t,s=r.payload.docChanges(),o=s.map(c=>({type:c.type,payload:c}));return i&&JSON.stringify(i.payload.metadata)!==JSON.stringify(r.payload.metadata)&&r.payload.docs.forEach((c,l)=>{let f=s.find(p=>p.doc.ref.isEqual(c.ref)),g=i?.payload.docs.find(p=>p.ref.isEqual(c.ref));f&&JSON.stringify(f.doc.metadata)===JSON.stringify(c.metadata)||!f&&g&&JSON.stringify(g.metadata)===JSON.stringify(c.metadata)||o.push({type:"modified",payload:{oldIndex:l,newIndex:l,type:"modified",doc:c}})}),o}))}function RI(n,e,t){return rf(n,t).pipe($s((i,r)=>pO(i,r.map(s=>s.payload),e),[]),av(),ae(i=>i.map(r=>({type:r.type,payload:r}))))}function pO(n,e,t){return e.forEach(i=>{t.indexOf(i.type)>-1&&(n=mO(n,i))}),n}function Py(n,e,t,...i){let r=n.slice();return r.splice(e,t,...i),r}function mO(n,e){switch(e.type){case"added":if(!(n[e.newIndex]&&n[e.newIndex].doc.ref.isEqual(e.doc.ref)))return Py(n,e.newIndex,0,e);break;case"modified":if(n[e.oldIndex]==null||n[e.oldIndex].doc.ref.isEqual(e.doc.ref))if(e.oldIndex!==e.newIndex){let t=n.slice();return t.splice(e.oldIndex,1),t.splice(e.newIndex,0,e),t}else return Py(n,e.newIndex,1,e);break;case"removed":if(n[e.oldIndex]&&n[e.oldIndex].doc.ref.isEqual(e.doc.ref))return Py(n,e.oldIndex,1);break}return n}function kI(n){return(!n||n.length===0)&&(n=["added","removed","modified"]),n}var sf=class{ref;query;afs;constructor(e,t,i){this.ref=e,this.query=t,this.afs=i}stateChanges(e){let t=rf(this.query,this.afs.schedulers.outsideAngular);return e&&e.length>0&&(t=t.pipe(ae(i=>i.filter(r=>e.indexOf(r.type)>-1)))),t.pipe(ki(void 0),Cu(),Bt(([i,r])=>r.length>0||!i),ae(([,i])=>i),Ut)}auditTrail(e){return this.stateChanges(e).pipe($s((t,i)=>[...t,...i],[]))}snapshotChanges(e){let t=kI(e);return RI(this.query,t,this.afs.schedulers.outsideAngular).pipe(Ut)}valueChanges(e={}){return Sy(this.query,this.afs.schedulers.outsideAngular).pipe(ae(t=>t.payload.docs.map(i=>e.idField?Ee(K({},i.data()),{[e.idField]:i.id}):i.data())),Ut)}get(e){return Le(this.query.get(e)).pipe(Ut)}add(e){return this.ref.add(e)}doc(e){return new nf(this.ref.doc(e),this.afs)}},My=class{query;afs;constructor(e,t){this.query=e,this.afs=t}stateChanges(e){return!e||e.length===0?rf(this.query,this.afs.schedulers.outsideAngular).pipe(Ut):rf(this.query,this.afs.schedulers.outsideAngular).pipe(ae(t=>t.filter(i=>e.indexOf(i.type)>-1)),Bt(t=>t.length>0),Ut)}auditTrail(e){return this.stateChanges(e).pipe($s((t,i)=>[...t,...i],[]))}snapshotChanges(e){let t=kI(e);return RI(this.query,t,this.afs.schedulers.outsideAngular).pipe(Ut)}valueChanges(e={}){return Sy(this.query,this.afs.schedulers.outsideAngular).pipe(ae(i=>i.payload.docs.map(r=>e.idField?K({[e.idField]:r.id},r.data()):r.data())),Ut)}get(e){return Le(this.query.get(e)).pipe(Ut)}},gO=new le("angularfire2.enableFirestorePersistence"),_O=new le("angularfire2.firestore.persistenceSettings"),yO=new le("angularfire2.firestore.settings"),vO=new le("angularfire2.firestore.use-emulator");function NI(n,e=t=>t){return{query:e(n),ref:n}}var of=(()=>{class n{schedulers;firestore;persistenceEnabled$;constructor(t,i,r,s,o,c,l,f,g,p,w,I,L,O,S,H,X){this.schedulers=l;let U=Lc(t,c,i),ne=g;p&&Em(U,c,w,L,O,S,I,H),[this.firestore,this.persistenceEnabled$]=kd(`${U.name}.firestore`,"AngularFirestore",U.name,()=>{let re=c.runOutsideAngular(()=>U.firestore());if(s&&re.settings(s),ne&&re.useEmulator(...ne),r&&!Fi(o)){let ce=()=>{try{return Le(re.enablePersistence(f||void 0).then(()=>!0,()=>!1))}catch(T){return typeof console<"u"&&console.warn(T),se(!1)}};return[re,c.runOutsideAngular(ce)]}else return[re,se(!1)]},[s,ne,r])}collection(t,i){let r;typeof t=="string"?r=this.firestore.collection(t):r=t;let{ref:s,query:o}=NI(r,i),c=this.schedulers.ngZone.run(()=>s);return new sf(c,o,this)}collectionGroup(t,i){let r=i||(o=>o),s=this.firestore.collectionGroup(t);return new My(r(s),this)}doc(t){let i;typeof t=="string"?i=this.firestore.doc(t):i=t;let r=this.schedulers.ngZone.run(()=>i);return new nf(r,this)}createId(){return this.firestore.collection("_").doc().id}static \u0275fac=function(i){return new(i||n)(q(_o),q(yo,8),q(gO,8),q(yO,8),q(Ot),q(Se),q(Od),q(_O,8),q(vO,8),q(nb,8),q(_m,8),q(ym,8),q(vm,8),q(wm,8),q(bm,8),q(Cm,8),q(Xr,8))};static \u0275prov=ie({token:n,factory:n.\u0275fac,providedIn:"any"})}return n})();function wO(n,e){n&1&&(F(0,"span",14),$(1,"First Name is Required min 6 character"),j())}function bO(n,e){n&1&&(F(0,"span",14),$(1,"Last Name is Required min 6 character"),j())}function CO(n,e){n&1&&(F(0,"span",14),$(1," Email is Required "),j())}function EO(n,e){n&1&&(F(0,"span",14),$(1,"Message is Required"),j())}var af=class n{constructor(e,t,i){this.fb=e;this.api=t;this.firestore=i;this.myContact=this.fb.group({firstname:["",[Dt.required,Dt.minLength(2)]],lastname:["",[Dt.required,Dt.minLength(2)]],email:["",[Dt.required,Dt.email]],message:["",Dt.required]})}myContact;myform;contactmsg;ngOnInit(){this.myform=this.firestore.collection("E-cart Contact")}onSubmit(e){this.myContact.valid&&(this.myform?.add(e).then(t=>{this.contactmsg="Contact Form is Submitted",Oy.default.fire({title:"Your Form Is Submitted!",icon:"success",timer:1e3,timerProgressBar:!0,willClose(i){}})}).catch(t=>{this.contactmsg="Error",Oy.default.fire({title:"Oops!",text:"Please fill in all required fields!",icon:"error",confirmButtonText:"Okay"})}),this.myContact.reset())}static \u0275fac=function(t){return new(t||n)(ue(Md),ue(an),ue(of))};static \u0275cmp=it({type:n,selectors:[["app-contact"]],decls:25,vars:5,consts:[[3,"ngSubmit","formGroup"],[1,"mb-2"],["for","exampleInputEmail1",1,"form-label"],["type","text","id","input","formControlName","firstname",1,"form-control"],["class","span","style","color: red;",4,"ngIf"],[1,"mb-3"],["for","exampleInputEmail1","id","last",1,"form-label"],["type","text","id","input","formControlName","lastname",1,"form-control"],["type","email","id","input2","formControlName","email",1,"form-control"],["for","exampleInputPassword1",1,"form-label"],["type","text","id","input2","formControlName","message",1,"form-control"],["class","span","style"," color: red;",4,"ngIf"],["type","submit",1,"btn","btn-primary"],[1,"fa-regular","fa-paper-plane"],[1,"span",2,"color","red"]],template:function(t,i){if(t&1&&(F(0,"form",0),rt("ngSubmit",function(){return i.onSubmit(i.myContact.value)}),F(1,"div",1)(2,"label",2),$(3,"First Name"),j(),te(4,"input",3),Et(5,wO,2,0,"span",4),j(),F(6,"div",5)(7,"label",6),$(8,"Last Name"),j(),te(9,"input",7),Et(10,bO,2,0,"span",4),j(),F(11,"div",5)(12,"label",2),$(13,"Email address"),j(),te(14,"input",8),Et(15,CO,2,0,"span",4),j(),F(16,"div",5)(17,"label",9),$(18,"Message"),j(),te(19,"textarea",10),Et(20,EO,2,0,"span",11),j(),F(21,"button",12),te(22,"i",13),F(23,"span"),$(24,"Submit"),j()()()),t&2){let r,s,o,c;He("formGroup",i.myContact),me(5),He("ngIf",((r=i.myContact.get("firstname"))==null?null:r.invalid)&&((r=i.myContact.get("firstname"))==null?null:r.touched)),me(5),He("ngIf",((s=i.myContact.get("lastname"))==null?null:s.invalid)&&((s=i.myContact.get("lastname"))==null?null:s.touched)),me(5),He("ngIf",((o=i.myContact.get("email"))==null?null:o.invalid)&&((o=i.myContact.get("email"))==null?null:o.touched)),me(5),He("ngIf",((c=i.myContact.get("message"))==null?null:c.invalid)&&((c=i.myContact.get("message"))==null?null:c.touched))}},dependencies:[Zs,Pd,go,Td,Ad,kc,Nc],styles:["form[_ngcontent-%COMP%]{margin-top:70px;margin-left:5%;width:90%}#input[_ngcontent-%COMP%], #input2[_ngcontent-%COMP%]{width:85%;margin-left:5%}.form-text[_ngcontent-%COMP%], .form-label[_ngcontent-%COMP%]{margin-left:5%}.form-control[_ngcontent-%COMP%]:focus{outline:none;box-shadow:none}.btn[_ngcontent-%COMP%]{background:#000;position:relative;left:5%;width:120px;border:none;font-weight:500;letter-spacing:3px;transition:all .5s ease-in-out}.btn[_ngcontent-%COMP%]:focus{outline:none;box-shadow:none}.btn[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{position:relative;left:-10%;transition:visibility .3s,opacity .3s ease-in-out}.btn[_ngcontent-%COMP%]   .fa-regular[_ngcontent-%COMP%]{position:relative;left:-40%;transition:all .5s ease-in-out}.btn[_ngcontent-%COMP%]:hover   .fa-regular[_ngcontent-%COMP%]{transform:translate(75px)}.btn[_ngcontent-%COMP%]:hover   span[_ngcontent-%COMP%]{visibility:hidden;opacity:0}#lastname[_ngcontent-%COMP%]{margin-left:5%}.span[_ngcontent-%COMP%]{position:relative;left:5%;transition:all .5s ease-in-out}@media (max-width: 768px){#input[_ngcontent-%COMP%], #input2[_ngcontent-%COMP%]{width:90%;margin-left:5%}.btn[_ngcontent-%COMP%], .span[_ngcontent-%COMP%]{left:10%}}@media (max-width: 435px){#input[_ngcontent-%COMP%], #input2[_ngcontent-%COMP%]{width:100%;margin-left:-2%}.span[_ngcontent-%COMP%]{margin-left:-10%}.btn[_ngcontent-%COMP%]{left:23%}}"]})};var IO=["tshirt"];function TO(n,e){if(n&1){let t=Br();Lr(0),F(1,"div",39),te(2,"img",40),F(3,"p")(4,"strong"),$(5,"Price: "),j(),$(6),j(),F(7,"p")(8,"strong"),$(9,"Category: "),j(),$(10),j(),F(11,"p",41)(12,"strong",42),$(13,"Description: "),j(),$(14),j(),F(15,"button",43),rt("click",function(){let r=Nr(t).$implicit,s=ei();return Vr(s.addtocart(r))}),te(16,"i",44),F(17,"span"),$(18," Add To Cart"),j()()(),jr()}if(n&2){let t=e.$implicit;me(2),Ws("src",t.image,Gs),me(4),Pt(t.price),me(4),Pt(t.category),me(4),Pt(t.description)}}var cf=class n{constructor(e,t){this.api=e;this.cartapi=t}productList=[];tshirt;ngAfterViewInit(){window.addEventListener("scroll",this.onScroll.bind(this))}onScroll(){let e=window.scrollY;this.tshirt&&(this.tshirt.nativeElement.style.marginTop=e*-7.5+"px")}count=0;countStop=setInterval(()=>{this.count+=20,this.count>=1e4&&clearInterval(this.countStop)},10);count1=0;countStop1=setInterval(()=>{this.count1+=20,this.count1>=5e4&&clearInterval(this.countStop1)},10);ngOnInit(){this.api.productList().subscribe(e=>{this.productList=e,this.productList.forEach(t=>{Object.assign(t,{quantity:1,total:t.price})}),console.log(e)})}addtocart(e){this.cartapi.addtocart(e)}static \u0275fac=function(t){return new(t||n)(ue(an),ue(on))};static \u0275cmp=it({type:n,selectors:[["app-home"]],viewQuery:function(t,i){if(t&1&&Wf(IO,5),t&2){let r;xu(r=Pu())&&(i.tshirt=r.first)}},decls:70,vars:7,consts:[["container",""],["tshirt",""],["lang","en"],["charset","UTF-8"],["name","viewport","content","width=device-width, initial-scale=1.0"],[1,"container-fluid"],["id","img1","src","https://png.pngtree.com/png-clipart/20230520/ourmid/pngtree-realistic-plain-black-t-shirt-mockup-png-image_7103580.png","alt","",1,"img-fluid"],[1,"hero"],[1,"button"],["routerLink","/product",1,"btn"],[1,"fa-solid","fa-cart-plus"],[1,"content"],[1,"wrapper"],["id","img","src","https://d2j6dbq0eux0bg.cloudfront.net/images/76998010/4124073244.jpg","alt","",1,"img-fluid"],[1,"opacity"],[1,"con"],["id","wra",1,"wrapper"],["id","img","src","https://blog.uberprints.com/content/images/size/w2000/2021/04/premium-t-shirt-fabric-blend-detail.jpg","alt","",1,"img-fluid"],["id","opa",1,"opacity"],[1,"allright"],[1,"right"],[1,"h5"],[1,"h6"],[1,"text"],["src","https://looksgood.tokotema.com/wp-content/uploads/2024/08/confident-good-looking-curly-woman-posing-in-studi-2023-11-27-04-56-44-utc-1.jpg","alt","",1,"img-fluid"],[1,"counter"],[1,"count"],[1,"heading"],[1,"counter1"],[1,"count1"],[1,"heading1"],[1,"cart-top","container-fluid"],[1,"container","d-flex"],[1,"item"],["src","","alt",""],[1,"container"],[1,"row"],[1,"text-center","mb-5",2,"font-size","3rem","font-weight","700"],[4,"ngFor","ngForOf"],[1,"cart","col-md-3","mb-4"],["alt","Product Image",1,"img-responsive",3,"src"],[1,"desc"],[1,"desc1"],["id","btn",1,"btn","btn-primary",3,"click"],["id","icon",1,"fa-solid","fa-cart-plus"]],template:function(t,i){t&1&&(F(0,"html",2)(1,"head"),te(2,"meta",3)(3,"meta",4),F(4,"title"),$(5,"Document"),j()(),F(6,"body")(7,"div",5,0),te(9,"img",6,1),F(11,"div",7)(12,"h5"),$(13,"Unleash Your Style"),j(),F(14,"h1"),$(15,"Welcome to our Store!"),j(),F(16,"p"),$(17,"Discover the latest fashion trends, handcrafted by our team of skilled designers."),j()(),F(18,"div",8)(19,"button",9),$(20,"Shop Now "),j(),te(21,"i",10),j(),F(22,"div",11)(23,"div",12),te(24,"img",13)(25,"div",14),j(),F(26,"div",15)(27,"div",16),te(28,"img",17)(29,"div",18),j()()()(),F(30,"div",19)(31,"div",20)(32,"h5",21),$(33,"About LooksGood"),j(),F(34,"h6",22),$(35,"Where Fashion Meets Passion"),j(),F(36,"p",23),$(37,"Egestas id convallis imperdiet mi cum ornare varius. Tellus varius semper tellus at commodo pretium mauris. Massa."),j(),te(38,"img",24),j()(),F(39,"div",25)(40,"p",26),$(41),j(),F(42,"h1",27),$(43,"Happy Customers"),j()(),F(44,"div",28)(45,"p",29),$(46),j(),F(47,"h1",30),$(48,"Sold T-shirts"),j()(),F(49,"div",31)(50,"div",32)(51,"div",33)(52,"a"),te(53,"img",34),j()(),F(54,"div",33)(55,"a"),te(56,"img",34),j()(),F(57,"div",33)(58,"a"),te(59,"img",34),j()(),F(60,"div",33)(61,"a"),te(62,"img",34),j()()()(),F(63,"div",35)(64,"div",36)(65,"h1",37),$(66,"Our Product"),j(),Et(67,TO,19,4,"ng-container",38),bv(68,"slice"),j()(),te(69,"router-outlet"),j()()),t&2&&(me(41),Qs("",i.count,"+"),me(5),Qs("",i.count1,"+"),me(21),He("ngForOf",Cv(68,3,i.productList,0,4)))},dependencies:[Js,Qr,Gi,Vv],styles:[".container-fluid[_ngcontent-%COMP%]{position:relative;z-index:100}.container-fluid[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{position:absolute;left:60%;top:150px;transition:all .5s ease-in-out}.hero[_ngcontent-%COMP%]{position:absolute;top:150px;left:10%;z-index:-1}.hero[_ngcontent-%COMP%]   h5[_ngcontent-%COMP%]{color:gray;margin-bottom:20px;margin-top:40px;margin-left:20px}.hero[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%], .hero[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin-left:20px}.button[_ngcontent-%COMP%]{width:230px;background:#ebeaea;position:relative;top:349px;left:11%;height:47px;display:flex;justify-content:flex-start;border-radius:40px;transition:all .4s ease-out;cursor:pointer}.button[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]{position:absolute;left:8%;text-align:justify;color:#5f5e5e;border-radius:20px;padding:10px 0;font-size:1.2rem;cursor:pointer;font-weight:500}.button[_ngcontent-%COMP%]   .fa-solid[_ngcontent-%COMP%]{position:absolute;left:78%;top:25%;font-size:1.6rem}.button[_ngcontent-%COMP%]:hover{transform:scale(1.1)}.content[_ngcontent-%COMP%]{position:relative;top:253px;left:10%;width:90%;display:flex;transition:all .5s ease-in-out}.wrapper[_ngcontent-%COMP%]{height:1px}.wrapper[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{height:130px;width:250px;position:relative;left:0%;top:120px;object-fit:cover;border-radius:7px}.opacity[_ngcontent-%COMP%]{background-color:#918b8b;padding:20px;color:#fff;width:250px;height:130px;opacity:.7;border-radius:7px;position:absolute;top:120px}.con[_ngcontent-%COMP%]{position:relative;left:1%}.counter[_ngcontent-%COMP%]{position:absolute;top:1088px;left:14%;width:30%}.heading[_ngcontent-%COMP%]{display:inline;font-size:1.6rem;color:gray;font-weight:300;position:absolute;top:85px;left:-81px}.count[_ngcontent-%COMP%]{font-size:4rem;font-weight:700;position:absolute;left:-100px}.counter1[_ngcontent-%COMP%]{position:absolute;top:1088px;left:26%;display:flex;align-items:center}.heading1[_ngcontent-%COMP%]{font-size:1.6rem;color:gray;font-weight:300;position:absolute;top:74%;left:10%}.count1[_ngcontent-%COMP%]{font-size:4rem;font-weight:700}.allright[_ngcontent-%COMP%]{width:100%}.right[_ngcontent-%COMP%]{display:flex;position:absolute;top:875px;left:-66%;width:70%;z-index:-1}.h5[_ngcontent-%COMP%]{color:#da4d77;font-size:1.2rem;position:absolute;left:106%;width:100%}.h6[_ngcontent-%COMP%]{color:#000;position:absolute;top:35px;left:106%;font-size:2rem;width:40%}.text[_ngcontent-%COMP%]{position:absolute;top:125px;left:106%;font-size:1rem;color:gray;width:39%}.img-fluid[_ngcontent-%COMP%]{position:absolute;left:164%;top:-230%;border-radius:25px;transition:all .5s ease-in-out}.fa-brands[_ngcontent-%COMP%]{transition:all .3s ease-in-out}.fa-brands[_ngcontent-%COMP%]:hover{transform:scale(1.2)}.container[_ngcontent-%COMP%]{position:relative;top:240%}#btn[_ngcontent-%COMP%]{background:#000;color:#fff;border:none;position:relative;padding:10px 20px;height:40px;width:150px}#icon[_ngcontent-%COMP%]{position:relative;left:-38%;transition:all .5s ease-in-out}#btn[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{width:100%;height:10%;transition:visibility .3s,opacity .3s ease-in-out;position:relative;left:-8%}#btn[_ngcontent-%COMP%]:hover   span[_ngcontent-%COMP%]{visibility:hidden;opacity:0}#btn[_ngcontent-%COMP%]:hover   #icon[_ngcontent-%COMP%]{left:30%;transform:translate(50%)}@media (max-width: 1150px){.container-fluid[_ngcontent-%COMP%]   .img-fluid[_ngcontent-%COMP%]{width:30%;left:68%}.right[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:69%}.wrapper[_ngcontent-%COMP%]   #img[_ngcontent-%COMP%]{width:250px;left:0%}}@media (max-width: 1100px){.container-fluid[_ngcontent-%COMP%]   .img-fluid[_ngcontent-%COMP%]{width:30%;left:68%}.hero[_ngcontent-%COMP%]{top:152px;left:8%}.right[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:66%}.wrapper[_ngcontent-%COMP%]   #img[_ngcontent-%COMP%]{width:250px;left:0%}}@media (max-width: 989px){.container-fluid[_ngcontent-%COMP%]   .img-fluid[_ngcontent-%COMP%]{width:30%;left:68%}.wrapper[_ngcontent-%COMP%]   #img[_ngcontent-%COMP%]{width:250px;left:0%}.hero[_ngcontent-%COMP%]{top:152px;left:8%}.right[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:61%;left:171%}.count1[_ngcontent-%COMP%], .count[_ngcontent-%COMP%]{font-size:3rem;font-weight:700}.heading[_ngcontent-%COMP%]{font-size:1.4rem;top:68px;left:-32%}.counter1[_ngcontent-%COMP%]{width:16%}}@media (max-width: 884px){.container-fluid[_ngcontent-%COMP%]   .img-fluid[_ngcontent-%COMP%]{width:30%;left:68%}.wrapper[_ngcontent-%COMP%]   #img[_ngcontent-%COMP%]{width:250px;left:0%}.wrapper[_ngcontent-%COMP%]{width:200px}.opacity[_ngcontent-%COMP%]{background-color:#918b8b;padding:20px;color:#fff;width:200px;height:130px;opacity:.7;border-radius:7px;position:absolute;top:120px}.hero[_ngcontent-%COMP%]{width:53%}.counter[_ngcontent-%COMP%]{top:180%}.count[_ngcontent-%COMP%]{font-size:2.3rem;left:-35%}.heading[_ngcontent-%COMP%]{top:46px;left:-37%;font-size:1.2rem}.counter1[_ngcontent-%COMP%]{top:180%}.count1[_ngcontent-%COMP%]{font-size:2.3rem}.heading1[_ngcontent-%COMP%]{top:46px;left:0%;font-size:1.2rem}.row[_ngcontent-%COMP%]{width:106%;left:0%;top:-200px;position:absolute}.row[_ngcontent-%COMP%]   .img-responsive[_ngcontent-%COMP%]{left:-27%;position:relative;gap:1px;display:flex;width:205px}#btn[_ngcontent-%COMP%]{width:138px}#btn[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{font-size:.9rem}#icon[_ngcontent-%COMP%]{left:-44%}}@media (max-width: 798px){.container[_ngcontent-%COMP%]{width:92%}}@media (max-width: 774px){.right[_ngcontent-%COMP%]   .text[_ngcontent-%COMP%]{width:55%;top:130px}.right[_ngcontent-%COMP%]   .h6[_ngcontent-%COMP%]{width:64%}.counter[_ngcontent-%COMP%]{top:175%;left:19%}.counter1[_ngcontent-%COMP%]{top:175%;left:29%}.row[_ngcontent-%COMP%]{width:104%}.row[_ngcontent-%COMP%]   .img-responsive[_ngcontent-%COMP%]{width:180px;left:-14%;gap:10px}#btn[_ngcontent-%COMP%]{width:128px}#btn[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{font-size:12px;left:-12%;top:-2px}#btn[_ngcontent-%COMP%]   #icon[_ngcontent-%COMP%]{left:-47%}}@media (max-width: 770px){.cart[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{width:36%}.container[_ngcontent-%COMP%]{display:flex}}@media (max-width: 767px){.row[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center}.cart[_ngcontent-%COMP%]{width:100%;margin-bottom:20px;text-align:center}.cart[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:100%;height:auto}.cart[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{width:auto}.cart[_ngcontent-%COMP%]   .img-responsive[_ngcontent-%COMP%]{left:25%;width:235px}.cart[_ngcontent-%COMP%]   .desc[_ngcontent-%COMP%]{width:52%;margin-left:108px}}@media (max-width: 650px){.container-fluid[_ngcontent-%COMP%]   #img1[_ngcontent-%COMP%]{width:38%!important;left:31%!important;top:807%!important}.content[_ngcontent-%COMP%]{top:454px;left:18%}.hero[_ngcontent-%COMP%]{top:217%;width:64%;left:18%}.button[_ngcontent-%COMP%]{top:306px;left:29%}.allright[_ngcontent-%COMP%]{top:64px;position:absolute}.right[_ngcontent-%COMP%]{width:80%}.right[_ngcontent-%COMP%]   .h6[_ngcontent-%COMP%], .right[_ngcontent-%COMP%]   .text[_ngcontent-%COMP%]{width:98%}.right[_ngcontent-%COMP%]   .img-fluid[_ngcontent-%COMP%]{width:316px;left:109%;top:282px}.counter[_ngcontent-%COMP%]{top:174%;left:38%}.counter1[_ngcontent-%COMP%]{top:174%;left:58%;width:26%}.count[_ngcontent-%COMP%]{font-size:2.2rem}.count1[_ngcontent-%COMP%]{font-size:2.2rem;margin-left:-49px}.counter[_ngcontent-%COMP%]   .heading[_ngcontent-%COMP%]{font-size:1.1rem;left:-49%;top:45px}.counter1[_ngcontent-%COMP%]   .heading1[_ngcontent-%COMP%]{font-size:1.1rem;left:-28%;top:45px}.allright[_ngcontent-%COMP%]   .text[_ngcontent-%COMP%]{top:91px}.content[_ngcontent-%COMP%]{width:80%}}@media (max-width: 639px){.right[_ngcontent-%COMP%]   .h6[_ngcontent-%COMP%]{font-size:1.7rem}.right[_ngcontent-%COMP%]   .text[_ngcontent-%COMP%]{font-size:.9rem}}@media (max-width: 574px){.container[_ngcontent-%COMP%]{width:96%}.cart[_ngcontent-%COMP%]   .desc[_ngcontent-%COMP%]{width:52%;margin-left:128px}}@media (max-width: 545px){.counter1[_ngcontent-%COMP%]{left:64%}.button[_ngcontent-%COMP%]{top:286px;left:22%}.hero[_ngcontent-%COMP%]{top:82%;left:22%}.wrapper[_ngcontent-%COMP%], .opacity[_ngcontent-%COMP%]{width:180px}#wra[_ngcontent-%COMP%]{width:180px;left:11px;position:absolute}#opa[_ngcontent-%COMP%]{width:180px;left:0%}.content[_ngcontent-%COMP%]{left:16%;top:500px}.container-fluid[_ngcontent-%COMP%]{left:-9%}.container-fluid[_ngcontent-%COMP%]   #img1[_ngcontent-%COMP%]{width:222px!important}.hero[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{width:107%}.allright[_ngcontent-%COMP%]{left:-1%;top:20%}.counter[_ngcontent-%COMP%]{top:163%;display:none}.counter1[_ngcontent-%COMP%]{top:163%;left:66%;display:none}.counter[_ngcontent-%COMP%]   .heading[_ngcontent-%COMP%]{left:-80%}.counter1[_ngcontent-%COMP%]   .heading1[_ngcontent-%COMP%]{left:-60%}.right[_ngcontent-%COMP%]   .img-fluid[_ngcontent-%COMP%]{left:97%;top:210px;width:350px}.right[_ngcontent-%COMP%]   .text[_ngcontent-%COMP%]{top:120px}.container[_ngcontent-%COMP%]{top:246%}}@media (max-width: 435px){.button[_ngcontent-%COMP%]{top:286px;left:22%}.hero[_ngcontent-%COMP%]{top:82%;left:22%}.wrapper[_ngcontent-%COMP%], .opacity[_ngcontent-%COMP%]{width:180px}#wra[_ngcontent-%COMP%]{width:180px;left:11px;position:absolute}#opa[_ngcontent-%COMP%]{width:180px;left:0%}.content[_ngcontent-%COMP%]{left:11%;top:500px}.container-fluid[_ngcontent-%COMP%]{left:-9%}.container-fluid[_ngcontent-%COMP%]   #img1[_ngcontent-%COMP%]{width:222px!important}.hero[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{width:107%}.allright[_ngcontent-%COMP%]{left:-1%;top:20%}.counter[_ngcontent-%COMP%]{top:163%;display:none}.counter1[_ngcontent-%COMP%]{top:163%;left:66%;display:none}.counter[_ngcontent-%COMP%]   .heading[_ngcontent-%COMP%]{left:-80%}.counter1[_ngcontent-%COMP%]   .heading1[_ngcontent-%COMP%]{left:-60%}.right[_ngcontent-%COMP%]   .img-fluid[_ngcontent-%COMP%]{left:97%;top:210px;width:350px}.right[_ngcontent-%COMP%]   .text[_ngcontent-%COMP%]{top:120px}.container[_ngcontent-%COMP%]{top:246%}}@media (max-width: 410px){.wrapper[_ngcontent-%COMP%]{width:143px;left:7%;position:relative}.opacity[_ngcontent-%COMP%]{width:143px}#wra[_ngcontent-%COMP%]{width:143px;left:45px}#opa[_ngcontent-%COMP%]{width:143px;left:0%}}@media (max-width: 366px){#wra[_ngcontent-%COMP%]{left:25px}.cart[_ngcontent-%COMP%]   .desc[_ngcontent-%COMP%]{margin-left:70px}.cart[_ngcontent-%COMP%]   .img-responsive[_ngcontent-%COMP%]{left:19%}}@media (max-width: 345px){.wrapper[_ngcontent-%COMP%]{left:1%}#wra[_ngcontent-%COMP%]{left:11px}}@media (max-width: 330px){#wra[_ngcontent-%COMP%]{width:192px;left:-133px;top:136px}#opa[_ngcontent-%COMP%]{width:192px}.wrapper[_ngcontent-%COMP%]{top:-31px;left:26%;width:192px}.opacity[_ngcontent-%COMP%]{width:192px}.allright[_ngcontent-%COMP%]{top:35%}}"]})};var Dy=Xy(cm());function AO(n,e){n&1&&(F(0,"span",11),$(1,"Email is Requird"),j())}function xO(n,e){n&1&&(F(0,"span",11),$(1,"Address is Requird"),j())}function PO(n,e){n&1&&(F(0,"span",11),$(1,"Email is Requird"),j())}var lf=class n{constructor(e,t,i,r){this.api=e;this.cartapi=t;this.fb=i;this.firestore=r;this.checkOut=this.fb.group({email:["",[Dt.required,Dt.email]],address:["",[Dt.required]],postal:["",[Dt.required]]})}checkOut;order=!1;product=[];checkout;message;ngOnInit(){this.checkout=this.firestore.collection("E-Cart-CheckOut"),this.cartapi.getproduct().pipe(Vn(1)).subscribe(e=>{this.product=e})}check(e){if(this.checkOut.valid){let t=this.cartapi.getTotal(),i=Ee(K({},e),{product:this.product,total:t,date:new Date});this.checkout?.add(this.checkOut.valid&&i).then(r=>{this.message="Order is Submited",console.log("Document successfully written!",r),Dy.default.fire({title:"Order is Submitted!",icon:"success"}),this.order=!0,this.cartapi.removeallproduct(),this.checkOut.reset(),this.product=[]}).catch(r=>{this.message="Error Occurred!",console.error("Error writing document: ",r),Dy.default.fire({title:"Oops!",text:"Please fill in all required fields!",icon:"error",confirmButtonText:"Okay"})})}}static \u0275fac=function(t){return new(t||n)(ue(an),ue(on),ue(Md),ue(of))};static \u0275cmp=it({type:n,selectors:[["app-checkout"]],decls:23,vars:4,consts:[["action","javascript:void(0)",3,"ngSubmit","formGroup"],[1,"container-fluid"],[1,"mb-3"],["for","exampleInputEmail1",1,"form-label"],["type","email","id","exampleInputEmail1","aria-describedby","emailHelp","formControlName","email",1,"form-control"],["style","color: red;",4,"ngIf"],["for","exampleInputPassword1",1,"form-label"],["type","text","id","exampleInputPassword1","formControlName","address",1,"form-control"],["type","text","id","exampleInputPassword1","formControlName","postal",1,"form-control"],["type","submit",1,"btn","btn-primary"],[1,"fa-solid","fa-check"],[2,"color","red"]],template:function(t,i){if(t&1&&(F(0,"form",0),rt("ngSubmit",function(){return i.check(i.checkOut.value)}),F(1,"div",1)(2,"h1"),$(3,"Check-Out Form"),j(),F(4,"div",2)(5,"label",3),$(6,"Email"),j(),te(7,"input",4),Et(8,AO,2,0,"span",5),j(),F(9,"div",2)(10,"label",6),$(11,"Address"),j(),te(12,"input",7),Et(13,xO,2,0,"span",5),j(),F(14,"div",2)(15,"label",6),$(16,"Postal Code"),j(),te(17,"input",8),Et(18,PO,2,0,"span",5),j(),F(19,"button",9),te(20,"i",10),F(21,"span"),$(22,"Order Now"),j()()()()),t&2){let r,s,o;He("formGroup",i.checkOut),me(8),He("ngIf",((r=i.checkOut.get("email"))==null?null:r.invalid)&&((r=i.checkOut.get("email"))==null?null:r.touched)),me(5),He("ngIf",((s=i.checkOut.get("address"))==null?null:s.invalid)&&((s=i.checkOut.get("address"))==null?null:s.touched)),me(5),He("ngIf",((o=i.checkOut.get("postal"))==null?null:o.invalid)&&((o=i.checkOut.get("postal"))==null?null:o.touched))}},dependencies:[Zs,Pd,go,Td,Ad,kc,Nc],styles:[".form-control[_ngcontent-%COMP%]{width:80%}.container-fluid[_ngcontent-%COMP%]{display:block;position:relative;left:6%;top:130px;width:60%}h1[_ngcontent-%COMP%]{margin-top:-21px;position:absolute;top:-17%;left:23%;font-weight:600}.form-control[_ngcontent-%COMP%]:focus{box-shadow:none;outline:none;border:1px solid black}.btn[_ngcontent-%COMP%]{background-color:#000;border:none;width:120px}.btn[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{transition:visbility .3s,opacity .3s ease-in-out;font-size:1.1rem;margin-left:-15px;box-shadow:none}.btn[_ngcontent-%COMP%]:focus{box-shadow:none;border:none}.btn[_ngcontent-%COMP%]:hover   span[_ngcontent-%COMP%]{visibility:hidden;opacity:0}.btn[_ngcontent-%COMP%]   .fa-solid[_ngcontent-%COMP%]{position:relative;left:-50%;transition:all .5s ease-in-out;font-size:1.3rem}.btn[_ngcontent-%COMP%]:hover   .fa-solid[_ngcontent-%COMP%]{transform:translate(80px)}"]})};var MO=[{path:"product",redirectTo:"product",pathMatch:"full"},{path:"",component:cf},{path:"about",component:md},{path:"product",component:fd},{path:"cart",component:pd},{path:"contact",component:af},{path:"checkout",component:lf}],uf=class n{static \u0275fac=function(t){return new(t||n)};static \u0275mod=Pe({type:n});static \u0275inj=xe({imports:[Xp.forRoot(MO),Xp]})};var SO=(n,e)=>({open:n,close:e}),df=class n{constructor(e){this.cartapi=e}totalCart=0;ngOnInit(){this.cartapi.product.subscribe(e=>{this.totalCart=e.length})}ismenuOpen=!0;toggleMenu(){this.ismenuOpen=!this.ismenuOpen}static \u0275fac=function(t){return new(t||n)(ue(on))};static \u0275cmp=it({type:n,selectors:[["app-header"]],decls:67,vars:5,consts:[["id","header"],[1,"navbar"],[1,"toggle-button",3,"click"],["id","cross",1,"toggle-button",3,"click"],["id","menu"],["id","navbar-menu",1,"collapsed",3,"ngClass"],[1,"li"],["routerLink",""],["routerLink","about"],["routerLink","product"],["routerLink","contact"],[1,"navbar-brand","align-item-center","s-flex"],["id","truck",1,"fa-solid","fa-truck"],["routerLink","/",1,"logo",2,"cursor","pointer"],[1,"form-group"],["type","text","placeholder","Search Product","id","input",1,"form-control"],["id","search",1,"fa-solid","fa-magnifying-glass"],["routerLink","cart","id","btn",1,"btn","btn-primary"],["id","btn1",1,"fa-solid","fa-cart-plus",2,"font-size","1.5rem"],[1,"badge","bg-danger"],[2,"background-color","#000000","color","white","padding","40px 0","margin-top","40px"],[1,"container-fluid","text-center"],[1,"row"],["id","contact",1,"col-md-4"],["id","icons",1,"col-md-4"],["href","#",2,"color","white","margin-right","15px"],[1,"fa-brands","fa-square-facebook","fa-2x"],[1,"fa-brands","fa-twitter","fa-2x"],["href","#",2,"color","white"],[1,"fa-brands","fa-instagram","fa-2x"],["id","quicks",1,"col-md-4"],[1,"links"],["href","",2,"color","white"],["href",""],[2,"border-top","1px solid white"]],template:function(t,i){t&1&&(F(0,"header",0)(1,"div",1)(2,"div",2),rt("click",function(){return i.toggleMenu()}),$(3,"\u2630"),j(),F(4,"span",3),rt("click",function(){return i.toggleMenu()}),$(5,"\xD7"),j(),F(6,"nav",4)(7,"ul",5)(8,"li",6)(9,"a",7),$(10,"Home"),j()(),F(11,"li",6)(12,"a",8),$(13,"About"),j()(),F(14,"li",6)(15,"a",9),$(16,"Product"),j()(),F(17,"li",6)(18,"a",10),$(19,"Contact"),j()()()(),F(20,"div",11),te(21,"i",12),F(22,"strong",13),$(23,"E-Cart"),j(),F(24,"div",14),te(25,"input",15),j(),F(26,"span"),te(27,"i",16),j()(),F(28,"button",17),te(29,"i",18),F(30,"div",19),$(31),j()()()(),F(32,"footer",20)(33,"div",21)(34,"div",22)(35,"div",23)(36,"h5"),$(37,"Contact Us"),j(),F(38,"p"),$(39,"Email: infolooksgood.com"),j(),F(40,"p"),$(41,"Phone: +123 456 789"),j()(),F(42,"div",24)(43,"h5"),$(44,"Follow Us"),j(),F(45,"a",25),te(46,"i",26),j(),F(47,"a",25),te(48,"i",27),j(),F(49,"a",28),te(50,"i",29),j()(),F(51,"div",30)(52,"h5"),$(53,"Quick Links"),j(),F(54,"ul",31)(55,"li")(56,"a",32),$(57,"About us"),j()(),F(58,"li")(59,"a",33),$(60,"Privicy Policy"),j()(),F(61,"li")(62,"a",33),$(63,"Terms of Service"),j()()()()(),te(64,"hr",34),F(65,"p"),$(66,"\xA9 2024 LooksGood. All Rights Reserved."),j()()()),t&2&&(me(7),He("ngClass",wv(2,SO,i.ismenuOpen,!i.ismenuOpen)),me(24),Pt(i.totalCart))},dependencies:[Nv,Gi],styles:['.form-control[_ngcontent-%COMP%]{border-radius:7px;margin-left:100px;margin-top:-30px;width:600px}span[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{position:absolute;left:90%;top:44%;color:#0d6efd;cursor:pointer}.navbar-brand[_ngcontent-%COMP%]{margin-left:150px}.form-group[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{position:absolute;width:30%;left:55%}header[_ngcontent-%COMP%]{position:relative;display:inline;width:100%}#menu[_ngcontent-%COMP%]{display:inline;margin-left:10px}#navbar-menu[_ngcontent-%COMP%]{position:absolute;margin:0;display:inline-flex;left:25%;top:30%;list-style:none}#navbar-menu[_ngcontent-%COMP%]   .li[_ngcontent-%COMP%]{position:relative}#navbar-menu[_ngcontent-%COMP%]   .li[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{color:#000;text-decoration:none;margin-left:27px;font-size:1.2rem;font-weight:500;transition:all .5s ease-in-out}#navbar-menu[_ngcontent-%COMP%]   .li[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:before, #navbar-menu[_ngcontent-%COMP%]   .li[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:after{content:"";position:absolute;top:0;left:0;background:transparent;width:120%;height:2px;transition:all .5s ease-in-out}#navbar-menu[_ngcontent-%COMP%]   .li[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:before{content:"";position:absolute;top:-10%;left:32%;width:10px;height:2px;background:#000;transform:scaleX(0);transform-origin:left}#navbar-menu[_ngcontent-%COMP%]   .li[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:after{content:"";position:absolute;top:90%;left:87%;width:10px;height:2px;background:#000;transform:scaleX(0);transform-origin:right}#navbar-menu[_ngcontent-%COMP%]   .li[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:hover:before, #navbar-menu[_ngcontent-%COMP%]   .li[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:hover:after{transform:scaleX(5.5);height:2px}#truck[_ngcontent-%COMP%]{margin-left:-620px;font-size:1.9rem;animation:_ngcontent-%COMP%_bounce 2s infinite}.logo[_ngcontent-%COMP%]{position:absolute;color:#000}@keyframes _ngcontent-%COMP%_bounce{0%{transform:translateY(0)}20%{transform:translateY(-10)}50%{transform:translateY(-10px)}70%{transform:translateY(-10px)}to{transform:translateY(0)}}#btn[_ngcontent-%COMP%]{background:#fff;border:none;color:#000;font-size:.8rem}#btn1[_ngcontent-%COMP%]{transition:all .5s ease-in-out}#btn1[_ngcontent-%COMP%]:hover{transform:scale(1.2)}#input[_ngcontent-%COMP%]{box-shadow:none}#search[_ngcontent-%COMP%]{color:#000}footer[_ngcontent-%COMP%]{position:absolute;top:430%;width:100%}.links[_ngcontent-%COMP%]{display:block;position:absolute;left:73%;list-style:none}.links[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{display:block;color:#fff;text-decoration:none;margin-left:50px}.toggle-button[_ngcontent-%COMP%]{cursor:pointer;display:none;font-size:2.5rem;color:#000;margin-left:20px}#cross[_ngcontent-%COMP%]{position:absolute;top:10px;left:30px;display:none;color:#000;font-size:3.5rem}#icons[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{transition:all .5s ease-in-out}#icons[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]:hover{transform:scale(1.3)}@media (max-width: 1115px){#input[_ngcontent-%COMP%]{left:53%;top:68%}#search[_ngcontent-%COMP%]{left:89%;font-size:1.1rem;top:35%}#input[_ngcontent-%COMP%]::placeholder{font-size:1.1rem}#navbar-menu[_ngcontent-%COMP%]   .li[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{left:-75%;position:relative}#truck[_ngcontent-%COMP%]{margin:0;font-size:1.9rem;animation:_ngcontent-%COMP%_bounce 2s infinite;position:absolute;left:29px}.logo[_ngcontent-%COMP%]{top:20px;left:67px;z-index:1000}.links[_ngcontent-%COMP%]{position:absolute;left:56%;top:22%;transform:translateY(-50%);list-style:none}.links[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{text-decoration:none;margin-top:-4px;width:127px;margin-left:-3px}#quicks[_ngcontent-%COMP%]{top:93px;position:absolute;left:36%;width:64%}#quicks[_ngcontent-%COMP%]   h5[_ngcontent-%COMP%]{top:-68px;position:absolute;left:61%}#navbar-menu[_ngcontent-%COMP%]   .li[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:before{content:"";position:absolute;top:-10%;left:-2%;width:10px;height:2px;background:#000;transform:scaleX(0);transform-origin:left}}@media (max-width: 940px){#input[_ngcontent-%COMP%]{left:51%;top:68%;width:246px}#search[_ngcontent-%COMP%]{left:85%;font-size:1.1rem}#input[_ngcontent-%COMP%]::placeholder{font-size:1rem}}@media (max-width: 835px){#input[_ngcontent-%COMP%]{left:53%;top:68%;width:215px}#search[_ngcontent-%COMP%]{left:88%;font-size:1.1rem}#input[_ngcontent-%COMP%]::placeholder{font-size:.9rem}}@media (max-width: 810px){#input[_ngcontent-%COMP%]{left:53%;top:68%;width:202px}#search[_ngcontent-%COMP%]{left:88%;font-size:1.1rem}#input[_ngcontent-%COMP%]::placeholder{font-size:.9rem}}@media (max-width: 781px){#input[_ngcontent-%COMP%]{left:53%;top:68%;width:185px}#search[_ngcontent-%COMP%]{margin-left:-2px;font-size:1.1rem}#input[_ngcontent-%COMP%]::placeholder{font-size:.9rem}}@media (max-width: 768px){.toggle-button[_ngcontent-%COMP%]{display:block;color:#000}#cross[_ngcontent-%COMP%]{display:block;color:#fff;font-size:3.5rem;z-index:10000}#menu[_ngcontent-%COMP%]{width:59%}#truck[_ngcontent-%COMP%]{margin:0;font-size:1.9rem;animation:_ngcontent-%COMP%_bounce 2s infinite;position:absolute;left:79px}.logo[_ngcontent-%COMP%]{top:30px;left:116px;z-index:1000}#navbar-menu[_ngcontent-%COMP%]{position:absolute;background:#000;height:100vh;width:100%;left:0%;top:0%;display:inline-block;transition:all .7s ease-in-out;z-index:1000}#navbar-menu[_ngcontent-%COMP%]   .li[_ngcontent-%COMP%]{position:relative;top:24%}#navbar-menu[_ngcontent-%COMP%]   .li[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{color:#fff;font-size:2.9rem;cursor:pointer;left:28%}#navbar-menu[_ngcontent-%COMP%]   .li[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:before, #navbar-menu[_ngcontent-%COMP%]   .li[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:after{content:"";position:absolute;top:0;left:0;background:transparent;width:120%;height:2px;transition:all .5s ease-in-out}#navbar-menu[_ngcontent-%COMP%]   .li[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:before{content:"";position:absolute;top:-5%;left:-6%;width:10px;height:2px;background:#fff;transform:scaleX(0);transform-origin:left}#navbar-menu[_ngcontent-%COMP%]   .li[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:after{content:"";position:absolute;top:97%;left:auto;width:10px;height:2px;background:#fff;transform:scaleX(0);transform-origin:right}#navbar-menu[_ngcontent-%COMP%]   .li[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:hover:before, #navbar-menu[_ngcontent-%COMP%]   .li[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:hover:after{transform:scaleX(12);height:5px}#navbar-menu.close[_ngcontent-%COMP%]{left:0}#navbar-menu.open[_ngcontent-%COMP%]{left:-100%}#input[_ngcontent-%COMP%]{left:45%;top:62%;width:222px}#search[_ngcontent-%COMP%]{left:85%;font-size:1.1rem}#input[_ngcontent-%COMP%]::placeholder{font-size:.9rem}footer[_ngcontent-%COMP%]{top:986%;width:100%;overflow:hidden}.container-fluid[_ngcontent-%COMP%]{width:105%}#contact[_ngcontent-%COMP%]{margin-left:-237px}.col-md-4[_ngcontent-%COMP%]{margin-left:-78px}.links[_ngcontent-%COMP%]{display:block;position:absolute;left:57%;top:22%;transform:translateY(-50%);list-style:none}.links[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{color:#fff;text-decoration:none;margin:4px}#quicks[_ngcontent-%COMP%]{top:32%;position:absolute;left:40%}#quicks[_ngcontent-%COMP%]   h5[_ngcontent-%COMP%]{top:-68px;position:absolute;left:65%}#icons[_ngcontent-%COMP%]{margin-left:-25px}}@media (max-width: 750px){#input[_ngcontent-%COMP%]{left:45%;top:44%;width:222px}#search[_ngcontent-%COMP%]{left:85%;font-size:1.1rem;top:26%}#input[_ngcontent-%COMP%]::placeholder{font-size:.9rem}#btn[_ngcontent-%COMP%]{top:-48px;position:relative;left:90%}}@media (max-width: 729px){#input[_ngcontent-%COMP%]{left:43%;top:44%;width:222px}#search[_ngcontent-%COMP%]{left:85%;font-size:1.1rem;top:26%}#input[_ngcontent-%COMP%]::placeholder{font-size:.9rem}}@media (max-width: 701px){#input[_ngcontent-%COMP%]{left:41%;top:44%;width:222px}#search[_ngcontent-%COMP%]{left:85%;font-size:1.1rem;top:26%}#input[_ngcontent-%COMP%]::placeholder{font-size:.9rem}#btn[_ngcontent-%COMP%]{left:89%}}@media (max-width: 686px){#input[_ngcontent-%COMP%]{left:40%;top:44%;width:222px}#search[_ngcontent-%COMP%]{left:85%;font-size:1.1rem;top:26%}#input[_ngcontent-%COMP%]::placeholder{font-size:.9rem}}@media (max-width: 676px){#input[_ngcontent-%COMP%]{left:39%;top:44%;width:222px}#search[_ngcontent-%COMP%]{left:85%;font-size:1.1rem;top:26%}#input[_ngcontent-%COMP%]::placeholder{font-size:.9rem}}@media (max-width: 659px){#input[_ngcontent-%COMP%]{left:38%;top:44%;width:222px}#search[_ngcontent-%COMP%]{left:85%;font-size:1.1rem;top:26%}#input[_ngcontent-%COMP%]::placeholder{font-size:.9rem}}@media (max-width: 650px){#input[_ngcontent-%COMP%]{left:35%}#search[_ngcontent-%COMP%]{left:84%}#btn[_ngcontent-%COMP%]{left:88%}footer[_ngcontent-%COMP%]{top:976%;width:100%;overflow:hidden}.container-fluid[_ngcontent-%COMP%]{width:105%}#contact[_ngcontent-%COMP%]{margin-left:-237px}.col-md-4[_ngcontent-%COMP%]{margin-left:-78px}.links[_ngcontent-%COMP%]{display:block;position:absolute;left:54%;top:22%;transform:translateY(-50%);list-style:none}.links[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{color:#fff;text-decoration:none;margin:4px}#quicks[_ngcontent-%COMP%]{top:32%;position:absolute;left:43%}#quicks[_ngcontent-%COMP%]   h5[_ngcontent-%COMP%]{top:-68px;position:absolute;left:53%;width:69%}#icons[_ngcontent-%COMP%]{margin-left:-59px}.row[_ngcontent-%COMP%]{margin-left:61px}}@media (max-width: 622px){#input[_ngcontent-%COMP%]{left:36%;top:44%;width:222px;display:none}#search[_ngcontent-%COMP%]{left:85%;font-size:1.1rem;top:26%;display:none}#input[_ngcontent-%COMP%]::placeholder{font-size:.9rem}#btn[_ngcontent-%COMP%]{top:-48px;position:relative;left:86%}}@media (max-width: 615px){#input[_ngcontent-%COMP%]{left:35%;top:44%;width:222px}#search[_ngcontent-%COMP%]{left:85%;font-size:1.1rem;top:26%}#input[_ngcontent-%COMP%]::placeholder{font-size:.9rem}}@media (max-width: 600px){#input[_ngcontent-%COMP%]{left:34%;top:44%;width:222px}#search[_ngcontent-%COMP%]{left:85%;font-size:1.1rem;top:26%}#input[_ngcontent-%COMP%]::placeholder{font-size:.9rem}}@media (max-width: 590px){#icons[_ngcontent-%COMP%]{margin-left:-59px}#contact[_ngcontent-%COMP%]{margin-left:-198px}#input[_ngcontent-%COMP%]{left:33%;top:44%;width:222px}#search[_ngcontent-%COMP%]{left:85%;font-size:1.1rem;top:26%}#input[_ngcontent-%COMP%]::placeholder{font-size:.9rem}}@media (max-width: 582px){#btn[_ngcontent-%COMP%]{left:0%}#truck[_ngcontent-%COMP%]{top:21%}}@media (max-width: 520px){#contact[_ngcontent-%COMP%]{margin-left:-180px}}@media (max-width: 480px){#contact[_ngcontent-%COMP%]{margin-left:-152px}}@media (max-width: 435px){#input[_ngcontent-%COMP%]{left:25%;top:68%}#search[_ngcontent-%COMP%]{left:73%;font-size:1.1rem}#input[_ngcontent-%COMP%]::placeholder{font-size:.6rem}#navbar-menu[_ngcontent-%COMP%]   .li[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{top:8px;position:relative;left:22%;margin:2px}#navbar-menu[_ngcontent-%COMP%]   .li[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:before{content:"";position:absolute;top:-8%;left:-1%;width:10px;height:2px;background:#fff;transform:scaleX(0);transform-origin:left}}@media (max-width: 418px){#contact[_ngcontent-%COMP%]{margin-left:-118px}footer[_ngcontent-%COMP%]{display:none}}@media (max-width: 366px){#quicks[_ngcontent-%COMP%]{left:17%}.links[_ngcontent-%COMP%]{left:55%}}']})};var hf=class n{title="Cart";static \u0275fac=function(t){return new(t||n)};static \u0275cmp=it({type:n,selectors:[["app-root"]],decls:2,vars:0,template:function(t,i){t&1&&te(0,"app-header")(1,"router-outlet")},dependencies:[Qr,df]})};var DO="@",RO=(()=>{class n{constructor(t,i,r,s,o){this.doc=t,this.delegate=i,this.zone=r,this.animationType=s,this.moduleImpl=o,this._rendererFactoryPromise=null,this.scheduler=Z(_v,{optional:!0}),this.loadingSchedulerFn=Z(kO,{optional:!0})}ngOnDestroy(){this._engine?.flush()}loadImpl(){let t=()=>this.moduleImpl??import("./chunk-TTBDO4KB.js").then(r=>r),i;return this.loadingSchedulerFn?i=this.loadingSchedulerFn(t):i=t(),i.catch(r=>{throw new De(5300,!1)}).then(({\u0275createEngine:r,\u0275AnimationRendererFactory:s})=>{this._engine=r(this.animationType,this.doc);let o=new s(this.delegate,this._engine,this.zone);return this.delegate=o,o})}createRenderer(t,i){let r=this.delegate.createRenderer(t,i);if(r.\u0275type===0)return r;typeof r.throwOnSyntheticProps=="boolean"&&(r.throwOnSyntheticProps=!1);let s=new Ry(r);return i?.data?.animation&&!this._rendererFactoryPromise&&(this._rendererFactoryPromise=this.loadImpl()),this._rendererFactoryPromise?.then(o=>{let c=o.createRenderer(t,i);s.use(c),this.scheduler?.notify(10)}).catch(o=>{s.use(r)}),s}begin(){this.delegate.begin?.()}end(){this.delegate.end?.()}whenRenderingDone(){return this.delegate.whenRenderingDone?.()??Promise.resolve()}static{this.\u0275fac=function(i){Tu()}}static{this.\u0275prov=ie({token:n,factory:n.\u0275fac})}}return n})(),Ry=class{constructor(e){this.delegate=e,this.replay=[],this.\u0275type=1}use(e){if(this.delegate=e,this.replay!==null){for(let t of this.replay)t(e);this.replay=null}}get data(){return this.delegate.data}destroy(){this.replay=null,this.delegate.destroy()}createElement(e,t){return this.delegate.createElement(e,t)}createComment(e){return this.delegate.createComment(e)}createText(e){return this.delegate.createText(e)}get destroyNode(){return this.delegate.destroyNode}appendChild(e,t){this.delegate.appendChild(e,t)}insertBefore(e,t,i,r){this.delegate.insertBefore(e,t,i,r)}removeChild(e,t,i){this.delegate.removeChild(e,t,i)}selectRootElement(e,t){return this.delegate.selectRootElement(e,t)}parentNode(e){return this.delegate.parentNode(e)}nextSibling(e){return this.delegate.nextSibling(e)}setAttribute(e,t,i,r){this.delegate.setAttribute(e,t,i,r)}removeAttribute(e,t,i){this.delegate.removeAttribute(e,t,i)}addClass(e,t){this.delegate.addClass(e,t)}removeClass(e,t){this.delegate.removeClass(e,t)}setStyle(e,t,i,r){this.delegate.setStyle(e,t,i,r)}removeStyle(e,t,i){this.delegate.removeStyle(e,t,i)}setProperty(e,t,i){this.shouldReplay(t)&&this.replay.push(r=>r.setProperty(e,t,i)),this.delegate.setProperty(e,t,i)}setValue(e,t){this.delegate.setValue(e,t)}listen(e,t,i){return this.shouldReplay(t)&&this.replay.push(r=>r.listen(e,t,i)),this.delegate.listen(e,t,i)}shouldReplay(e){return this.replay!==null&&e.startsWith(DO)}},kO=new le("");function FI(n="animations"){return Gf("NgAsyncAnimations"),qs([{provide:Au,useFactory:(e,t,i)=>new RO(e,t,i,n),deps:[st,Gu,Se]},{provide:qf,useValue:n==="noop"?"NoopAnimations":"BrowserAnimations"}])}var ky;try{ky=typeof Intl<"u"&&Intl.v8BreakIterator}catch{ky=!1}var xl=(()=>{class n{constructor(t){this._platformId=t,this.isBrowser=this._platformId?jv(this._platformId):typeof document=="object"&&!!document,this.EDGE=this.isBrowser&&/(edge)/i.test(navigator.userAgent),this.TRIDENT=this.isBrowser&&/(msie|trident)/i.test(navigator.userAgent),this.BLINK=this.isBrowser&&!!(window.chrome||ky)&&typeof CSS<"u"&&!this.EDGE&&!this.TRIDENT,this.WEBKIT=this.isBrowser&&/AppleWebKit/i.test(navigator.userAgent)&&!this.BLINK&&!this.EDGE&&!this.TRIDENT,this.IOS=this.isBrowser&&/iPad|iPhone|iPod/.test(navigator.userAgent)&&!("MSStream"in window),this.FIREFOX=this.isBrowser&&/(firefox|minefield)/i.test(navigator.userAgent),this.ANDROID=this.isBrowser&&/android/i.test(navigator.userAgent)&&!this.TRIDENT,this.SAFARI=this.isBrowser&&/safari/i.test(navigator.userAgent)&&this.WEBKIT}static{this.\u0275fac=function(i){return new(i||n)(q(Ot))}}static{this.\u0275prov=ie({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();var Al;function NO(){if(Al==null&&typeof window<"u")try{window.addEventListener("test",null,Object.defineProperty({},"passive",{get:()=>Al=!0}))}finally{Al=Al||!1}return Al}function Ny(n){return NO()?n:!!n.capture}function LI(n){return n.composedPath?n.composedPath()[0]:n.target}function jI(){return typeof __karma__<"u"&&!!__karma__||typeof jasmine<"u"&&!!jasmine||typeof jest<"u"&&!!jest||typeof Mocha<"u"&&!!Mocha}function Vy(n){return Array.isArray(n)?n:[n]}function Fy(n){return n instanceof rn?n.nativeElement:n}var VO=(()=>{class n{create(t){return typeof MutationObserver>"u"?null:new MutationObserver(t)}static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275prov=ie({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();var UI=(()=>{class n{static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275mod=Pe({type:n})}static{this.\u0275inj=xe({providers:[VO]})}}return n})();var zI=new Set,Is,FO=(()=>{class n{constructor(t,i){this._platform=t,this._nonce=i,this._matchMedia=this._platform.isBrowser&&window.matchMedia?window.matchMedia.bind(window):jO}matchMedia(t){return(this._platform.WEBKIT||this._platform.BLINK)&&LO(t,this._nonce),this._matchMedia(t)}static{this.\u0275fac=function(i){return new(i||n)(q(xl),q(Ba,8))}}static{this.\u0275prov=ie({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();function LO(n,e){if(!zI.has(n))try{Is||(Is=document.createElement("style"),e&&Is.setAttribute("nonce",e),Is.setAttribute("type","text/css"),document.head.appendChild(Is)),Is.sheet&&(Is.sheet.insertRule(`@media ${n} {body{ }}`,0),zI.add(n))}catch(t){console.error(t)}}function jO(n){return{matches:n==="all"||n==="",media:n,addListener:()=>{},removeListener:()=>{}}}var qI=(()=>{class n{constructor(t,i){this._mediaMatcher=t,this._zone=i,this._queries=new Map,this._destroySubject=new Lt}ngOnDestroy(){this._destroySubject.next(),this._destroySubject.complete()}isMatched(t){return $I(Vy(t)).some(r=>this._registerQuery(r).mql.matches)}observe(t){let r=$I(Vy(t)).map(o=>this._registerQuery(o).observable),s=Us(r);return s=bu(s.pipe(Vn(1)),s.pipe(lv(1),sv(0))),s.pipe(ae(o=>{let c={matches:!1,breakpoints:{}};return o.forEach(({matches:l,query:f})=>{c.matches=c.matches||l,c.breakpoints[f]=l}),c}))}_registerQuery(t){if(this._queries.has(t))return this._queries.get(t);let i=this._mediaMatcher.matchMedia(t),s={observable:new vn(o=>{let c=l=>this._zone.run(()=>o.next(l));return i.addListener(c),()=>{i.removeListener(c)}}).pipe(ki(i),ae(({matches:o})=>({query:t,matches:o})),Eu(this._destroySubject)),mql:i};return this._queries.set(t,s),s}static{this.\u0275fac=function(i){return new(i||n)(q(FO),q(Se))}}static{this.\u0275prov=ie({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();function $I(n){return n.map(e=>e.split(",")).reduce((e,t)=>e.concat(t)).map(e=>e.trim())}function KI(n){return n.buttons===0||n.detail===0}function WI(n){let e=n.touches&&n.touches[0]||n.changedTouches&&n.changedTouches[0];return!!e&&e.identifier===-1&&(e.radiusX==null||e.radiusX===1)&&(e.radiusY==null||e.radiusY===1)}var Ts=function(n){return n[n.NONE=0]="NONE",n[n.BLACK_ON_WHITE=1]="BLACK_ON_WHITE",n[n.WHITE_ON_BLACK=2]="WHITE_ON_BLACK",n}(Ts||{}),GI="cdk-high-contrast-black-on-white",HI="cdk-high-contrast-white-on-black",Ly="cdk-high-contrast-active",jy=(()=>{class n{constructor(t,i){this._platform=t,this._document=i,this._breakpointSubscription=Z(qI).observe("(forced-colors: active)").subscribe(()=>{this._hasCheckedHighContrastMode&&(this._hasCheckedHighContrastMode=!1,this._applyBodyHighContrastModeCssClasses())})}getHighContrastMode(){if(!this._platform.isBrowser)return Ts.NONE;let t=this._document.createElement("div");t.style.backgroundColor="rgb(1,2,3)",t.style.position="absolute",this._document.body.appendChild(t);let i=this._document.defaultView||window,r=i&&i.getComputedStyle?i.getComputedStyle(t):null,s=(r&&r.backgroundColor||"").replace(/ /g,"");switch(t.remove(),s){case"rgb(0,0,0)":case"rgb(45,50,54)":case"rgb(32,32,32)":return Ts.WHITE_ON_BLACK;case"rgb(255,255,255)":case"rgb(255,250,239)":return Ts.BLACK_ON_WHITE}return Ts.NONE}ngOnDestroy(){this._breakpointSubscription.unsubscribe()}_applyBodyHighContrastModeCssClasses(){if(!this._hasCheckedHighContrastMode&&this._platform.isBrowser&&this._document.body){let t=this._document.body.classList;t.remove(Ly,GI,HI),this._hasCheckedHighContrastMode=!0;let i=this.getHighContrastMode();i===Ts.BLACK_ON_WHITE?t.add(Ly,GI):i===Ts.WHITE_ON_BLACK&&t.add(Ly,HI)}}static{this.\u0275fac=function(i){return new(i||n)(q(xl),q(st))}}static{this.\u0275prov=ie({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})(),QI=(()=>{class n{constructor(t){t._applyBodyHighContrastModeCssClasses()}static{this.\u0275fac=function(i){return new(i||n)(q(jy))}}static{this.\u0275mod=Pe({type:n})}static{this.\u0275inj=xe({imports:[UI]})}}return n})();var By=(()=>{class n{static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275mod=Pe({type:n})}static{this.\u0275inj=xe({})}}return n})();function UO(){return!0}var zO=new le("mat-sanity-checks",{providedIn:"root",factory:UO}),$y=(()=>{class n{constructor(t,i,r){this._sanityChecks=i,this._document=r,this._hasDoneGlobalChecks=!1,t._applyBodyHighContrastModeCssClasses(),this._hasDoneGlobalChecks||(this._hasDoneGlobalChecks=!0)}_checkIsEnabled(t){return jI()?!1:typeof this._sanityChecks=="boolean"?this._sanityChecks:!!this._sanityChecks[t]}static{this.\u0275fac=function(i){return new(i||n)(q(jy),q(zO,8),q(st))}}static{this.\u0275mod=Pe({type:n})}static{this.\u0275inj=xe({imports:[By,By]})}}return n})();var dn=function(n){return n[n.FADING_IN=0]="FADING_IN",n[n.VISIBLE=1]="VISIBLE",n[n.FADING_OUT=2]="FADING_OUT",n[n.HIDDEN=3]="HIDDEN",n}(dn||{}),Uy=class{constructor(e,t,i,r=!1){this._renderer=e,this.element=t,this.config=i,this._animationForciblyDisabledThroughCss=r,this.state=dn.HIDDEN}fadeOut(){this._renderer.fadeOutRipple(this)}},YI=Ny({passive:!0,capture:!0}),zy=class{constructor(){this._events=new Map,this._delegateEventHandler=e=>{let t=LI(e);t&&this._events.get(e.type)?.forEach((i,r)=>{(r===t||r.contains(t))&&i.forEach(s=>s.handleEvent(e))})}}addHandler(e,t,i,r){let s=this._events.get(t);if(s){let o=s.get(i);o?o.add(r):s.set(i,new Set([r]))}else this._events.set(t,new Map([[i,new Set([r])]])),e.runOutsideAngular(()=>{document.addEventListener(t,this._delegateEventHandler,YI)})}removeHandler(e,t,i){let r=this._events.get(e);if(!r)return;let s=r.get(t);s&&(s.delete(i),s.size===0&&r.delete(t),r.size===0&&(this._events.delete(e),document.removeEventListener(e,this._delegateEventHandler,YI)))}},XI={enterDuration:225,exitDuration:150},$O=800,JI=Ny({passive:!0,capture:!0}),ZI=["mousedown","touchstart"],eT=["mouseup","mouseleave","touchend","touchcancel"],tT=class n{static{this._eventManager=new zy}constructor(e,t,i,r){this._target=e,this._ngZone=t,this._platform=r,this._isPointerDown=!1,this._activeRipples=new Map,this._pointerUpEventsRegistered=!1,r.isBrowser&&(this._containerElement=Fy(i))}fadeInRipple(e,t,i={}){let r=this._containerRect=this._containerRect||this._containerElement.getBoundingClientRect(),s=K(K({},XI),i.animation);i.centered&&(e=r.left+r.width/2,t=r.top+r.height/2);let o=i.radius||qO(e,t,r),c=e-r.left,l=t-r.top,f=s.enterDuration,g=document.createElement("div");g.classList.add("mat-ripple-element"),g.style.left=`${c-o}px`,g.style.top=`${l-o}px`,g.style.height=`${o*2}px`,g.style.width=`${o*2}px`,i.color!=null&&(g.style.backgroundColor=i.color),g.style.transitionDuration=`${f}ms`,this._containerElement.appendChild(g);let p=window.getComputedStyle(g),w=p.transitionProperty,I=p.transitionDuration,L=w==="none"||I==="0s"||I==="0s, 0s"||r.width===0&&r.height===0,O=new Uy(this,g,i,L);g.style.transform="scale3d(1, 1, 1)",O.state=dn.FADING_IN,i.persistent||(this._mostRecentTransientRipple=O);let S=null;return!L&&(f||s.exitDuration)&&this._ngZone.runOutsideAngular(()=>{let H=()=>{S&&(S.fallbackTimer=null),clearTimeout(U),this._finishRippleTransition(O)},X=()=>this._destroyRipple(O),U=setTimeout(X,f+100);g.addEventListener("transitionend",H),g.addEventListener("transitioncancel",X),S={onTransitionEnd:H,onTransitionCancel:X,fallbackTimer:U}}),this._activeRipples.set(O,S),(L||!f)&&this._finishRippleTransition(O),O}fadeOutRipple(e){if(e.state===dn.FADING_OUT||e.state===dn.HIDDEN)return;let t=e.element,i=K(K({},XI),e.config.animation);t.style.transitionDuration=`${i.exitDuration}ms`,t.style.opacity="0",e.state=dn.FADING_OUT,(e._animationForciblyDisabledThroughCss||!i.exitDuration)&&this._finishRippleTransition(e)}fadeOutAll(){this._getActiveRipples().forEach(e=>e.fadeOut())}fadeOutAllNonPersistent(){this._getActiveRipples().forEach(e=>{e.config.persistent||e.fadeOut()})}setupTriggerEvents(e){let t=Fy(e);!this._platform.isBrowser||!t||t===this._triggerElement||(this._removeTriggerEvents(),this._triggerElement=t,ZI.forEach(i=>{n._eventManager.addHandler(this._ngZone,i,t,this)}))}handleEvent(e){e.type==="mousedown"?this._onMousedown(e):e.type==="touchstart"?this._onTouchStart(e):this._onPointerUp(),this._pointerUpEventsRegistered||(this._ngZone.runOutsideAngular(()=>{eT.forEach(t=>{this._triggerElement.addEventListener(t,this,JI)})}),this._pointerUpEventsRegistered=!0)}_finishRippleTransition(e){e.state===dn.FADING_IN?this._startFadeOutTransition(e):e.state===dn.FADING_OUT&&this._destroyRipple(e)}_startFadeOutTransition(e){let t=e===this._mostRecentTransientRipple,{persistent:i}=e.config;e.state=dn.VISIBLE,!i&&(!t||!this._isPointerDown)&&e.fadeOut()}_destroyRipple(e){let t=this._activeRipples.get(e)??null;this._activeRipples.delete(e),this._activeRipples.size||(this._containerRect=null),e===this._mostRecentTransientRipple&&(this._mostRecentTransientRipple=null),e.state=dn.HIDDEN,t!==null&&(e.element.removeEventListener("transitionend",t.onTransitionEnd),e.element.removeEventListener("transitioncancel",t.onTransitionCancel),t.fallbackTimer!==null&&clearTimeout(t.fallbackTimer)),e.element.remove()}_onMousedown(e){let t=KI(e),i=this._lastTouchStartEvent&&Date.now()<this._lastTouchStartEvent+$O;!this._target.rippleDisabled&&!t&&!i&&(this._isPointerDown=!0,this.fadeInRipple(e.clientX,e.clientY,this._target.rippleConfig))}_onTouchStart(e){if(!this._target.rippleDisabled&&!WI(e)){this._lastTouchStartEvent=Date.now(),this._isPointerDown=!0;let t=e.changedTouches;if(t)for(let i=0;i<t.length;i++)this.fadeInRipple(t[i].clientX,t[i].clientY,this._target.rippleConfig)}}_onPointerUp(){this._isPointerDown&&(this._isPointerDown=!1,this._getActiveRipples().forEach(e=>{let t=e.state===dn.VISIBLE||e.config.terminateOnPointerUp&&e.state===dn.FADING_IN;!e.config.persistent&&t&&e.fadeOut()}))}_getActiveRipples(){return Array.from(this._activeRipples.keys())}_removeTriggerEvents(){let e=this._triggerElement;e&&(ZI.forEach(t=>n._eventManager.removeHandler(t,e,this)),this._pointerUpEventsRegistered&&(eT.forEach(t=>e.removeEventListener(t,this,JI)),this._pointerUpEventsRegistered=!1))}};function qO(n,e,t){let i=Math.max(Math.abs(n-t.left),Math.abs(n-t.right)),r=Math.max(Math.abs(e-t.top),Math.abs(e-t.bottom));return Math.sqrt(i*i+r*r)}var nT=(()=>{class n{static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275mod=Pe({type:n})}static{this.\u0275inj=xe({imports:[QI,$y,$y]})}}return n})();var GO={apiKey:"AIzaSyBpqn3iHgdoPiO-uVxsJNi2pTpjEk3ZJoE",authDomain:"contact-aad4c.firebaseapp.com",projectId:"contact-aad4c",storageBucket:"contact-aad4c.firebasestorage.app",messagingSenderId:"1069475548357",appId:"1:1069475548357:web:0fec1670b46661dab074ac"},ff=class n{static \u0275fac=function(t){return new(t||n)};static \u0275mod=Pe({type:n,bootstrap:[hf]});static \u0275inj=xe({providers:[FI()],imports:[mw,uf,nT,ow,L0,tb.initializeApp(GO)]})};pw().bootstrapModule(ff,{ngZoneEventCoalescing:!0}).catch(n=>console.error(n));
